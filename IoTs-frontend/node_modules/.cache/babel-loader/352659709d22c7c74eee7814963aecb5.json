{"ast":null,"code":"/* nvd3 version 1.8.6 (https://github.com/novus/nvd3) 2017-08-23 */\n(function () {\n  // set up main nv object\n  var nv = {}; // the major global objects under the nv namespace\n\n  nv.dev = false; //set false when in production\n\n  nv.tooltip = nv.tooltip || {}; // For the tooltip system\n\n  nv.utils = nv.utils || {}; // Utility subsystem\n\n  nv.models = nv.models || {}; //stores all the possible models/components\n\n  nv.charts = {}; //stores all the ready to use charts\n\n  nv.logs = {}; //stores some statistics and potential error messages\n\n  nv.dom = {}; //DOM manipulation functions\n  // Node/CommonJS - require D3\n\n  if (typeof module !== 'undefined' && typeof exports !== 'undefined' && typeof d3 == 'undefined') {\n    d3 = require('d3');\n  }\n\n  nv.dispatch = d3.dispatch('render_start', 'render_end'); // Function bind polyfill\n  // Needed ONLY for phantomJS as it's missing until version 2.0 which is unreleased as of this comment\n  // https://github.com/ariya/phantomjs/issues/10522\n  // http://kangax.github.io/compat-table/es5/#Function.prototype.bind\n  // phantomJS is used for running the test suite\n\n  if (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n      if (typeof this !== \"function\") {\n        // closest thing possible to the ECMAScript 5 internal IsCallable function\n        throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n      }\n\n      var aArgs = Array.prototype.slice.call(arguments, 1),\n          fToBind = this,\n          fNOP = function () {},\n          fBound = function () {\n        return fToBind.apply(this instanceof fNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n      };\n\n      fNOP.prototype = this.prototype;\n      fBound.prototype = new fNOP();\n      return fBound;\n    };\n  } //  Development render timers - disabled if dev = false\n\n\n  if (nv.dev) {\n    nv.dispatch.on('render_start', function (e) {\n      nv.logs.startTime = +new Date();\n    });\n    nv.dispatch.on('render_end', function (e) {\n      nv.logs.endTime = +new Date();\n      nv.logs.totalTime = nv.logs.endTime - nv.logs.startTime;\n      nv.log('total', nv.logs.totalTime); // used for development, to keep track of graph generation times\n    });\n  } // Logs all arguments, and returns the last so you can test things in place\n  // Note: in IE8 console.log is an object not a function, and if modernizr is used\n  // then calling Function.prototype.bind with with anything other than a function\n  // causes a TypeError to be thrown.\n\n\n  nv.log = function () {\n    if (nv.dev && window.console && console.log && console.log.apply) console.log.apply(console, arguments);else if (nv.dev && window.console && typeof console.log == \"function\" && Function.prototype.bind) {\n      var log = Function.prototype.bind.call(console.log, console);\n      log.apply(console, arguments);\n    }\n    return arguments[arguments.length - 1];\n  }; // print console warning, should be used by deprecated functions\n\n\n  nv.deprecated = function (name, info) {\n    if (console && console.warn) {\n      console.warn('nvd3 warning: `' + name + '` has been deprecated. ', info || '');\n    }\n  }; // The nv.render function is used to queue up chart rendering\n  // in non-blocking async functions.\n  // When all queued charts are done rendering, nv.dispatch.render_end is invoked.\n\n\n  nv.render = function render(step) {\n    // number of graphs to generate in each timeout loop\n    step = step || 1;\n    nv.render.active = true;\n    nv.dispatch.render_start();\n\n    var renderLoop = function () {\n      var chart, graph;\n\n      for (var i = 0; i < step && (graph = nv.render.queue[i]); i++) {\n        chart = graph.generate();\n        if (typeof graph.callback == typeof Function) graph.callback(chart);\n      }\n\n      nv.render.queue.splice(0, i);\n\n      if (nv.render.queue.length) {\n        setTimeout(renderLoop);\n      } else {\n        nv.dispatch.render_end();\n        nv.render.active = false;\n      }\n    };\n\n    setTimeout(renderLoop);\n  };\n\n  nv.render.active = false;\n  nv.render.queue = [];\n  /*\n  Adds a chart to the async rendering queue. This method can take arguments in two forms:\n  nv.addGraph({\n      generate: <Function>\n      callback: <Function>\n  })\n  \n  or\n  \n  nv.addGraph(<generate Function>, <callback Function>)\n  \n  The generate function should contain code that creates the NVD3 model, sets options\n  on it, adds data to an SVG element, and invokes the chart model. The generate function\n  should return the chart model.  See examples/lineChart.html for a usage example.\n  \n  The callback function is optional, and it is called when the generate function completes.\n  */\n\n  nv.addGraph = function (obj) {\n    if (typeof arguments[0] === typeof Function) {\n      obj = {\n        generate: arguments[0],\n        callback: arguments[1]\n      };\n    }\n\n    nv.render.queue.push(obj);\n\n    if (!nv.render.active) {\n      nv.render();\n    }\n  }; // Node/CommonJS exports\n\n\n  if (typeof module !== 'undefined' && typeof exports !== 'undefined') {\n    module.exports = nv;\n  }\n\n  if (typeof window !== 'undefined') {\n    window.nv = nv;\n  }\n  /* Facade for queueing DOM write operations\r\n   * with Fastdom (https://github.com/wilsonpage/fastdom)\r\n   * if available.\r\n   * This could easily be extended to support alternate\r\n   * implementations in the future.\r\n   */\n\n\n  nv.dom.write = function (callback) {\n    if (window.fastdom !== undefined) {\n      return fastdom.mutate(callback);\n    }\n\n    return callback();\n  };\n  /* Facade for queueing DOM read operations\r\n   * with Fastdom (https://github.com/wilsonpage/fastdom)\r\n   * if available.\r\n   * This could easily be extended to support alternate\r\n   * implementations in the future.\r\n   */\n\n\n  nv.dom.read = function (callback) {\n    if (window.fastdom !== undefined) {\n      return fastdom.measure(callback);\n    }\n\n    return callback();\n  };\n  /* Utility class to handle creation of an interactive layer.\n   This places a rectangle on top of the chart. When you mouse move over it, it sends a dispatch\n   containing the X-coordinate. It can also render a vertical line where the mouse is located.\n  \n   dispatch.elementMousemove is the important event to latch onto.  It is fired whenever the mouse moves over\n   the rectangle. The dispatch is given one object which contains the mouseX/Y location.\n   It also has 'pointXValue', which is the conversion of mouseX to the x-axis scale.\n   */\n\n\n  nv.interactiveGuideline = function () {\n    \"use strict\";\n\n    var margin = {\n      left: 0,\n      top: 0\n    } //Pass the chart's top and left magins. Used to calculate the mouseX/Y.\n    ,\n        width = null,\n        height = null,\n        xScale = d3.scale.linear(),\n        dispatch = d3.dispatch('elementMousemove', 'elementMouseout', 'elementClick', 'elementDblclick', 'elementMouseDown', 'elementMouseUp'),\n        showGuideLine = true,\n        svgContainer = null // Must pass the chart's svg, we'll use its mousemove event.\n    ,\n        tooltip = nv.models.tooltip(),\n        isMSIE = window.ActiveXObject // Checkt if IE by looking for activeX. (excludes IE11)\n    ;\n    tooltip.duration(0).hideDelay(0).hidden(false);\n\n    function layer(selection) {\n      selection.each(function (data) {\n        var container = d3.select(this);\n        var availableWidth = width || 960,\n            availableHeight = height || 400;\n        var wrap = container.selectAll(\"g.nv-wrap.nv-interactiveLineLayer\").data([data]);\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \" nv-wrap nv-interactiveLineLayer\");\n        wrapEnter.append(\"g\").attr(\"class\", \"nv-interactiveGuideLine\");\n\n        if (!svgContainer) {\n          return;\n        }\n\n        function mouseHandler() {\n          var mouseX = d3.event.clientX - this.getBoundingClientRect().left;\n          var mouseY = d3.event.clientY - this.getBoundingClientRect().top;\n          var subtractMargin = true;\n          var mouseOutAnyReason = false;\n\n          if (isMSIE) {\n            /*\n             D3.js (or maybe SVG.getScreenCTM) has a nasty bug in Internet Explorer 10.\n             d3.mouse() returns incorrect X,Y mouse coordinates when mouse moving\n             over a rect in IE 10.\n             However, d3.event.offsetX/Y also returns the mouse coordinates\n             relative to the triggering <rect>. So we use offsetX/Y on IE.\n             */\n            mouseX = d3.event.offsetX;\n            mouseY = d3.event.offsetY;\n            /*\n             On IE, if you attach a mouse event listener to the <svg> container,\n             it will actually trigger it for all the child elements (like <path>, <circle>, etc).\n             When this happens on IE, the offsetX/Y is set to where ever the child element\n             is located.\n             As a result, we do NOT need to subtract margins to figure out the mouse X/Y\n             position under this scenario. Removing the line below *will* cause\n             the interactive layer to not work right on IE.\n             */\n\n            if (d3.event.target.tagName !== \"svg\") {\n              subtractMargin = false;\n            }\n\n            if (d3.event.target.className.baseVal.match(\"nv-legend\")) {\n              mouseOutAnyReason = true;\n            }\n          }\n\n          if (subtractMargin) {\n            mouseX -= margin.left;\n            mouseY -= margin.top;\n          }\n          /* If mouseX/Y is outside of the chart's bounds,\n           trigger a mouseOut event.\n           */\n\n\n          if (d3.event.type === 'mouseout' || mouseX < 0 || mouseY < 0 || mouseX > availableWidth || mouseY > availableHeight || d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined || mouseOutAnyReason) {\n            if (isMSIE) {\n              if (d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined && (d3.event.relatedTarget.className === undefined || d3.event.relatedTarget.className.match(tooltip.nvPointerEventsClass))) {\n                return;\n              }\n            }\n\n            dispatch.elementMouseout({\n              mouseX: mouseX,\n              mouseY: mouseY\n            });\n            layer.renderGuideLine(null); //hide the guideline\n\n            tooltip.hidden(true);\n            return;\n          } else {\n            tooltip.hidden(false);\n          }\n\n          var scaleIsOrdinal = typeof xScale.rangeBands === 'function';\n          var pointXValue = undefined; // Ordinal scale has no invert method\n\n          if (scaleIsOrdinal) {\n            var elementIndex = d3.bisect(xScale.range(), mouseX) - 1; // Check if mouseX is in the range band\n\n            if (xScale.range()[elementIndex] + xScale.rangeBand() >= mouseX) {\n              pointXValue = xScale.domain()[d3.bisect(xScale.range(), mouseX) - 1];\n            } else {\n              dispatch.elementMouseout({\n                mouseX: mouseX,\n                mouseY: mouseY\n              });\n              layer.renderGuideLine(null); //hide the guideline\n\n              tooltip.hidden(true);\n              return;\n            }\n          } else {\n            pointXValue = xScale.invert(mouseX);\n          }\n\n          dispatch.elementMousemove({\n            mouseX: mouseX,\n            mouseY: mouseY,\n            pointXValue: pointXValue\n          }); //If user double clicks the layer, fire a elementDblclick\n\n          if (d3.event.type === \"dblclick\") {\n            dispatch.elementDblclick({\n              mouseX: mouseX,\n              mouseY: mouseY,\n              pointXValue: pointXValue\n            });\n          } // if user single clicks the layer, fire elementClick\n\n\n          if (d3.event.type === 'click') {\n            dispatch.elementClick({\n              mouseX: mouseX,\n              mouseY: mouseY,\n              pointXValue: pointXValue\n            });\n          } // if user presses mouse down the layer, fire elementMouseDown\n\n\n          if (d3.event.type === 'mousedown') {\n            dispatch.elementMouseDown({\n              mouseX: mouseX,\n              mouseY: mouseY,\n              pointXValue: pointXValue\n            });\n          } // if user presses mouse down the layer, fire elementMouseUp\n\n\n          if (d3.event.type === 'mouseup') {\n            dispatch.elementMouseUp({\n              mouseX: mouseX,\n              mouseY: mouseY,\n              pointXValue: pointXValue\n            });\n          }\n        }\n\n        svgContainer.on(\"touchmove\", mouseHandler).on(\"mousemove\", mouseHandler, true).on(\"mouseout\", mouseHandler, true).on(\"mousedown\", mouseHandler, true).on(\"mouseup\", mouseHandler, true).on(\"dblclick\", mouseHandler).on(\"click\", mouseHandler);\n        layer.guideLine = null; //Draws a vertical guideline at the given X postion.\n\n        layer.renderGuideLine = function (x) {\n          if (!showGuideLine) return;\n          if (layer.guideLine && layer.guideLine.attr(\"x1\") === x) return;\n          nv.dom.write(function () {\n            var line = wrap.select(\".nv-interactiveGuideLine\").selectAll(\"line\").data(x != null ? [nv.utils.NaNtoZero(x)] : [], String);\n            line.enter().append(\"line\").attr(\"class\", \"nv-guideline\").attr(\"x1\", function (d) {\n              return d;\n            }).attr(\"x2\", function (d) {\n              return d;\n            }).attr(\"y1\", availableHeight).attr(\"y2\", 0);\n            line.exit().remove();\n          });\n        };\n      });\n    }\n\n    layer.dispatch = dispatch;\n    layer.tooltip = tooltip;\n\n    layer.margin = function (_) {\n      if (!arguments.length) return margin;\n      margin.top = typeof _.top != 'undefined' ? _.top : margin.top;\n      margin.left = typeof _.left != 'undefined' ? _.left : margin.left;\n      return layer;\n    };\n\n    layer.width = function (_) {\n      if (!arguments.length) return width;\n      width = _;\n      return layer;\n    };\n\n    layer.height = function (_) {\n      if (!arguments.length) return height;\n      height = _;\n      return layer;\n    };\n\n    layer.xScale = function (_) {\n      if (!arguments.length) return xScale;\n      xScale = _;\n      return layer;\n    };\n\n    layer.showGuideLine = function (_) {\n      if (!arguments.length) return showGuideLine;\n      showGuideLine = _;\n      return layer;\n    };\n\n    layer.svgContainer = function (_) {\n      if (!arguments.length) return svgContainer;\n      svgContainer = _;\n      return layer;\n    };\n\n    return layer;\n  };\n  /* Utility class that uses d3.bisect to find the index in a given array, where a search value can be inserted.\n   This is different from normal bisectLeft; this function finds the nearest index to insert the search value.\n  \n   For instance, lets say your array is [1,2,3,5,10,30], and you search for 28.\n   Normal d3.bisectLeft will return 4, because 28 is inserted after the number 10.  But interactiveBisect will return 5\n   because 28 is closer to 30 than 10.\n  \n   Unit tests can be found in: interactiveBisectTest.html\n  \n   Has the following known issues:\n   * Will not work if the data points move backwards (ie, 10,9,8,7, etc) or if the data points are in random order.\n   * Won't work if there are duplicate x coordinate values.\n   */\n\n\n  nv.interactiveBisect = function (values, searchVal, xAccessor) {\n    \"use strict\";\n\n    if (!(values instanceof Array)) {\n      return null;\n    }\n\n    var _xAccessor;\n\n    if (typeof xAccessor !== 'function') {\n      _xAccessor = function (d) {\n        return d.x;\n      };\n    } else {\n      _xAccessor = xAccessor;\n    }\n\n    var _cmp = function (d, v) {\n      // Accessors are no longer passed the index of the element along with\n      // the element itself when invoked by d3.bisector.\n      //\n      // Starting at D3 v3.4.4, d3.bisector() started inspecting the\n      // function passed to determine if it should consider it an accessor\n      // or a comparator. This meant that accessors that take two arguments\n      // (expecting an index as the second parameter) are treated as\n      // comparators where the second argument is the search value against\n      // which the first argument is compared.\n      return _xAccessor(d) - v;\n    };\n\n    var bisect = d3.bisector(_cmp).left;\n    var index = d3.max([0, bisect(values, searchVal) - 1]);\n\n    var currentValue = _xAccessor(values[index]);\n\n    if (typeof currentValue === 'undefined') {\n      currentValue = index;\n    }\n\n    if (currentValue === searchVal) {\n      return index; //found exact match\n    }\n\n    var nextIndex = d3.min([index + 1, values.length - 1]);\n\n    var nextValue = _xAccessor(values[nextIndex]);\n\n    if (typeof nextValue === 'undefined') {\n      nextValue = nextIndex;\n    }\n\n    if (Math.abs(nextValue - searchVal) >= Math.abs(currentValue - searchVal)) {\n      return index;\n    } else {\n      return nextIndex;\n    }\n  };\n  /*\n   Returns the index in the array \"values\" that is closest to searchVal.\n   Only returns an index if searchVal is within some \"threshold\".\n   Otherwise, returns null.\n   */\n\n\n  nv.nearestValueIndex = function (values, searchVal, threshold) {\n    \"use strict\";\n\n    var yDistMax = Infinity,\n        indexToHighlight = null;\n    values.forEach(function (d, i) {\n      var delta = Math.abs(searchVal - d);\n\n      if (d != null && delta <= yDistMax && delta < threshold) {\n        yDistMax = delta;\n        indexToHighlight = i;\n      }\n    });\n    return indexToHighlight;\n  };\n  /* Model which can be instantiated to handle tooltip rendering.\n   Example usage:\n   var tip = nv.models.tooltip().gravity('w').distance(23)\n   .data(myDataObject);\n  \n   tip();    //just invoke the returned function to render tooltip.\n   */\n\n\n  nv.models.tooltip = function () {\n    \"use strict\";\n    /*\n    Tooltip data. If data is given in the proper format, a consistent tooltip is generated.\n    Example Format of data:\n    {\n        key: \"Date\",\n        value: \"August 2009\",\n        series: [\n            {key: \"Series 1\", value: \"Value 1\", color: \"#000\"},\n            {key: \"Series 2\", value: \"Value 2\", color: \"#00f\"}\n        ]\n    }\n    */\n\n    var id = \"nvtooltip-\" + Math.floor(Math.random() * 100000) // Generates a unique id when you create a new tooltip() object.\n    ,\n        data = null,\n        gravity = 'w' // Can be 'n','s','e','w'. Determines how tooltip is positioned.\n    ,\n        distance = 25 // Distance to offset tooltip from the mouse location.\n    ,\n        snapDistance = 0 // Tolerance allowed before tooltip is moved from its current position (creates 'snapping' effect)\n    ,\n        classes = null // Attaches additional CSS classes to the tooltip DIV that is created.\n    ,\n        hidden = true // Start off hidden, toggle with hide/show functions below.\n    ,\n        hideDelay = 200 // Delay (in ms) before the tooltip hides after calling hide().\n    ,\n        tooltip = null // d3 select of the tooltip div.\n    ,\n        lastPosition = {\n      left: null,\n      top: null\n    } // Last position the tooltip was in.\n    ,\n        enabled = true // True -> tooltips are rendered. False -> don't render tooltips.\n    ,\n        duration = 100 // Tooltip movement duration, in ms.\n    ,\n        headerEnabled = true // If is to show the tooltip header.\n    ,\n        nvPointerEventsClass = \"nv-pointer-events-none\" // CSS class to specify whether element should not have mouse events.\n    ; // Format function for the tooltip values column.\n    // d is value,\n    // i is series index\n    // p is point containing the value\n\n    var valueFormatter = function (d, i, p) {\n      return d;\n    }; // Format function for the tooltip header value.\n\n\n    var headerFormatter = function (d) {\n      return d;\n    };\n\n    var keyFormatter = function (d, i) {\n      return d;\n    }; // By default, the tooltip model renders a beautiful table inside a DIV, returned as HTML\n    // You can override this function if a custom tooltip is desired. For instance, you could directly manipulate\n    // the DOM by accessing elem and returning false.\n\n\n    var contentGenerator = function (d, elem) {\n      if (d === null) {\n        return '';\n      }\n\n      var table = d3.select(document.createElement(\"table\"));\n\n      if (headerEnabled) {\n        var theadEnter = table.selectAll(\"thead\").data([d]).enter().append(\"thead\");\n        theadEnter.append(\"tr\").append(\"td\").attr(\"colspan\", 3).append(\"strong\").classed(\"x-value\", true).html(headerFormatter(d.value));\n      }\n\n      var tbodyEnter = table.selectAll(\"tbody\").data([d]).enter().append(\"tbody\");\n      var trowEnter = tbodyEnter.selectAll(\"tr\").data(function (p) {\n        return p.series;\n      }).enter().append(\"tr\").classed(\"highlight\", function (p) {\n        return p.highlight;\n      });\n      trowEnter.append(\"td\").classed(\"legend-color-guide\", true).append(\"div\").style(\"background-color\", function (p) {\n        return p.color;\n      });\n      trowEnter.append(\"td\").classed(\"key\", true).classed(\"total\", function (p) {\n        return !!p.total;\n      }).html(function (p, i) {\n        return keyFormatter(p.key, i);\n      });\n      trowEnter.append(\"td\").classed(\"value\", true).html(function (p, i) {\n        return valueFormatter(p.value, i, p);\n      });\n      trowEnter.filter(function (p, i) {\n        return p.percent !== undefined;\n      }).append(\"td\").classed(\"percent\", true).html(function (p, i) {\n        return \"(\" + d3.format('%')(p.percent) + \")\";\n      });\n      trowEnter.selectAll(\"td\").each(function (p) {\n        if (p.highlight) {\n          var opacityScale = d3.scale.linear().domain([0, 1]).range([\"#fff\", p.color]);\n          var opacity = 0.6;\n          d3.select(this).style(\"border-bottom-color\", opacityScale(opacity)).style(\"border-top-color\", opacityScale(opacity));\n        }\n      });\n      var html = table.node().outerHTML;\n      if (d.footer !== undefined) html += \"<div class='footer'>\" + d.footer + \"</div>\";\n      return html;\n    };\n    /*\n     Function that returns the position (relative to the viewport/document.body)\n     the tooltip should be placed in.\n     Should return: {\n        left: <leftPos>,\n        top: <topPos>\n     }\n     */\n\n\n    var position = function () {\n      var pos = {\n        left: d3.event !== null ? d3.event.clientX : 0,\n        top: d3.event !== null ? d3.event.clientY : 0\n      };\n\n      if (getComputedStyle(document.body).transform != 'none') {\n        // Take the offset into account, as now the tooltip is relative\n        // to document.body.\n        var client = document.body.getBoundingClientRect();\n        pos.left -= client.left;\n        pos.top -= client.top;\n      }\n\n      return pos;\n    };\n\n    var dataSeriesExists = function (d) {\n      if (d && d.series) {\n        if (nv.utils.isArray(d.series)) {\n          return true;\n        } // if object, it's okay just convert to array of the object\n\n\n        if (nv.utils.isObject(d.series)) {\n          d.series = [d.series];\n          return true;\n        }\n      }\n\n      return false;\n    }; // Calculates the gravity offset of the tooltip. Parameter is position of tooltip\n    // relative to the viewport.\n\n\n    var calcGravityOffset = function (pos) {\n      var height = tooltip.node().offsetHeight,\n          width = tooltip.node().offsetWidth,\n          clientWidth = document.documentElement.clientWidth,\n          // Don't want scrollbars.\n      clientHeight = document.documentElement.clientHeight,\n          // Don't want scrollbars.\n      left,\n          top,\n          tmp; // calculate position based on gravity\n\n      switch (gravity) {\n        case 'e':\n          left = -width - distance;\n          top = -(height / 2);\n          if (pos.left + left < 0) left = distance;\n          if ((tmp = pos.top + top) < 0) top -= tmp;\n          if ((tmp = pos.top + top + height) > clientHeight) top -= tmp - clientHeight;\n          break;\n\n        case 'w':\n          left = distance;\n          top = -(height / 2);\n          if (pos.left + left + width > clientWidth) left = -width - distance;\n          if ((tmp = pos.top + top) < 0) top -= tmp;\n          if ((tmp = pos.top + top + height) > clientHeight) top -= tmp - clientHeight;\n          break;\n\n        case 'n':\n          left = -(width / 2) - 5; // - 5 is an approximation of the mouse's height.\n\n          top = distance;\n          if (pos.top + top + height > clientHeight) top = -height - distance;\n          if ((tmp = pos.left + left) < 0) left -= tmp;\n          if ((tmp = pos.left + left + width) > clientWidth) left -= tmp - clientWidth;\n          break;\n\n        case 's':\n          left = -(width / 2);\n          top = -height - distance;\n          if (pos.top + top < 0) top = distance;\n          if ((tmp = pos.left + left) < 0) left -= tmp;\n          if ((tmp = pos.left + left + width) > clientWidth) left -= tmp - clientWidth;\n          break;\n\n        case 'center':\n          left = -(width / 2);\n          top = -(height / 2);\n          break;\n\n        default:\n          left = 0;\n          top = 0;\n          break;\n      }\n\n      return {\n        'left': left,\n        'top': top\n      };\n    };\n    /*\n     Positions the tooltip in the correct place, as given by the position() function.\n     */\n\n\n    var positionTooltip = function () {\n      nv.dom.read(function () {\n        var pos = position(),\n            gravityOffset = calcGravityOffset(pos),\n            left = pos.left + gravityOffset.left,\n            top = pos.top + gravityOffset.top; // delay hiding a bit to avoid flickering\n\n        if (hidden) {\n          tooltip.interrupt().transition().delay(hideDelay).duration(0).style('opacity', 0);\n        } else {\n          // using tooltip.style('transform') returns values un-usable for tween\n          var old_translate = 'translate(' + lastPosition.left + 'px, ' + lastPosition.top + 'px)';\n          var new_translate = 'translate(' + Math.round(left) + 'px, ' + Math.round(top) + 'px)';\n          var translateInterpolator = d3.interpolateString(old_translate, new_translate);\n          var is_hidden = tooltip.style('opacity') < 0.1;\n          tooltip.interrupt() // cancel running transitions\n          .transition().duration(is_hidden ? 0 : duration) // using tween since some versions of d3 can't auto-tween a translate on a div\n          .styleTween('transform', function (d) {\n            return translateInterpolator;\n          }, 'important') // Safari has its own `-webkit-transform` and does not support `transform`\n          .styleTween('-webkit-transform', function (d) {\n            return translateInterpolator;\n          }).style('-ms-transform', new_translate).style('opacity', 1);\n        }\n\n        lastPosition.left = left;\n        lastPosition.top = top;\n      });\n    }; // Creates new tooltip container, or uses existing one on DOM.\n\n\n    function initTooltip() {\n      if (!tooltip || !tooltip.node()) {\n        // Create new tooltip div if it doesn't exist on DOM.\n        var data = [1];\n        tooltip = d3.select(document.body).select('#' + id).data(data);\n        tooltip.enter().append('div').attr(\"class\", \"nvtooltip \" + (classes ? classes : \"xy-tooltip\")).attr(\"id\", id).style(\"top\", 0).style(\"left\", 0).style('opacity', 0).style('position', 'fixed').selectAll(\"div, table, td, tr\").classed(nvPointerEventsClass, true).classed(nvPointerEventsClass, true);\n        tooltip.exit().remove();\n      }\n    } // Draw the tooltip onto the DOM.\n\n\n    function nvtooltip() {\n      if (!enabled) return;\n      if (!dataSeriesExists(data)) return;\n      nv.dom.write(function () {\n        initTooltip(); // Generate data and set it into tooltip.\n        // Bonus - If you override contentGenerator and return false, you can use something like\n        //         Angular, React or Knockout to bind the data for your tooltip directly to the DOM.\n\n        var newContent = contentGenerator(data, tooltip.node());\n\n        if (newContent) {\n          tooltip.node().innerHTML = newContent;\n        }\n\n        positionTooltip();\n      });\n      return nvtooltip;\n    }\n\n    nvtooltip.nvPointerEventsClass = nvPointerEventsClass;\n    nvtooltip.options = nv.utils.optionsFunc.bind(nvtooltip);\n    nvtooltip._options = Object.create({}, {\n      // simple read/write options\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n        }\n      },\n      gravity: {\n        get: function () {\n          return gravity;\n        },\n        set: function (_) {\n          gravity = _;\n        }\n      },\n      distance: {\n        get: function () {\n          return distance;\n        },\n        set: function (_) {\n          distance = _;\n        }\n      },\n      snapDistance: {\n        get: function () {\n          return snapDistance;\n        },\n        set: function (_) {\n          snapDistance = _;\n        }\n      },\n      classes: {\n        get: function () {\n          return classes;\n        },\n        set: function (_) {\n          classes = _;\n        }\n      },\n      enabled: {\n        get: function () {\n          return enabled;\n        },\n        set: function (_) {\n          enabled = _;\n        }\n      },\n      hideDelay: {\n        get: function () {\n          return hideDelay;\n        },\n        set: function (_) {\n          hideDelay = _;\n        }\n      },\n      contentGenerator: {\n        get: function () {\n          return contentGenerator;\n        },\n        set: function (_) {\n          contentGenerator = _;\n        }\n      },\n      valueFormatter: {\n        get: function () {\n          return valueFormatter;\n        },\n        set: function (_) {\n          valueFormatter = _;\n        }\n      },\n      headerFormatter: {\n        get: function () {\n          return headerFormatter;\n        },\n        set: function (_) {\n          headerFormatter = _;\n        }\n      },\n      keyFormatter: {\n        get: function () {\n          return keyFormatter;\n        },\n        set: function (_) {\n          keyFormatter = _;\n        }\n      },\n      headerEnabled: {\n        get: function () {\n          return headerEnabled;\n        },\n        set: function (_) {\n          headerEnabled = _;\n        }\n      },\n      position: {\n        get: function () {\n          return position;\n        },\n        set: function (_) {\n          position = _;\n        }\n      },\n      // Deprecated options\n      chartContainer: {\n        get: function () {\n          return document.body;\n        },\n        set: function (_) {\n          // deprecated after 1.8.3\n          nv.deprecated('chartContainer', 'feature removed after 1.8.3');\n        }\n      },\n      fixedTop: {\n        get: function () {\n          return null;\n        },\n        set: function (_) {\n          // deprecated after 1.8.1\n          nv.deprecated('fixedTop', 'feature removed after 1.8.1');\n        }\n      },\n      offset: {\n        get: function () {\n          return {\n            left: 0,\n            top: 0\n          };\n        },\n        set: function (_) {\n          // deprecated after 1.8.1\n          nv.deprecated('offset', 'use chart.tooltip.distance() instead');\n        }\n      },\n      // options with extra logic\n      hidden: {\n        get: function () {\n          return hidden;\n        },\n        set: function (_) {\n          if (hidden != _) {\n            hidden = !!_;\n            nvtooltip();\n          }\n        }\n      },\n      data: {\n        get: function () {\n          return data;\n        },\n        set: function (_) {\n          // if showing a single data point, adjust data format with that\n          if (_.point) {\n            _.value = _.point.x;\n            _.series = _.series || {};\n            _.series.value = _.point.y;\n            _.series.color = _.point.color || _.series.color;\n          }\n\n          data = _;\n        }\n      },\n      // read only properties\n      node: {\n        get: function () {\n          return tooltip.node();\n        },\n        set: function (_) {}\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {}\n      }\n    });\n    nv.utils.initOptions(nvtooltip);\n    return nvtooltip;\n  };\n  /*\n  Gets the browser window size\n  \n  Returns object with height and width properties\n   */\n\n\n  nv.utils.windowSize = function () {\n    // Sane defaults\n    var size = {\n      width: 640,\n      height: 480\n    }; // Most recent browsers use\n\n    if (window.innerWidth && window.innerHeight) {\n      size.width = window.innerWidth;\n      size.height = window.innerHeight;\n      return size;\n    } // IE can use depending on mode it is in\n\n\n    if (document.compatMode == 'CSS1Compat' && document.documentElement && document.documentElement.offsetWidth) {\n      size.width = document.documentElement.offsetWidth;\n      size.height = document.documentElement.offsetHeight;\n      return size;\n    } // Earlier IE uses Doc.body\n\n\n    if (document.body && document.body.offsetWidth) {\n      size.width = document.body.offsetWidth;\n      size.height = document.body.offsetHeight;\n      return size;\n    }\n\n    return size;\n  };\n  /* handle dumb browser quirks...  isinstance breaks if you use frames\n  typeof returns 'object' for null, NaN is a number, etc.\n   */\n\n\n  nv.utils.isArray = Array.isArray;\n\n  nv.utils.isObject = function (a) {\n    return a !== null && typeof a === 'object';\n  };\n\n  nv.utils.isFunction = function (a) {\n    return typeof a === 'function';\n  };\n\n  nv.utils.isDate = function (a) {\n    return toString.call(a) === '[object Date]';\n  };\n\n  nv.utils.isNumber = function (a) {\n    return !isNaN(a) && typeof a === 'number';\n  };\n  /*\n  Binds callback function to run when window is resized\n   */\n\n\n  nv.utils.windowResize = function (handler) {\n    if (window.addEventListener) {\n      window.addEventListener('resize', handler);\n    } else {\n      nv.log(\"ERROR: Failed to bind to window.resize with: \", handler);\n    } // return object with clear function to remove the single added callback.\n\n\n    return {\n      callback: handler,\n      clear: function () {\n        window.removeEventListener('resize', handler);\n      }\n    };\n  };\n  /*\n  Backwards compatible way to implement more d3-like coloring of graphs.\n  Can take in nothing, an array, or a function/scale\n  To use a normal scale, get the range and pass that because we must be able\n  to take two arguments and use the index to keep backward compatibility\n  */\n\n\n  nv.utils.getColor = function (color) {\n    //if you pass in nothing, get default colors back\n    if (color === undefined) {\n      return nv.utils.defaultColor(); //if passed an array, turn it into a color scale\n    } else if (nv.utils.isArray(color)) {\n      var color_scale = d3.scale.ordinal().range(color);\n      return function (d, i) {\n        var key = i === undefined ? d : i;\n        return d.color || color_scale(key);\n      }; //if passed a function or scale, return it, or whatever it may be\n      //external libs, such as angularjs-nvd3-directives use this\n    } else {\n      //can't really help it if someone passes rubbish as color\n      return color;\n    }\n  };\n  /*\n  Default color chooser uses a color scale of 20 colors from D3\n   https://github.com/mbostock/d3/wiki/Ordinal-Scales#categorical-colors\n   */\n\n\n  nv.utils.defaultColor = function () {\n    // get range of the scale so we'll turn it into our own function.\n    return nv.utils.getColor(d3.scale.category20().range());\n  };\n  /*\n  Returns a color function that takes the result of 'getKey' for each series and\n  looks for a corresponding color from the dictionary\n  */\n\n\n  nv.utils.customTheme = function (dictionary, getKey, defaultColors) {\n    // use default series.key if getKey is undefined\n    getKey = getKey || function (series) {\n      return series.key;\n    };\n\n    defaultColors = defaultColors || d3.scale.category20().range(); // start at end of default color list and walk back to index 0\n\n    var defIndex = defaultColors.length;\n    return function (series, index) {\n      var key = getKey(series);\n\n      if (nv.utils.isFunction(dictionary[key])) {\n        return dictionary[key]();\n      } else if (dictionary[key] !== undefined) {\n        return dictionary[key];\n      } else {\n        // no match in dictionary, use a default color\n        if (!defIndex) {\n          // used all the default colors, start over\n          defIndex = defaultColors.length;\n        }\n\n        defIndex = defIndex - 1;\n        return defaultColors[defIndex];\n      }\n    };\n  };\n  /*\n  From the PJAX example on d3js.org, while this is not really directly needed\n  it's a very cool method for doing pjax, I may expand upon it a little bit,\n  open to suggestions on anything that may be useful\n  */\n\n\n  nv.utils.pjax = function (links, content) {\n    var load = function (href) {\n      d3.html(href, function (fragment) {\n        var target = d3.select(content).node();\n        target.parentNode.replaceChild(d3.select(fragment).select(content).node(), target);\n        nv.utils.pjax(links, content);\n      });\n    };\n\n    d3.selectAll(links).on(\"click\", function () {\n      history.pushState(this.href, this.textContent, this.href);\n      load(this.href);\n      d3.event.preventDefault();\n    });\n    d3.select(window).on(\"popstate\", function () {\n      if (d3.event.state) {\n        load(d3.event.state);\n      }\n    });\n  };\n  /*\n  For when we want to approximate the width in pixels for an SVG:text element.\n  Most common instance is when the element is in a display:none; container.\n  Forumla is : text.length * font-size * constant_factor\n  */\n\n\n  nv.utils.calcApproxTextWidth = function (svgTextElem) {\n    if (nv.utils.isFunction(svgTextElem.style) && nv.utils.isFunction(svgTextElem.text)) {\n      var fontSize = parseInt(svgTextElem.style(\"font-size\").replace(\"px\", \"\"), 10);\n      var textLength = svgTextElem.text().length;\n      return nv.utils.NaNtoZero(textLength * fontSize * 0.5);\n    }\n\n    return 0;\n  };\n  /*\n  Numbers that are undefined, null or NaN, convert them to zeros.\n  */\n\n\n  nv.utils.NaNtoZero = function (n) {\n    if (!nv.utils.isNumber(n) || isNaN(n) || n === null || n === Infinity || n === -Infinity) {\n      return 0;\n    }\n\n    return n;\n  };\n  /*\n  Add a way to watch for d3 transition ends to d3\n  */\n\n\n  d3.selection.prototype.watchTransition = function (renderWatch) {\n    var args = [this].concat([].slice.call(arguments, 1));\n    return renderWatch.transition.apply(renderWatch, args);\n  };\n  /*\n  Helper object to watch when d3 has rendered something\n  */\n\n\n  nv.utils.renderWatch = function (dispatch, duration) {\n    if (!(this instanceof nv.utils.renderWatch)) {\n      return new nv.utils.renderWatch(dispatch, duration);\n    }\n\n    var _duration = duration !== undefined ? duration : 250;\n\n    var renderStack = [];\n    var self = this;\n\n    this.models = function (models) {\n      models = [].slice.call(arguments, 0);\n      models.forEach(function (model) {\n        model.__rendered = false;\n\n        (function (m) {\n          m.dispatch.on('renderEnd', function (arg) {\n            m.__rendered = true;\n            self.renderEnd('model');\n          });\n        })(model);\n\n        if (renderStack.indexOf(model) < 0) {\n          renderStack.push(model);\n        }\n      });\n      return this;\n    };\n\n    this.reset = function (duration) {\n      if (duration !== undefined) {\n        _duration = duration;\n      }\n\n      renderStack = [];\n    };\n\n    this.transition = function (selection, args, duration) {\n      args = arguments.length > 1 ? [].slice.call(arguments, 1) : [];\n\n      if (args.length > 1) {\n        duration = args.pop();\n      } else {\n        duration = _duration !== undefined ? _duration : 250;\n      }\n\n      selection.__rendered = false;\n\n      if (renderStack.indexOf(selection) < 0) {\n        renderStack.push(selection);\n      }\n\n      if (duration === 0) {\n        selection.__rendered = true;\n\n        selection.delay = function () {\n          return this;\n        };\n\n        selection.duration = function () {\n          return this;\n        };\n\n        return selection;\n      } else {\n        if (selection.length === 0) {\n          selection.__rendered = true;\n        } else if (selection.every(function (d) {\n          return !d.length;\n        })) {\n          selection.__rendered = true;\n        } else {\n          selection.__rendered = false;\n        }\n\n        var n = 0;\n        return selection.transition().duration(duration).each(function () {\n          ++n;\n        }).each('end', function (d, i) {\n          if (--n === 0) {\n            selection.__rendered = true;\n            self.renderEnd.apply(this, args);\n          }\n        });\n      }\n    };\n\n    this.renderEnd = function () {\n      if (renderStack.every(function (d) {\n        return d.__rendered;\n      })) {\n        renderStack.forEach(function (d) {\n          d.__rendered = false;\n        });\n        dispatch.renderEnd.apply(this, arguments);\n      }\n    };\n  };\n  /*\n  Takes multiple objects and combines them into the first one (dst)\n  example:  nv.utils.deepExtend({a: 1}, {a: 2, b: 3}, {c: 4});\n  gives:  {a: 2, b: 3, c: 4}\n  */\n\n\n  nv.utils.deepExtend = function (dst) {\n    var sources = arguments.length > 1 ? [].slice.call(arguments, 1) : [];\n    sources.forEach(function (source) {\n      for (var key in source) {\n        var isArray = nv.utils.isArray(dst[key]);\n        var isObject = nv.utils.isObject(dst[key]);\n        var srcObj = nv.utils.isObject(source[key]);\n\n        if (isObject && !isArray && srcObj) {\n          nv.utils.deepExtend(dst[key], source[key]);\n        } else {\n          dst[key] = source[key];\n        }\n      }\n    });\n  };\n  /*\n  state utility object, used to track d3 states in the models\n  */\n\n\n  nv.utils.state = function () {\n    if (!(this instanceof nv.utils.state)) {\n      return new nv.utils.state();\n    }\n\n    var state = {};\n\n    var _self = this;\n\n    var _setState = function () {};\n\n    var _getState = function () {\n      return {};\n    };\n\n    var init = null;\n    var changed = null;\n    this.dispatch = d3.dispatch('change', 'set');\n    this.dispatch.on('set', function (state) {\n      _setState(state, true);\n    });\n\n    this.getter = function (fn) {\n      _getState = fn;\n      return this;\n    };\n\n    this.setter = function (fn, callback) {\n      if (!callback) {\n        callback = function () {};\n      }\n\n      _setState = function (state, update) {\n        fn(state);\n\n        if (update) {\n          callback();\n        }\n      };\n\n      return this;\n    };\n\n    this.init = function (state) {\n      init = init || {};\n      nv.utils.deepExtend(init, state);\n    };\n\n    var _set = function () {\n      var settings = _getState();\n\n      if (JSON.stringify(settings) === JSON.stringify(state)) {\n        return false;\n      }\n\n      for (var key in settings) {\n        if (state[key] === undefined) {\n          state[key] = {};\n        }\n\n        state[key] = settings[key];\n        changed = true;\n      }\n\n      return true;\n    };\n\n    this.update = function () {\n      if (init) {\n        _setState(init, false);\n\n        init = null;\n      }\n\n      if (_set.call(this)) {\n        this.dispatch.change(state);\n      }\n    };\n  };\n  /*\n  Snippet of code you can insert into each nv.models.* to give you the ability to\n  do things like:\n  chart.options({\n    showXAxis: true,\n    tooltips: true\n  });\n  \n  To enable in the chart:\n  chart.options = nv.utils.optionsFunc.bind(chart);\n  */\n\n\n  nv.utils.optionsFunc = function (args) {\n    if (args) {\n      d3.map(args).forEach(function (key, value) {\n        if (nv.utils.isFunction(this[key])) {\n          this[key](value);\n        }\n      }.bind(this));\n    }\n\n    return this;\n  };\n  /*\n  numTicks:  requested number of ticks\n  data:  the chart data\n  \n  returns the number of ticks to actually use on X axis, based on chart data\n  to avoid duplicate ticks with the same value\n  */\n\n\n  nv.utils.calcTicksX = function (numTicks, data) {\n    // find max number of values from all data streams\n    var numValues = 1;\n    var i = 0;\n\n    for (i; i < data.length; i += 1) {\n      var stream_len = data[i] && data[i].values ? data[i].values.length : 0;\n      numValues = stream_len > numValues ? stream_len : numValues;\n    }\n\n    nv.log(\"Requested number of ticks: \", numTicks);\n    nv.log(\"Calculated max values to be: \", numValues); // make sure we don't have more ticks than values to avoid duplicates\n\n    numTicks = numTicks > numValues ? numTicks = numValues - 1 : numTicks; // make sure we have at least one tick\n\n    numTicks = numTicks < 1 ? 1 : numTicks; // make sure it's an integer\n\n    numTicks = Math.floor(numTicks);\n    nv.log(\"Calculating tick count as: \", numTicks);\n    return numTicks;\n  };\n  /*\n  returns number of ticks to actually use on Y axis, based on chart data\n  */\n\n\n  nv.utils.calcTicksY = function (numTicks, data) {\n    // currently uses the same logic but we can adjust here if needed later\n    return nv.utils.calcTicksX(numTicks, data);\n  };\n  /*\n  Add a particular option from an options object onto chart\n  Options exposed on a chart are a getter/setter function that returns chart\n  on set to mimic typical d3 option chaining, e.g. svg.option1('a').option2('b');\n  \n  option objects should be generated via Object.create() to provide\n  the option of manipulating data via get/set functions.\n  */\n\n\n  nv.utils.initOption = function (chart, name) {\n    // if it's a call option, just call it directly, otherwise do get/set\n    if (chart._calls && chart._calls[name]) {\n      chart[name] = chart._calls[name];\n    } else {\n      chart[name] = function (_) {\n        if (!arguments.length) return chart._options[name];\n        chart._overrides[name] = true;\n        chart._options[name] = _;\n        return chart;\n      }; // calling the option as _option will ignore if set by option already\n      // so nvd3 can set options internally but the stop if set manually\n\n\n      chart['_' + name] = function (_) {\n        if (!arguments.length) return chart._options[name];\n\n        if (!chart._overrides[name]) {\n          chart._options[name] = _;\n        }\n\n        return chart;\n      };\n    }\n  };\n  /*\n  Add all options in an options object to the chart\n  */\n\n\n  nv.utils.initOptions = function (chart) {\n    chart._overrides = chart._overrides || {};\n    var ops = Object.getOwnPropertyNames(chart._options || {});\n    var calls = Object.getOwnPropertyNames(chart._calls || {});\n    ops = ops.concat(calls);\n\n    for (var i in ops) {\n      nv.utils.initOption(chart, ops[i]);\n    }\n  };\n  /*\n  Inherit options from a D3 object\n  d3.rebind makes calling the function on target actually call it on source\n  Also use _d3options so we can track what we inherit for documentation and chained inheritance\n  */\n\n\n  nv.utils.inheritOptionsD3 = function (target, d3_source, oplist) {\n    target._d3options = oplist.concat(target._d3options || []); // Find unique d3 options (string) and update d3options\n\n    target._d3options = (target._d3options || []).filter(function (item, i, ar) {\n      return ar.indexOf(item) === i;\n    });\n    oplist.unshift(d3_source);\n    oplist.unshift(target);\n    d3.rebind.apply(this, oplist);\n  };\n  /*\n  Remove duplicates from an array\n  */\n\n\n  nv.utils.arrayUnique = function (a) {\n    return a.sort().filter(function (item, pos) {\n      return !pos || item != a[pos - 1];\n    });\n  };\n  /*\n  Keeps a list of custom symbols to draw from in addition to d3.svg.symbol\n  Necessary since d3 doesn't let you extend its list -_-\n  Add new symbols by doing nv.utils.symbols.set('name', function(size){...});\n  */\n\n\n  nv.utils.symbolMap = d3.map();\n  /*\n  Replaces d3.svg.symbol so that we can look both there and our own map\n   */\n\n  nv.utils.symbol = function () {\n    var type,\n        size = 64;\n\n    function symbol(d, i) {\n      var t = type.call(this, d, i);\n      var s = size.call(this, d, i);\n\n      if (d3.svg.symbolTypes.indexOf(t) !== -1) {\n        return d3.svg.symbol().type(t).size(s)();\n      } else {\n        return nv.utils.symbolMap.get(t)(s);\n      }\n    }\n\n    symbol.type = function (_) {\n      if (!arguments.length) return type;\n      type = d3.functor(_);\n      return symbol;\n    };\n\n    symbol.size = function (_) {\n      if (!arguments.length) return size;\n      size = d3.functor(_);\n      return symbol;\n    };\n\n    return symbol;\n  };\n  /*\n  Inherit option getter/setter functions from source to target\n  d3.rebind makes calling the function on target actually call it on source\n  Also track via _inherited and _d3options so we can track what we inherit\n  for documentation generation purposes and chained inheritance\n  */\n\n\n  nv.utils.inheritOptions = function (target, source) {\n    // inherit all the things\n    var ops = Object.getOwnPropertyNames(source._options || {});\n    var calls = Object.getOwnPropertyNames(source._calls || {});\n    var inherited = source._inherited || [];\n    var d3ops = source._d3options || [];\n    var args = ops.concat(calls).concat(inherited).concat(d3ops);\n    args.unshift(source);\n    args.unshift(target);\n    d3.rebind.apply(this, args); // pass along the lists to keep track of them, don't allow duplicates\n\n    target._inherited = nv.utils.arrayUnique(ops.concat(calls).concat(inherited).concat(ops).concat(target._inherited || []));\n    target._d3options = nv.utils.arrayUnique(d3ops.concat(target._d3options || []));\n  };\n  /*\n  Runs common initialize code on the svg before the chart builds\n  */\n\n\n  nv.utils.initSVG = function (svg) {\n    svg.classed({\n      'nvd3-svg': true\n    });\n  };\n  /*\n  Sanitize and provide default for the container height.\n  */\n\n\n  nv.utils.sanitizeHeight = function (height, container) {\n    return height || parseInt(container.style('height'), 10) || 400;\n  };\n  /*\n  Sanitize and provide default for the container width.\n  */\n\n\n  nv.utils.sanitizeWidth = function (width, container) {\n    return width || parseInt(container.style('width'), 10) || 960;\n  };\n  /*\n  Calculate the available height for a chart.\n  */\n\n\n  nv.utils.availableHeight = function (height, container, margin) {\n    return Math.max(0, nv.utils.sanitizeHeight(height, container) - margin.top - margin.bottom);\n  };\n  /*\n  Calculate the available width for a chart.\n  */\n\n\n  nv.utils.availableWidth = function (width, container, margin) {\n    return Math.max(0, nv.utils.sanitizeWidth(width, container) - margin.left - margin.right);\n  };\n  /*\n  Clear any rendered chart components and display a chart's 'noData' message\n  */\n\n\n  nv.utils.noData = function (chart, container) {\n    var opt = chart.options(),\n        margin = opt.margin(),\n        noData = opt.noData(),\n        data = noData == null ? [\"No Data Available.\"] : [noData],\n        height = nv.utils.availableHeight(null, container, margin),\n        width = nv.utils.availableWidth(null, container, margin),\n        x = margin.left + width / 2,\n        y = margin.top + height / 2; //Remove any previously created chart components\n\n    container.selectAll('g').remove();\n    var noDataText = container.selectAll('.nv-noData').data(data);\n    noDataText.enter().append('text').attr('class', 'nvd3 nv-noData').attr('dy', '-.7em').style('text-anchor', 'middle');\n    noDataText.attr('x', x).attr('y', y).text(function (t) {\n      return t;\n    });\n  };\n  /*\n   Wrap long labels.\n   */\n\n\n  nv.utils.wrapTicks = function (text, width) {\n    text.each(function () {\n      var text = d3.select(this),\n          words = text.text().split(/\\s+/).reverse(),\n          word,\n          line = [],\n          lineNumber = 0,\n          lineHeight = 1.1,\n          y = text.attr(\"y\"),\n          dy = parseFloat(text.attr(\"dy\")),\n          tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n\n      while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(\" \"));\n\n        if (tspan.node().getComputedTextLength() > width) {\n          line.pop();\n          tspan.text(line.join(\" \"));\n          line = [word];\n          tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n        }\n      }\n    });\n  };\n  /*\n  Check equality of 2 array\n  */\n\n\n  nv.utils.arrayEquals = function (array1, array2) {\n    if (array1 === array2) return true;\n    if (!array1 || !array2) return false; // compare lengths - can save a lot of time\n\n    if (array1.length != array2.length) return false;\n\n    for (var i = 0, l = array1.length; i < l; i++) {\n      // Check if we have nested arrays\n      if (array1[i] instanceof Array && array2[i] instanceof Array) {\n        // recurse into the nested arrays\n        if (!nv.arrayEquals(array1[i], array2[i])) return false;\n      } else if (array1[i] != array2[i]) {\n        // Warning - two different object instances will never be equal: {x:20} != {x:20}\n        return false;\n      }\n    }\n\n    return true;\n  };\n  /*\n   Check if a point within an arc\n   */\n\n\n  nv.utils.pointIsInArc = function (pt, ptData, d3Arc) {\n    // Center of the arc is assumed to be 0,0\n    // (pt.x, pt.y) are assumed to be relative to the center\n    var r1 = d3Arc.innerRadius()(ptData),\n        // Note: Using the innerRadius\n    r2 = d3Arc.outerRadius()(ptData),\n        theta1 = d3Arc.startAngle()(ptData),\n        theta2 = d3Arc.endAngle()(ptData);\n    var dist = pt.x * pt.x + pt.y * pt.y,\n        angle = Math.atan2(pt.x, -pt.y); // Note: different coordinate system.\n\n    angle = angle < 0 ? angle + Math.PI * 2 : angle;\n    return r1 * r1 <= dist && dist <= r2 * r2 && theta1 <= angle && angle <= theta2;\n  };\n\n  nv.models.axis = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var axis = d3.svg.axis();\n    var scale = d3.scale.linear();\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 75 //only used for tickLabel currently\n    ,\n        height = 60 //only used for tickLabel currently\n    ,\n        axisLabelText = null,\n        showMaxMin = true //TODO: showMaxMin should be disabled on all ordinal scaled axes\n    ,\n        rotateLabels = 0,\n        rotateYLabel = true,\n        staggerLabels = false,\n        isOrdinal = false,\n        ticks = null,\n        axisLabelDistance = 0,\n        fontSize = undefined,\n        duration = 250,\n        dispatch = d3.dispatch('renderEnd'),\n        tickFormatMaxMin;\n    axis.scale(scale).orient('bottom').tickFormat(function (d) {\n      return d;\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var scale0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-axis').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-axis');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        if (ticks !== null) axis.ticks(ticks);else if (axis.orient() == 'top' || axis.orient() == 'bottom') axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100); //TODO: consider calculating width/height based on whether or not label is added, for reference in charts using this component\n\n        g.watchTransition(renderWatch, 'axis').call(axis);\n        scale0 = scale0 || axis.scale();\n        var fmt = axis.tickFormat();\n\n        if (fmt == null) {\n          fmt = scale0.tickFormat();\n        }\n\n        var axisLabel = g.selectAll('text.nv-axislabel').data([axisLabelText || null]);\n        axisLabel.exit().remove(); //only skip when fontSize is undefined so it can be cleared with a null or blank string\n\n        if (fontSize !== undefined) {\n          g.selectAll('g').select(\"text\").style('font-size', fontSize);\n        }\n\n        var xLabelMargin;\n        var axisMaxMin;\n        var w;\n\n        switch (axis.orient()) {\n          case 'top':\n            axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n            w = 0;\n\n            if (scale.range().length === 1) {\n              w = isOrdinal ? scale.range()[0] * 2 + scale.rangeBand() : 0;\n            } else if (scale.range().length === 2) {\n              w = isOrdinal ? scale.range()[0] + scale.range()[1] + scale.rangeBand() : scale.range()[1];\n            } else if (scale.range().length > 2) {\n              w = scale.range()[scale.range().length - 1] + (scale.range()[1] - scale.range()[0]);\n            }\n\n            ;\n            axisLabel.attr('text-anchor', 'middle').attr('y', 0).attr('x', w / 2);\n\n            if (showMaxMin) {\n              axisMaxMin = wrap.selectAll('g.nv-axisMaxMin').data(scale.domain());\n              axisMaxMin.enter().append('g').attr('class', function (d, i) {\n                return ['nv-axisMaxMin', 'nv-axisMaxMin-x', i == 0 ? 'nv-axisMin-x' : 'nv-axisMax-x'].join(' ');\n              }).append('text');\n              axisMaxMin.exit().remove();\n              axisMaxMin.attr('transform', function (d, i) {\n                return 'translate(' + nv.utils.NaNtoZero(scale(d)) + ',0)';\n              }).select('text').attr('dy', '-0.5em').attr('y', -axis.tickPadding()).attr('text-anchor', 'middle').text(function (d, i) {\n                var formatter = tickFormatMaxMin || fmt;\n                var v = formatter(d);\n                return ('' + v).match('NaN') ? '' : v;\n              });\n              axisMaxMin.watchTransition(renderWatch, 'min-max top').attr('transform', function (d, i) {\n                return 'translate(' + nv.utils.NaNtoZero(scale.range()[i]) + ',0)';\n              });\n            }\n\n            break;\n\n          case 'bottom':\n            xLabelMargin = axisLabelDistance + 36;\n            var maxTextWidth = 30;\n            var textHeight = 0;\n            var xTicks = g.selectAll('g').select(\"text\");\n            var rotateLabelsRule = '';\n\n            if (rotateLabels % 360) {\n              //Reset transform on ticks so textHeight can be calculated correctly\n              xTicks.attr('transform', ''); //Calculate the longest xTick width\n\n              xTicks.each(function (d, i) {\n                var box = this.getBoundingClientRect();\n                var width = box.width;\n                textHeight = box.height;\n                if (width > maxTextWidth) maxTextWidth = width;\n              });\n              rotateLabelsRule = 'rotate(' + rotateLabels + ' 0,' + (textHeight / 2 + axis.tickPadding()) + ')'; //Convert to radians before calculating sin. Add 30 to margin for healthy padding.\n\n              var sin = Math.abs(Math.sin(rotateLabels * Math.PI / 180));\n              xLabelMargin = (sin ? sin * maxTextWidth : maxTextWidth) + 30; //Rotate all xTicks\n\n              xTicks.attr('transform', rotateLabelsRule).style('text-anchor', rotateLabels % 360 > 0 ? 'start' : 'end');\n            } else {\n              if (staggerLabels) {\n                xTicks.attr('transform', function (d, i) {\n                  return 'translate(0,' + (i % 2 == 0 ? '0' : '12') + ')';\n                });\n              } else {\n                xTicks.attr('transform', \"translate(0,0)\");\n              }\n            }\n\n            axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n            w = 0;\n\n            if (scale.range().length === 1) {\n              w = isOrdinal ? scale.range()[0] * 2 + scale.rangeBand() : 0;\n            } else if (scale.range().length === 2) {\n              w = isOrdinal ? scale.range()[0] + scale.range()[1] + scale.rangeBand() : scale.range()[1];\n            } else if (scale.range().length > 2) {\n              w = scale.range()[scale.range().length - 1] + (scale.range()[1] - scale.range()[0]);\n            }\n\n            ;\n            axisLabel.attr('text-anchor', 'middle').attr('y', xLabelMargin).attr('x', w / 2);\n\n            if (showMaxMin) {\n              //if (showMaxMin && !isOrdinal) {\n              axisMaxMin = wrap.selectAll('g.nv-axisMaxMin') //.data(scale.domain())\n              .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);\n              axisMaxMin.enter().append('g').attr('class', function (d, i) {\n                return ['nv-axisMaxMin', 'nv-axisMaxMin-x', i == 0 ? 'nv-axisMin-x' : 'nv-axisMax-x'].join(' ');\n              }).append('text');\n              axisMaxMin.exit().remove();\n              axisMaxMin.attr('transform', function (d, i) {\n                return 'translate(' + nv.utils.NaNtoZero(scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)';\n              }).select('text').attr('dy', '.71em').attr('y', axis.tickPadding()).attr('transform', rotateLabelsRule).style('text-anchor', rotateLabels ? rotateLabels % 360 > 0 ? 'start' : 'end' : 'middle').text(function (d, i) {\n                var formatter = tickFormatMaxMin || fmt;\n                var v = formatter(d);\n                return ('' + v).match('NaN') ? '' : v;\n              });\n              axisMaxMin.watchTransition(renderWatch, 'min-max bottom').attr('transform', function (d, i) {\n                return 'translate(' + nv.utils.NaNtoZero(scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)';\n              });\n            }\n\n            break;\n\n          case 'right':\n            axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n            axisLabel.style('text-anchor', rotateYLabel ? 'middle' : 'begin').attr('transform', rotateYLabel ? 'rotate(90)' : '').attr('y', rotateYLabel ? -Math.max(margin.right, width) + 12 - (axisLabelDistance || 0) : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\n            .attr('x', rotateYLabel ? d3.max(scale.range()) / 2 : axis.tickPadding());\n\n            if (showMaxMin) {\n              axisMaxMin = wrap.selectAll('g.nv-axisMaxMin').data(scale.domain());\n              axisMaxMin.enter().append('g').attr('class', function (d, i) {\n                return ['nv-axisMaxMin', 'nv-axisMaxMin-y', i == 0 ? 'nv-axisMin-y' : 'nv-axisMax-y'].join(' ');\n              }).append('text').style('opacity', 0);\n              axisMaxMin.exit().remove();\n              axisMaxMin.attr('transform', function (d, i) {\n                return 'translate(0,' + nv.utils.NaNtoZero(scale(d)) + ')';\n              }).select('text').attr('dy', '.32em').attr('y', 0).attr('x', axis.tickPadding()).style('text-anchor', 'start').text(function (d, i) {\n                var formatter = tickFormatMaxMin || fmt;\n                var v = formatter(d);\n                return ('' + v).match('NaN') ? '' : v;\n              });\n              axisMaxMin.watchTransition(renderWatch, 'min-max right').attr('transform', function (d, i) {\n                return 'translate(0,' + nv.utils.NaNtoZero(scale.range()[i]) + ')';\n              }).select('text').style('opacity', 1);\n            }\n\n            break;\n\n          case 'left':\n            /*\n             //For dynamically placing the label. Can be used with dynamically-sized chart axis margins\n             var yTicks = g.selectAll('g').select(\"text\");\n             yTicks.each(function(d,i){\n             var labelPadding = this.getBoundingClientRect().width + axis.tickPadding() + 16;\n             if(labelPadding > width) width = labelPadding;\n             });\n             */\n            axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n            axisLabel.style('text-anchor', rotateYLabel ? 'middle' : 'end').attr('transform', rotateYLabel ? 'rotate(-90)' : '').attr('y', rotateYLabel ? -Math.max(margin.left, width) + 25 - (axisLabelDistance || 0) : -10).attr('x', rotateYLabel ? -d3.max(scale.range()) / 2 : -axis.tickPadding());\n\n            if (showMaxMin) {\n              axisMaxMin = wrap.selectAll('g.nv-axisMaxMin').data(scale.domain());\n              axisMaxMin.enter().append('g').attr('class', function (d, i) {\n                return ['nv-axisMaxMin', 'nv-axisMaxMin-y', i == 0 ? 'nv-axisMin-y' : 'nv-axisMax-y'].join(' ');\n              }).append('text').style('opacity', 0);\n              axisMaxMin.exit().remove();\n              axisMaxMin.attr('transform', function (d, i) {\n                return 'translate(0,' + nv.utils.NaNtoZero(scale0(d)) + ')';\n              }).select('text').attr('dy', '.32em').attr('y', 0).attr('x', -axis.tickPadding()).attr('text-anchor', 'end').text(function (d, i) {\n                var formatter = tickFormatMaxMin || fmt;\n                var v = formatter(d);\n                return ('' + v).match('NaN') ? '' : v;\n              });\n              axisMaxMin.watchTransition(renderWatch, 'min-max right').attr('transform', function (d, i) {\n                return 'translate(0,' + nv.utils.NaNtoZero(scale.range()[i]) + ')';\n              }).select('text').style('opacity', 1);\n            }\n\n            break;\n        }\n\n        axisLabel.text(function (d) {\n          return d;\n        });\n\n        if (showMaxMin && (axis.orient() === 'left' || axis.orient() === 'right')) {\n          //check if max and min overlap other values, if so, hide the values that overlap\n          g.selectAll('g') // the g's wrapping each tick\n          .each(function (d, i) {\n            d3.select(this).select('text').attr('opacity', 1);\n\n            if (scale(d) < scale.range()[1] + 10 || scale(d) > scale.range()[0] - 10) {\n              // 10 is assuming text height is 16... if d is 0, leave it!\n              if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n                d3.select(this).attr('opacity', 0);\n              d3.select(this).select('text').attr('opacity', 0); // Don't remove the ZERO line!!\n            }\n          }); //if Max and Min = 0 only show min, Issue #281\n\n          if (scale.domain()[0] == scale.domain()[1] && scale.domain()[0] == 0) {\n            wrap.selectAll('g.nv-axisMaxMin').style('opacity', function (d, i) {\n              return !i ? 1 : 0;\n            });\n          }\n        }\n\n        if (showMaxMin && (axis.orient() === 'top' || axis.orient() === 'bottom')) {\n          var maxMinRange = [];\n          wrap.selectAll('g.nv-axisMaxMin').each(function (d, i) {\n            try {\n              if (i) // i== 1, max position\n                maxMinRange.push(scale(d) - this.getBoundingClientRect().width - 4); //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n              else // i==0, min position\n                maxMinRange.push(scale(d) + this.getBoundingClientRect().width + 4);\n            } catch (err) {\n              if (i) // i== 1, max position\n                maxMinRange.push(scale(d) - 4); //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n              else // i==0, min position\n                maxMinRange.push(scale(d) + 4);\n            }\n          }); // the g's wrapping each tick\n\n          g.selectAll('g').each(function (d, i) {\n            if (scale(d) < maxMinRange[0] || scale(d) > maxMinRange[1]) {\n              if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n                d3.select(this).remove();else d3.select(this).select('text').remove(); // Don't remove the ZERO line!!\n            }\n          });\n        } //Highlight zero tick line\n\n\n        g.selectAll('.tick').filter(function (d) {\n          /*\n          The filter needs to return only ticks at or near zero.\n          Numbers like 0.00001 need to count as zero as well,\n          and the arithmetic trick below solves that.\n          */\n          return !parseFloat(Math.round(d * 100000) / 1000000) && d !== undefined;\n        }).classed('zero', true); //store old scales for use in transitions on update\n\n        scale0 = scale.copy();\n      });\n      renderWatch.renderEnd('axis immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n\n    chart.axis = axis;\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      axisLabelDistance: {\n        get: function () {\n          return axisLabelDistance;\n        },\n        set: function (_) {\n          axisLabelDistance = _;\n        }\n      },\n      staggerLabels: {\n        get: function () {\n          return staggerLabels;\n        },\n        set: function (_) {\n          staggerLabels = _;\n        }\n      },\n      rotateLabels: {\n        get: function () {\n          return rotateLabels;\n        },\n        set: function (_) {\n          rotateLabels = _;\n        }\n      },\n      rotateYLabel: {\n        get: function () {\n          return rotateYLabel;\n        },\n        set: function (_) {\n          rotateYLabel = _;\n        }\n      },\n      showMaxMin: {\n        get: function () {\n          return showMaxMin;\n        },\n        set: function (_) {\n          showMaxMin = _;\n        }\n      },\n      axisLabel: {\n        get: function () {\n          return axisLabelText;\n        },\n        set: function (_) {\n          axisLabelText = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      ticks: {\n        get: function () {\n          return ticks;\n        },\n        set: function (_) {\n          ticks = _;\n        }\n      },\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      fontSize: {\n        get: function () {\n          return fontSize;\n        },\n        set: function (_) {\n          fontSize = _;\n        }\n      },\n      tickFormatMaxMin: {\n        get: function () {\n          return tickFormatMaxMin;\n        },\n        set: function (_) {\n          tickFormatMaxMin = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      },\n      scale: {\n        get: function () {\n          return scale;\n        },\n        set: function (_) {\n          scale = _;\n          axis.scale(scale);\n          isOrdinal = typeof scale.rangeBands === 'function';\n          nv.utils.inheritOptionsD3(chart, scale, ['domain', 'range', 'rangeBand', 'rangeBands']);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    nv.utils.inheritOptionsD3(chart, axis, ['orient', 'tickValues', 'tickSubdivide', 'tickSize', 'tickPadding', 'tickFormat']);\n    nv.utils.inheritOptionsD3(chart, scale, ['domain', 'range', 'rangeBand', 'rangeBands']);\n    return chart;\n  };\n\n  nv.models.boxPlot = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 960,\n        height = 500,\n        id = Math.floor(Math.random() * 10000),\n        // Create semi-unique ID in case user doesn't select one\n    xScale = d3.scale.ordinal(),\n        yScale = d3.scale.linear(),\n        getX = function (d) {\n      return d.label;\n    },\n        // Default data model selectors.\n    getQ1 = function (d) {\n      return d.values.Q1;\n    },\n        getQ2 = function (d) {\n      return d.values.Q2;\n    },\n        getQ3 = function (d) {\n      return d.values.Q3;\n    },\n        getWl = function (d) {\n      return d.values.whisker_low;\n    },\n        getWh = function (d) {\n      return d.values.whisker_high;\n    },\n        getColor = function (d) {\n      return d.color;\n    },\n        getOlItems = function (d) {\n      return d.values.outliers;\n    },\n        getOlValue = function (d, i, j) {\n      return d;\n    },\n        getOlLabel = function (d, i, j) {\n      return d;\n    },\n        getOlColor = function (d, i, j) {\n      return undefined;\n    },\n        color = nv.utils.defaultColor(),\n        container = null,\n        xDomain,\n        xRange,\n        yDomain,\n        yRange,\n        dispatch = d3.dispatch('elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd'),\n        duration = 250,\n        maxBoxWidth = null; //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var xScale0, yScale0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container); // Setup Scales\n\n        xScale.domain(xDomain || data.map(function (d, i) {\n          return getX(d, i);\n        })).rangeBands(xRange || [0, availableWidth], 0.1); // if we know yDomain, no need to calculate\n\n        var yData = [];\n\n        if (!yDomain) {\n          // (y-range is based on quartiles, whiskers and outliers)\n          var values = [],\n              yMin,\n              yMax;\n          data.forEach(function (d, i) {\n            var q1 = getQ1(d),\n                q3 = getQ3(d),\n                wl = getWl(d),\n                wh = getWh(d);\n            var olItems = getOlItems(d);\n\n            if (olItems) {\n              olItems.forEach(function (e, i) {\n                values.push(getOlValue(e, i, undefined));\n              });\n            }\n\n            if (wl) {\n              values.push(wl);\n            }\n\n            if (q1) {\n              values.push(q1);\n            }\n\n            if (q3) {\n              values.push(q3);\n            }\n\n            if (wh) {\n              values.push(wh);\n            }\n          });\n          yMin = d3.min(values);\n          yMax = d3.max(values);\n          yData = [yMin, yMax];\n        }\n\n        yScale.domain(yDomain || yData);\n        yScale.range(yRange || [availableHeight, 0]); //store old scales if they exist\n\n        xScale0 = xScale0 || xScale;\n        yScale0 = yScale0 || yScale.copy().range([yScale(0), yScale(0)]); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        var boxplots = wrap.selectAll('.nv-boxplot').data(function (d) {\n          return d;\n        });\n        var boxEnter = boxplots.enter().append('g').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n        boxplots.attr('class', 'nv-boxplot').attr('transform', function (d, i, j) {\n          return 'translate(' + (xScale(getX(d, i)) + xScale.rangeBand() * 0.05) + ', 0)';\n        }).classed('hover', function (d) {\n          return d.hover;\n        });\n        boxplots.watchTransition(renderWatch, 'nv-boxplot: boxplots').style('stroke-opacity', 1).style('fill-opacity', 0.75).delay(function (d, i) {\n          return i * duration / data.length;\n        }).attr('transform', function (d, i) {\n          return 'translate(' + (xScale(getX(d, i)) + xScale.rangeBand() * 0.05) + ', 0)';\n        });\n        boxplots.exit().remove(); // ----- add the SVG elements for each boxPlot -----\n        // conditionally append whisker lines\n\n        boxEnter.each(function (d, i) {\n          var box = d3.select(this);\n          [getWl, getWh].forEach(function (f) {\n            if (f(d) !== undefined && f(d) !== null) {\n              var key = f === getWl ? 'low' : 'high';\n              box.append('line').style('stroke', getColor(d) || color(d, i)).attr('class', 'nv-boxplot-whisker nv-boxplot-' + key);\n              box.append('line').style('stroke', getColor(d) || color(d, i)).attr('class', 'nv-boxplot-tick nv-boxplot-' + key);\n            }\n          });\n        });\n\n        var box_width = function () {\n          return maxBoxWidth === null ? xScale.rangeBand() * 0.9 : Math.min(75, xScale.rangeBand() * 0.9);\n        };\n\n        var box_left = function () {\n          return xScale.rangeBand() * 0.45 - box_width() / 2;\n        };\n\n        var box_right = function () {\n          return xScale.rangeBand() * 0.45 + box_width() / 2;\n        }; // update whisker lines and ticks\n\n\n        [getWl, getWh].forEach(function (f) {\n          var key = f === getWl ? 'low' : 'high';\n          var endpoint = f === getWl ? getQ1 : getQ3;\n          boxplots.select('line.nv-boxplot-whisker.nv-boxplot-' + key).watchTransition(renderWatch, 'nv-boxplot: boxplots').attr('x1', xScale.rangeBand() * 0.45).attr('y1', function (d, i) {\n            return yScale(f(d));\n          }).attr('x2', xScale.rangeBand() * 0.45).attr('y2', function (d, i) {\n            return yScale(endpoint(d));\n          });\n          boxplots.select('line.nv-boxplot-tick.nv-boxplot-' + key).watchTransition(renderWatch, 'nv-boxplot: boxplots').attr('x1', box_left).attr('y1', function (d, i) {\n            return yScale(f(d));\n          }).attr('x2', box_right).attr('y2', function (d, i) {\n            return yScale(f(d));\n          });\n        });\n        [getWl, getWh].forEach(function (f) {\n          var key = f === getWl ? 'low' : 'high';\n          boxEnter.selectAll('.nv-boxplot-' + key).on('mouseover', function (d, i, j) {\n            d3.select(this).classed('hover', true);\n            dispatch.elementMouseover({\n              series: {\n                key: f(d),\n                color: getColor(d) || color(d, j)\n              },\n              e: d3.event\n            });\n          }).on('mouseout', function (d, i, j) {\n            d3.select(this).classed('hover', false);\n            dispatch.elementMouseout({\n              series: {\n                key: f(d),\n                color: getColor(d) || color(d, j)\n              },\n              e: d3.event\n            });\n          }).on('mousemove', function (d, i) {\n            dispatch.elementMousemove({\n              e: d3.event\n            });\n          });\n        }); // boxes\n\n        boxEnter.append('rect').attr('class', 'nv-boxplot-box') // tooltip events\n        .on('mouseover', function (d, i) {\n          d3.select(this).classed('hover', true);\n          dispatch.elementMouseover({\n            key: getX(d),\n            value: getX(d),\n            series: [{\n              key: 'Q3',\n              value: getQ3(d),\n              color: getColor(d) || color(d, i)\n            }, {\n              key: 'Q2',\n              value: getQ2(d),\n              color: getColor(d) || color(d, i)\n            }, {\n              key: 'Q1',\n              value: getQ1(d),\n              color: getColor(d) || color(d, i)\n            }],\n            data: d,\n            index: i,\n            e: d3.event\n          });\n        }).on('mouseout', function (d, i) {\n          d3.select(this).classed('hover', false);\n          dispatch.elementMouseout({\n            key: getX(d),\n            value: getX(d),\n            series: [{\n              key: 'Q3',\n              value: getQ3(d),\n              color: getColor(d) || color(d, i)\n            }, {\n              key: 'Q2',\n              value: getQ2(d),\n              color: getColor(d) || color(d, i)\n            }, {\n              key: 'Q1',\n              value: getQ1(d),\n              color: getColor(d) || color(d, i)\n            }],\n            data: d,\n            index: i,\n            e: d3.event\n          });\n        }).on('mousemove', function (d, i) {\n          dispatch.elementMousemove({\n            e: d3.event\n          });\n        }); // box transitions\n\n        boxplots.select('rect.nv-boxplot-box').watchTransition(renderWatch, 'nv-boxplot: boxes').attr('y', function (d, i) {\n          return yScale(getQ3(d));\n        }).attr('width', box_width).attr('x', box_left).attr('height', function (d, i) {\n          return Math.abs(yScale(getQ3(d)) - yScale(getQ1(d))) || 1;\n        }).style('fill', function (d, i) {\n          return getColor(d) || color(d, i);\n        }).style('stroke', function (d, i) {\n          return getColor(d) || color(d, i);\n        }); // median line\n\n        boxEnter.append('line').attr('class', 'nv-boxplot-median');\n        boxplots.select('line.nv-boxplot-median').watchTransition(renderWatch, 'nv-boxplot: boxplots line').attr('x1', box_left).attr('y1', function (d, i) {\n          return yScale(getQ2(d));\n        }).attr('x2', box_right).attr('y2', function (d, i) {\n          return yScale(getQ2(d));\n        }); // outliers\n\n        var outliers = boxplots.selectAll('.nv-boxplot-outlier').data(function (d) {\n          return getOlItems(d) || [];\n        });\n        outliers.enter().append('circle').style('fill', function (d, i, j) {\n          return getOlColor(d, i, j) || color(d, j);\n        }).style('stroke', function (d, i, j) {\n          return getOlColor(d, i, j) || color(d, j);\n        }).style('z-index', 9000).on('mouseover', function (d, i, j) {\n          d3.select(this).classed('hover', true);\n          dispatch.elementMouseover({\n            series: {\n              key: getOlLabel(d, i, j),\n              color: getOlColor(d, i, j) || color(d, j)\n            },\n            e: d3.event\n          });\n        }).on('mouseout', function (d, i, j) {\n          d3.select(this).classed('hover', false);\n          dispatch.elementMouseout({\n            series: {\n              key: getOlLabel(d, i, j),\n              color: getOlColor(d, i, j) || color(d, j)\n            },\n            e: d3.event\n          });\n        }).on('mousemove', function (d, i) {\n          dispatch.elementMousemove({\n            e: d3.event\n          });\n        });\n        outliers.attr('class', 'nv-boxplot-outlier');\n        outliers.watchTransition(renderWatch, 'nv-boxplot: nv-boxplot-outlier').attr('cx', xScale.rangeBand() * 0.45).attr('cy', function (d, i, j) {\n          return yScale(getOlValue(d, i, j));\n        }).attr('r', '3');\n        outliers.exit().remove(); //store old scales for use in transitions on update\n\n        xScale0 = xScale.copy();\n        yScale0 = yScale.copy();\n      });\n      renderWatch.renderEnd('nv-boxplot immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      maxBoxWidth: {\n        get: function () {\n          return maxBoxWidth;\n        },\n        set: function (_) {\n          maxBoxWidth = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      q1: {\n        get: function () {\n          return getQ1;\n        },\n        set: function (_) {\n          getQ1 = _;\n        }\n      },\n      q2: {\n        get: function () {\n          return getQ2;\n        },\n        set: function (_) {\n          getQ2 = _;\n        }\n      },\n      q3: {\n        get: function () {\n          return getQ3;\n        },\n        set: function (_) {\n          getQ3 = _;\n        }\n      },\n      wl: {\n        get: function () {\n          return getWl;\n        },\n        set: function (_) {\n          getWl = _;\n        }\n      },\n      wh: {\n        get: function () {\n          return getWh;\n        },\n        set: function (_) {\n          getWh = _;\n        }\n      },\n      itemColor: {\n        get: function () {\n          return getColor;\n        },\n        set: function (_) {\n          getColor = _;\n        }\n      },\n      outliers: {\n        get: function () {\n          return getOlItems;\n        },\n        set: function (_) {\n          getOlItems = _;\n        }\n      },\n      outlierValue: {\n        get: function () {\n          return getOlValue;\n        },\n        set: function (_) {\n          getOlValue = _;\n        }\n      },\n      outlierLabel: {\n        get: function () {\n          return getOlLabel;\n        },\n        set: function (_) {\n          getOlLabel = _;\n        }\n      },\n      outlierColor: {\n        get: function () {\n          return getOlColor;\n        },\n        set: function (_) {\n          getOlColor = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return xScale;\n        },\n        set: function (_) {\n          xScale = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return yScale;\n        },\n        set: function (_) {\n          yScale = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      // rectClass: {get: function(){return rectClass;}, set: function(_){rectClass=_;}},\n      y: {\n        get: function () {\n          console.warn('BoxPlot \\'y\\' chart option is deprecated. Please use model overrides instead.');\n          return {};\n        },\n        set: function (_) {\n          console.warn('BoxPlot \\'y\\' chart option is deprecated. Please use model overrides instead.');\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.boxPlotChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var boxplot = nv.models.boxPlot(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis();\n    var margin = {\n      top: 15,\n      right: 10,\n      bottom: 50,\n      left: 60\n    },\n        width = null,\n        height = null,\n        color = nv.utils.getColor(),\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        staggerLabels = false,\n        tooltip = nv.models.tooltip(),\n        x,\n        y,\n        noData = 'No Data Available.',\n        dispatch = d3.dispatch('beforeUpdate', 'renderEnd'),\n        duration = 250;\n    xAxis.orient('bottom').showMaxMin(false).tickFormat(function (d) {\n      return d;\n    });\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left').tickFormat(d3.format(',.1f'));\n    tooltip.duration(0); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(boxplot);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = (width || parseInt(container.style('width')) || 960) - margin.left - margin.right;\n        var availableHeight = (height || parseInt(container.style('height')) || 400) - margin.top - margin.bottom;\n\n        chart.update = function () {\n          dispatch.beforeUpdate();\n          container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this; // TODO still need to find a way to validate quartile data presence using boxPlot callbacks.\n        // Display No Data message if there's nothing to show. (quartiles required at minimum).\n\n        if (!data || !data.length) {\n          var noDataText = container.selectAll('.nv-noData').data([noData]);\n          noDataText.enter().append('text').attr('class', 'nvd3 nv-noData').attr('dy', '-.7em').style('text-anchor', 'middle');\n          noDataText.attr('x', margin.left + availableWidth / 2).attr('y', margin.top + availableHeight / 2).text(function (d) {\n            return d;\n          });\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = boxplot.xScale();\n        y = boxplot.yScale().clamp(true); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-boxPlotWithAxes').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-boxPlotWithAxes').append('g');\n        var defsEnter = gEnter.append('defs');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis').append('g').attr('class', 'nv-zeroLine').append('line');\n        gEnter.append('g').attr('class', 'nv-barsWrap');\n        g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        if (rightAlignYAxis) {\n          g.select('.nv-y.nv-axis').attr('transform', 'translate(' + availableWidth + ',0)');\n        } // Main Chart Component(s)\n\n\n        boxplot.width(availableWidth).height(availableHeight);\n        var barsWrap = g.select('.nv-barsWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        }));\n        barsWrap.transition().call(boxplot);\n        defsEnter.append('clipPath').attr('id', 'nv-x-label-clip-' + boxplot.id()).append('rect');\n        g.select('#nv-x-label-clip-' + boxplot.id() + ' rect').attr('width', x.rangeBand() * (staggerLabels ? 2 : 1)).attr('height', 16).attr('x', -x.rangeBand() / (staggerLabels ? 1 : 2)); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x).ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')');\n          g.select('.nv-x.nv-axis').call(xAxis);\n          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\n          if (staggerLabels) {\n            xTicks.selectAll('text').attr('transform', function (d, i, j) {\n              return 'translate(0,' + (j % 2 === 0 ? '5' : '17') + ')';\n            });\n          }\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y).ticks(Math.floor(availableHeight / 36)) // can't use nv.utils.calcTicksY with Object data\n          .tickSize(-availableWidth, 0);\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } // Zero line\n\n\n        g.select('.nv-zeroLine line').attr('x1', 0).attr('x2', availableWidth).attr('y1', y(0)).attr('y2', y(0)); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n      });\n      renderWatch.renderEnd('nv-boxplot chart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    boxplot.dispatch.on('elementMouseover.tooltip', function (evt) {\n      tooltip.data(evt).hidden(false);\n    });\n    boxplot.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.data(evt).hidden(true);\n    });\n    boxplot.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.boxplot = boxplot;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      staggerLabels: {\n        get: function () {\n          return staggerLabels;\n        },\n        set: function (_) {\n          staggerLabels = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      tooltipContent: {\n        get: function () {\n          return tooltip;\n        },\n        set: function (_) {\n          tooltip = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          boxplot.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          boxplot.color(color);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(_ ? 'right' : 'left');\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, boxplot);\n    nv.utils.initOptions(chart);\n    return chart;\n  }; // Chart design based on the recommendations of Stephen Few. Implementation\n  // based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n  // http://projects.instantcognition.com/protovis/bulletchart/\n\n\n  nv.models.bullet = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        orient = 'left' // TODO top & bottom\n    ,\n        reverse = false,\n        ranges = function (d) {\n      return d.ranges;\n    },\n        markers = function (d) {\n      return d.markers ? d.markers : [];\n    },\n        markerLines = function (d) {\n      return d.markerLines ? d.markerLines : [0];\n    },\n        measures = function (d) {\n      return d.measures;\n    },\n        rangeLabels = function (d) {\n      return d.rangeLabels ? d.rangeLabels : [];\n    },\n        markerLabels = function (d) {\n      return d.markerLabels ? d.markerLabels : [];\n    },\n        markerLineLabels = function (d) {\n      return d.markerLineLabels ? d.markerLineLabels : [];\n    },\n        measureLabels = function (d) {\n      return d.measureLabels ? d.measureLabels : [];\n    },\n        forceX = [0] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n    ,\n        width = 380,\n        height = 30,\n        container = null,\n        tickFormat = null,\n        color = nv.utils.getColor(['#1f77b4']),\n        dispatch = d3.dispatch('elementMouseover', 'elementMouseout', 'elementMousemove'),\n        defaultRangeLabels = [\"Maximum\", \"Mean\", \"Minimum\"],\n        legacyRangeClassNames = [\"Max\", \"Avg\", \"Min\"],\n        duration = 1000;\n\n    function sortLabels(labels, values) {\n      var lz = labels.slice();\n      labels.sort(function (a, b) {\n        var iA = lz.indexOf(a);\n        var iB = lz.indexOf(b);\n        return d3.descending(values[iA], values[iB]);\n      });\n    }\n\n    ;\n\n    function chart(selection) {\n      selection.each(function (d, i) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container);\n        var rangez = ranges.call(this, d, i).slice(),\n            markerz = markers.call(this, d, i).slice(),\n            markerLinez = markerLines.call(this, d, i).slice(),\n            measurez = measures.call(this, d, i).slice(),\n            rangeLabelz = rangeLabels.call(this, d, i).slice(),\n            markerLabelz = markerLabels.call(this, d, i).slice(),\n            markerLineLabelz = markerLineLabels.call(this, d, i).slice(),\n            measureLabelz = measureLabels.call(this, d, i).slice(); // Sort labels according to their sorted values\n\n        sortLabels(rangeLabelz, rangez);\n        sortLabels(markerLabelz, markerz);\n        sortLabels(markerLineLabelz, markerLinez);\n        sortLabels(measureLabelz, measurez); // sort values descending\n\n        rangez.sort(d3.descending);\n        markerz.sort(d3.descending);\n        markerLinez.sort(d3.descending);\n        measurez.sort(d3.descending); // Setup Scales\n        // Compute the new x-scale.\n\n        var x1 = d3.scale.linear().domain(d3.extent(d3.merge([forceX, rangez]))).range(reverse ? [availableWidth, 0] : [0, availableWidth]); // Retrieve the old x-scale, if this is an update.\n\n        var x0 = this.__chart__ || d3.scale.linear().domain([0, Infinity]).range(x1.range()); // Stash the new scale.\n\n        this.__chart__ = x1;\n        var rangeMin = d3.min(rangez),\n            //rangez[2]\n        rangeMax = d3.max(rangez),\n            //rangez[0]\n        rangeAvg = rangez[1]; // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-bullet').data([d]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bullet');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n\n        for (var i = 0, il = rangez.length; i < il; i++) {\n          var rangeClassNames = 'nv-range nv-range' + i;\n\n          if (i <= 2) {\n            rangeClassNames = rangeClassNames + ' nv-range' + legacyRangeClassNames[i];\n          }\n\n          gEnter.append('rect').attr('class', rangeClassNames);\n        }\n\n        gEnter.append('rect').attr('class', 'nv-measure');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        var w0 = function (d) {\n          return Math.abs(x0(d) - x0(0));\n        },\n            // TODO: could optimize by precalculating x0(0) and x1(0)\n        w1 = function (d) {\n          return Math.abs(x1(d) - x1(0));\n        };\n\n        var xp0 = function (d) {\n          return d < 0 ? x0(d) : x0(0);\n        },\n            xp1 = function (d) {\n          return d < 0 ? x1(d) : x1(0);\n        };\n\n        for (var i = 0, il = rangez.length; i < il; i++) {\n          var range = rangez[i];\n          g.select('rect.nv-range' + i).datum(range).attr('height', availableHeight).transition().duration(duration).attr('width', w1(range)).attr('x', xp1(range));\n        }\n\n        g.select('rect.nv-measure').style('fill', color).attr('height', availableHeight / 3).attr('y', availableHeight / 3).on('mouseover', function () {\n          dispatch.elementMouseover({\n            value: measurez[0],\n            label: measureLabelz[0] || 'Current',\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mousemove', function () {\n          dispatch.elementMousemove({\n            value: measurez[0],\n            label: measureLabelz[0] || 'Current',\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function () {\n          dispatch.elementMouseout({\n            value: measurez[0],\n            label: measureLabelz[0] || 'Current',\n            color: d3.select(this).style(\"fill\")\n          });\n        }).transition().duration(duration).attr('width', measurez < 0 ? x1(0) - x1(measurez[0]) : x1(measurez[0]) - x1(0)).attr('x', xp1(measurez));\n        var h3 = availableHeight / 6;\n        var markerData = markerz.map(function (marker, index) {\n          return {\n            value: marker,\n            label: markerLabelz[index]\n          };\n        });\n        gEnter.selectAll(\"path.nv-markerTriangle\").data(markerData).enter().append('path').attr('class', 'nv-markerTriangle').attr('d', 'M0,' + h3 + 'L' + h3 + ',' + -h3 + ' ' + -h3 + ',' + -h3 + 'Z').on('mouseover', function (d) {\n          dispatch.elementMouseover({\n            value: d.value,\n            label: d.label || 'Previous',\n            color: d3.select(this).style(\"fill\"),\n            pos: [x1(d.value), availableHeight / 2]\n          });\n        }).on('mousemove', function (d) {\n          dispatch.elementMousemove({\n            value: d.value,\n            label: d.label || 'Previous',\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          dispatch.elementMouseout({\n            value: d.value,\n            label: d.label || 'Previous',\n            color: d3.select(this).style(\"fill\")\n          });\n        });\n        g.selectAll(\"path.nv-markerTriangle\").data(markerData).transition().duration(duration).attr('transform', function (d) {\n          return 'translate(' + x1(d.value) + ',' + availableHeight / 2 + ')';\n        });\n        var markerLinesData = markerLinez.map(function (marker, index) {\n          return {\n            value: marker,\n            label: markerLineLabelz[index]\n          };\n        });\n        gEnter.selectAll(\"line.nv-markerLine\").data(markerLinesData).enter().append('line').attr('cursor', '').attr('class', 'nv-markerLine').attr('x1', function (d) {\n          return x1(d.value);\n        }).attr('y1', '2').attr('x2', function (d) {\n          return x1(d.value);\n        }).attr('y2', availableHeight - 2).on('mouseover', function (d) {\n          dispatch.elementMouseover({\n            value: d.value,\n            label: d.label || 'Previous',\n            color: d3.select(this).style(\"fill\"),\n            pos: [x1(d.value), availableHeight / 2]\n          });\n        }).on('mousemove', function (d) {\n          dispatch.elementMousemove({\n            value: d.value,\n            label: d.label || 'Previous',\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          dispatch.elementMouseout({\n            value: d.value,\n            label: d.label || 'Previous',\n            color: d3.select(this).style(\"fill\")\n          });\n        });\n        g.selectAll(\"line.nv-markerLine\").data(markerLinesData).transition().duration(duration).attr('x1', function (d) {\n          return x1(d.value);\n        }).attr('x2', function (d) {\n          return x1(d.value);\n        });\n        wrap.selectAll('.nv-range').on('mouseover', function (d, i) {\n          var label = rangeLabelz[i] || defaultRangeLabels[i];\n          dispatch.elementMouseover({\n            value: d,\n            label: label,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mousemove', function () {\n          dispatch.elementMousemove({\n            value: measurez[0],\n            label: measureLabelz[0] || 'Previous',\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          var label = rangeLabelz[i] || defaultRangeLabels[i];\n          dispatch.elementMouseout({\n            value: d,\n            label: label,\n            color: d3.select(this).style(\"fill\")\n          });\n        });\n      });\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      ranges: {\n        get: function () {\n          return ranges;\n        },\n        set: function (_) {\n          ranges = _;\n        }\n      },\n      // ranges (bad, satisfactory, good)\n      markers: {\n        get: function () {\n          return markers;\n        },\n        set: function (_) {\n          markers = _;\n        }\n      },\n      // markers (previous, goal)\n      measures: {\n        get: function () {\n          return measures;\n        },\n        set: function (_) {\n          measures = _;\n        }\n      },\n      // measures (actual, forecast)\n      forceX: {\n        get: function () {\n          return forceX;\n        },\n        set: function (_) {\n          forceX = _;\n        }\n      },\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      tickFormat: {\n        get: function () {\n          return tickFormat;\n        },\n        set: function (_) {\n          tickFormat = _;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      orient: {\n        get: function () {\n          return orient;\n        },\n        set: function (_) {\n          // left, right, top, bottom\n          orient = _;\n          reverse = orient == 'right' || orient == 'bottom';\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  }; // Chart design based on the recommendations of Stephen Few. Implementation\n  // based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n  // http://projects.instantcognition.com/protovis/bulletchart/\n\n\n  nv.models.bulletChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var bullet = nv.models.bullet();\n    var tooltip = nv.models.tooltip();\n\n    var orient = 'left' // TODO top & bottom\n    ,\n        reverse = false,\n        margin = {\n      top: 5,\n      right: 40,\n      bottom: 20,\n      left: 120\n    },\n        ranges = function (d) {\n      return d.ranges;\n    },\n        markers = function (d) {\n      return d.markers ? d.markers : [];\n    },\n        measures = function (d) {\n      return d.measures;\n    },\n        width = null,\n        height = 55,\n        tickFormat = null,\n        ticks = null,\n        noData = null,\n        dispatch = d3.dispatch();\n\n    tooltip.duration(0).headerEnabled(false);\n\n    function chart(selection) {\n      selection.each(function (d, i) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = height - margin.top - margin.bottom,\n            that = this;\n\n        chart.update = function () {\n          chart(selection);\n        };\n\n        chart.container = this; // Display No Data message if there's nothing to show.\n\n        if (!d || !ranges.call(this, d, i)) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        }\n\n        var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\n            markerz = markers.call(this, d, i).slice().sort(d3.descending),\n            measurez = measures.call(this, d, i).slice().sort(d3.descending); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-bulletChart').data([d]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bulletChart');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-bulletWrap');\n        gEnter.append('g').attr('class', 'nv-titles');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Compute the new x-scale.\n\n        var x1 = d3.scale.linear().domain([0, Math.max(rangez[0], markerz[0] || 0, measurez[0])]) // TODO: need to allow forceX and forceY, and xDomain, yDomain\n        .range(reverse ? [availableWidth, 0] : [0, availableWidth]); // Retrieve the old x-scale, if this is an update.\n\n        var x0 = this.__chart__ || d3.scale.linear().domain([0, Infinity]).range(x1.range()); // Stash the new scale.\n\n        this.__chart__ = x1;\n\n        var w0 = function (d) {\n          return Math.abs(x0(d) - x0(0));\n        },\n            // TODO: could optimize by precalculating x0(0) and x1(0)\n        w1 = function (d) {\n          return Math.abs(x1(d) - x1(0));\n        };\n\n        var title = gEnter.select('.nv-titles').append('g').attr('text-anchor', 'end').attr('transform', 'translate(-6,' + (height - margin.top - margin.bottom) / 2 + ')');\n        title.append('text').attr('class', 'nv-title').text(function (d) {\n          return d.title;\n        });\n        title.append('text').attr('class', 'nv-subtitle').attr('dy', '1em').text(function (d) {\n          return d.subtitle;\n        });\n        bullet.width(availableWidth).height(availableHeight);\n        var bulletWrap = g.select('.nv-bulletWrap');\n        d3.transition(bulletWrap).call(bullet); // Compute the tick format.\n\n        var format = tickFormat || x1.tickFormat(availableWidth / 100); // Update the tick groups.\n\n        var tick = g.selectAll('g.nv-tick').data(x1.ticks(ticks ? ticks : availableWidth / 50), function (d) {\n          return this.textContent || format(d);\n        }); // Initialize the ticks with the old scale, x0.\n\n        var tickEnter = tick.enter().append('g').attr('class', 'nv-tick').attr('transform', function (d) {\n          return 'translate(' + x0(d) + ',0)';\n        }).style('opacity', 1e-6);\n        tickEnter.append('line').attr('y1', availableHeight).attr('y2', availableHeight * 7 / 6);\n        tickEnter.append('text').attr('text-anchor', 'middle').attr('dy', '1em').attr('y', availableHeight * 7 / 6).text(format); // Transition the updating ticks to the new scale, x1.\n\n        var tickUpdate = d3.transition(tick).transition().duration(bullet.duration()).attr('transform', function (d) {\n          return 'translate(' + x1(d) + ',0)';\n        }).style('opacity', 1);\n        tickUpdate.select('line').attr('y1', availableHeight).attr('y2', availableHeight * 7 / 6);\n        tickUpdate.select('text').attr('y', availableHeight * 7 / 6); // Transition the exiting ticks to the new scale, x1.\n\n        d3.transition(tick.exit()).transition().duration(bullet.duration()).attr('transform', function (d) {\n          return 'translate(' + x1(d) + ',0)';\n        }).style('opacity', 1e-6).remove();\n      });\n      d3.timer.flush();\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    bullet.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt['series'] = {\n        key: evt.label,\n        value: evt.value,\n        color: evt.color\n      };\n      tooltip.data(evt).hidden(false);\n    });\n    bullet.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    bullet.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.bullet = bullet;\n    chart.dispatch = dispatch;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      ranges: {\n        get: function () {\n          return ranges;\n        },\n        set: function (_) {\n          ranges = _;\n        }\n      },\n      // ranges (bad, satisfactory, good)\n      markers: {\n        get: function () {\n          return markers;\n        },\n        set: function (_) {\n          markers = _;\n        }\n      },\n      // markers (previous, goal)\n      measures: {\n        get: function () {\n          return measures;\n        },\n        set: function (_) {\n          measures = _;\n        }\n      },\n      // measures (actual, forecast)\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      tickFormat: {\n        get: function () {\n          return tickFormat;\n        },\n        set: function (_) {\n          tickFormat = _;\n        }\n      },\n      ticks: {\n        get: function () {\n          return ticks;\n        },\n        set: function (_) {\n          ticks = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      orient: {\n        get: function () {\n          return orient;\n        },\n        set: function (_) {\n          // left, right, top, bottom\n          orient = _;\n          reverse = orient == 'right' || orient == 'bottom';\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, bullet);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.candlestickBar = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = null,\n        height = null,\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container,\n        x = d3.scale.linear(),\n        y = d3.scale.linear(),\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        getOpen = function (d) {\n      return d.open;\n    },\n        getClose = function (d) {\n      return d.close;\n    },\n        getHigh = function (d) {\n      return d.high;\n    },\n        getLow = function (d) {\n      return d.low;\n    },\n        forceX = [],\n        forceY = [],\n        padData = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n    ,\n        clipEdge = true,\n        color = nv.utils.defaultColor(),\n        interactive = false,\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd', 'chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    function chart(selection) {\n      selection.each(function (data) {\n        container = d3.select(this);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        nv.utils.initSVG(container); // Width of the candlestick bars.\n\n        var barWidth = availableWidth / data[0].values.length * .45; // Setup Scales\n\n        x.domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX)));\n        if (padData) x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5) / data[0].values.length]);else x.range(xRange || [5 + barWidth / 2, availableWidth - barWidth / 2 - 5]);\n        y.domain(yDomain || [d3.min(data[0].values.map(getLow).concat(forceY)), d3.max(data[0].values.map(getHigh).concat(forceY))]).range(yRange || [availableHeight, 0]); // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\n        if (x.domain()[0] === x.domain()[1]) x.domain()[0] ? x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01]) : x.domain([-1, 1]);\n        if (y.domain()[0] === y.domain()[1]) y.domain()[0] ? y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01]) : y.domain([-1, 1]); // Setup containers and skeleton of chart\n\n        var wrap = d3.select(this).selectAll('g.nv-wrap.nv-candlestickBar').data([data[0].values]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-candlestickBar');\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-ticks');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        container.on('click', function (d, i) {\n          dispatch.chartClick({\n            data: d,\n            index: i,\n            pos: d3.event,\n            id: id\n          });\n        });\n        defsEnter.append('clipPath').attr('id', 'nv-chart-clip-path-' + id).append('rect');\n        wrap.select('#nv-chart-clip-path-' + id + ' rect').attr('width', availableWidth).attr('height', availableHeight);\n        g.attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n        var ticks = wrap.select('.nv-ticks').selectAll('.nv-tick').data(function (d) {\n          return d;\n        });\n        ticks.exit().remove();\n        var tickGroups = ticks.enter().append('g'); // The colors are currently controlled by CSS.\n\n        ticks.attr('class', function (d, i, j) {\n          return (getOpen(d, i) > getClose(d, i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i;\n        });\n        var lines = tickGroups.append('line').attr('class', 'nv-candlestick-lines').attr('transform', function (d, i) {\n          return 'translate(' + x(getX(d, i)) + ',0)';\n        }).attr('x1', 0).attr('y1', function (d, i) {\n          return y(getHigh(d, i));\n        }).attr('x2', 0).attr('y2', function (d, i) {\n          return y(getLow(d, i));\n        });\n        var rects = tickGroups.append('rect').attr('class', 'nv-candlestick-rects nv-bars').attr('transform', function (d, i) {\n          return 'translate(' + (x(getX(d, i)) - barWidth / 2) + ',' + (y(getY(d, i)) - (getOpen(d, i) > getClose(d, i) ? y(getClose(d, i)) - y(getOpen(d, i)) : 0)) + ')';\n        }).attr('x', 0).attr('y', 0).attr('width', barWidth).attr('height', function (d, i) {\n          var open = getOpen(d, i);\n          var close = getClose(d, i);\n          return open > close ? y(close) - y(open) : y(open) - y(close);\n        });\n        ticks.select('.nv-candlestick-lines').transition().attr('transform', function (d, i) {\n          return 'translate(' + x(getX(d, i)) + ',0)';\n        }).attr('x1', 0).attr('y1', function (d, i) {\n          return y(getHigh(d, i));\n        }).attr('x2', 0).attr('y2', function (d, i) {\n          return y(getLow(d, i));\n        });\n        ticks.select('.nv-candlestick-rects').transition().attr('transform', function (d, i) {\n          return 'translate(' + (x(getX(d, i)) - barWidth / 2) + ',' + (y(getY(d, i)) - (getOpen(d, i) > getClose(d, i) ? y(getClose(d, i)) - y(getOpen(d, i)) : 0)) + ')';\n        }).attr('x', 0).attr('y', 0).attr('width', barWidth).attr('height', function (d, i) {\n          var open = getOpen(d, i);\n          var close = getClose(d, i);\n          return open > close ? y(close) - y(open) : y(open) - y(close);\n        });\n      });\n      return chart;\n    } //Create methods to allow outside functions to highlight a specific bar.\n\n\n    chart.highlightPoint = function (pointIndex, isHoverOver) {\n      chart.clearHighlights();\n      container.select(\".nv-candlestickBar .nv-tick-0-\" + pointIndex).classed(\"hover\", isHoverOver);\n    };\n\n    chart.clearHighlights = function () {\n      container.select(\".nv-candlestickBar .nv-tick.hover\").classed(\"hover\", false);\n    }; //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      forceX: {\n        get: function () {\n          return forceX;\n        },\n        set: function (_) {\n          forceX = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      padData: {\n        get: function () {\n          return padData;\n        },\n        set: function (_) {\n          padData = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      interactive: {\n        get: function () {\n          return interactive;\n        },\n        set: function (_) {\n          interactive = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n        }\n      },\n      open: {\n        get: function () {\n          return getOpen();\n        },\n        set: function (_) {\n          getOpen = _;\n        }\n      },\n      close: {\n        get: function () {\n          return getClose();\n        },\n        set: function (_) {\n          getClose = _;\n        }\n      },\n      high: {\n        get: function () {\n          return getHigh;\n        },\n        set: function (_) {\n          getHigh = _;\n        }\n      },\n      low: {\n        get: function () {\n          return getLow;\n        },\n        set: function (_) {\n          getLow = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top != undefined ? _.top : margin.top;\n          margin.right = _.right != undefined ? _.right : margin.right;\n          margin.bottom = _.bottom != undefined ? _.bottom : margin.bottom;\n          margin.left = _.left != undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.cumulativeLineChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var lines = nv.models.line(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend(),\n        controls = nv.models.legend(),\n        interactiveLayer = nv.interactiveGuideline(),\n        tooltip = nv.models.tooltip();\n\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        color = nv.utils.defaultColor(),\n        width = null,\n        height = null,\n        showLegend = true,\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        showControls = true,\n        useInteractiveGuideline = false,\n        rescaleY = true,\n        x //can be accessed via chart.xScale()\n    ,\n        y //can be accessed via chart.yScale()\n    ,\n        id = lines.id(),\n        state = nv.utils.state(),\n        defaultState = null,\n        noData = null,\n        average = function (d) {\n      return d.average;\n    },\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'),\n        transitionDuration = 250,\n        duration = 250,\n        noErrorCheck = false //if set to TRUE, will bypass an error check in the indexify function.\n    ;\n\n    state.index = 0;\n    state.rescaleY = rescaleY;\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n    tooltip.valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    controls.updateState(false); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var dx = d3.scale.linear(),\n        index = {\n      i: 0,\n      x: 0\n    },\n        renderWatch = nv.utils.renderWatch(dispatch, duration),\n        currentYDomain;\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          }),\n          index: index.i,\n          rescaleY: rescaleY\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.index !== undefined) index.i = state.index;\n        if (state.rescaleY !== undefined) rescaleY = state.rescaleY;\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(lines);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        container.classed('nv-chart-' + id, true);\n        var that = this;\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          if (duration === 0) container.call(chart);else container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disableddisabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        }\n\n        var indexDrag = d3.behavior.drag().on('dragstart', dragStart).on('drag', dragMove).on('dragend', dragEnd);\n\n        function dragStart(d, i) {\n          d3.select(chart.container).style('cursor', 'ew-resize');\n        }\n\n        function dragMove(d, i) {\n          index.x = d3.event.x;\n          index.i = Math.round(dx.invert(index.x));\n          updateZero();\n        }\n\n        function dragEnd(d, i) {\n          d3.select(chart.container).style('cursor', 'auto'); // update state and send stateChange with new index\n\n          state.index = index.i;\n          dispatch.stateChange(state);\n        } // Display No Data message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = lines.xScale();\n        y = lines.yScale();\n        dx.domain([0, data[0].values.length - 1]) //Assumes all series have same length\n        .range([0, availableWidth]).clamp(true);\n        var data = indexify(index.i, data); // initialize the starting yDomain for the not-rescale case after indexify (to have calculated point.display)\n\n        if (typeof currentYDomain === \"undefined\") {\n          currentYDomain = getCurrentYDomain(data);\n        }\n\n        if (!rescaleY) {\n          lines.yDomain(currentYDomain);\n          lines.clipEdge(true);\n        } else {\n          lines.yDomain(null);\n        } // Setup containers and skeleton of chart\n\n\n        var interactivePointerEvents = useInteractiveGuideline ? \"none\" : \"all\";\n        var wrap = container.selectAll('g.nv-wrap.nv-cumulativeLine').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-cumulativeLine').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-interactive');\n        gEnter.append('g').attr('class', 'nv-x nv-axis').style(\"pointer-events\", \"none\");\n        gEnter.append('g').attr('class', 'nv-y nv-axis');\n        gEnter.append('g').attr('class', 'nv-background');\n        gEnter.append('g').attr('class', 'nv-linesWrap').style(\"pointer-events\", interactivePointerEvents);\n        gEnter.append('g').attr('class', 'nv-avgLinesWrap').style(\"pointer-events\", \"none\");\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        gEnter.append('g').attr('class', 'nv-controlsWrap'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          legend.width(availableWidth);\n          g.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n          }\n\n          g.select('.nv-legendWrap').attr('transform', 'translate(0,' + -margin.top + ')');\n        } // Controls\n\n\n        if (!showControls) {\n          g.select('.nv-controlsWrap').selectAll('*').remove();\n        } else {\n          var controlsData = [{\n            key: 'Re-scale y-axis',\n            disabled: !rescaleY\n          }];\n          controls.width(140).color(['#444', '#444', '#444']).rightAlign(false).margin({\n            top: 5,\n            right: 0,\n            bottom: 5,\n            left: 20\n          });\n          g.select('.nv-controlsWrap').datum(controlsData).attr('transform', 'translate(0,' + -margin.top + ')').call(controls);\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } // Show error if index point value is 0 (division by zero avoided)\n\n\n        var tempDisabled = data.filter(function (d) {\n          return d.tempDisabled;\n        });\n        wrap.select('.tempDisabled').remove(); //clean-up and prevent duplicates\n\n        if (tempDisabled.length) {\n          wrap.append('text').attr('class', 'tempDisabled').attr('x', availableWidth / 2).attr('y', '-.71em').style('text-anchor', 'end').text(tempDisabled.map(function (d) {\n            return d.key;\n          }).join(', ') + ' values cannot be calculated for this time period.');\n        } //Set up interactive layer\n\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({\n            left: margin.left,\n            top: margin.top\n          }).svgContainer(container).xScale(x);\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\n        }\n\n        gEnter.select('.nv-background').append('rect');\n        g.select('.nv-background rect').attr('width', availableWidth).attr('height', availableHeight);\n        lines //.x(function(d) { return d.x })\n        .y(function (d) {\n          return d.display.y;\n        }).width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled && !data[i].tempDisabled;\n        }));\n        var linesWrap = g.select('.nv-linesWrap').datum(data.filter(function (d) {\n          return !d.disabled && !d.tempDisabled;\n        }));\n        linesWrap.call(lines); //Store a series index number in the data array.\n\n        data.forEach(function (d, i) {\n          d.seriesIndex = i;\n        });\n        var avgLineData = data.filter(function (d) {\n          return !d.disabled && !!average(d);\n        });\n        var avgLines = g.select(\".nv-avgLinesWrap\").selectAll(\"line\").data(avgLineData, function (d) {\n          return d.key;\n        });\n\n        var getAvgLineY = function (d) {\n          //If average lines go off the svg element, clamp them to the svg bounds.\n          var yVal = y(average(d));\n          if (yVal < 0) return 0;\n          if (yVal > availableHeight) return availableHeight;\n          return yVal;\n        };\n\n        avgLines.enter().append('line').style('stroke-width', 2).style('stroke-dasharray', '10,10').style('stroke', function (d, i) {\n          return lines.color()(d, d.seriesIndex);\n        }).attr('x1', 0).attr('x2', availableWidth).attr('y1', getAvgLineY).attr('y2', getAvgLineY);\n        avgLines.style('stroke-opacity', function (d) {\n          //If average lines go offscreen, make them transparent\n          var yVal = y(average(d));\n          if (yVal < 0 || yVal > availableHeight) return 0;\n          return 1;\n        }).attr('x1', 0).attr('x2', availableWidth).attr('y1', getAvgLineY).attr('y2', getAvgLineY);\n        avgLines.exit().remove(); //Create index line\n\n        var indexLine = linesWrap.selectAll('.nv-indexLine').data([index]);\n        indexLine.enter().append('rect').attr('class', 'nv-indexLine').attr('width', 3).attr('x', -2).attr('fill', 'red').attr('fill-opacity', .5).style(\"pointer-events\", \"all\").call(indexDrag);\n        indexLine.attr('transform', function (d) {\n          return 'translate(' + dx(d.i) + ',0)';\n        }).attr('height', availableHeight); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 70, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')');\n          g.select('.nv-x.nv-axis').call(xAxis);\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n\n        function updateZero() {\n          indexLine.data([index]); //When dragging the index line, turn off line transitions.\n          // Then turn them back on when done dragging.\n\n          var oldDuration = chart.duration();\n          chart.duration(0);\n          chart.update();\n          chart.duration(oldDuration);\n        }\n\n        g.select('.nv-background rect').on('click', function () {\n          index.x = d3.mouse(this)[0];\n          index.i = Math.round(dx.invert(index.x)); // update state and send stateChange with new index\n\n          state.index = index.i;\n          dispatch.stateChange(state);\n          updateZero();\n        });\n        lines.dispatch.on('elementClick', function (e) {\n          index.i = e.pointIndex;\n          index.x = dx(index.i); // update state and send stateChange with new index\n\n          state.index = index.i;\n          dispatch.stateChange(state);\n          updateZero();\n        });\n        controls.dispatch.on('legendClick', function (d, i) {\n          d.disabled = !d.disabled;\n          rescaleY = !d.disabled;\n          state.rescaleY = rescaleY;\n\n          if (!rescaleY) {\n            currentYDomain = getCurrentYDomain(data); // rescale is turned off, so set the currentYDomain\n          }\n\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        interactiveLayer.dispatch.on('elementMousemove', function (e) {\n          lines.clearHighlights();\n          var singlePoint,\n              pointIndex,\n              pointXLocation,\n              allData = [];\n          data.filter(function (series, i) {\n            series.seriesIndex = i;\n            return !(series.disabled || series.tempDisabled);\n          }).forEach(function (series, i) {\n            pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n            lines.highlightPoint(i, pointIndex, true);\n            var point = series.values[pointIndex];\n            if (typeof point === 'undefined') return;\n            if (typeof singlePoint === 'undefined') singlePoint = point;\n            if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\n            allData.push({\n              key: series.key,\n              value: chart.y()(point, pointIndex),\n              color: color(series, series.seriesIndex)\n            });\n          }); //Highlight the tooltip entry based on which point the mouse is closest to.\n\n          if (allData.length > 2) {\n            var yValue = chart.yScale().invert(e.mouseY);\n            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n            var threshold = 0.03 * domainExtent;\n            var indexToHighlight = nv.nearestValueIndex(allData.map(function (d) {\n              return d.value;\n            }), yValue, threshold);\n            if (indexToHighlight !== null) allData[indexToHighlight].highlight = true;\n          }\n\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint, pointIndex), pointIndex);\n          interactiveLayer.tooltip.valueFormatter(function (d, i) {\n            return yAxis.tickFormat()(d);\n          }).data({\n            value: xValue,\n            series: allData\n          })();\n          interactiveLayer.renderGuideLine(pointXLocation);\n        });\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\n          lines.clearHighlights();\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          if (typeof e.index !== 'undefined') {\n            index.i = e.index;\n            index.x = dx(index.i);\n            state.index = e.index;\n            indexLine.data([index]);\n          }\n\n          if (typeof e.rescaleY !== 'undefined') {\n            rescaleY = e.rescaleY;\n          }\n\n          chart.update();\n        });\n      });\n      renderWatch.renderEnd('cumulativeLineChart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    lines.dispatch.on('elementMouseover.tooltip', function (evt) {\n      var point = {\n        x: chart.x()(evt.point),\n        y: chart.y()(evt.point),\n        color: evt.point.color\n      };\n      evt.point = point;\n      tooltip.data(evt).hidden(false);\n    });\n    lines.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    }); //============================================================\n    // Functions\n    //------------------------------------------------------------\n\n    var indexifyYGetter = null;\n    /* Normalize the data according to an index point. */\n\n    function indexify(idx, data) {\n      if (!indexifyYGetter) indexifyYGetter = lines.y();\n      return data.map(function (line, i) {\n        if (!line.values) {\n          return line;\n        }\n\n        var indexValue = line.values[idx];\n\n        if (indexValue == null) {\n          return line;\n        }\n\n        var v = indexifyYGetter(indexValue, idx); // avoid divide by zero\n\n        if (Math.abs(v) < 0.00001 && !noErrorCheck) {\n          line.tempDisabled = true;\n          return line;\n        }\n\n        line.tempDisabled = false;\n        line.values = line.values.map(function (point, pointIndex) {\n          point.display = {\n            'y': (indexifyYGetter(point, pointIndex) - v) / v\n          };\n          return point;\n        });\n        return line;\n      });\n    }\n\n    function getCurrentYDomain(data) {\n      var seriesDomains = data.filter(function (series) {\n        return !(series.disabled || series.tempDisabled);\n      }).map(function (series, i) {\n        return d3.extent(series.values, function (d) {\n          return d.display.y;\n        });\n      });\n      return [d3.min(seriesDomains, function (d) {\n        return d[0];\n      }), d3.max(seriesDomains, function (d) {\n        return d[1];\n      })];\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n\n    chart.dispatch = dispatch;\n    chart.lines = lines;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.state = state;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showControls: {\n        get: function () {\n          return showControls;\n        },\n        set: function (_) {\n          showControls = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      average: {\n        get: function () {\n          return average;\n        },\n        set: function (_) {\n          average = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      noErrorCheck: {\n        get: function () {\n          return noErrorCheck;\n        },\n        set: function (_) {\n          noErrorCheck = _;\n        }\n      },\n      // options that require extra logic in the setter\n      rescaleY: {\n        get: function () {\n          return rescaleY;\n        },\n        set: function (_) {\n          rescaleY = _;\n          chart.state.rescaleY = _; // also update state\n        }\n      },\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n        }\n      },\n      useInteractiveGuideline: {\n        get: function () {\n          return useInteractiveGuideline;\n        },\n        set: function (_) {\n          useInteractiveGuideline = _;\n\n          if (_ === true) {\n            chart.interactive(false);\n            chart.useVoronoi(false);\n          }\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(_ ? 'right' : 'left');\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          lines.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n          renderWatch.reset(duration);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, lines);\n    nv.utils.initOptions(chart);\n    return chart;\n  }; //TODO: consider deprecating by adding necessary features to multiBar model\n\n\n  nv.models.discreteBar = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 960,\n        height = 500,\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container,\n        x = d3.scale.ordinal(),\n        y = d3.scale.linear(),\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n    ,\n        color = nv.utils.defaultColor(),\n        showValues = false,\n        valueFormat = d3.format(',.2f'),\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd'),\n        rectClass = 'discreteBar',\n        duration = 250; //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var x0, y0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container); //add series index to each data point for reference\n\n        data.forEach(function (series, i) {\n          series.values.forEach(function (point) {\n            point.series = i;\n          });\n        }); // Setup Scales\n        // remap and flatten the data for use in calculating the scales' domains\n\n        var seriesData = xDomain && yDomain ? [] : // if we know xDomain and yDomain, no need to calculate\n        data.map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d, i),\n              y: getY(d, i),\n              y0: d.y0\n            };\n          });\n        });\n        x.domain(xDomain || d3.merge(seriesData).map(function (d) {\n          return d.x;\n        })).rangeBands(xRange || [0, availableWidth], .1);\n        y.domain(yDomain || d3.extent(d3.merge(seriesData).map(function (d) {\n          return d.y;\n        }).concat(forceY))); // If showValues, pad the Y axis range to account for label height\n\n        if (showValues) y.range(yRange || [availableHeight - (y.domain()[0] < 0 ? 12 : 0), y.domain()[1] > 0 ? 12 : 0]);else y.range(yRange || [availableHeight, 0]); //store old scales if they exist\n\n        x0 = x0 || x;\n        y0 = y0 || y.copy().range([y(0), y(0)]); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-discretebar').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discretebar');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-groups');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); //TODO: by definition, the discrete bar should not have multiple groups, will modify/remove later\n\n        var groups = wrap.select('.nv-groups').selectAll('.nv-group').data(function (d) {\n          return d;\n        }, function (d) {\n          return d.key;\n        });\n        groups.enter().append('g').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n        groups.exit().watchTransition(renderWatch, 'discreteBar: exit groups').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6).remove();\n        groups.attr('class', function (d, i) {\n          return 'nv-group nv-series-' + i;\n        }).classed('hover', function (d) {\n          return d.hover;\n        });\n        groups.watchTransition(renderWatch, 'discreteBar: groups').style('stroke-opacity', 1).style('fill-opacity', .75);\n        var bars = groups.selectAll('g.nv-bar').data(function (d) {\n          return d.values;\n        });\n        bars.exit().remove();\n        var barsEnter = bars.enter().append('g').attr('transform', function (d, i, j) {\n          return 'translate(' + (x(getX(d, i)) + x.rangeBand() * .05) + ', ' + y(0) + ')';\n        }).on('mouseover', function (d, i) {\n          //TODO: figure out why j works above, but not here\n          d3.select(this).classed('hover', true);\n          dispatch.elementMouseover({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          d3.select(this).classed('hover', false);\n          dispatch.elementMouseout({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mousemove', function (d, i) {\n          dispatch.elementMousemove({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('click', function (d, i) {\n          var element = this;\n          dispatch.elementClick({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\"),\n            event: d3.event,\n            element: element\n          });\n          d3.event.stopPropagation();\n        }).on('dblclick', function (d, i) {\n          dispatch.elementDblClick({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n          d3.event.stopPropagation();\n        });\n        barsEnter.append('rect').attr('height', 0).attr('width', x.rangeBand() * .9 / data.length);\n\n        if (showValues) {\n          barsEnter.append('text').attr('text-anchor', 'middle');\n          bars.select('text').text(function (d, i) {\n            return valueFormat(getY(d, i));\n          }).watchTransition(renderWatch, 'discreteBar: bars text').attr('x', x.rangeBand() * .9 / 2).attr('y', function (d, i) {\n            return getY(d, i) < 0 ? y(getY(d, i)) - y(0) + 12 : -4;\n          });\n        } else {\n          bars.selectAll('text').remove();\n        }\n\n        bars.attr('class', function (d, i) {\n          return getY(d, i) < 0 ? 'nv-bar negative' : 'nv-bar positive';\n        }).style('fill', function (d, i) {\n          return d.color || color(d, i);\n        }).style('stroke', function (d, i) {\n          return d.color || color(d, i);\n        }).select('rect').attr('class', rectClass).watchTransition(renderWatch, 'discreteBar: bars rect').attr('width', x.rangeBand() * .9 / data.length);\n        bars.watchTransition(renderWatch, 'discreteBar: bars') //.delay(function(d,i) { return i * 1200 / data[0].values.length })\n        .attr('transform', function (d, i) {\n          var left = x(getX(d, i)) + x.rangeBand() * .05,\n              top = getY(d, i) < 0 ? y(0) : y(0) - y(getY(d, i)) < 1 ? y(0) - 1 : //make 1 px positive bars show up above y=0\n          y(getY(d, i));\n          return 'translate(' + left + ', ' + top + ')';\n        }).select('rect').attr('height', function (d, i) {\n          return Math.max(Math.abs(y(getY(d, i)) - y(0)), 1);\n        }); //store old scales for use in transitions on update\n\n        x0 = x.copy();\n        y0 = y.copy();\n      });\n      renderWatch.renderEnd('discreteBar immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      showValues: {\n        get: function () {\n          return showValues;\n        },\n        set: function (_) {\n          showValues = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      valueFormat: {\n        get: function () {\n          return valueFormat;\n        },\n        set: function (_) {\n          valueFormat = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      rectClass: {\n        get: function () {\n          return rectClass;\n        },\n        set: function (_) {\n          rectClass = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.discreteBarChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var discretebar = nv.models.discreteBar(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend(),\n        tooltip = nv.models.tooltip();\n    var margin = {\n      top: 15,\n      right: 10,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        color = nv.utils.getColor(),\n        showLegend = false,\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        staggerLabels = false,\n        wrapLabels = false,\n        rotateLabels = 0,\n        x,\n        y,\n        noData = null,\n        dispatch = d3.dispatch('beforeUpdate', 'renderEnd'),\n        duration = 250;\n    xAxis.orient('bottom').showMaxMin(false).tickFormat(function (d) {\n      return d;\n    });\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left').tickFormat(d3.format(',.1f'));\n    tooltip.duration(0).headerEnabled(false).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).keyFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(discretebar);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          dispatch.beforeUpdate();\n          container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this; // Display No Data message if there's nothing to show.\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = discretebar.xScale();\n        y = discretebar.yScale().clamp(true); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-discreteBarWithAxes').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discreteBarWithAxes').append('g');\n        var defsEnter = gEnter.append('defs');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis').append('g').attr('class', 'nv-zeroLine').append('line');\n        gEnter.append('g').attr('class', 'nv-barsWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          legend.width(availableWidth);\n          g.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n          }\n\n          wrap.select('.nv-legendWrap').attr('transform', 'translate(0,' + -margin.top + ')');\n        }\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } // Main Chart Component(s)\n\n\n        discretebar.width(availableWidth).height(availableHeight);\n        var barsWrap = g.select('.nv-barsWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        }));\n        barsWrap.transition().call(discretebar);\n        defsEnter.append('clipPath').attr('id', 'nv-x-label-clip-' + discretebar.id()).append('rect');\n        g.select('#nv-x-label-clip-' + discretebar.id() + ' rect').attr('width', x.rangeBand() * (staggerLabels ? 2 : 1)).attr('height', 16).attr('x', -x.rangeBand() / (staggerLabels ? 1 : 2)); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + (y.range()[0] + (discretebar.showValues() && y.domain()[0] < 0 ? 16 : 0)) + ')');\n          g.select('.nv-x.nv-axis').call(xAxis);\n          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\n          if (staggerLabels) {\n            xTicks.selectAll('text').attr('transform', function (d, i, j) {\n              return 'translate(0,' + (j % 2 == 0 ? '5' : '17') + ')';\n            });\n          }\n\n          if (rotateLabels) {\n            xTicks.selectAll('.tick text').attr('transform', 'rotate(' + rotateLabels + ' 0,0)').style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\n          }\n\n          if (wrapLabels) {\n            g.selectAll('.tick text').call(nv.utils.wrapTicks, chart.xAxis.rangeBand());\n          }\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } // Zero line\n\n\n        g.select(\".nv-zeroLine line\").attr(\"x1\", 0).attr(\"x2\", rightAlignYAxis ? -availableWidth : availableWidth).attr(\"y1\", y(0)).attr(\"y2\", y(0));\n      });\n      renderWatch.renderEnd('discreteBar chart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    discretebar.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt['series'] = {\n        key: chart.x()(evt.data),\n        value: chart.y()(evt.data),\n        color: evt.color\n      };\n      tooltip.data(evt).hidden(false);\n    });\n    discretebar.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    discretebar.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.discretebar = discretebar;\n    chart.legend = legend;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      staggerLabels: {\n        get: function () {\n          return staggerLabels;\n        },\n        set: function (_) {\n          staggerLabels = _;\n        }\n      },\n      rotateLabels: {\n        get: function () {\n          return rotateLabels;\n        },\n        set: function (_) {\n          rotateLabels = _;\n        }\n      },\n      wrapLabels: {\n        get: function () {\n          return wrapLabels;\n        },\n        set: function (_) {\n          wrapLabels = !!_;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          discretebar.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          discretebar.color(color);\n          legend.color(color);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(_ ? 'right' : 'left');\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, discretebar);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.distribution = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 400 //technically width or height depending on x or y....\n    ,\n        size = 8,\n        axis = 'x' // 'x' or 'y'... horizontal or vertical\n    ,\n        getData = function (d) {\n      return d[axis];\n    } // defaults d.x or d.y\n    ,\n        color = nv.utils.defaultColor(),\n        scale = d3.scale.linear(),\n        domain,\n        duration = 250,\n        dispatch = d3.dispatch('renderEnd'); //============================================================\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var scale0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration); //============================================================\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableLength = width - (axis === 'x' ? margin.left + margin.right : margin.top + margin.bottom),\n            naxis = axis == 'x' ? 'y' : 'x',\n            container = d3.select(this);\n        nv.utils.initSVG(container); //------------------------------------------------------------\n        // Setup Scales\n\n        scale0 = scale0 || scale; //------------------------------------------------------------\n        //------------------------------------------------------------\n        // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-distribution').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-distribution');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); //------------------------------------------------------------\n\n        var distWrap = g.selectAll('g.nv-dist').data(function (d) {\n          return d;\n        }, function (d) {\n          return d.key;\n        });\n        distWrap.enter().append('g');\n        distWrap.attr('class', function (d, i) {\n          return 'nv-dist nv-series-' + i;\n        }).style('stroke', function (d, i) {\n          return color(d, i);\n        });\n        var dist = distWrap.selectAll('line.nv-dist' + axis).data(function (d) {\n          return d.values;\n        });\n        dist.enter().append('line').attr(axis + '1', function (d, i) {\n          return scale0(getData(d, i));\n        }).attr(axis + '2', function (d, i) {\n          return scale0(getData(d, i));\n        });\n        renderWatch.transition(distWrap.exit().selectAll('line.nv-dist' + axis), 'dist exit') // .transition()\n        .attr(axis + '1', function (d, i) {\n          return scale(getData(d, i));\n        }).attr(axis + '2', function (d, i) {\n          return scale(getData(d, i));\n        }).style('stroke-opacity', 0).remove();\n        dist.attr('class', function (d, i) {\n          return 'nv-dist' + axis + ' nv-dist' + axis + '-' + i;\n        }).attr(naxis + '1', 0).attr(naxis + '2', size);\n        renderWatch.transition(dist, 'dist') // .transition()\n        .attr(axis + '1', function (d, i) {\n          return scale(getData(d, i));\n        }).attr(axis + '2', function (d, i) {\n          return scale(getData(d, i));\n        });\n        scale0 = scale.copy();\n      });\n      renderWatch.renderEnd('distribution immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart.dispatch = dispatch;\n\n    chart.margin = function (_) {\n      if (!arguments.length) return margin;\n      margin.top = typeof _.top != 'undefined' ? _.top : margin.top;\n      margin.right = typeof _.right != 'undefined' ? _.right : margin.right;\n      margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n      margin.left = typeof _.left != 'undefined' ? _.left : margin.left;\n      return chart;\n    };\n\n    chart.width = function (_) {\n      if (!arguments.length) return width;\n      width = _;\n      return chart;\n    };\n\n    chart.axis = function (_) {\n      if (!arguments.length) return axis;\n      axis = _;\n      return chart;\n    };\n\n    chart.size = function (_) {\n      if (!arguments.length) return size;\n      size = _;\n      return chart;\n    };\n\n    chart.getData = function (_) {\n      if (!arguments.length) return getData;\n      getData = d3.functor(_);\n      return chart;\n    };\n\n    chart.scale = function (_) {\n      if (!arguments.length) return scale;\n      scale = _;\n      return chart;\n    };\n\n    chart.color = function (_) {\n      if (!arguments.length) return color;\n      color = nv.utils.getColor(_);\n      return chart;\n    };\n\n    chart.duration = function (_) {\n      if (!arguments.length) return duration;\n      duration = _;\n      renderWatch.reset(duration);\n      return chart;\n    }; //============================================================\n\n\n    return chart;\n  };\n\n  nv.models.focus = function (content) {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var content = content || nv.models.line(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        brush = d3.svg.brush();\n    var margin = {\n      top: 10,\n      right: 0,\n      bottom: 30,\n      left: 0\n    },\n        color = nv.utils.defaultColor(),\n        width = null,\n        height = 70,\n        showXAxis = true,\n        showYAxis = false,\n        rightAlignYAxis = false,\n        ticks = null,\n        x,\n        y,\n        brushExtent = null,\n        duration = 250,\n        dispatch = d3.dispatch('brush', 'onBrush', 'renderEnd'),\n        syncBrushing = true;\n    content.interactive(false);\n    content.pointActive(function (d) {\n      return false;\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(content);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = height - margin.top - margin.bottom;\n\n        chart.update = function () {\n          if (duration === 0) {\n            container.call(chart);\n          } else {\n            container.transition().duration(duration).call(chart);\n          }\n        };\n\n        chart.container = this; // Setup Scales\n\n        x = content.xScale();\n        y = content.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-focus').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-focus').append('g');\n        var g = wrap.select('g');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        gEnter.append('g').attr('class', 'nv-background').append('rect');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis');\n        gEnter.append('g').attr('class', 'nv-contentWrap');\n        gEnter.append('g').attr('class', 'nv-brushBackground');\n        gEnter.append('g').attr('class', 'nv-x nv-brush');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        }\n\n        g.select('.nv-background rect').attr('width', availableWidth).attr('height', availableHeight);\n        content.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        }));\n        var contentWrap = g.select('.nv-contentWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        }));\n        d3.transition(contentWrap).call(content); // Setup Brush\n\n        brush.x(x).on('brush', function () {\n          onBrush(syncBrushing);\n        });\n        brush.on('brushend', function () {\n          if (!syncBrushing) {\n            dispatch.onBrush(brush.empty() ? x.domain() : brush.extent());\n          }\n        });\n        if (brushExtent) brush.extent(brushExtent);\n        var brushBG = g.select('.nv-brushBackground').selectAll('g').data([brushExtent || brush.extent()]);\n        var brushBGenter = brushBG.enter().append('g');\n        brushBGenter.append('rect').attr('class', 'left').attr('x', 0).attr('y', 0).attr('height', availableHeight);\n        brushBGenter.append('rect').attr('class', 'right').attr('x', 0).attr('y', 0).attr('height', availableHeight);\n        var gBrush = g.select('.nv-x.nv-brush').call(brush);\n        gBrush.selectAll('rect').attr('height', availableHeight);\n        gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n        onBrush(true);\n        g.select('.nv-background rect').attr('width', availableWidth).attr('height', availableHeight);\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')');\n          d3.transition(g.select('.nv-x.nv-axis')).call(xAxis);\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n          d3.transition(g.select('.nv-y.nv-axis')).call(yAxis);\n        }\n\n        g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')'); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n        //============================================================\n        // Functions\n        //------------------------------------------------------------\n        // Taken from crossfilter (http://square.github.com/crossfilter/)\n\n        function resizePath(d) {\n          var e = +(d == 'e'),\n              x = e ? 1 : -1,\n              y = availableHeight / 3;\n          return 'M' + 0.5 * x + ',' + y + 'A6,6 0 0 ' + e + ' ' + 6.5 * x + ',' + (y + 6) + 'V' + (2 * y - 6) + 'A6,6 0 0 ' + e + ' ' + 0.5 * x + ',' + 2 * y + 'Z' + 'M' + 2.5 * x + ',' + (y + 8) + 'V' + (2 * y - 8) + 'M' + 4.5 * x + ',' + (y + 8) + 'V' + (2 * y - 8);\n        }\n\n        function updateBrushBG() {\n          if (!brush.empty()) brush.extent(brushExtent);\n          brushBG.data([brush.empty() ? x.domain() : brushExtent]).each(function (d, i) {\n            var leftWidth = x(d[0]) - x.range()[0],\n                rightWidth = availableWidth - x(d[1]);\n            d3.select(this).select('.left').attr('width', leftWidth < 0 ? 0 : leftWidth);\n            d3.select(this).select('.right').attr('x', x(d[1])).attr('width', rightWidth < 0 ? 0 : rightWidth);\n          });\n        }\n\n        function onBrush(shouldDispatch) {\n          brushExtent = brush.empty() ? null : brush.extent();\n          var extent = brush.empty() ? x.domain() : brush.extent();\n          dispatch.brush({\n            extent: extent,\n            brush: brush\n          });\n          updateBrushBG();\n\n          if (shouldDispatch) {\n            dispatch.onBrush(extent);\n          }\n        }\n      });\n      renderWatch.renderEnd('focus immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n\n    chart.dispatch = dispatch;\n    chart.content = content;\n    chart.brush = brush;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      brushExtent: {\n        get: function () {\n          return brushExtent;\n        },\n        set: function (_) {\n          brushExtent = _;\n        }\n      },\n      syncBrushing: {\n        get: function () {\n          return syncBrushing;\n        },\n        set: function (_) {\n          syncBrushing = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          content.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          content.color(color);\n        }\n      },\n      interpolate: {\n        get: function () {\n          return content.interpolate();\n        },\n        set: function (_) {\n          content.interpolate(_);\n        }\n      },\n      xTickFormat: {\n        get: function () {\n          return xAxis.tickFormat();\n        },\n        set: function (_) {\n          xAxis.tickFormat(_);\n        }\n      },\n      yTickFormat: {\n        get: function () {\n          return yAxis.tickFormat();\n        },\n        set: function (_) {\n          yAxis.tickFormat(_);\n        }\n      },\n      x: {\n        get: function () {\n          return content.x();\n        },\n        set: function (_) {\n          content.x(_);\n        }\n      },\n      y: {\n        get: function () {\n          return content.y();\n        },\n        set: function (_) {\n          content.y(_);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, content);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.forceDirectedGraph = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 2,\n      right: 0,\n      bottom: 2,\n      left: 0\n    },\n        width = 400,\n        height = 32,\n        container = null,\n        dispatch = d3.dispatch('renderEnd'),\n        color = nv.utils.getColor(['#000']),\n        tooltip = nv.models.tooltip(),\n        noData = null // Force directed graph specific parameters [default values]\n    ,\n        linkStrength = 0.1,\n        friction = 0.9,\n        linkDist = 30,\n        charge = -120,\n        gravity = 0.1,\n        theta = 0.8,\n        alpha = 0.1,\n        radius = 5 // These functions allow to add extra attributes to ndes and links\n    ,\n        nodeExtras = function (nodes) {\n      /* Do nothing */\n    },\n        linkExtras = function (links) {\n      /* Do nothing */\n    },\n        getX = d3.functor(0.0),\n        getY = d3.functor(0.0); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        container.attr(\"width\", availableWidth).attr(\"height\", availableHeight); // Display No Data message if there's nothing to show.\n\n        if (!data || !data.links || !data.nodes) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        }\n\n        container.selectAll('*').remove(); // Collect names of all fields in the nodes\n\n        var nodeFieldSet = new Set();\n        data.nodes.forEach(function (node) {\n          var keys = Object.keys(node);\n          keys.forEach(function (key) {\n            nodeFieldSet.add(key);\n          });\n        });\n        var force = d3.layout.force().nodes(data.nodes).links(data.links).size([availableWidth, availableHeight]).linkStrength(linkStrength).friction(friction).linkDistance(linkDist).charge(charge).gravity(gravity).theta(theta).alpha(alpha).start();\n        var link = container.selectAll(\".link\").data(data.links).enter().append(\"line\").attr(\"class\", \"nv-force-link\").style(\"stroke-width\", function (d) {\n          return Math.sqrt(d.value);\n        });\n        var node = container.selectAll(\".node\").data(data.nodes).enter().append(\"g\").attr(\"class\", \"nv-force-node\").call(force.drag);\n        node.append(\"circle\").attr(\"r\", radius).style(\"fill\", function (d) {\n          return color(d);\n        }).on(\"mouseover\", function (evt) {\n          container.select('.nv-series-' + evt.seriesIndex + ' .nv-distx-' + evt.pointIndex).attr('y1', evt.py);\n          container.select('.nv-series-' + evt.seriesIndex + ' .nv-disty-' + evt.pointIndex).attr('x2', evt.px); // Add 'series' object to\n\n          var nodeColor = color(evt);\n          evt.series = [];\n          nodeFieldSet.forEach(function (field) {\n            evt.series.push({\n              color: nodeColor,\n              key: field,\n              value: evt[field]\n            });\n          });\n          tooltip.data(evt).hidden(false);\n        }).on(\"mouseout\", function (d) {\n          tooltip.hidden(true);\n        });\n        tooltip.headerFormatter(function (d) {\n          return \"Node\";\n        }); // Apply extra attributes to nodes and links (if any)\n\n        linkExtras(link);\n        nodeExtras(node);\n        force.on(\"tick\", function () {\n          link.attr(\"x1\", function (d) {\n            return d.source.x;\n          }).attr(\"y1\", function (d) {\n            return d.source.y;\n          }).attr(\"x2\", function (d) {\n            return d.target.x;\n          }).attr(\"y2\", function (d) {\n            return d.target.y;\n          });\n          node.attr(\"transform\", function (d) {\n            return \"translate(\" + d.x + \", \" + d.y + \")\";\n          });\n        });\n      });\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      // Force directed graph specific parameters\n      linkStrength: {\n        get: function () {\n          return linkStrength;\n        },\n        set: function (_) {\n          linkStrength = _;\n        }\n      },\n      friction: {\n        get: function () {\n          return friction;\n        },\n        set: function (_) {\n          friction = _;\n        }\n      },\n      linkDist: {\n        get: function () {\n          return linkDist;\n        },\n        set: function (_) {\n          linkDist = _;\n        }\n      },\n      charge: {\n        get: function () {\n          return charge;\n        },\n        set: function (_) {\n          charge = _;\n        }\n      },\n      gravity: {\n        get: function () {\n          return gravity;\n        },\n        set: function (_) {\n          gravity = _;\n        }\n      },\n      theta: {\n        get: function () {\n          return theta;\n        },\n        set: function (_) {\n          theta = _;\n        }\n      },\n      alpha: {\n        get: function () {\n          return alpha;\n        },\n        set: function (_) {\n          alpha = _;\n        }\n      },\n      radius: {\n        get: function () {\n          return radius;\n        },\n        set: function (_) {\n          radius = _;\n        }\n      },\n      //functor options\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = d3.functor(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = d3.functor(_);\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      nodeExtras: {\n        get: function () {\n          return nodeExtras;\n        },\n        set: function (_) {\n          nodeExtras = _;\n        }\n      },\n      linkExtras: {\n        get: function () {\n          return linkExtras;\n        },\n        set: function (_) {\n          linkExtras = _;\n        }\n      }\n    });\n    chart.dispatch = dispatch;\n    chart.tooltip = tooltip;\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.furiousLegend = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 5,\n      right: 0,\n      bottom: 5,\n      left: 0\n    },\n        width = 400,\n        height = 20,\n        getKey = function (d) {\n      return d.key;\n    },\n        keyFormatter = function (d) {\n      return d;\n    },\n        color = nv.utils.getColor(),\n        maxKeyLength = 20 //default value for key lengths\n    ,\n        align = true,\n        padding = 28 //define how much space between legend items. - recommend 32 for furious version\n    ,\n        rightAlign = true,\n        updateState = true //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\n    ,\n        radioButtonMode = false //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\n    ,\n        expanded = false,\n        dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange'),\n        vers = 'classic' //Options are \"classic\" and \"furious\"\n    ;\n\n    function chart(selection) {\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            container = d3.select(this);\n        nv.utils.initSVG(container); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-legend').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-legend').append('g');\n        var g = wrap.select('g');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        var series = g.selectAll('.nv-series').data(function (d) {\n          if (vers != 'furious') return d;\n          return d.filter(function (n) {\n            return expanded ? true : !n.disengaged;\n          });\n        });\n        var seriesEnter = series.enter().append('g').attr('class', 'nv-series');\n        var seriesShape;\n\n        if (vers == 'classic') {\n          seriesEnter.append('circle').style('stroke-width', 2).attr('class', 'nv-legend-symbol').attr('r', 5);\n          seriesShape = series.select('circle');\n        } else if (vers == 'furious') {\n          seriesEnter.append('rect').style('stroke-width', 2).attr('class', 'nv-legend-symbol').attr('rx', 3).attr('ry', 3);\n          seriesShape = series.select('rect');\n          seriesEnter.append('g').attr('class', 'nv-check-box').property('innerHTML', '<path d=\"M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z\" class=\"nv-box\"></path><path d=\"M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511\" class=\"nv-check\"></path>').attr('transform', 'translate(-10,-8)scale(0.5)');\n          var seriesCheckbox = series.select('.nv-check-box');\n          seriesCheckbox.each(function (d, i) {\n            d3.select(this).selectAll('path').attr('stroke', setTextColor(d, i));\n          });\n        }\n\n        seriesEnter.append('text').attr('text-anchor', 'start').attr('class', 'nv-legend-text').attr('dy', '.32em').attr('dx', '8');\n        var seriesText = series.select('text.nv-legend-text');\n        series.on('mouseover', function (d, i) {\n          dispatch.legendMouseover(d, i); //TODO: Make consistent with other event objects\n        }).on('mouseout', function (d, i) {\n          dispatch.legendMouseout(d, i);\n        }).on('click', function (d, i) {\n          dispatch.legendClick(d, i); // make sure we re-get data in case it was modified\n\n          var data = series.data();\n\n          if (updateState) {\n            if (vers == 'classic') {\n              if (radioButtonMode) {\n                //Radio button mode: set every series to disabled,\n                //  and enable the clicked series.\n                data.forEach(function (series) {\n                  series.disabled = true;\n                });\n                d.disabled = false;\n              } else {\n                d.disabled = !d.disabled;\n\n                if (data.every(function (series) {\n                  return series.disabled;\n                })) {\n                  //the default behavior of NVD3 legends is, if every single series\n                  // is disabled, turn all series' back on.\n                  data.forEach(function (series) {\n                    series.disabled = false;\n                  });\n                }\n              }\n            } else if (vers == 'furious') {\n              if (expanded) {\n                d.disengaged = !d.disengaged;\n                d.userDisabled = d.userDisabled == undefined ? !!d.disabled : d.userDisabled;\n                d.disabled = d.disengaged || d.userDisabled;\n              } else if (!expanded) {\n                d.disabled = !d.disabled;\n                d.userDisabled = d.disabled;\n                var engaged = data.filter(function (d) {\n                  return !d.disengaged;\n                });\n\n                if (engaged.every(function (series) {\n                  return series.userDisabled;\n                })) {\n                  //the default behavior of NVD3 legends is, if every single series\n                  // is disabled, turn all series' back on.\n                  data.forEach(function (series) {\n                    series.disabled = series.userDisabled = false;\n                  });\n                }\n              }\n            }\n\n            dispatch.stateChange({\n              disabled: data.map(function (d) {\n                return !!d.disabled;\n              }),\n              disengaged: data.map(function (d) {\n                return !!d.disengaged;\n              })\n            });\n          }\n        }).on('dblclick', function (d, i) {\n          if (vers == 'furious' && expanded) return;\n          dispatch.legendDblclick(d, i);\n\n          if (updateState) {\n            // make sure we re-get data in case it was modified\n            var data = series.data(); //the default behavior of NVD3 legends, when double clicking one,\n            // is to set all other series' to false, and make the double clicked series enabled.\n\n            data.forEach(function (series) {\n              series.disabled = true;\n              if (vers == 'furious') series.userDisabled = series.disabled;\n            });\n            d.disabled = false;\n            if (vers == 'furious') d.userDisabled = d.disabled;\n            dispatch.stateChange({\n              disabled: data.map(function (d) {\n                return !!d.disabled;\n              })\n            });\n          }\n        });\n        series.classed('nv-disabled', function (d) {\n          return d.userDisabled;\n        });\n        series.exit().remove();\n        seriesText.attr('fill', setTextColor).text(function (d) {\n          return keyFormatter(getKey(d));\n        }); //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\n        // NEW ALIGNING CODE, TODO: clean up\n\n        var versPadding;\n\n        switch (vers) {\n          case 'furious':\n            versPadding = 23;\n            break;\n\n          case 'classic':\n            versPadding = 20;\n        }\n\n        if (align) {\n          var seriesWidths = [];\n          series.each(function (d, i) {\n            var legendText;\n\n            if (keyFormatter(getKey(d)) && keyFormatter(getKey(d)).length > maxKeyLength) {\n              var trimmedKey = keyFormatter(getKey(d)).substring(0, maxKeyLength);\n              legendText = d3.select(this).select('text').text(trimmedKey + \"...\");\n              d3.select(this).append(\"svg:title\").text(keyFormatter(getKey(d)));\n            } else {\n              legendText = d3.select(this).select('text');\n            }\n\n            var nodeTextLength;\n\n            try {\n              nodeTextLength = legendText.node().getComputedTextLength(); // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\n\n              if (nodeTextLength <= 0) throw Error();\n            } catch (e) {\n              nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\n            }\n\n            seriesWidths.push(nodeTextLength + padding);\n          });\n          var seriesPerRow = 0;\n          var legendWidth = 0;\n          var columnWidths = [];\n\n          while (legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\n            columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\n            legendWidth += seriesWidths[seriesPerRow++];\n          }\n\n          if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\n\n          while (legendWidth > availableWidth && seriesPerRow > 1) {\n            columnWidths = [];\n            seriesPerRow--;\n\n            for (var k = 0; k < seriesWidths.length; k++) {\n              if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0)) columnWidths[k % seriesPerRow] = seriesWidths[k];\n            }\n\n            legendWidth = columnWidths.reduce(function (prev, cur, index, array) {\n              return prev + cur;\n            });\n          }\n\n          var xPositions = [];\n\n          for (var i = 0, curX = 0; i < seriesPerRow; i++) {\n            xPositions[i] = curX;\n            curX += columnWidths[i];\n          }\n\n          series.attr('transform', function (d, i) {\n            return 'translate(' + xPositions[i % seriesPerRow] + ',' + (5 + Math.floor(i / seriesPerRow) * versPadding) + ')';\n          }); //position legend as far right as possible within the total width\n\n          if (rightAlign) {\n            g.attr('transform', 'translate(' + (width - margin.right - legendWidth) + ',' + margin.top + ')');\n          } else {\n            g.attr('transform', 'translate(0' + ',' + margin.top + ')');\n          }\n\n          height = margin.top + margin.bottom + Math.ceil(seriesWidths.length / seriesPerRow) * versPadding;\n        } else {\n          var ypos = 5,\n              newxpos = 5,\n              maxwidth = 0,\n              xpos;\n          series.attr('transform', function (d, i) {\n            var length = d3.select(this).select('text').node().getComputedTextLength() + padding;\n            xpos = newxpos;\n\n            if (width < margin.left + margin.right + xpos + length) {\n              newxpos = xpos = 5;\n              ypos += versPadding;\n            }\n\n            newxpos += length;\n            if (newxpos > maxwidth) maxwidth = newxpos;\n            return 'translate(' + xpos + ',' + ypos + ')';\n          }); //position legend as far right as possible within the total width\n\n          g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n          height = margin.top + margin.bottom + ypos + 15;\n        }\n\n        if (vers == 'furious') {\n          // Size rectangles after text is placed\n          seriesShape.attr('width', function (d, i) {\n            return seriesText[0][i].getComputedTextLength() + 27;\n          }).attr('height', 18).attr('y', -9).attr('x', -15);\n        }\n\n        seriesShape.style('fill', setBGColor).style('stroke', function (d, i) {\n          return d.color || color(d, i);\n        });\n      });\n\n      function setTextColor(d, i) {\n        if (vers != 'furious') return '#000';\n\n        if (expanded) {\n          return d.disengaged ? color(d, i) : '#fff';\n        } else if (!expanded) {\n          return !!d.disabled ? color(d, i) : '#fff';\n        }\n      }\n\n      function setBGColor(d, i) {\n        if (expanded && vers == 'furious') {\n          return d.disengaged ? '#fff' : color(d, i);\n        } else {\n          return !!d.disabled ? '#fff' : color(d, i);\n        }\n      }\n\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      key: {\n        get: function () {\n          return getKey;\n        },\n        set: function (_) {\n          getKey = _;\n        }\n      },\n      keyFormatter: {\n        get: function () {\n          return keyFormatter;\n        },\n        set: function (_) {\n          keyFormatter = _;\n        }\n      },\n      align: {\n        get: function () {\n          return align;\n        },\n        set: function (_) {\n          align = _;\n        }\n      },\n      rightAlign: {\n        get: function () {\n          return rightAlign;\n        },\n        set: function (_) {\n          rightAlign = _;\n        }\n      },\n      maxKeyLength: {\n        get: function () {\n          return maxKeyLength;\n        },\n        set: function (_) {\n          maxKeyLength = _;\n        }\n      },\n      padding: {\n        get: function () {\n          return padding;\n        },\n        set: function (_) {\n          padding = _;\n        }\n      },\n      updateState: {\n        get: function () {\n          return updateState;\n        },\n        set: function (_) {\n          updateState = _;\n        }\n      },\n      radioButtonMode: {\n        get: function () {\n          return radioButtonMode;\n        },\n        set: function (_) {\n          radioButtonMode = _;\n        }\n      },\n      expanded: {\n        get: function () {\n          return expanded;\n        },\n        set: function (_) {\n          expanded = _;\n        }\n      },\n      vers: {\n        get: function () {\n          return vers;\n        },\n        set: function (_) {\n          vers = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  }; //TODO: consider deprecating and using multibar with single series for this\n\n\n  nv.models.historicalBar = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = null,\n        height = null,\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container = null,\n        x = d3.scale.linear(),\n        y = d3.scale.linear(),\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        forceX = [],\n        forceY = [0],\n        padData = false,\n        clipEdge = true,\n        color = nv.utils.defaultColor(),\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd'),\n        interactive = true;\n\n    var renderWatch = nv.utils.renderWatch(dispatch, 0);\n\n    function chart(selection) {\n      selection.each(function (data) {\n        renderWatch.reset();\n        container = d3.select(this);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        nv.utils.initSVG(container); // Setup Scales\n\n        x.domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX)));\n        if (padData) x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5) / data[0].values.length]);else x.range(xRange || [0, availableWidth]);\n        y.domain(yDomain || d3.extent(data[0].values.map(getY).concat(forceY))).range(yRange || [availableHeight, 0]); // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\n        if (x.domain()[0] === x.domain()[1]) x.domain()[0] ? x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01]) : x.domain([-1, 1]);\n        if (y.domain()[0] === y.domain()[1]) y.domain()[0] ? y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01]) : y.domain([-1, 1]); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-historicalBar-' + id).data([data[0].values]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBar-' + id);\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-bars');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        container.on('click', function (d, i) {\n          dispatch.chartClick({\n            data: d,\n            index: i,\n            pos: d3.event,\n            id: id\n          });\n        });\n        defsEnter.append('clipPath').attr('id', 'nv-chart-clip-path-' + id).append('rect');\n        wrap.select('#nv-chart-clip-path-' + id + ' rect').attr('width', availableWidth).attr('height', availableHeight);\n        g.attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n        var bars = wrap.select('.nv-bars').selectAll('.nv-bar').data(function (d) {\n          return d;\n        }, function (d, i) {\n          return getX(d, i);\n        });\n        bars.exit().remove();\n        bars.enter().append('rect').attr('x', 0).attr('y', function (d, i) {\n          return nv.utils.NaNtoZero(y(Math.max(0, getY(d, i))));\n        }).attr('height', function (d, i) {\n          return nv.utils.NaNtoZero(Math.abs(y(getY(d, i)) - y(0)));\n        }).attr('transform', function (d, i) {\n          return 'translate(' + (x(getX(d, i)) - availableWidth / data[0].values.length * .45) + ',0)';\n        }).on('mouseover', function (d, i) {\n          if (!interactive) return;\n          d3.select(this).classed('hover', true);\n          dispatch.elementMouseover({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          if (!interactive) return;\n          d3.select(this).classed('hover', false);\n          dispatch.elementMouseout({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mousemove', function (d, i) {\n          if (!interactive) return;\n          dispatch.elementMousemove({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('click', function (d, i) {\n          if (!interactive) return;\n          var element = this;\n          dispatch.elementClick({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\"),\n            event: d3.event,\n            element: element\n          });\n          d3.event.stopPropagation();\n        }).on('dblclick', function (d, i) {\n          if (!interactive) return;\n          dispatch.elementDblClick({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n          d3.event.stopPropagation();\n        });\n        bars.attr('fill', function (d, i) {\n          return color(d, i);\n        }).attr('class', function (d, i, j) {\n          return (getY(d, i) < 0 ? 'nv-bar negative' : 'nv-bar positive') + ' nv-bar-' + j + '-' + i;\n        }).watchTransition(renderWatch, 'bars').attr('transform', function (d, i) {\n          return 'translate(' + (x(getX(d, i)) - availableWidth / data[0].values.length * .45) + ',0)';\n        }) //TODO: better width calculations that don't assume always uniform data spacing;w\n        .attr('width', availableWidth / data[0].values.length * .9);\n        bars.watchTransition(renderWatch, 'bars').attr('y', function (d, i) {\n          var rval = getY(d, i) < 0 ? y(0) : y(0) - y(getY(d, i)) < 1 ? y(0) - 1 : y(getY(d, i));\n          return nv.utils.NaNtoZero(rval);\n        }).attr('height', function (d, i) {\n          return nv.utils.NaNtoZero(Math.max(Math.abs(y(getY(d, i)) - y(0)), 1));\n        });\n      });\n      renderWatch.renderEnd('historicalBar immediate');\n      return chart;\n    } //Create methods to allow outside functions to highlight a specific bar.\n\n\n    chart.highlightPoint = function (pointIndex, isHoverOver) {\n      container.select(\".nv-bars .nv-bar-0-\" + pointIndex).classed(\"hover\", isHoverOver);\n    };\n\n    chart.clearHighlights = function () {\n      container.select(\".nv-bars .nv-bar.hover\").classed(\"hover\", false);\n    }; //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      forceX: {\n        get: function () {\n          return forceX;\n        },\n        set: function (_) {\n          forceX = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      padData: {\n        get: function () {\n          return padData;\n        },\n        set: function (_) {\n          padData = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      interactive: {\n        get: function () {\n          return interactive;\n        },\n        set: function (_) {\n          interactive = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.historicalBarChart = function (bar_model) {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var bars = bar_model || nv.models.historicalBar(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend(),\n        interactiveLayer = nv.interactiveGuideline(),\n        tooltip = nv.models.tooltip();\n    var margin = {\n      top: 30,\n      right: 90,\n      bottom: 50,\n      left: 90\n    },\n        marginTop = null,\n        color = nv.utils.defaultColor(),\n        width = null,\n        height = null,\n        showLegend = false,\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        useInteractiveGuideline = false,\n        x,\n        y,\n        state = {},\n        defaultState = null,\n        noData = null,\n        dispatch = d3.dispatch('tooltipHide', 'stateChange', 'changeState', 'renderEnd'),\n        transitionDuration = 250;\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n    tooltip.duration(0).headerEnabled(false).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, 0);\n\n    function chart(selection) {\n      selection.each(function (data) {\n        renderWatch.reset();\n        renderWatch.models(bars);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          container.transition().duration(transitionDuration).call(chart);\n        };\n\n        chart.container = this; //set state.disabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display noData message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = bars.xScale();\n        y = bars.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-historicalBarChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBarChart').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis');\n        gEnter.append('g').attr('class', 'nv-barsWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        gEnter.append('g').attr('class', 'nv-interactive'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          legend.width(availableWidth);\n          g.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n          }\n\n          wrap.select('.nv-legendWrap').attr('transform', 'translate(0,' + -margin.top + ')');\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } //Set up interactive layer\n\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({\n            left: margin.left,\n            top: margin.top\n          }).svgContainer(container).xScale(x);\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\n        }\n\n        bars.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        }));\n        var barsWrap = g.select('.nv-barsWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        }));\n        barsWrap.transition().call(bars); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')');\n          g.select('.nv-x.nv-axis').transition().call(xAxis);\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n          g.select('.nv-y.nv-axis').transition().call(yAxis);\n        } //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n\n        interactiveLayer.dispatch.on('elementMousemove', function (e) {\n          bars.clearHighlights();\n          var singlePoint,\n              pointIndex,\n              pointXLocation,\n              allData = [];\n          data.filter(function (series, i) {\n            series.seriesIndex = i;\n            return !series.disabled;\n          }).forEach(function (series, i) {\n            pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n            bars.highlightPoint(pointIndex, true);\n            var point = series.values[pointIndex];\n            if (point === undefined) return;\n            if (singlePoint === undefined) singlePoint = point;\n            if (pointXLocation === undefined) pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\n            allData.push({\n              key: series.key,\n              value: chart.y()(point, pointIndex),\n              color: color(series, series.seriesIndex),\n              data: series.values[pointIndex]\n            });\n          });\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint, pointIndex));\n          interactiveLayer.tooltip.valueFormatter(function (d, i) {\n            return yAxis.tickFormat()(d);\n          }).data({\n            value: xValue,\n            index: pointIndex,\n            series: allData\n          })();\n          interactiveLayer.renderGuideLine(pointXLocation);\n        });\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\n          dispatch.tooltipHide();\n          bars.clearHighlights();\n        });\n        legend.dispatch.on('legendClick', function (d, i) {\n          d.disabled = !d.disabled;\n\n          if (!data.filter(function (d) {\n            return !d.disabled;\n          }).length) {\n            data.map(function (d) {\n              d.disabled = false;\n              wrap.selectAll('.nv-series').classed('disabled', false);\n              return d;\n            });\n          }\n\n          state.disabled = data.map(function (d) {\n            return !!d.disabled;\n          });\n          dispatch.stateChange(state);\n          selection.transition().call(chart);\n        });\n        legend.dispatch.on('legendDblclick', function (d) {\n          //Double clicking should always enable current series, and disabled all others.\n          data.forEach(function (d) {\n            d.disabled = true;\n          });\n          d.disabled = false;\n          state.disabled = data.map(function (d) {\n            return !!d.disabled;\n          });\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          chart.update();\n        });\n      });\n      renderWatch.renderEnd('historicalBarChart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    bars.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt['series'] = {\n        key: chart.x()(evt.data),\n        value: chart.y()(evt.data),\n        color: evt.color\n      };\n      tooltip.data(evt).hidden(false);\n    });\n    bars.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    bars.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.bars = bars;\n    chart.legend = legend;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n          bars.color(color);\n        }\n      },\n      duration: {\n        get: function () {\n          return transitionDuration;\n        },\n        set: function (_) {\n          transitionDuration = _;\n          renderWatch.reset(transitionDuration);\n          yAxis.duration(transitionDuration);\n          xAxis.duration(transitionDuration);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(_ ? 'right' : 'left');\n        }\n      },\n      useInteractiveGuideline: {\n        get: function () {\n          return useInteractiveGuideline;\n        },\n        set: function (_) {\n          useInteractiveGuideline = _;\n\n          if (_ === true) {\n            chart.interactive(false);\n          }\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, bars);\n    nv.utils.initOptions(chart);\n    return chart;\n  }; // ohlcChart is just a historical chart with ohlc bars and some tweaks\n\n\n  nv.models.ohlcBarChart = function () {\n    var chart = nv.models.historicalBarChart(nv.models.ohlcBar()); // special default tooltip since we show multiple values per x\n\n    chart.useInteractiveGuideline(true);\n    chart.interactiveLayer.tooltip.contentGenerator(function (data) {\n      // we assume only one series exists for this chart\n      var d = data.series[0].data; // match line colors as defined in nv.d3.css\n\n      var color = d.open < d.close ? \"2ca02c\" : \"d62728\";\n      return '' + '<h3 style=\"color: #' + color + '\">' + data.value + '</h3>' + '<table>' + '<tr><td>open:</td><td>' + chart.yAxis.tickFormat()(d.open) + '</td></tr>' + '<tr><td>close:</td><td>' + chart.yAxis.tickFormat()(d.close) + '</td></tr>' + '<tr><td>high</td><td>' + chart.yAxis.tickFormat()(d.high) + '</td></tr>' + '<tr><td>low:</td><td>' + chart.yAxis.tickFormat()(d.low) + '</td></tr>' + '</table>';\n    });\n    return chart;\n  }; // candlestickChart is just a historical chart with candlestick bars and some tweaks\n\n\n  nv.models.candlestickBarChart = function () {\n    var chart = nv.models.historicalBarChart(nv.models.candlestickBar()); // special default tooltip since we show multiple values per x\n\n    chart.useInteractiveGuideline(true);\n    chart.interactiveLayer.tooltip.contentGenerator(function (data) {\n      // we assume only one series exists for this chart\n      var d = data.series[0].data; // match line colors as defined in nv.d3.css\n\n      var color = d.open < d.close ? \"2ca02c\" : \"d62728\";\n      return '' + '<h3 style=\"color: #' + color + '\">' + data.value + '</h3>' + '<table>' + '<tr><td>open:</td><td>' + chart.yAxis.tickFormat()(d.open) + '</td></tr>' + '<tr><td>close:</td><td>' + chart.yAxis.tickFormat()(d.close) + '</td></tr>' + '<tr><td>high</td><td>' + chart.yAxis.tickFormat()(d.high) + '</td></tr>' + '<tr><td>low:</td><td>' + chart.yAxis.tickFormat()(d.low) + '</td></tr>' + '</table>';\n    });\n    return chart;\n  };\n\n  nv.models.legend = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 5,\n      right: 0,\n      bottom: 5,\n      left: 0\n    },\n        width = 400,\n        height = 20,\n        getKey = function (d) {\n      return d.key;\n    },\n        keyFormatter = function (d) {\n      return d;\n    },\n        color = nv.utils.getColor(),\n        maxKeyLength = 20 //default value for key lengths\n    ,\n        align = true,\n        padding = 32 //define how much space between legend items. - recommend 32 for furious version\n    ,\n        rightAlign = true,\n        updateState = true //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\n    ,\n        enableDoubleClick = true //If true, legend will enable double click handling\n    ,\n        radioButtonMode = false //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\n    ,\n        expanded = false,\n        dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange'),\n        vers = 'classic' //Options are \"classic\" and \"furious\"\n    ;\n\n    function chart(selection) {\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            container = d3.select(this);\n        nv.utils.initSVG(container); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-legend').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-legend').append('g');\n        var g = wrap.select('g');\n        if (rightAlign) wrap.attr('transform', 'translate(' + -margin.right + ',' + margin.top + ')');else wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        var series = g.selectAll('.nv-series').data(function (d) {\n          if (vers != 'furious') return d;\n          return d.filter(function (n) {\n            return expanded ? true : !n.disengaged;\n          });\n        });\n        var seriesEnter = series.enter().append('g').attr('class', 'nv-series');\n        var seriesShape;\n        var versPadding;\n\n        switch (vers) {\n          case 'furious':\n            versPadding = 23;\n            break;\n\n          case 'classic':\n            versPadding = 20;\n        }\n\n        if (vers == 'classic') {\n          seriesEnter.append('circle').style('stroke-width', 2).attr('class', 'nv-legend-symbol').attr('r', 5);\n          seriesShape = series.select('.nv-legend-symbol');\n        } else if (vers == 'furious') {\n          seriesEnter.append('rect').style('stroke-width', 2).attr('class', 'nv-legend-symbol').attr('rx', 3).attr('ry', 3);\n          seriesShape = series.select('.nv-legend-symbol');\n          seriesEnter.append('g').attr('class', 'nv-check-box').property('innerHTML', '<path d=\"M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z\" class=\"nv-box\"></path><path d=\"M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511\" class=\"nv-check\"></path>').attr('transform', 'translate(-10,-8)scale(0.5)');\n          var seriesCheckbox = series.select('.nv-check-box');\n          seriesCheckbox.each(function (d, i) {\n            d3.select(this).selectAll('path').attr('stroke', setTextColor(d, i));\n          });\n        }\n\n        seriesEnter.append('text').attr('text-anchor', 'start').attr('class', 'nv-legend-text').attr('dy', '.32em').attr('dx', '8');\n        var seriesText = series.select('text.nv-legend-text');\n        series.on('mouseover', function (d, i) {\n          dispatch.legendMouseover(d, i); //TODO: Make consistent with other event objects\n        }).on('mouseout', function (d, i) {\n          dispatch.legendMouseout(d, i);\n        }).on('click', function (d, i) {\n          dispatch.legendClick(d, i); // make sure we re-get data in case it was modified\n\n          var data = series.data();\n\n          if (updateState) {\n            if (vers == 'classic') {\n              if (radioButtonMode) {\n                //Radio button mode: set every series to disabled,\n                //  and enable the clicked series.\n                data.forEach(function (series) {\n                  series.disabled = true;\n                });\n                d.disabled = false;\n              } else {\n                d.disabled = !d.disabled;\n\n                if (data.every(function (series) {\n                  return series.disabled;\n                })) {\n                  //the default behavior of NVD3 legends is, if every single series\n                  // is disabled, turn all series' back on.\n                  data.forEach(function (series) {\n                    series.disabled = false;\n                  });\n                }\n              }\n            } else if (vers == 'furious') {\n              if (expanded) {\n                d.disengaged = !d.disengaged;\n                d.userDisabled = d.userDisabled == undefined ? !!d.disabled : d.userDisabled;\n                d.disabled = d.disengaged || d.userDisabled;\n              } else if (!expanded) {\n                d.disabled = !d.disabled;\n                d.userDisabled = d.disabled;\n                var engaged = data.filter(function (d) {\n                  return !d.disengaged;\n                });\n\n                if (engaged.every(function (series) {\n                  return series.userDisabled;\n                })) {\n                  //the default behavior of NVD3 legends is, if every single series\n                  // is disabled, turn all series' back on.\n                  data.forEach(function (series) {\n                    series.disabled = series.userDisabled = false;\n                  });\n                }\n              }\n            }\n\n            dispatch.stateChange({\n              disabled: data.map(function (d) {\n                return !!d.disabled;\n              }),\n              disengaged: data.map(function (d) {\n                return !!d.disengaged;\n              })\n            });\n          }\n        }).on('dblclick', function (d, i) {\n          if (enableDoubleClick) {\n            if (vers == 'furious' && expanded) return;\n            dispatch.legendDblclick(d, i);\n\n            if (updateState) {\n              // make sure we re-get data in case it was modified\n              var data = series.data(); //the default behavior of NVD3 legends, when double clicking one,\n              // is to set all other series' to false, and make the double clicked series enabled.\n\n              data.forEach(function (series) {\n                series.disabled = true;\n                if (vers == 'furious') series.userDisabled = series.disabled;\n              });\n              d.disabled = false;\n              if (vers == 'furious') d.userDisabled = d.disabled;\n              dispatch.stateChange({\n                disabled: data.map(function (d) {\n                  return !!d.disabled;\n                })\n              });\n            }\n          }\n        });\n        series.classed('nv-disabled', function (d) {\n          return d.userDisabled;\n        });\n        series.exit().remove();\n        seriesText.attr('fill', setTextColor).text(function (d) {\n          return keyFormatter(getKey(d));\n        }); //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\n        // NEW ALIGNING CODE, TODO: clean up\n\n        var legendWidth = 0;\n\n        if (align) {\n          var seriesWidths = [];\n          series.each(function (d, i) {\n            var legendText;\n\n            if (keyFormatter(getKey(d)) && keyFormatter(getKey(d)).length > maxKeyLength) {\n              var trimmedKey = keyFormatter(getKey(d)).substring(0, maxKeyLength);\n              legendText = d3.select(this).select('text').text(trimmedKey + \"...\");\n              d3.select(this).append(\"svg:title\").text(keyFormatter(getKey(d)));\n            } else {\n              legendText = d3.select(this).select('text');\n            }\n\n            var nodeTextLength;\n\n            try {\n              nodeTextLength = legendText.node().getComputedTextLength(); // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\n\n              if (nodeTextLength <= 0) throw Error();\n            } catch (e) {\n              nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\n            }\n\n            seriesWidths.push(nodeTextLength + padding);\n          });\n          var seriesPerRow = 0;\n          var columnWidths = [];\n          legendWidth = 0;\n\n          while (legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\n            columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\n            legendWidth += seriesWidths[seriesPerRow++];\n          }\n\n          if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\n\n          while (legendWidth > availableWidth && seriesPerRow > 1) {\n            columnWidths = [];\n            seriesPerRow--;\n\n            for (var k = 0; k < seriesWidths.length; k++) {\n              if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0)) columnWidths[k % seriesPerRow] = seriesWidths[k];\n            }\n\n            legendWidth = columnWidths.reduce(function (prev, cur, index, array) {\n              return prev + cur;\n            });\n          }\n\n          var xPositions = [];\n\n          for (var i = 0, curX = 0; i < seriesPerRow; i++) {\n            xPositions[i] = curX;\n            curX += columnWidths[i];\n          }\n\n          series.attr('transform', function (d, i) {\n            return 'translate(' + xPositions[i % seriesPerRow] + ',' + (5 + Math.floor(i / seriesPerRow) * versPadding) + ')';\n          }); //position legend as far right as possible within the total width\n\n          if (rightAlign) {\n            g.attr('transform', 'translate(' + (width - margin.right - legendWidth) + ',' + margin.top + ')');\n          } else {\n            g.attr('transform', 'translate(0' + ',' + margin.top + ')');\n          }\n\n          height = margin.top + margin.bottom + Math.ceil(seriesWidths.length / seriesPerRow) * versPadding;\n        } else {\n          var ypos = 5,\n              newxpos = 5,\n              maxwidth = 0,\n              xpos;\n          series.attr('transform', function (d, i) {\n            var length = d3.select(this).select('text').node().getComputedTextLength() + padding;\n            xpos = newxpos;\n\n            if (width < margin.left + margin.right + xpos + length) {\n              newxpos = xpos = 5;\n              ypos += versPadding;\n            }\n\n            newxpos += length;\n            if (newxpos > maxwidth) maxwidth = newxpos;\n\n            if (legendWidth < xpos + maxwidth) {\n              legendWidth = xpos + maxwidth;\n            }\n\n            return 'translate(' + xpos + ',' + ypos + ')';\n          }); //position legend as far right as possible within the total width\n\n          g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n          height = margin.top + margin.bottom + ypos + 15;\n        }\n\n        if (vers == 'furious') {\n          // Size rectangles after text is placed\n          seriesShape.attr('width', function (d, i) {\n            return seriesText[0][i].getComputedTextLength() + 27;\n          }).attr('height', 18).attr('y', -9).attr('x', -15); // The background for the expanded legend (UI)\n\n          gEnter.insert('rect', ':first-child').attr('class', 'nv-legend-bg').attr('fill', '#eee') // .attr('stroke', '#444')\n          .attr('opacity', 0);\n          var seriesBG = g.select('.nv-legend-bg');\n          seriesBG.transition().duration(300).attr('x', -versPadding).attr('width', legendWidth + versPadding - 12).attr('height', height + 10).attr('y', -margin.top - 10).attr('opacity', expanded ? 1 : 0);\n        }\n\n        seriesShape.style('fill', setBGColor).style('fill-opacity', setBGOpacity).style('stroke', setBGColor);\n      });\n\n      function setTextColor(d, i) {\n        if (vers != 'furious') return '#000';\n\n        if (expanded) {\n          return d.disengaged ? '#000' : '#fff';\n        } else if (!expanded) {\n          if (!d.color) d.color = color(d, i);\n          return !!d.disabled ? d.color : '#fff';\n        }\n      }\n\n      function setBGColor(d, i) {\n        if (expanded && vers == 'furious') {\n          return d.disengaged ? '#eee' : d.color || color(d, i);\n        } else {\n          return d.color || color(d, i);\n        }\n      }\n\n      function setBGOpacity(d, i) {\n        if (expanded && vers == 'furious') {\n          return 1;\n        } else {\n          return !!d.disabled ? 0 : 1;\n        }\n      }\n\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      key: {\n        get: function () {\n          return getKey;\n        },\n        set: function (_) {\n          getKey = _;\n        }\n      },\n      keyFormatter: {\n        get: function () {\n          return keyFormatter;\n        },\n        set: function (_) {\n          keyFormatter = _;\n        }\n      },\n      align: {\n        get: function () {\n          return align;\n        },\n        set: function (_) {\n          align = _;\n        }\n      },\n      maxKeyLength: {\n        get: function () {\n          return maxKeyLength;\n        },\n        set: function (_) {\n          maxKeyLength = _;\n        }\n      },\n      rightAlign: {\n        get: function () {\n          return rightAlign;\n        },\n        set: function (_) {\n          rightAlign = _;\n        }\n      },\n      padding: {\n        get: function () {\n          return padding;\n        },\n        set: function (_) {\n          padding = _;\n        }\n      },\n      updateState: {\n        get: function () {\n          return updateState;\n        },\n        set: function (_) {\n          updateState = _;\n        }\n      },\n      enableDoubleClick: {\n        get: function () {\n          return enableDoubleClick;\n        },\n        set: function (_) {\n          enableDoubleClick = _;\n        }\n      },\n      radioButtonMode: {\n        get: function () {\n          return radioButtonMode;\n        },\n        set: function (_) {\n          radioButtonMode = _;\n        }\n      },\n      expanded: {\n        get: function () {\n          return expanded;\n        },\n        set: function (_) {\n          expanded = _;\n        }\n      },\n      vers: {\n        get: function () {\n          return vers;\n        },\n        set: function (_) {\n          vers = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.line = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var scatter = nv.models.scatter();\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 960,\n        height = 500,\n        container = null,\n        strokeWidth = 1.5,\n        color = nv.utils.defaultColor() // a function that returns a color\n    ,\n        getX = function (d) {\n      return d.x;\n    } // accessor to get the x value from a data point\n    ,\n        getY = function (d) {\n      return d.y;\n    } // accessor to get the y value from a data point\n    ,\n        defined = function (d, i) {\n      return !isNaN(getY(d, i)) && getY(d, i) !== null;\n    } // allows a line to be not continuous when it is not defined\n    ,\n        isArea = function (d) {\n      return d.area;\n    } // decides if a line is an area or just a line\n    ,\n        clipEdge = false // if true, masks lines within x and y scale\n    ,\n        x //can be accessed via chart.xScale()\n    ,\n        y //can be accessed via chart.yScale()\n    ,\n        interpolate = \"linear\" // controls the line interpolation\n    ,\n        duration = 250,\n        dispatch = d3.dispatch('elementClick', 'elementMouseover', 'elementMouseout', 'renderEnd');\n\n    scatter.pointSize(16) // default size\n    .pointDomain([16, 256]) //set to speed up calculation, needs to be unset if there is a custom size accessor\n    ; //============================================================\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0,\n        y0 //used to store previous scales\n    ,\n        renderWatch = nv.utils.renderWatch(dispatch, duration); //============================================================\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(scatter);\n      selection.each(function (data) {\n        container = d3.select(this);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        nv.utils.initSVG(container); // Setup Scales\n\n        x = scatter.xScale();\n        y = scatter.yScale();\n        x0 = x0 || x;\n        y0 = y0 || y; // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-line').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-line');\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-groups');\n        gEnter.append('g').attr('class', 'nv-scatterWrap');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        scatter.width(availableWidth).height(availableHeight);\n        var scatterWrap = wrap.select('.nv-scatterWrap');\n        scatterWrap.call(scatter);\n        defsEnter.append('clipPath').attr('id', 'nv-edge-clip-' + scatter.id()).append('rect');\n        wrap.select('#nv-edge-clip-' + scatter.id() + ' rect').attr('width', availableWidth).attr('height', availableHeight > 0 ? availableHeight : 0);\n        g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n        scatterWrap.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n        var groups = wrap.select('.nv-groups').selectAll('.nv-group').data(function (d) {\n          return d;\n        }, function (d) {\n          return d.key;\n        });\n        groups.enter().append('g').style('stroke-opacity', 1e-6).style('stroke-width', function (d) {\n          return d.strokeWidth || strokeWidth;\n        }).style('fill-opacity', 1e-6);\n        groups.exit().remove();\n        groups.attr('class', function (d, i) {\n          return (d.classed || '') + ' nv-group nv-series-' + i;\n        }).classed('hover', function (d) {\n          return d.hover;\n        }).style('fill', function (d, i) {\n          return color(d, i);\n        }).style('stroke', function (d, i) {\n          return color(d, i);\n        });\n        groups.watchTransition(renderWatch, 'line: groups').style('stroke-opacity', 1).style('fill-opacity', function (d) {\n          return d.fillOpacity || .5;\n        });\n        var areaPaths = groups.selectAll('path.nv-area').data(function (d) {\n          return isArea(d) ? [d] : [];\n        }); // this is done differently than lines because I need to check if series is an area\n\n        areaPaths.enter().append('path').attr('class', 'nv-area').attr('d', function (d) {\n          return d3.svg.area().interpolate(interpolate).defined(defined).x(function (d, i) {\n            return nv.utils.NaNtoZero(x0(getX(d, i)));\n          }).y0(function (d, i) {\n            return nv.utils.NaNtoZero(y0(getY(d, i)));\n          }).y1(function (d, i) {\n            return y0(y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0]);\n          }) //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n          .apply(this, [d.values]);\n        });\n        groups.exit().selectAll('path.nv-area').remove();\n        areaPaths.watchTransition(renderWatch, 'line: areaPaths').attr('d', function (d) {\n          return d3.svg.area().interpolate(interpolate).defined(defined).x(function (d, i) {\n            return nv.utils.NaNtoZero(x(getX(d, i)));\n          }).y0(function (d, i) {\n            return nv.utils.NaNtoZero(y(getY(d, i)));\n          }).y1(function (d, i) {\n            return y(y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0]);\n          }) //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n          .apply(this, [d.values]);\n        });\n        var linePaths = groups.selectAll('path.nv-line').data(function (d) {\n          return [d.values];\n        });\n        linePaths.enter().append('path').attr('class', 'nv-line').attr('d', d3.svg.line().interpolate(interpolate).defined(defined).x(function (d, i) {\n          return nv.utils.NaNtoZero(x0(getX(d, i)));\n        }).y(function (d, i) {\n          return nv.utils.NaNtoZero(y0(getY(d, i)));\n        }));\n        linePaths.watchTransition(renderWatch, 'line: linePaths').attr('d', d3.svg.line().interpolate(interpolate).defined(defined).x(function (d, i) {\n          return nv.utils.NaNtoZero(x(getX(d, i)));\n        }).y(function (d, i) {\n          return nv.utils.NaNtoZero(y(getY(d, i)));\n        })); //store old scales for use in transitions on update\n\n        x0 = x.copy();\n        y0 = y.copy();\n      });\n      renderWatch.renderEnd('line immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter; // Pass through events\n\n    scatter.dispatch.on('elementClick', function () {\n      dispatch.elementClick.apply(this, arguments);\n    });\n    scatter.dispatch.on('elementMouseover', function () {\n      dispatch.elementMouseover.apply(this, arguments);\n    });\n    scatter.dispatch.on('elementMouseout', function () {\n      dispatch.elementMouseout.apply(this, arguments);\n    });\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      defined: {\n        get: function () {\n          return defined;\n        },\n        set: function (_) {\n          defined = _;\n        }\n      },\n      interpolate: {\n        get: function () {\n          return interpolate;\n        },\n        set: function (_) {\n          interpolate = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          scatter.duration(duration);\n        }\n      },\n      isArea: {\n        get: function () {\n          return isArea;\n        },\n        set: function (_) {\n          isArea = d3.functor(_);\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n          scatter.x(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n          scatter.y(_);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          scatter.color(color);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, scatter);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.lineChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var lines = nv.models.line(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend(),\n        interactiveLayer = nv.interactiveGuideline(),\n        tooltip = nv.models.tooltip(),\n        focus = nv.models.focus(nv.models.line());\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        color = nv.utils.defaultColor(),\n        width = null,\n        height = null,\n        showLegend = true,\n        legendPosition = 'top',\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        useInteractiveGuideline = false,\n        x,\n        y,\n        focusEnable = false,\n        state = nv.utils.state(),\n        defaultState = null,\n        noData = null,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'),\n        duration = 250; // set options on sub-objects for this chart\n\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n    lines.clipEdge(true).duration(0);\n    tooltip.valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    interactiveLayer.tooltip.valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          })\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(lines);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n\n        chart.update = function () {\n          if (duration === 0) {\n            container.call(chart);\n          } else {\n            container.transition().duration(duration).call(chart);\n          }\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display noData message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        }\n        /* Update `main' graph on brush update. */\n\n\n        focus.dispatch.on(\"onBrush\", function (extent) {\n          onBrush(extent);\n        }); // Setup Scales\n\n        x = lines.xScale();\n        y = lines.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-lineChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-lineChart').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n        focusEnter.append('g').attr('class', 'nv-background').append('rect');\n        focusEnter.append('g').attr('class', 'nv-x nv-axis');\n        focusEnter.append('g').attr('class', 'nv-y nv-axis');\n        focusEnter.append('g').attr('class', 'nv-linesWrap');\n        focusEnter.append('g').attr('class', 'nv-interactive');\n        var contextEnter = gEnter.append('g').attr('class', 'nv-focusWrap'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          legend.width(availableWidth);\n          g.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (legendPosition === 'bottom') {\n            margin.bottom = xAxis.height() + legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n            g.select('.nv-legendWrap').attr('transform', 'translate(0,' + (availableHeight + xAxis.height()) + ')');\n          } else if (legendPosition === 'top') {\n            if (!marginTop && legend.height() !== margin.top) {\n              margin.top = legend.height();\n              availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n            }\n\n            wrap.select('.nv-legendWrap').attr('transform', 'translate(0,' + -margin.top + ')');\n          }\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } //Set up interactive layer\n\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({\n            left: margin.left,\n            top: margin.top\n          }).svgContainer(container).xScale(x);\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\n        }\n\n        g.select('.nv-focus .nv-background rect').attr('width', availableWidth).attr('height', availableHeight);\n        lines.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        }));\n        var linesWrap = g.select('.nv-linesWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        })); // Setup Main (Focus) Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n        } //============================================================\n        // Update Axes\n        //============================================================\n\n\n        function updateXAxis() {\n          if (showXAxis) {\n            g.select('.nv-focus .nv-x.nv-axis').transition().duration(duration).call(xAxis);\n          }\n        }\n\n        function updateYAxis() {\n          if (showYAxis) {\n            g.select('.nv-focus .nv-y.nv-axis').transition().duration(duration).call(yAxis);\n          }\n        }\n\n        g.select('.nv-focus .nv-x.nv-axis').attr('transform', 'translate(0,' + availableHeight + ')'); //============================================================\n        // Update Focus\n        //============================================================\n\n        if (!focusEnable && focus.brush.extent() === null) {\n          linesWrap.call(lines);\n          updateXAxis();\n          updateYAxis();\n        } else {\n          focus.width(availableWidth);\n          g.select('.nv-focusWrap').style('display', focusEnable ? 'initial' : 'none').attr('transform', 'translate(0,' + (availableHeight + margin.bottom + focus.margin().top) + ')').call(focus);\n          var extent = focus.brush.empty() ? focus.xDomain() : focus.brush.extent();\n\n          if (extent !== null) {\n            onBrush(extent);\n          }\n        } //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        interactiveLayer.dispatch.on('elementMousemove', function (e) {\n          lines.clearHighlights();\n          var singlePoint,\n              pointIndex,\n              pointXLocation,\n              allData = [];\n          data.filter(function (series, i) {\n            series.seriesIndex = i;\n            return !series.disabled && !series.disableTooltip;\n          }).forEach(function (series, i) {\n            var extent = focus.brush.extent() !== null ? focus.brush.empty() ? focus.xScale().domain() : focus.brush.extent() : x.domain();\n            var currentValues = series.values.filter(function (d, i) {\n              // Checks if the x point is between the extents, handling case where extent[0] is greater than extent[1]\n              // (e.g. x domain is manually set to reverse the x-axis)\n              if (extent[0] <= extent[1]) {\n                return lines.x()(d, i) >= extent[0] && lines.x()(d, i) <= extent[1];\n              } else {\n                return lines.x()(d, i) >= extent[1] && lines.x()(d, i) <= extent[0];\n              }\n            });\n            pointIndex = nv.interactiveBisect(currentValues, e.pointXValue, lines.x());\n            var point = currentValues[pointIndex];\n            var pointYValue = chart.y()(point, pointIndex);\n\n            if (pointYValue !== null) {\n              lines.highlightPoint(i, pointIndex, true);\n            }\n\n            if (point === undefined) return;\n            if (singlePoint === undefined) singlePoint = point;\n            if (pointXLocation === undefined) pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\n            allData.push({\n              key: series.key,\n              value: pointYValue,\n              color: color(series, series.seriesIndex),\n              data: point\n            });\n          }); //Highlight the tooltip entry based on which point the mouse is closest to.\n\n          if (allData.length > 2) {\n            var yValue = chart.yScale().invert(e.mouseY);\n            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n            var threshold = 0.03 * domainExtent;\n            var indexToHighlight = nv.nearestValueIndex(allData.map(function (d) {\n              return d.value;\n            }), yValue, threshold);\n            if (indexToHighlight !== null) allData[indexToHighlight].highlight = true;\n          }\n\n          var defaultValueFormatter = function (d, i) {\n            return d == null ? \"N/A\" : yAxis.tickFormat()(d);\n          };\n\n          interactiveLayer.tooltip.valueFormatter(interactiveLayer.tooltip.valueFormatter() || defaultValueFormatter).data({\n            value: chart.x()(singlePoint, pointIndex),\n            index: pointIndex,\n            series: allData\n          })();\n          interactiveLayer.renderGuideLine(pointXLocation);\n        });\n        interactiveLayer.dispatch.on('elementClick', function (e) {\n          var pointXLocation,\n              allData = [];\n          data.filter(function (series, i) {\n            series.seriesIndex = i;\n            return !series.disabled;\n          }).forEach(function (series) {\n            var pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n            var point = series.values[pointIndex];\n            if (typeof point === 'undefined') return;\n            if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\n            var yPos = chart.yScale()(chart.y()(point, pointIndex));\n            allData.push({\n              point: point,\n              pointIndex: pointIndex,\n              pos: [pointXLocation, yPos],\n              seriesIndex: series.seriesIndex,\n              series: series\n            });\n          });\n          lines.dispatch.elementClick(allData);\n        });\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\n          lines.clearHighlights();\n        });\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          chart.update();\n        }); //============================================================\n        // Functions\n        //------------------------------------------------------------\n        // Taken from crossfilter (http://square.github.com/crossfilter/)\n\n        function resizePath(d) {\n          var e = +(d == 'e'),\n              x = e ? 1 : -1,\n              y = availableHeight / 3;\n          return 'M' + 0.5 * x + ',' + y + 'A6,6 0 0 ' + e + ' ' + 6.5 * x + ',' + (y + 6) + 'V' + (2 * y - 6) + 'A6,6 0 0 ' + e + ' ' + 0.5 * x + ',' + 2 * y + 'Z' + 'M' + 2.5 * x + ',' + (y + 8) + 'V' + (2 * y - 8) + 'M' + 4.5 * x + ',' + (y + 8) + 'V' + (2 * y - 8);\n        }\n\n        function onBrush(extent) {\n          // Update Main (Focus)\n          var focusLinesWrap = g.select('.nv-focus .nv-linesWrap').datum(data.filter(function (d) {\n            return !d.disabled;\n          }).map(function (d, i) {\n            return {\n              key: d.key,\n              area: d.area,\n              classed: d.classed,\n              values: d.values.filter(function (d, i) {\n                return lines.x()(d, i) >= extent[0] && lines.x()(d, i) <= extent[1];\n              }),\n              disableTooltip: d.disableTooltip\n            };\n          }));\n          focusLinesWrap.transition().duration(duration).call(lines); // Update Main (Focus) Axes\n\n          updateXAxis();\n          updateYAxis();\n        }\n      });\n      renderWatch.renderEnd('lineChart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    lines.dispatch.on('elementMouseover.tooltip', function (evt) {\n      if (!evt.series.disableTooltip) {\n        tooltip.data(evt).hidden(false);\n      }\n    });\n    lines.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.lines = lines;\n    chart.legend = legend;\n    chart.focus = focus;\n    chart.xAxis = xAxis;\n    chart.x2Axis = focus.xAxis;\n    chart.yAxis = yAxis;\n    chart.y2Axis = focus.yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.tooltip = tooltip;\n    chart.state = state;\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      legendPosition: {\n        get: function () {\n          return legendPosition;\n        },\n        set: function (_) {\n          legendPosition = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // Focus options, mostly passed onto focus model.\n      focusEnable: {\n        get: function () {\n          return focusEnable;\n        },\n        set: function (_) {\n          focusEnable = _;\n        }\n      },\n      focusHeight: {\n        get: function () {\n          return focus.height();\n        },\n        set: function (_) {\n          focus.height(_);\n        }\n      },\n      focusShowAxisX: {\n        get: function () {\n          return focus.showXAxis();\n        },\n        set: function (_) {\n          focus.showXAxis(_);\n        }\n      },\n      focusShowAxisY: {\n        get: function () {\n          return focus.showYAxis();\n        },\n        set: function (_) {\n          focus.showYAxis(_);\n        }\n      },\n      brushExtent: {\n        get: function () {\n          return focus.brushExtent();\n        },\n        set: function (_) {\n          focus.brushExtent(_);\n        }\n      },\n      // options that require extra logic in the setter\n      focusMargin: {\n        get: function () {\n          return focus.margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          focus.margin.right = _.right !== undefined ? _.right : focus.margin.right;\n          focus.margin.bottom = _.bottom !== undefined ? _.bottom : focus.margin.bottom;\n          focus.margin.left = _.left !== undefined ? _.left : focus.margin.left;\n        }\n      },\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          lines.duration(duration);\n          focus.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n          lines.color(color);\n          focus.color(color);\n        }\n      },\n      interpolate: {\n        get: function () {\n          return lines.interpolate();\n        },\n        set: function (_) {\n          lines.interpolate(_);\n          focus.interpolate(_);\n        }\n      },\n      xTickFormat: {\n        get: function () {\n          return xAxis.tickFormat();\n        },\n        set: function (_) {\n          xAxis.tickFormat(_);\n          focus.xTickFormat(_);\n        }\n      },\n      yTickFormat: {\n        get: function () {\n          return yAxis.tickFormat();\n        },\n        set: function (_) {\n          yAxis.tickFormat(_);\n          focus.yTickFormat(_);\n        }\n      },\n      x: {\n        get: function () {\n          return lines.x();\n        },\n        set: function (_) {\n          lines.x(_);\n          focus.x(_);\n        }\n      },\n      y: {\n        get: function () {\n          return lines.y();\n        },\n        set: function (_) {\n          lines.y(_);\n          focus.y(_);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n        }\n      },\n      useInteractiveGuideline: {\n        get: function () {\n          return useInteractiveGuideline;\n        },\n        set: function (_) {\n          useInteractiveGuideline = _;\n\n          if (useInteractiveGuideline) {\n            lines.interactive(false);\n            lines.useVoronoi(false);\n          }\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, lines);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.lineWithFocusChart = function () {\n    return nv.models.lineChart().margin({\n      bottom: 30\n    }).focusEnable(true);\n  };\n\n  nv.models.linePlusBarChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var lines = nv.models.line(),\n        lines2 = nv.models.line(),\n        bars = nv.models.historicalBar(),\n        bars2 = nv.models.historicalBar(),\n        xAxis = nv.models.axis(),\n        x2Axis = nv.models.axis(),\n        y1Axis = nv.models.axis(),\n        y2Axis = nv.models.axis(),\n        y3Axis = nv.models.axis(),\n        y4Axis = nv.models.axis(),\n        legend = nv.models.legend(),\n        brush = d3.svg.brush(),\n        tooltip = nv.models.tooltip();\n\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 30,\n      left: 60\n    },\n        marginTop = null,\n        margin2 = {\n      top: 0,\n      right: 30,\n      bottom: 20,\n      left: 60\n    },\n        width = null,\n        height = null,\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        color = nv.utils.defaultColor(),\n        showLegend = true,\n        focusEnable = true,\n        focusShowAxisY = false,\n        focusShowAxisX = true,\n        focusHeight = 50,\n        extent,\n        brushExtent = null,\n        x,\n        x2,\n        y1,\n        y2,\n        y3,\n        y4,\n        noData = null,\n        dispatch = d3.dispatch('brush', 'stateChange', 'changeState'),\n        transitionDuration = 0,\n        state = nv.utils.state(),\n        defaultState = null,\n        legendLeftAxisHint = ' (left axis)',\n        legendRightAxisHint = ' (right axis)',\n        switchYAxisOrder = false;\n\n    lines.clipEdge(true);\n    lines2.interactive(false); // We don't want any points emitted for the focus chart's scatter graph.\n\n    lines2.pointActive(function (d) {\n      return false;\n    });\n    xAxis.orient('bottom').tickPadding(5);\n    y1Axis.orient('left');\n    y2Axis.orient('right');\n    x2Axis.orient('bottom').tickPadding(5);\n    y3Axis.orient('left');\n    y4Axis.orient('right');\n    tooltip.headerEnabled(true).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var getBarsAxis = function () {\n      return switchYAxisOrder ? {\n        main: y2Axis,\n        focus: y4Axis\n      } : {\n        main: y1Axis,\n        focus: y3Axis\n      };\n    };\n\n    var getLinesAxis = function () {\n      return switchYAxisOrder ? {\n        main: y1Axis,\n        focus: y3Axis\n      } : {\n        main: y2Axis,\n        focus: y4Axis\n      };\n    };\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          })\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    var allDisabled = function (data) {\n      return data.every(function (series) {\n        return series.disabled;\n      });\n    };\n\n    function chart(selection) {\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight1 = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focusHeight : 0),\n            availableHeight2 = focusHeight - margin2.top - margin2.bottom;\n\n        chart.update = function () {\n          container.transition().duration(transitionDuration).call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disableddisabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display No Data message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        var dataBars = data.filter(function (d) {\n          return !d.disabled && d.bar;\n        });\n        var dataLines = data.filter(function (d) {\n          return !d.bar;\n        }); // removed the !d.disabled clause here to fix Issue #240\n\n        if (dataBars.length && !switchYAxisOrder) {\n          x = bars.xScale();\n        } else {\n          x = lines.xScale();\n        }\n\n        x2 = x2Axis.scale(); // select the scales and series based on the position of the yAxis\n\n        y1 = switchYAxisOrder ? lines.yScale() : bars.yScale();\n        y2 = switchYAxisOrder ? bars.yScale() : lines.yScale();\n        y3 = switchYAxisOrder ? lines2.yScale() : bars2.yScale();\n        y4 = switchYAxisOrder ? bars2.yScale() : lines2.yScale();\n        var series1 = data.filter(function (d) {\n          return !d.disabled && (switchYAxisOrder ? !d.bar : d.bar);\n        }).map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d, i),\n              y: getY(d, i)\n            };\n          });\n        });\n        var series2 = data.filter(function (d) {\n          return !d.disabled && (switchYAxisOrder ? d.bar : !d.bar);\n        }).map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d, i),\n              y: getY(d, i)\n            };\n          });\n        });\n        x.range([0, availableWidth]);\n        x2.domain(d3.extent(d3.merge(series1.concat(series2)), function (d) {\n          return d.x;\n        })).range([0, availableWidth]); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-linePlusBar').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-linePlusBar').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-legendWrap'); // this is the main chart\n\n        var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n        focusEnter.append('g').attr('class', 'nv-x nv-axis');\n        focusEnter.append('g').attr('class', 'nv-y1 nv-axis');\n        focusEnter.append('g').attr('class', 'nv-y2 nv-axis');\n        focusEnter.append('g').attr('class', 'nv-barsWrap');\n        focusEnter.append('g').attr('class', 'nv-linesWrap'); // context chart is where you can focus in\n\n        var contextEnter = gEnter.append('g').attr('class', 'nv-context');\n        contextEnter.append('g').attr('class', 'nv-x nv-axis');\n        contextEnter.append('g').attr('class', 'nv-y1 nv-axis');\n        contextEnter.append('g').attr('class', 'nv-y2 nv-axis');\n        contextEnter.append('g').attr('class', 'nv-barsWrap');\n        contextEnter.append('g').attr('class', 'nv-linesWrap');\n        contextEnter.append('g').attr('class', 'nv-brushBackground');\n        contextEnter.append('g').attr('class', 'nv-x nv-brush'); //============================================================\n        // Legend\n        //------------------------------------------------------------\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          var legendWidth = legend.align() ? availableWidth / 2 : availableWidth;\n          var legendXPosition = legend.align() ? legendWidth : 0;\n          legend.width(legendWidth);\n          g.select('.nv-legendWrap').datum(data.map(function (series) {\n            series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n\n            if (switchYAxisOrder) {\n              series.key = series.originalKey + (series.bar ? legendRightAxisHint : legendLeftAxisHint);\n            } else {\n              series.key = series.originalKey + (series.bar ? legendLeftAxisHint : legendRightAxisHint);\n            }\n\n            return series;\n          })).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height(); // FIXME: shouldn't this be \"- (focusEnabled ? focusHeight : 0)\"?\n\n            availableHeight1 = nv.utils.availableHeight(height, container, margin) - focusHeight;\n          }\n\n          g.select('.nv-legendWrap').attr('transform', 'translate(' + legendXPosition + ',' + -margin.top + ')');\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); //============================================================\n        // Context chart (focus chart) components\n        //------------------------------------------------------------\n        // hide or show the focus context chart\n\n        g.select('.nv-context').style('display', focusEnable ? 'initial' : 'none');\n        bars2.width(availableWidth).height(availableHeight2).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled && data[i].bar;\n        }));\n        lines2.width(availableWidth).height(availableHeight2).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled && !data[i].bar;\n        }));\n        var bars2Wrap = g.select('.nv-context .nv-barsWrap').datum(dataBars.length ? dataBars : [{\n          values: []\n        }]);\n        var lines2Wrap = g.select('.nv-context .nv-linesWrap').datum(allDisabled(dataLines) ? [{\n          values: []\n        }] : dataLines.filter(function (dataLine) {\n          return !dataLine.disabled;\n        }));\n        g.select('.nv-context').attr('transform', 'translate(0,' + (availableHeight1 + margin.bottom + margin2.top) + ')');\n        bars2Wrap.transition().call(bars2);\n        lines2Wrap.transition().call(lines2); // context (focus chart) axis controls\n\n        if (focusShowAxisX) {\n          x2Axis._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight2, 0);\n\n          g.select('.nv-context .nv-x.nv-axis').attr('transform', 'translate(0,' + y3.range()[0] + ')');\n          g.select('.nv-context .nv-x.nv-axis').transition().call(x2Axis);\n        }\n\n        if (focusShowAxisY) {\n          y3Axis.scale(y3)._ticks(availableHeight2 / 36).tickSize(-availableWidth, 0);\n\n          y4Axis.scale(y4)._ticks(availableHeight2 / 36).tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\n\n          g.select('.nv-context .nv-y3.nv-axis').style('opacity', dataBars.length ? 1 : 0).attr('transform', 'translate(0,' + x2.range()[0] + ')');\n          g.select('.nv-context .nv-y2.nv-axis').style('opacity', dataLines.length ? 1 : 0).attr('transform', 'translate(' + x2.range()[1] + ',0)');\n          g.select('.nv-context .nv-y1.nv-axis').transition().call(y3Axis);\n          g.select('.nv-context .nv-y2.nv-axis').transition().call(y4Axis);\n        } // Setup Brush\n\n\n        brush.x(x2).on('brush', onBrush);\n        if (brushExtent) brush.extent(brushExtent);\n        var brushBG = g.select('.nv-brushBackground').selectAll('g').data([brushExtent || brush.extent()]);\n        var brushBGenter = brushBG.enter().append('g');\n        brushBGenter.append('rect').attr('class', 'left').attr('x', 0).attr('y', 0).attr('height', availableHeight2);\n        brushBGenter.append('rect').attr('class', 'right').attr('x', 0).attr('y', 0).attr('height', availableHeight2);\n        var gBrush = g.select('.nv-x.nv-brush').call(brush);\n        gBrush.selectAll('rect') //.attr('y', -5)\n        .attr('height', availableHeight2);\n        gBrush.selectAll('.resize').append('path').attr('d', resizePath); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          chart.update();\n        }); //============================================================\n        // Functions\n        //------------------------------------------------------------\n        // Taken from crossfilter (http://square.github.com/crossfilter/)\n\n        function resizePath(d) {\n          var e = +(d == 'e'),\n              x = e ? 1 : -1,\n              y = availableHeight2 / 3;\n          return 'M' + .5 * x + ',' + y + 'A6,6 0 0 ' + e + ' ' + 6.5 * x + ',' + (y + 6) + 'V' + (2 * y - 6) + 'A6,6 0 0 ' + e + ' ' + .5 * x + ',' + 2 * y + 'Z' + 'M' + 2.5 * x + ',' + (y + 8) + 'V' + (2 * y - 8) + 'M' + 4.5 * x + ',' + (y + 8) + 'V' + (2 * y - 8);\n        }\n\n        function updateBrushBG() {\n          if (!brush.empty()) brush.extent(brushExtent);\n          brushBG.data([brush.empty() ? x2.domain() : brushExtent]).each(function (d, i) {\n            var leftWidth = x2(d[0]) - x2.range()[0],\n                rightWidth = x2.range()[1] - x2(d[1]);\n            d3.select(this).select('.left').attr('width', leftWidth < 0 ? 0 : leftWidth);\n            d3.select(this).select('.right').attr('x', x2(d[1])).attr('width', rightWidth < 0 ? 0 : rightWidth);\n          });\n        }\n\n        function onBrush() {\n          brushExtent = brush.empty() ? null : brush.extent();\n          extent = brush.empty() ? x2.domain() : brush.extent();\n          dispatch.brush({\n            extent: extent,\n            brush: brush\n          });\n          updateBrushBG(); // Prepare Main (Focus) Bars and Lines\n\n          bars.width(availableWidth).height(availableHeight1).color(data.map(function (d, i) {\n            return d.color || color(d, i);\n          }).filter(function (d, i) {\n            return !data[i].disabled && data[i].bar;\n          }));\n          lines.width(availableWidth).height(availableHeight1).color(data.map(function (d, i) {\n            return d.color || color(d, i);\n          }).filter(function (d, i) {\n            return !data[i].disabled && !data[i].bar;\n          }));\n          var focusBarsWrap = g.select('.nv-focus .nv-barsWrap').datum(!dataBars.length ? [{\n            values: []\n          }] : dataBars.map(function (d, i) {\n            return {\n              key: d.key,\n              values: d.values.filter(function (d, i) {\n                return bars.x()(d, i) >= extent[0] && bars.x()(d, i) <= extent[1];\n              })\n            };\n          }));\n          var focusLinesWrap = g.select('.nv-focus .nv-linesWrap').datum(allDisabled(dataLines) ? [{\n            values: []\n          }] : dataLines.filter(function (dataLine) {\n            return !dataLine.disabled;\n          }).map(function (d, i) {\n            return {\n              area: d.area,\n              fillOpacity: d.fillOpacity,\n              strokeWidth: d.strokeWidth,\n              key: d.key,\n              values: d.values.filter(function (d, i) {\n                return lines.x()(d, i) >= extent[0] && lines.x()(d, i) <= extent[1];\n              })\n            };\n          })); // Update Main (Focus) X Axis\n\n          if (dataBars.length && !switchYAxisOrder) {\n            x = bars.xScale();\n          } else {\n            x = lines.xScale();\n          }\n\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight1, 0);\n\n          xAxis.domain([Math.ceil(extent[0]), Math.floor(extent[1])]);\n          g.select('.nv-x.nv-axis').transition().duration(transitionDuration).call(xAxis); // Update Main (Focus) Bars and Lines\n\n          focusBarsWrap.transition().duration(transitionDuration).call(bars);\n          focusLinesWrap.transition().duration(transitionDuration).call(lines); // Setup and Update Main (Focus) Y Axes\n\n          g.select('.nv-focus .nv-x.nv-axis').attr('transform', 'translate(0,' + y1.range()[0] + ')');\n\n          y1Axis.scale(y1)._ticks(nv.utils.calcTicksY(availableHeight1 / 36, data)).tickSize(-availableWidth, 0);\n\n          y2Axis.scale(y2)._ticks(nv.utils.calcTicksY(availableHeight1 / 36, data)); // Show the y2 rules only if y1 has none\n\n\n          if (!switchYAxisOrder) {\n            y2Axis.tickSize(dataBars.length ? 0 : -availableWidth, 0);\n          } else {\n            y2Axis.tickSize(dataLines.length ? 0 : -availableWidth, 0);\n          } // Calculate opacity of the axis\n\n\n          var barsOpacity = dataBars.length ? 1 : 0;\n          var linesOpacity = dataLines.length && !allDisabled(dataLines) ? 1 : 0;\n          var y1Opacity = switchYAxisOrder ? linesOpacity : barsOpacity;\n          var y2Opacity = switchYAxisOrder ? barsOpacity : linesOpacity;\n          g.select('.nv-focus .nv-y1.nv-axis').style('opacity', y1Opacity);\n          g.select('.nv-focus .nv-y2.nv-axis').style('opacity', y2Opacity).attr('transform', 'translate(' + x.range()[1] + ',0)');\n          g.select('.nv-focus .nv-y1.nv-axis').transition().duration(transitionDuration).call(y1Axis);\n          g.select('.nv-focus .nv-y2.nv-axis').transition().duration(transitionDuration).call(y2Axis);\n        }\n\n        onBrush();\n      });\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    lines.dispatch.on('elementMouseover.tooltip', function (evt) {\n      tooltip.duration(100).valueFormatter(function (d, i) {\n        return getLinesAxis().main.tickFormat()(d, i);\n      }).data(evt).hidden(false);\n    });\n    lines.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    bars.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt.value = chart.x()(evt.data);\n      evt['series'] = {\n        value: chart.y()(evt.data),\n        color: evt.color\n      };\n      tooltip.duration(0).valueFormatter(function (d, i) {\n        return getBarsAxis().main.tickFormat()(d, i);\n      }).data(evt).hidden(false);\n    });\n    bars.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    bars.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.legend = legend;\n    chart.lines = lines;\n    chart.lines2 = lines2;\n    chart.bars = bars;\n    chart.bars2 = bars2;\n    chart.xAxis = xAxis;\n    chart.x2Axis = x2Axis;\n    chart.y1Axis = y1Axis;\n    chart.y2Axis = y2Axis;\n    chart.y3Axis = y3Axis;\n    chart.y4Axis = y4Axis;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      brushExtent: {\n        get: function () {\n          return brushExtent;\n        },\n        set: function (_) {\n          brushExtent = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      focusEnable: {\n        get: function () {\n          return focusEnable;\n        },\n        set: function (_) {\n          focusEnable = _;\n        }\n      },\n      focusHeight: {\n        get: function () {\n          return focusHeight;\n        },\n        set: function (_) {\n          focusHeight = _;\n        }\n      },\n      focusShowAxisX: {\n        get: function () {\n          return focusShowAxisX;\n        },\n        set: function (_) {\n          focusShowAxisX = _;\n        }\n      },\n      focusShowAxisY: {\n        get: function () {\n          return focusShowAxisY;\n        },\n        set: function (_) {\n          focusShowAxisY = _;\n        }\n      },\n      legendLeftAxisHint: {\n        get: function () {\n          return legendLeftAxisHint;\n        },\n        set: function (_) {\n          legendLeftAxisHint = _;\n        }\n      },\n      legendRightAxisHint: {\n        get: function () {\n          return legendRightAxisHint;\n        },\n        set: function (_) {\n          legendRightAxisHint = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      focusMargin: {\n        get: function () {\n          return margin2;\n        },\n        set: function (_) {\n          margin2.top = _.top !== undefined ? _.top : margin2.top;\n          margin2.right = _.right !== undefined ? _.right : margin2.right;\n          margin2.bottom = _.bottom !== undefined ? _.bottom : margin2.bottom;\n          margin2.left = _.left !== undefined ? _.left : margin2.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return transitionDuration;\n        },\n        set: function (_) {\n          transitionDuration = _;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n          lines.x(_);\n          lines2.x(_);\n          bars.x(_);\n          bars2.x(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n          lines.y(_);\n          lines2.y(_);\n          bars.y(_);\n          bars2.y(_);\n        }\n      },\n      switchYAxisOrder: {\n        get: function () {\n          return switchYAxisOrder;\n        },\n        set: function (_) {\n          // Switch the tick format for the yAxis\n          if (switchYAxisOrder !== _) {\n            var y1 = y1Axis;\n            y1Axis = y2Axis;\n            y2Axis = y1;\n            var y3 = y3Axis;\n            y3Axis = y4Axis;\n            y4Axis = y3;\n          }\n\n          switchYAxisOrder = _;\n          y1Axis.orient('left');\n          y2Axis.orient('right');\n          y3Axis.orient('left');\n          y4Axis.orient('right');\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, lines);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.multiBar = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 960,\n        height = 500,\n        x = d3.scale.ordinal(),\n        y = d3.scale.linear(),\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container = null,\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n    ,\n        clipEdge = true,\n        stacked = false,\n        stackOffset = 'zero' // options include 'silhouette', 'wiggle', 'expand', 'zero', or a custom function\n    ,\n        color = nv.utils.defaultColor(),\n        hideable = false,\n        barColor = null // adding the ability to set the color for each rather than the whole group\n    ,\n        disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n    ,\n        duration = 500,\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        groupSpacing = 0.1,\n        fillOpacity = 0.75,\n        dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var x0,\n        y0 //used to store previous scales\n    ,\n        renderWatch = nv.utils.renderWatch(dispatch, duration);\n    var last_datalength = 0;\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container);\n        var nonStackableCount = 0; // This function defines the requirements for render complete\n\n        var endFn = function (d, i) {\n          if (d.series === data.length - 1 && i === data[0].values.length - 1) return true;\n          return false;\n        };\n\n        if (hideable && data.length) hideable = [{\n          values: data[0].values.map(function (d) {\n            return {\n              x: d.x,\n              y: 0,\n              series: d.series,\n              size: 0.01\n            };\n          })\n        }];\n\n        if (stacked) {\n          var parsed = d3.layout.stack().offset(stackOffset).values(function (d) {\n            return d.values;\n          }).y(getY)(!data.length && hideable ? hideable : data);\n          parsed.forEach(function (series, i) {\n            // if series is non-stackable, use un-parsed data\n            if (series.nonStackable) {\n              data[i].nonStackableSeries = nonStackableCount++;\n              parsed[i] = data[i];\n            } else {\n              // don't stack this seires on top of the nonStackable seriees\n              if (i > 0 && parsed[i - 1].nonStackable) {\n                parsed[i].values.map(function (d, j) {\n                  d.y0 -= parsed[i - 1].values[j].y;\n                  d.y1 = d.y0 + d.y;\n                });\n              }\n            }\n          });\n          data = parsed;\n        } //add series index and key to each data point for reference\n\n\n        data.forEach(function (series, i) {\n          series.values.forEach(function (point) {\n            point.series = i;\n            point.key = series.key;\n          });\n        }); // HACK for negative value stacking\n\n        if (stacked && data.length > 0) {\n          data[0].values.map(function (d, i) {\n            var posBase = 0,\n                negBase = 0;\n            data.map(function (d, idx) {\n              if (!data[idx].nonStackable) {\n                var f = d.values[i];\n                f.size = Math.abs(f.y);\n\n                if (f.y < 0) {\n                  f.y1 = negBase;\n                  negBase = negBase - f.size;\n                } else {\n                  f.y1 = f.size + posBase;\n                  posBase = posBase + f.size;\n                }\n              }\n            });\n          });\n        } // Setup Scales\n        // remap and flatten the data for use in calculating the scales' domains\n\n\n        var seriesData = xDomain && yDomain ? [] : // if we know xDomain and yDomain, no need to calculate\n        data.map(function (d, idx) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d, i),\n              y: getY(d, i),\n              y0: d.y0,\n              y1: d.y1,\n              idx: idx\n            };\n          });\n        });\n        x.domain(xDomain || d3.merge(seriesData).map(function (d) {\n          return d.x;\n        })).rangeBands(xRange || [0, availableWidth], groupSpacing);\n        y.domain(yDomain || d3.extent(d3.merge(seriesData).map(function (d) {\n          var domain = d.y; // increase the domain range if this series is stackable\n\n          if (stacked && !data[d.idx].nonStackable) {\n            if (d.y > 0) {\n              domain = d.y1;\n            } else {\n              domain = d.y1 + d.y;\n            }\n          }\n\n          return domain;\n        }).concat(forceY))).range(yRange || [availableHeight, 0]); // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\n        if (x.domain()[0] === x.domain()[1]) x.domain()[0] ? x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01]) : x.domain([-1, 1]);\n        if (y.domain()[0] === y.domain()[1]) y.domain()[0] ? y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01]) : y.domain([-1, 1]);\n        x0 = x0 || x;\n        y0 = y0 || y; // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-multibar').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibar');\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-groups');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        defsEnter.append('clipPath').attr('id', 'nv-edge-clip-' + id).append('rect');\n        wrap.select('#nv-edge-clip-' + id + ' rect').attr('width', availableWidth).attr('height', availableHeight);\n        g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n        var groups = wrap.select('.nv-groups').selectAll('.nv-group').data(function (d) {\n          return d;\n        }, function (d, i) {\n          return i;\n        });\n        groups.enter().append('g').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n        var exitTransition = renderWatch.transition(groups.exit().selectAll('rect.nv-bar'), 'multibarExit', Math.min(100, duration)).attr('y', function (d, i, j) {\n          var yVal = y0(0) || 0;\n\n          if (stacked) {\n            if (data[d.series] && !data[d.series].nonStackable) {\n              yVal = y0(d.y0);\n            }\n          }\n\n          return yVal;\n        }).attr('height', 0).remove();\n        if (exitTransition.delay) exitTransition.delay(function (d, i) {\n          var delay = i * (duration / (last_datalength + 1)) - i;\n          return delay;\n        });\n        groups.attr('class', function (d, i) {\n          return 'nv-group nv-series-' + i;\n        }).classed('hover', function (d) {\n          return d.hover;\n        }).style('fill', function (d, i) {\n          return color(d, i);\n        }).style('stroke', function (d, i) {\n          return color(d, i);\n        });\n        groups.style('stroke-opacity', 1).style('fill-opacity', fillOpacity);\n        var bars = groups.selectAll('rect.nv-bar').data(function (d) {\n          return hideable && !data.length ? hideable.values : d.values;\n        });\n        bars.exit().remove();\n        var barsEnter = bars.enter().append('rect').attr('class', function (d, i) {\n          return getY(d, i) < 0 ? 'nv-bar negative' : 'nv-bar positive';\n        }).attr('x', function (d, i, j) {\n          return stacked && !data[j].nonStackable ? 0 : j * x.rangeBand() / data.length;\n        }).attr('y', function (d, i, j) {\n          return y0(stacked && !data[j].nonStackable ? d.y0 : 0) || 0;\n        }).attr('height', 0).attr('width', function (d, i, j) {\n          return x.rangeBand() / (stacked && !data[j].nonStackable ? 1 : data.length);\n        }).attr('transform', function (d, i) {\n          return 'translate(' + x(getX(d, i)) + ',0)';\n        });\n        bars.style('fill', function (d, i, j) {\n          return color(d, j, i);\n        }).style('stroke', function (d, i, j) {\n          return color(d, j, i);\n        }).on('mouseover', function (d, i, j) {\n          d3.select(this).classed('hover', true);\n          dispatch.elementMouseover({\n            data: d,\n            index: i,\n            series: data[j],\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i, j) {\n          d3.select(this).classed('hover', false);\n          dispatch.elementMouseout({\n            data: d,\n            index: i,\n            series: data[j],\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mousemove', function (d, i, j) {\n          dispatch.elementMousemove({\n            data: d,\n            index: i,\n            series: data[j],\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('click', function (d, i, j) {\n          var element = this;\n          dispatch.elementClick({\n            data: d,\n            index: i,\n            series: data[j],\n            color: d3.select(this).style(\"fill\"),\n            event: d3.event,\n            element: element\n          });\n          d3.event.stopPropagation();\n        }).on('dblclick', function (d, i, j) {\n          dispatch.elementDblClick({\n            data: d,\n            index: i,\n            series: data[j],\n            color: d3.select(this).style(\"fill\")\n          });\n          d3.event.stopPropagation();\n        });\n        bars.attr('class', function (d, i) {\n          return getY(d, i) < 0 ? 'nv-bar negative' : 'nv-bar positive';\n        }).attr('transform', function (d, i) {\n          return 'translate(' + x(getX(d, i)) + ',0)';\n        });\n\n        if (barColor) {\n          if (!disabled) disabled = data.map(function () {\n            return true;\n          });\n          bars.style('fill', function (d, i, j) {\n            return d3.rgb(barColor(d, i)).darker(disabled.map(function (d, i) {\n              return i;\n            }).filter(function (d, i) {\n              return !disabled[i];\n            })[j]).toString();\n          }).style('stroke', function (d, i, j) {\n            return d3.rgb(barColor(d, i)).darker(disabled.map(function (d, i) {\n              return i;\n            }).filter(function (d, i) {\n              return !disabled[i];\n            })[j]).toString();\n          });\n        }\n\n        var barSelection = bars.watchTransition(renderWatch, 'multibar', Math.min(250, duration)).delay(function (d, i) {\n          return i * duration / data[0].values.length;\n        });\n\n        if (stacked) {\n          barSelection.attr('y', function (d, i, j) {\n            var yVal = 0; // if stackable, stack it on top of the previous series\n\n            if (!data[j].nonStackable) {\n              yVal = y(d.y1);\n            } else {\n              if (getY(d, i) < 0) {\n                yVal = y(0);\n              } else {\n                if (y(0) - y(getY(d, i)) < -1) {\n                  yVal = y(0) - 1;\n                } else {\n                  yVal = y(getY(d, i)) || 0;\n                }\n              }\n            }\n\n            return yVal;\n          }).attr('height', function (d, i, j) {\n            if (!data[j].nonStackable) {\n              return Math.max(Math.abs(y(d.y + d.y0) - y(d.y0)), 0);\n            } else {\n              return Math.max(Math.abs(y(getY(d, i)) - y(0)), 0) || 0;\n            }\n          }).attr('x', function (d, i, j) {\n            var width = 0;\n\n            if (data[j].nonStackable) {\n              width = d.series * x.rangeBand() / data.length;\n\n              if (data.length !== nonStackableCount) {\n                width = data[j].nonStackableSeries * x.rangeBand() / (nonStackableCount * 2);\n              }\n            }\n\n            return width;\n          }).attr('width', function (d, i, j) {\n            if (!data[j].nonStackable) {\n              return x.rangeBand();\n            } else {\n              // if all series are nonStacable, take the full width\n              var width = x.rangeBand() / nonStackableCount; // otherwise, nonStackable graph will be only taking the half-width\n              // of the x rangeBand\n\n              if (data.length !== nonStackableCount) {\n                width = x.rangeBand() / (nonStackableCount * 2);\n              }\n\n              return width;\n            }\n          });\n        } else {\n          barSelection.attr('x', function (d, i) {\n            return d.series * x.rangeBand() / data.length;\n          }).attr('width', x.rangeBand() / data.length).attr('y', function (d, i) {\n            return getY(d, i) < 0 ? y(0) : y(0) - y(getY(d, i)) < 1 ? y(0) - 1 : y(getY(d, i)) || 0;\n          }).attr('height', function (d, i) {\n            return Math.max(Math.abs(y(getY(d, i)) - y(0)), 1) || 0;\n          });\n        } //store old scales for use in transitions on update\n\n\n        x0 = x.copy();\n        y0 = y.copy(); // keep track of the last data value length for transition calculations\n\n        if (data[0] && data[0].values) {\n          last_datalength = data[0].values.length;\n        }\n      });\n      renderWatch.renderEnd('multibar immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      stacked: {\n        get: function () {\n          return stacked;\n        },\n        set: function (_) {\n          stacked = _;\n        }\n      },\n      stackOffset: {\n        get: function () {\n          return stackOffset;\n        },\n        set: function (_) {\n          stackOffset = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      disabled: {\n        get: function () {\n          return disabled;\n        },\n        set: function (_) {\n          disabled = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      hideable: {\n        get: function () {\n          return hideable;\n        },\n        set: function (_) {\n          hideable = _;\n        }\n      },\n      groupSpacing: {\n        get: function () {\n          return groupSpacing;\n        },\n        set: function (_) {\n          groupSpacing = _;\n        }\n      },\n      fillOpacity: {\n        get: function () {\n          return fillOpacity;\n        },\n        set: function (_) {\n          fillOpacity = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      barColor: {\n        get: function () {\n          return barColor;\n        },\n        set: function (_) {\n          barColor = _ ? nv.utils.getColor(_) : null;\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.multiBarChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var multibar = nv.models.multiBar(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        interactiveLayer = nv.interactiveGuideline(),\n        legend = nv.models.legend(),\n        controls = nv.models.legend(),\n        tooltip = nv.models.tooltip();\n\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        color = nv.utils.defaultColor(),\n        showControls = true,\n        controlLabels = {},\n        showLegend = true,\n        legendPosition = null,\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        reduceXTicks = true // if false a tick will show for every data point\n    ,\n        staggerLabels = false,\n        wrapLabels = false,\n        rotateLabels = 0,\n        x //can be accessed via chart.xScale()\n    ,\n        y //can be accessed via chart.yScale()\n    ,\n        state = nv.utils.state(),\n        defaultState = null,\n        noData = null,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'),\n        controlWidth = function () {\n      return showControls ? 180 : 0;\n    },\n        duration = 250,\n        useInteractiveGuideline = false;\n\n    state.stacked = false; // DEPRECATED Maintained for backward compatibility\n\n    multibar.stacked(false);\n    xAxis.orient('bottom').tickPadding(7).showMaxMin(false).tickFormat(function (d) {\n      return d;\n    });\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left').tickFormat(d3.format(',.1f'));\n    tooltip.duration(0).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    interactiveLayer.tooltip.valueFormatter(function (d, i) {\n      return d == null ? \"N/A\" : yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    interactiveLayer.tooltip.valueFormatter(function (d, i) {\n      return d == null ? \"N/A\" : yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    interactiveLayer.tooltip.duration(0).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    controls.updateState(false); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n    var stacked = false;\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          }),\n          stacked: stacked\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.stacked !== undefined) stacked = state.stacked;\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(multibar);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          if (duration === 0) container.call(chart);else container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disableddisabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display noData message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = multibar.xScale();\n        y = multibar.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-multiBarWithLegend').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarWithLegend').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis');\n        gEnter.append('g').attr('class', 'nv-barsWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        gEnter.append('g').attr('class', 'nv-controlsWrap');\n        gEnter.append('g').attr('class', 'nv-interactive'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          if (legendPosition === 'bottom') {\n            legend.width(availableWidth - margin.right);\n            g.select('.nv-legendWrap').datum(data).call(legend);\n            margin.bottom = xAxis.height() + legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n            g.select('.nv-legendWrap').attr('transform', 'translate(0,' + (availableHeight + xAxis.height()) + ')');\n          } else {\n            legend.width(availableWidth - controlWidth());\n            g.select('.nv-legendWrap').datum(data).call(legend);\n\n            if (!marginTop && legend.height() !== margin.top) {\n              margin.top = legend.height();\n              availableHeight = nv.utils.availableHeight(height, container, margin);\n            }\n\n            g.select('.nv-legendWrap').attr('transform', 'translate(' + controlWidth() + ',' + -margin.top + ')');\n          }\n        } // Controls\n\n\n        if (!showControls) {\n          g.select('.nv-controlsWrap').selectAll('*').remove();\n        } else {\n          var controlsData = [{\n            key: controlLabels.grouped || 'Grouped',\n            disabled: multibar.stacked()\n          }, {\n            key: controlLabels.stacked || 'Stacked',\n            disabled: !multibar.stacked()\n          }];\n          controls.width(controlWidth()).color(['#444', '#444', '#444']);\n          g.select('.nv-controlsWrap').datum(controlsData).attr('transform', 'translate(0,' + -margin.top + ')').call(controls);\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } // Main Chart Component(s)\n\n\n        multibar.disabled(data.map(function (series) {\n          return series.disabled;\n        })).width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        }));\n        var barsWrap = g.select('.nv-barsWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        }));\n        barsWrap.call(multibar); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')');\n          g.select('.nv-x.nv-axis').call(xAxis);\n          var xTicks = g.select('.nv-x.nv-axis > g').selectAll('g');\n          xTicks.selectAll('line, text').style('opacity', 1);\n\n          if (staggerLabels) {\n            var getTranslate = function (x, y) {\n              return \"translate(\" + x + \",\" + y + \")\";\n            };\n\n            var staggerUp = 5,\n                staggerDown = 17; //pixels to stagger by\n            // Issue #140\n\n            xTicks.selectAll(\"text\").attr('transform', function (d, i, j) {\n              return getTranslate(0, j % 2 == 0 ? staggerUp : staggerDown);\n            });\n            var totalInBetweenTicks = d3.selectAll(\".nv-x.nv-axis .nv-wrap g g text\")[0].length;\n            g.selectAll(\".nv-x.nv-axis .nv-axisMaxMin text\").attr(\"transform\", function (d, i) {\n              return getTranslate(0, i === 0 || totalInBetweenTicks % 2 !== 0 ? staggerDown : staggerUp);\n            });\n          }\n\n          if (wrapLabels) {\n            g.selectAll('.tick text').call(nv.utils.wrapTicks, chart.xAxis.rangeBand());\n          }\n\n          if (reduceXTicks) xTicks.filter(function (d, i) {\n            return i % Math.ceil(data[0].values.length / (availableWidth / 100)) !== 0;\n          }).selectAll('text, line').style('opacity', 0);\n          if (rotateLabels) xTicks.selectAll('.tick text').attr('transform', 'rotate(' + rotateLabels + ' 0,0)').style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\n          g.select('.nv-x.nv-axis').selectAll('g.nv-axisMaxMin text').style('opacity', 1);\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } //Set up interactive layer\n\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({\n            left: margin.left,\n            top: margin.top\n          }).svgContainer(container).xScale(x);\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\n        } //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        controls.dispatch.on('legendClick', function (d, i) {\n          if (!d.disabled) return;\n          controlsData = controlsData.map(function (s) {\n            s.disabled = true;\n            return s;\n          });\n          d.disabled = false;\n\n          switch (d.key) {\n            case 'Grouped':\n            case controlLabels.grouped:\n              multibar.stacked(false);\n              break;\n\n            case 'Stacked':\n            case controlLabels.stacked:\n              multibar.stacked(true);\n              break;\n          }\n\n          state.stacked = multibar.stacked();\n          dispatch.stateChange(state);\n          chart.update();\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          if (typeof e.stacked !== 'undefined') {\n            multibar.stacked(e.stacked);\n            state.stacked = e.stacked;\n            stacked = e.stacked;\n          }\n\n          chart.update();\n        });\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.dispatch.on('elementMousemove', function (e) {\n            if (e.pointXValue == undefined) return;\n            var singlePoint,\n                pointIndex,\n                pointXLocation,\n                xValue,\n                allData = [];\n            data.filter(function (series, i) {\n              series.seriesIndex = i;\n              return !series.disabled;\n            }).forEach(function (series, i) {\n              pointIndex = x.domain().indexOf(e.pointXValue);\n              var point = series.values[pointIndex];\n              if (point === undefined) return;\n              xValue = point.x;\n              if (singlePoint === undefined) singlePoint = point;\n              if (pointXLocation === undefined) pointXLocation = e.mouseX;\n              allData.push({\n                key: series.key,\n                value: chart.y()(point, pointIndex),\n                color: color(series, series.seriesIndex),\n                data: series.values[pointIndex]\n              });\n            });\n            interactiveLayer.tooltip.data({\n              value: xValue,\n              index: pointIndex,\n              series: allData\n            })();\n            interactiveLayer.renderGuideLine(pointXLocation);\n          });\n          interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\n            interactiveLayer.tooltip.hidden(true);\n          });\n        } else {\n          multibar.dispatch.on('elementMouseover.tooltip', function (evt) {\n            evt.value = chart.x()(evt.data);\n            evt['series'] = {\n              key: evt.data.key,\n              value: chart.y()(evt.data),\n              color: evt.color\n            };\n            tooltip.data(evt).hidden(false);\n          });\n          multibar.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          multibar.dispatch.on('elementMousemove.tooltip', function (evt) {\n            tooltip();\n          });\n        }\n      });\n      renderWatch.renderEnd('multibarchart immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n\n    chart.dispatch = dispatch;\n    chart.multibar = multibar;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.state = state;\n    chart.tooltip = tooltip;\n    chart.interactiveLayer = interactiveLayer;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      legendPosition: {\n        get: function () {\n          return legendPosition;\n        },\n        set: function (_) {\n          legendPosition = _;\n        }\n      },\n      showControls: {\n        get: function () {\n          return showControls;\n        },\n        set: function (_) {\n          showControls = _;\n        }\n      },\n      controlLabels: {\n        get: function () {\n          return controlLabels;\n        },\n        set: function (_) {\n          controlLabels = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      reduceXTicks: {\n        get: function () {\n          return reduceXTicks;\n        },\n        set: function (_) {\n          reduceXTicks = _;\n        }\n      },\n      rotateLabels: {\n        get: function () {\n          return rotateLabels;\n        },\n        set: function (_) {\n          rotateLabels = _;\n        }\n      },\n      staggerLabels: {\n        get: function () {\n          return staggerLabels;\n        },\n        set: function (_) {\n          staggerLabels = _;\n        }\n      },\n      wrapLabels: {\n        get: function () {\n          return wrapLabels;\n        },\n        set: function (_) {\n          wrapLabels = !!_;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          multibar.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n          renderWatch.reset(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n        }\n      },\n      useInteractiveGuideline: {\n        get: function () {\n          return useInteractiveGuideline;\n        },\n        set: function (_) {\n          useInteractiveGuideline = _;\n        }\n      },\n      barColor: {\n        get: function () {\n          return multibar.barColor;\n        },\n        set: function (_) {\n          multibar.barColor(_);\n          legend.color(function (d, i) {\n            return d3.rgb('#ccc').darker(i * 1.5).toString();\n          });\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, multibar);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.multiBarHorizontal = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 960,\n        height = 500,\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container = null,\n        x = d3.scale.ordinal(),\n        y = d3.scale.linear(),\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        getYerr = function (d) {\n      return d.yErr;\n    },\n        forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n    ,\n        color = nv.utils.defaultColor(),\n        barColor = null // adding the ability to set the color for each rather than the whole group\n    ,\n        disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n    ,\n        stacked = false,\n        showValues = false,\n        showBarLabels = false,\n        valuePadding = 60,\n        groupSpacing = 0.1,\n        fillOpacity = 0.75,\n        valueFormat = d3.format(',.2f'),\n        delay = 1200,\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        duration = 250,\n        dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var x0, y0; //used to store previous scales\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container);\n        if (stacked) data = d3.layout.stack().offset('zero').values(function (d) {\n          return d.values;\n        }).y(getY)(data); //add series index and key to each data point for reference\n\n        data.forEach(function (series, i) {\n          series.values.forEach(function (point) {\n            point.series = i;\n            point.key = series.key;\n          });\n        }); // HACK for negative value stacking\n\n        if (stacked) data[0].values.map(function (d, i) {\n          var posBase = 0,\n              negBase = 0;\n          data.map(function (d) {\n            var f = d.values[i];\n            f.size = Math.abs(f.y);\n\n            if (f.y < 0) {\n              f.y1 = negBase - f.size;\n              negBase = negBase - f.size;\n            } else {\n              f.y1 = posBase;\n              posBase = posBase + f.size;\n            }\n          });\n        }); // Setup Scales\n        // remap and flatten the data for use in calculating the scales' domains\n\n        var seriesData = xDomain && yDomain ? [] : // if we know xDomain and yDomain, no need to calculate\n        data.map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d, i),\n              y: getY(d, i),\n              y0: d.y0,\n              y1: d.y1\n            };\n          });\n        });\n        x.domain(xDomain || d3.merge(seriesData).map(function (d) {\n          return d.x;\n        })).rangeBands(xRange || [0, availableHeight], groupSpacing);\n        y.domain(yDomain || d3.extent(d3.merge(seriesData).map(function (d) {\n          return stacked ? d.y > 0 ? d.y1 + d.y : d.y1 : d.y;\n        }).concat(forceY)));\n        if (showValues && !stacked) y.range(yRange || [y.domain()[0] < 0 ? valuePadding : 0, availableWidth - (y.domain()[1] > 0 ? valuePadding : 0)]);else y.range(yRange || [0, availableWidth]);\n        x0 = x0 || x;\n        y0 = y0 || d3.scale.linear().domain(y.domain()).range([y(0), y(0)]); // Setup containers and skeleton of chart\n\n        var wrap = d3.select(this).selectAll('g.nv-wrap.nv-multibarHorizontal').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibarHorizontal');\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-groups');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        var groups = wrap.select('.nv-groups').selectAll('.nv-group').data(function (d) {\n          return d;\n        }, function (d, i) {\n          return i;\n        });\n        groups.enter().append('g').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n        groups.exit().watchTransition(renderWatch, 'multibarhorizontal: exit groups').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6).remove();\n        groups.attr('class', function (d, i) {\n          return 'nv-group nv-series-' + i;\n        }).classed('hover', function (d) {\n          return d.hover;\n        }).style('fill', function (d, i) {\n          return color(d, i);\n        }).style('stroke', function (d, i) {\n          return color(d, i);\n        });\n        groups.watchTransition(renderWatch, 'multibarhorizontal: groups').style('stroke-opacity', 1).style('fill-opacity', fillOpacity);\n        var bars = groups.selectAll('g.nv-bar').data(function (d) {\n          return d.values;\n        });\n        bars.exit().remove();\n        var barsEnter = bars.enter().append('g').attr('transform', function (d, i, j) {\n          return 'translate(' + y0(stacked ? d.y0 : 0) + ',' + (stacked ? 0 : j * x.rangeBand() / data.length + x(getX(d, i))) + ')';\n        });\n        barsEnter.append('rect').attr('width', 0).attr('height', x.rangeBand() / (stacked ? 1 : data.length));\n        bars.on('mouseover', function (d, i) {\n          //TODO: figure out why j works above, but not here\n          d3.select(this).classed('hover', true);\n          dispatch.elementMouseover({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          d3.select(this).classed('hover', false);\n          dispatch.elementMouseout({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mouseout', function (d, i) {\n          dispatch.elementMouseout({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('mousemove', function (d, i) {\n          dispatch.elementMousemove({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        }).on('click', function (d, i) {\n          var element = this;\n          dispatch.elementClick({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\"),\n            event: d3.event,\n            element: element\n          });\n          d3.event.stopPropagation();\n        }).on('dblclick', function (d, i) {\n          dispatch.elementDblClick({\n            data: d,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n          d3.event.stopPropagation();\n        });\n\n        if (getYerr(data[0], 0)) {\n          barsEnter.append('polyline');\n          bars.select('polyline').attr('fill', 'none').attr('points', function (d, i) {\n            var xerr = getYerr(d, i),\n                mid = 0.8 * x.rangeBand() / ((stacked ? 1 : data.length) * 2);\n            xerr = xerr.length ? xerr : [-Math.abs(xerr), Math.abs(xerr)];\n            xerr = xerr.map(function (e) {\n              return y(e + (getY(d, i) < 0 ? 0 : getY(d, i))) - y(0);\n            });\n            var a = [[xerr[0], -mid], [xerr[0], mid], [xerr[0], 0], [xerr[1], 0], [xerr[1], -mid], [xerr[1], mid]];\n            return a.map(function (path) {\n              return path.join(',');\n            }).join(' ');\n          }).attr('transform', function (d, i) {\n            var mid = x.rangeBand() / ((stacked ? 1 : data.length) * 2);\n            return 'translate(0, ' + mid + ')';\n          });\n        }\n\n        barsEnter.append('text');\n\n        if (showValues && !stacked) {\n          bars.select('text').attr('text-anchor', function (d, i) {\n            return getY(d, i) < 0 ? 'end' : 'start';\n          }).attr('y', x.rangeBand() / (data.length * 2)).attr('dy', '.32em').text(function (d, i) {\n            var t = valueFormat(getY(d, i)),\n                yerr = getYerr(d, i);\n            if (yerr === undefined) return t;\n            if (!yerr.length) return t + '±' + valueFormat(Math.abs(yerr));\n            return t + '+' + valueFormat(Math.abs(yerr[1])) + '-' + valueFormat(Math.abs(yerr[0]));\n          });\n          bars.watchTransition(renderWatch, 'multibarhorizontal: bars').select('text').attr('x', function (d, i) {\n            return getY(d, i) < 0 ? -4 : y(getY(d, i)) - y(0) + 4;\n          });\n        } else {\n          bars.selectAll('text').text('');\n        }\n\n        if (showBarLabels && !stacked) {\n          barsEnter.append('text').classed('nv-bar-label', true);\n          bars.select('text.nv-bar-label').attr('text-anchor', function (d, i) {\n            return getY(d, i) < 0 ? 'start' : 'end';\n          }).attr('y', x.rangeBand() / (data.length * 2)).attr('dy', '.32em').text(function (d, i) {\n            return getX(d, i);\n          });\n          bars.watchTransition(renderWatch, 'multibarhorizontal: bars').select('text.nv-bar-label').attr('x', function (d, i) {\n            return getY(d, i) < 0 ? y(0) - y(getY(d, i)) + 4 : -4;\n          });\n        } else {\n          bars.selectAll('text.nv-bar-label').text('');\n        }\n\n        bars.attr('class', function (d, i) {\n          return getY(d, i) < 0 ? 'nv-bar negative' : 'nv-bar positive';\n        });\n\n        if (barColor) {\n          if (!disabled) disabled = data.map(function () {\n            return true;\n          });\n          bars.style('fill', function (d, i, j) {\n            return d3.rgb(barColor(d, i)).darker(disabled.map(function (d, i) {\n              return i;\n            }).filter(function (d, i) {\n              return !disabled[i];\n            })[j]).toString();\n          }).style('stroke', function (d, i, j) {\n            return d3.rgb(barColor(d, i)).darker(disabled.map(function (d, i) {\n              return i;\n            }).filter(function (d, i) {\n              return !disabled[i];\n            })[j]).toString();\n          });\n        }\n\n        if (stacked) bars.watchTransition(renderWatch, 'multibarhorizontal: bars').attr('transform', function (d, i) {\n          return 'translate(' + y(d.y1) + ',' + x(getX(d, i)) + ')';\n        }).select('rect').attr('width', function (d, i) {\n          return Math.abs(y(getY(d, i) + d.y0) - y(d.y0)) || 0;\n        }).attr('height', x.rangeBand());else bars.watchTransition(renderWatch, 'multibarhorizontal: bars').attr('transform', function (d, i) {\n          //TODO: stacked must be all positive or all negative, not both?\n          return 'translate(' + (getY(d, i) < 0 ? y(getY(d, i)) : y(0)) + ',' + (d.series * x.rangeBand() / data.length + x(getX(d, i))) + ')';\n        }).select('rect').attr('height', x.rangeBand() / data.length).attr('width', function (d, i) {\n          return Math.max(Math.abs(y(getY(d, i)) - y(0)), 1) || 0;\n        }); //store old scales for use in transitions on update\n\n        x0 = x.copy();\n        y0 = y.copy();\n      });\n      renderWatch.renderEnd('multibarHorizontal immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n        }\n      },\n      yErr: {\n        get: function () {\n          return getYerr;\n        },\n        set: function (_) {\n          getYerr = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      stacked: {\n        get: function () {\n          return stacked;\n        },\n        set: function (_) {\n          stacked = _;\n        }\n      },\n      showValues: {\n        get: function () {\n          return showValues;\n        },\n        set: function (_) {\n          showValues = _;\n        }\n      },\n      // this shows the group name, seems pointless?\n      //showBarLabels:    {get: function(){return showBarLabels;}, set: function(_){showBarLabels=_;}},\n      disabled: {\n        get: function () {\n          return disabled;\n        },\n        set: function (_) {\n          disabled = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      valueFormat: {\n        get: function () {\n          return valueFormat;\n        },\n        set: function (_) {\n          valueFormat = _;\n        }\n      },\n      valuePadding: {\n        get: function () {\n          return valuePadding;\n        },\n        set: function (_) {\n          valuePadding = _;\n        }\n      },\n      groupSpacing: {\n        get: function () {\n          return groupSpacing;\n        },\n        set: function (_) {\n          groupSpacing = _;\n        }\n      },\n      fillOpacity: {\n        get: function () {\n          return fillOpacity;\n        },\n        set: function (_) {\n          fillOpacity = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      barColor: {\n        get: function () {\n          return barColor;\n        },\n        set: function (_) {\n          barColor = _ ? nv.utils.getColor(_) : null;\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.multiBarHorizontalChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var multibar = nv.models.multiBarHorizontal(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend().height(30),\n        controls = nv.models.legend().height(30),\n        tooltip = nv.models.tooltip();\n\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        color = nv.utils.defaultColor(),\n        showControls = true,\n        controlsPosition = 'top',\n        controlLabels = {},\n        showLegend = true,\n        legendPosition = 'top',\n        showXAxis = true,\n        showYAxis = true,\n        stacked = false,\n        x //can be accessed via chart.xScale()\n    ,\n        y //can be accessed via chart.yScale()\n    ,\n        state = nv.utils.state(),\n        defaultState = null,\n        noData = null,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'),\n        controlWidth = function () {\n      return showControls ? 180 : 0;\n    },\n        duration = 250;\n\n    state.stacked = false; // DEPRECATED Maintained for backward compatibility\n\n    multibar.stacked(stacked);\n    xAxis.orient('left').tickPadding(5).showMaxMin(false).tickFormat(function (d) {\n      return d;\n    });\n    yAxis.orient('bottom').tickFormat(d3.format(',.1f'));\n    tooltip.duration(0).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    });\n    controls.updateState(false); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          }),\n          stacked: stacked\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.stacked !== undefined) stacked = state.stacked;\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(multibar);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this;\n        stacked = multibar.stacked();\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disableddisabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display No Data message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = multibar.xScale();\n        y = multibar.yScale().clamp(true); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-multiBarHorizontalChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarHorizontalChart').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis').append('g').attr('class', 'nv-zeroLine').append('line');\n        gEnter.append('g').attr('class', 'nv-barsWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        gEnter.append('g').attr('class', 'nv-controlsWrap'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          legend.width(availableWidth - controlWidth());\n          g.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (legendPosition === 'bottom') {\n            margin.bottom = xAxis.height() + legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n            g.select('.nv-legendWrap').attr('transform', 'translate(' + controlWidth() + ',' + (availableHeight + xAxis.height()) + ')');\n          } else if (legendPosition === 'top') {\n            if (!marginTop && legend.height() !== margin.top) {\n              margin.top = legend.height();\n              availableHeight = nv.utils.availableHeight(height, container, margin);\n            }\n\n            g.select('.nv-legendWrap').attr('transform', 'translate(' + controlWidth() + ',' + -margin.top + ')');\n          }\n        } // Controls\n\n\n        if (!showControls) {\n          g.select('.nv-controlsWrap').selectAll('*').remove();\n        } else {\n          var controlsData = [{\n            key: controlLabels.grouped || 'Grouped',\n            disabled: multibar.stacked()\n          }, {\n            key: controlLabels.stacked || 'Stacked',\n            disabled: !multibar.stacked()\n          }];\n          controls.width(controlWidth()).color(['#444', '#444', '#444']);\n\n          if (controlsPosition === 'bottom') {\n            margin.bottom = xAxis.height() + legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n            g.select('.nv-controlsWrap').datum(controlsData).attr('transform', 'translate(0,' + (availableHeight + xAxis.height()) + ')').call(controls);\n          } else if (controlsPosition === 'top') {\n            g.select('.nv-controlsWrap').datum(controlsData).attr('transform', 'translate(0,' + -margin.top + ')').call(controls);\n          }\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Main Chart Component(s)\n\n        multibar.disabled(data.map(function (series) {\n          return series.disabled;\n        })).width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        }));\n        var barsWrap = g.select('.nv-barsWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        }));\n        barsWrap.transition().call(multibar); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksY(availableHeight / 24, data)).tickSize(-availableWidth, 0);\n\n          g.select('.nv-x.nv-axis').call(xAxis);\n          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n          xTicks.selectAll('line, text');\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-y.nv-axis').attr('transform', 'translate(0,' + availableHeight + ')');\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } // Zero line\n\n\n        g.select(\".nv-zeroLine line\").attr(\"x1\", y(0)).attr(\"x2\", y(0)).attr(\"y1\", 0).attr(\"y2\", -availableHeight); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        controls.dispatch.on('legendClick', function (d, i) {\n          if (!d.disabled) return;\n          controlsData = controlsData.map(function (s) {\n            s.disabled = true;\n            return s;\n          });\n          d.disabled = false;\n\n          switch (d.key) {\n            case 'Grouped':\n            case controlLabels.grouped:\n              multibar.stacked(false);\n              break;\n\n            case 'Stacked':\n            case controlLabels.stacked:\n              multibar.stacked(true);\n              break;\n          }\n\n          state.stacked = multibar.stacked();\n          dispatch.stateChange(state);\n          stacked = multibar.stacked();\n          chart.update();\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          if (typeof e.stacked !== 'undefined') {\n            multibar.stacked(e.stacked);\n            state.stacked = e.stacked;\n            stacked = e.stacked;\n          }\n\n          chart.update();\n        });\n      });\n      renderWatch.renderEnd('multibar horizontal chart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    multibar.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt.value = chart.x()(evt.data);\n      evt['series'] = {\n        key: evt.data.key,\n        value: chart.y()(evt.data),\n        color: evt.color\n      };\n      tooltip.data(evt).hidden(false);\n    });\n    multibar.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    multibar.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.multibar = multibar;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.state = state;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      legendPosition: {\n        get: function () {\n          return legendPosition;\n        },\n        set: function (_) {\n          legendPosition = _;\n        }\n      },\n      controlsPosition: {\n        get: function () {\n          return controlsPosition;\n        },\n        set: function (_) {\n          controlsPosition = _;\n        }\n      },\n      showControls: {\n        get: function () {\n          return showControls;\n        },\n        set: function (_) {\n          showControls = _;\n        }\n      },\n      controlLabels: {\n        get: function () {\n          return controlLabels;\n        },\n        set: function (_) {\n          controlLabels = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          multibar.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n        }\n      },\n      barColor: {\n        get: function () {\n          return multibar.barColor;\n        },\n        set: function (_) {\n          multibar.barColor(_);\n          legend.color(function (d, i) {\n            return d3.rgb('#ccc').darker(i * 1.5).toString();\n          });\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, multibar);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.multiChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        color = nv.utils.defaultColor(),\n        width = null,\n        height = null,\n        showLegend = true,\n        noData = null,\n        yDomain1,\n        yDomain2,\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        interpolate = 'linear',\n        useVoronoi = true,\n        interactiveLayer = nv.interactiveGuideline(),\n        useInteractiveGuideline = false,\n        legendRightAxisHint = ' (right axis)',\n        duration = 250; //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var x = d3.scale.linear(),\n        yScale1 = d3.scale.linear(),\n        yScale2 = d3.scale.linear(),\n        lines1 = nv.models.line().yScale(yScale1).duration(duration),\n        lines2 = nv.models.line().yScale(yScale2).duration(duration),\n        scatters1 = nv.models.scatter().yScale(yScale1).duration(duration),\n        scatters2 = nv.models.scatter().yScale(yScale2).duration(duration),\n        bars1 = nv.models.multiBar().stacked(false).yScale(yScale1).duration(duration),\n        bars2 = nv.models.multiBar().stacked(false).yScale(yScale2).duration(duration),\n        stack1 = nv.models.stackedArea().yScale(yScale1).duration(duration),\n        stack2 = nv.models.stackedArea().yScale(yScale2).duration(duration),\n        xAxis = nv.models.axis().scale(x).orient('bottom').tickPadding(5).duration(duration),\n        yAxis1 = nv.models.axis().scale(yScale1).orient('left').duration(duration),\n        yAxis2 = nv.models.axis().scale(yScale2).orient('right').duration(duration),\n        legend = nv.models.legend().height(30),\n        tooltip = nv.models.tooltip(),\n        dispatch = d3.dispatch();\n    var charts = [lines1, lines2, scatters1, scatters2, bars1, bars2, stack1, stack2];\n\n    function chart(selection) {\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n\n        chart.update = function () {\n          container.transition().call(chart);\n        };\n\n        chart.container = this;\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        var dataLines1 = data.filter(function (d) {\n          return d.type == 'line' && d.yAxis == 1;\n        });\n        var dataLines2 = data.filter(function (d) {\n          return d.type == 'line' && d.yAxis == 2;\n        });\n        var dataScatters1 = data.filter(function (d) {\n          return d.type == 'scatter' && d.yAxis == 1;\n        });\n        var dataScatters2 = data.filter(function (d) {\n          return d.type == 'scatter' && d.yAxis == 2;\n        });\n        var dataBars1 = data.filter(function (d) {\n          return d.type == 'bar' && d.yAxis == 1;\n        });\n        var dataBars2 = data.filter(function (d) {\n          return d.type == 'bar' && d.yAxis == 2;\n        });\n        var dataStack1 = data.filter(function (d) {\n          return d.type == 'area' && d.yAxis == 1;\n        });\n        var dataStack2 = data.filter(function (d) {\n          return d.type == 'area' && d.yAxis == 2;\n        }); // Display noData message if there's nothing to show.\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        }\n\n        var series1 = data.filter(function (d) {\n          return !d.disabled && d.yAxis == 1;\n        }).map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d),\n              y: getY(d)\n            };\n          });\n        });\n        var series2 = data.filter(function (d) {\n          return !d.disabled && d.yAxis == 2;\n        }).map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d),\n              y: getY(d)\n            };\n          });\n        });\n        x.domain(d3.extent(d3.merge(series1.concat(series2)), function (d) {\n          return d.x;\n        })).range([0, availableWidth]);\n        var wrap = container.selectAll('g.wrap.multiChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'wrap nvd3 multiChart').append('g');\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y1 nv-axis');\n        gEnter.append('g').attr('class', 'nv-y2 nv-axis');\n        gEnter.append('g').attr('class', 'stack1Wrap');\n        gEnter.append('g').attr('class', 'stack2Wrap');\n        gEnter.append('g').attr('class', 'bars1Wrap');\n        gEnter.append('g').attr('class', 'bars2Wrap');\n        gEnter.append('g').attr('class', 'scatters1Wrap');\n        gEnter.append('g').attr('class', 'scatters2Wrap');\n        gEnter.append('g').attr('class', 'lines1Wrap');\n        gEnter.append('g').attr('class', 'lines2Wrap');\n        gEnter.append('g').attr('class', 'legendWrap');\n        gEnter.append('g').attr('class', 'nv-interactive');\n        var g = wrap.select('g');\n        var color_array = data.map(function (d, i) {\n          return data[i].color || color(d, i);\n        }); // Legend\n\n        if (!showLegend) {\n          g.select('.legendWrap').selectAll('*').remove();\n        } else {\n          var legendWidth = legend.align() ? availableWidth / 2 : availableWidth;\n          var legendXPosition = legend.align() ? legendWidth : 0;\n          legend.width(legendWidth);\n          legend.color(color_array);\n          g.select('.legendWrap').datum(data.map(function (series) {\n            series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n            series.key = series.originalKey + (series.yAxis == 1 ? '' : legendRightAxisHint);\n            return series;\n          })).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n          }\n\n          g.select('.legendWrap').attr('transform', 'translate(' + legendXPosition + ',' + -margin.top + ')');\n        }\n\n        lines1.width(availableWidth).height(availableHeight).interpolate(interpolate).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'line';\n        }));\n        lines2.width(availableWidth).height(availableHeight).interpolate(interpolate).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'line';\n        }));\n        scatters1.width(availableWidth).height(availableHeight).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'scatter';\n        }));\n        scatters2.width(availableWidth).height(availableHeight).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'scatter';\n        }));\n        bars1.width(availableWidth).height(availableHeight).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'bar';\n        }));\n        bars2.width(availableWidth).height(availableHeight).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'bar';\n        }));\n        stack1.width(availableWidth).height(availableHeight).interpolate(interpolate).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'area';\n        }));\n        stack2.width(availableWidth).height(availableHeight).interpolate(interpolate).color(color_array.filter(function (d, i) {\n          return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'area';\n        }));\n        g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        var lines1Wrap = g.select('.lines1Wrap').datum(dataLines1.filter(function (d) {\n          return !d.disabled;\n        }));\n        var scatters1Wrap = g.select('.scatters1Wrap').datum(dataScatters1.filter(function (d) {\n          return !d.disabled;\n        }));\n        var bars1Wrap = g.select('.bars1Wrap').datum(dataBars1.filter(function (d) {\n          return !d.disabled;\n        }));\n        var stack1Wrap = g.select('.stack1Wrap').datum(dataStack1.filter(function (d) {\n          return !d.disabled;\n        }));\n        var lines2Wrap = g.select('.lines2Wrap').datum(dataLines2.filter(function (d) {\n          return !d.disabled;\n        }));\n        var scatters2Wrap = g.select('.scatters2Wrap').datum(dataScatters2.filter(function (d) {\n          return !d.disabled;\n        }));\n        var bars2Wrap = g.select('.bars2Wrap').datum(dataBars2.filter(function (d) {\n          return !d.disabled;\n        }));\n        var stack2Wrap = g.select('.stack2Wrap').datum(dataStack2.filter(function (d) {\n          return !d.disabled;\n        }));\n        var extraValue1BarStacked = [];\n\n        if (bars1.stacked() && dataBars1.length) {\n          var extraValue1BarStacked = dataBars1.filter(function (d) {\n            return !d.disabled;\n          }).map(function (a) {\n            return a.values;\n          });\n          if (extraValue1BarStacked.length > 0) extraValue1BarStacked = extraValue1BarStacked.reduce(function (a, b) {\n            return a.map(function (aVal, i) {\n              return {\n                x: aVal.x,\n                y: aVal.y + b[i].y\n              };\n            });\n          });\n        }\n\n        if (dataBars1.length) {\n          extraValue1BarStacked.push({\n            x: 0,\n            y: 0\n          });\n        }\n\n        var extraValue2BarStacked = [];\n\n        if (bars2.stacked() && dataBars2.length) {\n          var extraValue2BarStacked = dataBars2.filter(function (d) {\n            return !d.disabled;\n          }).map(function (a) {\n            return a.values;\n          });\n          if (extraValue2BarStacked.length > 0) extraValue2BarStacked = extraValue2BarStacked.reduce(function (a, b) {\n            return a.map(function (aVal, i) {\n              return {\n                x: aVal.x,\n                y: aVal.y + b[i].y\n              };\n            });\n          });\n        }\n\n        if (dataBars2.length) {\n          extraValue2BarStacked.push({\n            x: 0,\n            y: 0\n          });\n        }\n\n        yScale1.domain(yDomain1 || d3.extent(d3.merge(series1).concat(extraValue1BarStacked), function (d) {\n          return d.y;\n        })).range([0, availableHeight]);\n        yScale2.domain(yDomain2 || d3.extent(d3.merge(series2).concat(extraValue2BarStacked), function (d) {\n          return d.y;\n        })).range([0, availableHeight]);\n        lines1.yDomain(yScale1.domain());\n        scatters1.yDomain(yScale1.domain());\n        bars1.yDomain(yScale1.domain());\n        stack1.yDomain(yScale1.domain());\n        lines2.yDomain(yScale2.domain());\n        scatters2.yDomain(yScale2.domain());\n        bars2.yDomain(yScale2.domain());\n        stack2.yDomain(yScale2.domain());\n\n        if (dataStack1.length) {\n          d3.transition(stack1Wrap).call(stack1);\n        }\n\n        if (dataStack2.length) {\n          d3.transition(stack2Wrap).call(stack2);\n        }\n\n        if (dataBars1.length) {\n          d3.transition(bars1Wrap).call(bars1);\n        }\n\n        if (dataBars2.length) {\n          d3.transition(bars2Wrap).call(bars2);\n        }\n\n        if (dataLines1.length) {\n          d3.transition(lines1Wrap).call(lines1);\n        }\n\n        if (dataLines2.length) {\n          d3.transition(lines2Wrap).call(lines2);\n        }\n\n        if (dataScatters1.length) {\n          d3.transition(scatters1Wrap).call(scatters1);\n        }\n\n        if (dataScatters2.length) {\n          d3.transition(scatters2Wrap).call(scatters2);\n        }\n\n        xAxis._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n        g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + availableHeight + ')');\n        d3.transition(g.select('.nv-x.nv-axis')).call(xAxis);\n\n        yAxis1._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n        d3.transition(g.select('.nv-y1.nv-axis')).call(yAxis1);\n\n        yAxis2._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n        d3.transition(g.select('.nv-y2.nv-axis')).call(yAxis2);\n        g.select('.nv-y1.nv-axis').classed('nv-disabled', series1.length ? false : true).attr('transform', 'translate(' + x.range()[0] + ',0)');\n        g.select('.nv-y2.nv-axis').classed('nv-disabled', series2.length ? false : true).attr('transform', 'translate(' + x.range()[1] + ',0)');\n        legend.dispatch.on('stateChange', function (newState) {\n          chart.update();\n        });\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({\n            left: margin.left,\n            top: margin.top\n          }).svgContainer(container).xScale(x);\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\n        } //============================================================\n        // Event Handling/Dispatching\n        //------------------------------------------------------------\n\n\n        function mouseover_line(evt) {\n          var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n          evt.value = evt.point.x;\n          evt.series = {\n            value: evt.point.y,\n            color: evt.point.color,\n            key: evt.series.key\n          };\n          tooltip.duration(0).headerFormatter(function (d, i) {\n            return xAxis.tickFormat()(d, i);\n          }).valueFormatter(function (d, i) {\n            return yaxis.tickFormat()(d, i);\n          }).data(evt).hidden(false);\n        }\n\n        function mouseover_scatter(evt) {\n          var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n          evt.value = evt.point.x;\n          evt.series = {\n            value: evt.point.y,\n            color: evt.point.color,\n            key: evt.series.key\n          };\n          tooltip.duration(100).headerFormatter(function (d, i) {\n            return xAxis.tickFormat()(d, i);\n          }).valueFormatter(function (d, i) {\n            return yaxis.tickFormat()(d, i);\n          }).data(evt).hidden(false);\n        }\n\n        function mouseover_stack(evt) {\n          var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n          evt.point['x'] = stack1.x()(evt.point);\n          evt.point['y'] = stack1.y()(evt.point);\n          tooltip.duration(0).headerFormatter(function (d, i) {\n            return xAxis.tickFormat()(d, i);\n          }).valueFormatter(function (d, i) {\n            return yaxis.tickFormat()(d, i);\n          }).data(evt).hidden(false);\n        }\n\n        function mouseover_bar(evt) {\n          var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n          evt.value = bars1.x()(evt.data);\n          evt['series'] = {\n            value: bars1.y()(evt.data),\n            color: evt.color,\n            key: evt.data.key\n          };\n          tooltip.duration(0).headerFormatter(function (d, i) {\n            return xAxis.tickFormat()(d, i);\n          }).valueFormatter(function (d, i) {\n            return yaxis.tickFormat()(d, i);\n          }).data(evt).hidden(false);\n        }\n\n        function clearHighlights() {\n          for (var i = 0, il = charts.length; i < il; i++) {\n            var chart = charts[i];\n\n            try {\n              chart.clearHighlights();\n            } catch (e) {}\n          }\n        }\n\n        function highlightPoint(serieIndex, pointIndex, b) {\n          for (var i = 0, il = charts.length; i < il; i++) {\n            var chart = charts[i];\n\n            try {\n              chart.highlightPoint(serieIndex, pointIndex, b);\n            } catch (e) {}\n          }\n        }\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.dispatch.on('elementMousemove', function (e) {\n            clearHighlights();\n            var singlePoint,\n                pointIndex,\n                pointXLocation,\n                allData = [];\n            data.filter(function (series, i) {\n              series.seriesIndex = i;\n              return !series.disabled;\n            }).forEach(function (series, i) {\n              var extent = x.domain();\n              var currentValues = series.values.filter(function (d, i) {\n                return chart.x()(d, i) >= extent[0] && chart.x()(d, i) <= extent[1];\n              });\n              pointIndex = nv.interactiveBisect(currentValues, e.pointXValue, chart.x());\n              var point = currentValues[pointIndex];\n              var pointYValue = chart.y()(point, pointIndex);\n\n              if (pointYValue !== null) {\n                highlightPoint(i, pointIndex, true);\n              }\n\n              if (point === undefined) return;\n              if (singlePoint === undefined) singlePoint = point;\n              if (pointXLocation === undefined) pointXLocation = x(chart.x()(point, pointIndex));\n              allData.push({\n                key: series.key,\n                value: pointYValue,\n                color: color(series, series.seriesIndex),\n                data: point,\n                yAxis: series.yAxis == 2 ? yAxis2 : yAxis1\n              });\n            });\n\n            var defaultValueFormatter = function (d, i) {\n              var yAxis = allData[i].yAxis;\n              return d == null ? \"N/A\" : yAxis.tickFormat()(d);\n            };\n\n            interactiveLayer.tooltip.headerFormatter(function (d, i) {\n              return xAxis.tickFormat()(d, i);\n            }).valueFormatter(interactiveLayer.tooltip.valueFormatter() || defaultValueFormatter).data({\n              value: chart.x()(singlePoint, pointIndex),\n              index: pointIndex,\n              series: allData\n            })();\n            interactiveLayer.renderGuideLine(pointXLocation);\n          });\n          interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\n            clearHighlights();\n          });\n        } else {\n          lines1.dispatch.on('elementMouseover.tooltip', mouseover_line);\n          lines2.dispatch.on('elementMouseover.tooltip', mouseover_line);\n          lines1.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          lines2.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          scatters1.dispatch.on('elementMouseover.tooltip', mouseover_scatter);\n          scatters2.dispatch.on('elementMouseover.tooltip', mouseover_scatter);\n          scatters1.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          scatters2.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          stack1.dispatch.on('elementMouseover.tooltip', mouseover_stack);\n          stack2.dispatch.on('elementMouseover.tooltip', mouseover_stack);\n          stack1.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          stack2.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          bars1.dispatch.on('elementMouseover.tooltip', mouseover_bar);\n          bars2.dispatch.on('elementMouseover.tooltip', mouseover_bar);\n          bars1.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          bars2.dispatch.on('elementMouseout.tooltip', function (evt) {\n            tooltip.hidden(true);\n          });\n          bars1.dispatch.on('elementMousemove.tooltip', function (evt) {\n            tooltip();\n          });\n          bars2.dispatch.on('elementMousemove.tooltip', function (evt) {\n            tooltip();\n          });\n        }\n      });\n      return chart;\n    } //============================================================\n    // Global getters and setters\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.legend = legend;\n    chart.lines1 = lines1;\n    chart.lines2 = lines2;\n    chart.scatters1 = scatters1;\n    chart.scatters2 = scatters2;\n    chart.bars1 = bars1;\n    chart.bars2 = bars2;\n    chart.stack1 = stack1;\n    chart.stack2 = stack2;\n    chart.xAxis = xAxis;\n    chart.yAxis1 = yAxis1;\n    chart.yAxis2 = yAxis2;\n    chart.tooltip = tooltip;\n    chart.interactiveLayer = interactiveLayer;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      yDomain1: {\n        get: function () {\n          return yDomain1;\n        },\n        set: function (_) {\n          yDomain1 = _;\n        }\n      },\n      yDomain2: {\n        get: function () {\n          return yDomain2;\n        },\n        set: function (_) {\n          yDomain2 = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      interpolate: {\n        get: function () {\n          return interpolate;\n        },\n        set: function (_) {\n          interpolate = _;\n        }\n      },\n      legendRightAxisHint: {\n        get: function () {\n          return legendRightAxisHint;\n        },\n        set: function (_) {\n          legendRightAxisHint = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n          lines1.x(_);\n          lines2.x(_);\n          scatters1.x(_);\n          scatters2.x(_);\n          bars1.x(_);\n          bars2.x(_);\n          stack1.x(_);\n          stack2.x(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n          lines1.y(_);\n          lines2.y(_);\n          scatters1.y(_);\n          scatters2.y(_);\n          stack1.y(_);\n          stack2.y(_);\n          bars1.y(_);\n          bars2.y(_);\n        }\n      },\n      useVoronoi: {\n        get: function () {\n          return useVoronoi;\n        },\n        set: function (_) {\n          useVoronoi = _;\n          lines1.useVoronoi(_);\n          lines2.useVoronoi(_);\n          stack1.useVoronoi(_);\n          stack2.useVoronoi(_);\n        }\n      },\n      useInteractiveGuideline: {\n        get: function () {\n          return useInteractiveGuideline;\n        },\n        set: function (_) {\n          useInteractiveGuideline = _;\n\n          if (useInteractiveGuideline) {\n            lines1.interactive(false);\n            lines1.useVoronoi(false);\n            lines2.interactive(false);\n            lines2.useVoronoi(false);\n            stack1.interactive(false);\n            stack1.useVoronoi(false);\n            stack2.interactive(false);\n            stack2.useVoronoi(false);\n            scatters1.interactive(false);\n            scatters2.interactive(false);\n          }\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          [lines1, lines2, stack1, stack2, scatters1, scatters2, xAxis, yAxis1, yAxis2].forEach(function (model) {\n            model.duration(duration);\n          });\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.ohlcBar = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = null,\n        height = null,\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container = null,\n        x = d3.scale.linear(),\n        y = d3.scale.linear(),\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        getOpen = function (d) {\n      return d.open;\n    },\n        getClose = function (d) {\n      return d.close;\n    },\n        getHigh = function (d) {\n      return d.high;\n    },\n        getLow = function (d) {\n      return d.low;\n    },\n        forceX = [],\n        forceY = [],\n        padData = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n    ,\n        clipEdge = true,\n        color = nv.utils.defaultColor(),\n        interactive = false,\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd', 'chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    function chart(selection) {\n      selection.each(function (data) {\n        container = d3.select(this);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        nv.utils.initSVG(container); // ohlc bar width.\n\n        var w = availableWidth / data[0].values.length * .9; // Setup Scales\n\n        x.domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX)));\n        if (padData) x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5) / data[0].values.length]);else x.range(xRange || [5 + w / 2, availableWidth - w / 2 - 5]);\n        y.domain(yDomain || [d3.min(data[0].values.map(getLow).concat(forceY)), d3.max(data[0].values.map(getHigh).concat(forceY))]).range(yRange || [availableHeight, 0]); // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\n        if (x.domain()[0] === x.domain()[1]) x.domain()[0] ? x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01]) : x.domain([-1, 1]);\n        if (y.domain()[0] === y.domain()[1]) y.domain()[0] ? y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01]) : y.domain([-1, 1]); // Setup containers and skeleton of chart\n\n        var wrap = d3.select(this).selectAll('g.nv-wrap.nv-ohlcBar').data([data[0].values]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-ohlcBar');\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-ticks');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        container.on('click', function (d, i) {\n          dispatch.chartClick({\n            data: d,\n            index: i,\n            pos: d3.event,\n            id: id\n          });\n        });\n        defsEnter.append('clipPath').attr('id', 'nv-chart-clip-path-' + id).append('rect');\n        wrap.select('#nv-chart-clip-path-' + id + ' rect').attr('width', availableWidth).attr('height', availableHeight);\n        g.attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n        var ticks = wrap.select('.nv-ticks').selectAll('.nv-tick').data(function (d) {\n          return d;\n        });\n        ticks.exit().remove();\n        ticks.enter().append('path').attr('class', function (d, i, j) {\n          return (getOpen(d, i) > getClose(d, i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i;\n        }).attr('d', function (d, i) {\n          return 'm0,0l0,' + (y(getOpen(d, i)) - y(getHigh(d, i))) + 'l' + -w / 2 + ',0l' + w / 2 + ',0l0,' + (y(getLow(d, i)) - y(getOpen(d, i))) + 'l0,' + (y(getClose(d, i)) - y(getLow(d, i))) + 'l' + w / 2 + ',0l' + -w / 2 + ',0z';\n        }).attr('transform', function (d, i) {\n          return 'translate(' + x(getX(d, i)) + ',' + y(getHigh(d, i)) + ')';\n        }).attr('fill', function (d, i) {\n          return color[0];\n        }).attr('stroke', function (d, i) {\n          return color[0];\n        }).attr('x', 0).attr('y', function (d, i) {\n          return y(Math.max(0, getY(d, i)));\n        }).attr('height', function (d, i) {\n          return Math.abs(y(getY(d, i)) - y(0));\n        }); // the bar colors are controlled by CSS currently\n\n        ticks.attr('class', function (d, i, j) {\n          return (getOpen(d, i) > getClose(d, i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i;\n        });\n        d3.transition(ticks).attr('transform', function (d, i) {\n          return 'translate(' + x(getX(d, i)) + ',' + y(getHigh(d, i)) + ')';\n        }).attr('d', function (d, i) {\n          var w = availableWidth / data[0].values.length * .9;\n          return 'm0,0l0,' + (y(getOpen(d, i)) - y(getHigh(d, i))) + 'l' + -w / 2 + ',0l' + w / 2 + ',0l0,' + (y(getLow(d, i)) - y(getOpen(d, i))) + 'l0,' + (y(getClose(d, i)) - y(getLow(d, i))) + 'l' + w / 2 + ',0l' + -w / 2 + ',0z';\n        });\n      });\n      return chart;\n    } //Create methods to allow outside functions to highlight a specific bar.\n\n\n    chart.highlightPoint = function (pointIndex, isHoverOver) {\n      chart.clearHighlights();\n      container.select(\".nv-ohlcBar .nv-tick-0-\" + pointIndex).classed(\"hover\", isHoverOver);\n    };\n\n    chart.clearHighlights = function () {\n      container.select(\".nv-ohlcBar .nv-tick.hover\").classed(\"hover\", false);\n    }; //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      forceX: {\n        get: function () {\n          return forceX;\n        },\n        set: function (_) {\n          forceX = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      padData: {\n        get: function () {\n          return padData;\n        },\n        set: function (_) {\n          padData = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      interactive: {\n        get: function () {\n          return interactive;\n        },\n        set: function (_) {\n          interactive = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = _;\n        }\n      },\n      open: {\n        get: function () {\n          return getOpen();\n        },\n        set: function (_) {\n          getOpen = _;\n        }\n      },\n      close: {\n        get: function () {\n          return getClose();\n        },\n        set: function (_) {\n          getClose = _;\n        }\n      },\n      high: {\n        get: function () {\n          return getHigh;\n        },\n        set: function (_) {\n          getHigh = _;\n        }\n      },\n      low: {\n        get: function () {\n          return getLow;\n        },\n        set: function (_) {\n          getLow = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top != undefined ? _.top : margin.top;\n          margin.right = _.right != undefined ? _.right : margin.right;\n          margin.bottom = _.bottom != undefined ? _.bottom : margin.bottom;\n          margin.left = _.left != undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  }; // Code adapted from Jason Davies' \"Parallel Coordinates\"\n  // http://bl.ocks.org/jasondavies/1341281\n\n\n  nv.models.parallelCoordinates = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 30,\n      right: 0,\n      bottom: 10,\n      left: 0\n    },\n        width = null,\n        height = null,\n        availableWidth = null,\n        availableHeight = null,\n        x = d3.scale.ordinal(),\n        y = {},\n        undefinedValuesLabel = \"undefined values\",\n        dimensionData = [],\n        enabledDimensions = [],\n        dimensionNames = [],\n        displayBrush = true,\n        color = nv.utils.defaultColor(),\n        filters = [],\n        active = [],\n        dragging = [],\n        axisWithUndefinedValues = [],\n        lineTension = 1,\n        foreground,\n        background,\n        dimensions,\n        line = d3.svg.line(),\n        axis = d3.svg.axis(),\n        dispatch = d3.dispatch('brushstart', 'brush', 'brushEnd', 'dimensionsOrder', \"stateChange\", 'elementClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd', 'activeChanged'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var container = d3.select(this);\n        availableWidth = nv.utils.availableWidth(width, container, margin);\n        availableHeight = nv.utils.availableHeight(height, container, margin);\n        nv.utils.initSVG(container); //Convert old data to new format (name, values)\n\n        if (data[0].values === undefined) {\n          var newData = [];\n          data.forEach(function (d) {\n            var val = {};\n            var key = Object.keys(d);\n            key.forEach(function (k) {\n              if (k !== \"name\") val[k] = d[k];\n            });\n            newData.push({\n              key: d.name,\n              values: val\n            });\n          });\n          data = newData;\n        }\n\n        var dataValues = data.map(function (d) {\n          return d.values;\n        });\n\n        if (active.length === 0) {\n          active = data;\n        }\n\n        ; //set all active before first brush call\n\n        dimensionNames = dimensionData.sort(function (a, b) {\n          return a.currentPosition - b.currentPosition;\n        }).map(function (d) {\n          return d.key;\n        });\n        enabledDimensions = dimensionData.filter(function (d) {\n          return !d.disabled;\n        }); // Setup Scales\n\n        x.rangePoints([0, availableWidth], 1).domain(enabledDimensions.map(function (d) {\n          return d.key;\n        })); //Set as true if all values on an axis are missing.\n        // Extract the list of dimensions and create a scale for each.\n\n        var oldDomainMaxValue = {};\n        var displayMissingValuesline = false;\n        var currentTicks = [];\n        dimensionNames.forEach(function (d) {\n          var extent = d3.extent(dataValues, function (p) {\n            return +p[d];\n          });\n          var min = extent[0];\n          var max = extent[1];\n          var onlyUndefinedValues = false; //If there is no values to display on an axis, set the extent to 0\n\n          if (isNaN(min) || isNaN(max)) {\n            onlyUndefinedValues = true;\n            min = 0;\n            max = 0;\n          } //Scale axis if there is only one value\n\n\n          if (min === max) {\n            min = min - 1;\n            max = max + 1;\n          }\n\n          var f = filters.filter(function (k) {\n            return k.dimension == d;\n          });\n\n          if (f.length !== 0) {\n            //If there is only NaN values, keep the existing domain.\n            if (onlyUndefinedValues) {\n              min = y[d].domain()[0];\n              max = y[d].domain()[1];\n            } //If the brush extent is > max (< min), keep the extent value.\n            else if (!f[0].hasOnlyNaN && displayBrush) {\n                min = min > f[0].extent[0] ? f[0].extent[0] : min;\n                max = max < f[0].extent[1] ? f[0].extent[1] : max;\n              } //If there is NaN values brushed be sure the brush extent is on the domain.\n              else if (f[0].hasNaN) {\n                  max = max < f[0].extent[1] ? f[0].extent[1] : max;\n                  oldDomainMaxValue[d] = y[d].domain()[1];\n                  displayMissingValuesline = true;\n                }\n          } //Use 90% of (availableHeight - 12) for the axis range, 12 reprensenting the space necessary to display \"undefined values\" text.\n          //The remaining 10% are used to display the missingValue line.\n\n\n          y[d] = d3.scale.linear().domain([min, max]).range([(availableHeight - 12) * 0.9, 0]);\n          axisWithUndefinedValues = [];\n          y[d].brush = d3.svg.brush().y(y[d]).on('brushstart', brushstart).on('brush', brush).on('brushend', brushend);\n        }); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-parallelCoordinates').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-parallelCoordinates');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-parallelCoordinates background');\n        gEnter.append('g').attr('class', 'nv-parallelCoordinates foreground');\n        gEnter.append('g').attr('class', 'nv-parallelCoordinates missingValuesline');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        line.interpolate('cardinal').tension(lineTension);\n        axis.orient('left');\n        var axisDrag = d3.behavior.drag().on('dragstart', dragStart).on('drag', dragMove).on('dragend', dragEnd); //Add missing value line at the bottom of the chart\n\n        var missingValuesline, missingValueslineText;\n        var step = x.range()[1] - x.range()[0];\n        step = isNaN(step) ? x.range()[0] : step;\n\n        if (!isNaN(step)) {\n          var lineData = [0 + step / 2, availableHeight - 12, availableWidth - step / 2, availableHeight - 12];\n          missingValuesline = wrap.select('.missingValuesline').selectAll('line').data([lineData]);\n          missingValuesline.enter().append('line');\n          missingValuesline.exit().remove();\n          missingValuesline.attr(\"x1\", function (d) {\n            return d[0];\n          }).attr(\"y1\", function (d) {\n            return d[1];\n          }).attr(\"x2\", function (d) {\n            return d[2];\n          }).attr(\"y2\", function (d) {\n            return d[3];\n          }); //Add the text \"undefined values\" under the missing value line\n\n          missingValueslineText = wrap.select('.missingValuesline').selectAll('text').data([undefinedValuesLabel]);\n          missingValueslineText.append('text').data([undefinedValuesLabel]);\n          missingValueslineText.enter().append('text');\n          missingValueslineText.exit().remove();\n          missingValueslineText.attr(\"y\", availableHeight) //To have the text right align with the missingValues line, substract 92 representing the text size.\n          .attr(\"x\", availableWidth - 92 - step / 2).text(function (d) {\n            return d;\n          });\n        } // Add grey background lines for context.\n\n\n        background = wrap.select('.background').selectAll('path').data(data);\n        background.enter().append('path');\n        background.exit().remove();\n        background.attr('d', path); // Add blue foreground lines for focus.\n\n        foreground = wrap.select('.foreground').selectAll('path').data(data);\n        foreground.enter().append('path');\n        foreground.exit().remove();\n        foreground.attr('d', path).style(\"stroke-width\", function (d, i) {\n          if (isNaN(d.strokeWidth)) {\n            d.strokeWidth = 1;\n          }\n\n          return d.strokeWidth;\n        }).attr('stroke', function (d, i) {\n          return d.color || color(d, i);\n        });\n        foreground.on(\"mouseover\", function (d, i) {\n          d3.select(this).classed('hover', true).style(\"stroke-width\", d.strokeWidth + 2 + \"px\").style(\"stroke-opacity\", 1);\n          dispatch.elementMouseover({\n            label: d.name,\n            color: d.color || color(d, i),\n            values: d.values,\n            dimensions: enabledDimensions\n          });\n        });\n        foreground.on(\"mouseout\", function (d, i) {\n          d3.select(this).classed('hover', false).style(\"stroke-width\", d.strokeWidth + \"px\").style(\"stroke-opacity\", 0.7);\n          dispatch.elementMouseout({\n            label: d.name,\n            index: i\n          });\n        });\n        foreground.on('mousemove', function (d, i) {\n          dispatch.elementMousemove();\n        });\n        foreground.on('click', function (d) {\n          dispatch.elementClick({\n            id: d.id\n          });\n        }); // Add a group element for each dimension.\n\n        dimensions = g.selectAll('.dimension').data(enabledDimensions);\n        var dimensionsEnter = dimensions.enter().append('g').attr('class', 'nv-parallelCoordinates dimension');\n        dimensions.attr('transform', function (d) {\n          return 'translate(' + x(d.key) + ',0)';\n        });\n        dimensionsEnter.append('g').attr('class', 'nv-axis'); // Add an axis and title.\n\n        dimensionsEnter.append('text').attr('class', 'nv-label').style(\"cursor\", \"move\").attr('dy', '-1em').attr('text-anchor', 'middle').on(\"mouseover\", function (d, i) {\n          dispatch.elementMouseover({\n            label: d.tooltip || d.key,\n            color: d.color\n          });\n        }).on(\"mouseout\", function (d, i) {\n          dispatch.elementMouseout({\n            label: d.tooltip\n          });\n        }).on('mousemove', function (d, i) {\n          dispatch.elementMousemove();\n        }).call(axisDrag);\n        dimensionsEnter.append('g').attr('class', 'nv-brushBackground');\n        dimensions.exit().remove();\n        dimensions.select('.nv-label').text(function (d) {\n          return d.key;\n        }); // Add and store a brush for each axis.\n\n        restoreBrush(displayBrush);\n        var actives = dimensionNames.filter(function (p) {\n          return !y[p].brush.empty();\n        }),\n            extents = actives.map(function (p) {\n          return y[p].brush.extent();\n        });\n        var formerActive = active.slice(0); //Restore active values\n\n        active = [];\n        foreground.style(\"display\", function (d) {\n          var isActive = actives.every(function (p, i) {\n            if ((isNaN(d.values[p]) || isNaN(parseFloat(d.values[p]))) && extents[i][0] == y[p].brush.y().domain()[0]) {\n              return true;\n            }\n\n            return extents[i][0] <= d.values[p] && d.values[p] <= extents[i][1] && !isNaN(parseFloat(d.values[p]));\n          });\n          if (isActive) active.push(d);\n          return !isActive ? \"none\" : null;\n        });\n\n        if (filters.length > 0 || !nv.utils.arrayEquals(active, formerActive)) {\n          dispatch.activeChanged(active);\n        } // Returns the path for a given data point.\n\n\n        function path(d) {\n          return line(enabledDimensions.map(function (p) {\n            //If value if missing, put the value on the missing value line\n            if (isNaN(d.values[p.key]) || isNaN(parseFloat(d.values[p.key])) || displayMissingValuesline) {\n              var domain = y[p.key].domain();\n              var range = y[p.key].range();\n              var min = domain[0] - (domain[1] - domain[0]) / 9; //If it's not already the case, allow brush to select undefined values\n\n              if (axisWithUndefinedValues.indexOf(p.key) < 0) {\n                var newscale = d3.scale.linear().domain([min, domain[1]]).range([availableHeight - 12, range[1]]);\n                y[p.key].brush.y(newscale);\n                axisWithUndefinedValues.push(p.key);\n              }\n\n              if (isNaN(d.values[p.key]) || isNaN(parseFloat(d.values[p.key]))) {\n                return [x(p.key), y[p.key](min)];\n              }\n            } //If parallelCoordinate contain missing values show the missing values line otherwise, hide it.\n\n\n            if (missingValuesline !== undefined) {\n              if (axisWithUndefinedValues.length > 0 || displayMissingValuesline) {\n                missingValuesline.style(\"display\", \"inline\");\n                missingValueslineText.style(\"display\", \"inline\");\n              } else {\n                missingValuesline.style(\"display\", \"none\");\n                missingValueslineText.style(\"display\", \"none\");\n              }\n            }\n\n            return [x(p.key), y[p.key](d.values[p.key])];\n          }));\n        }\n\n        function restoreBrush(visible) {\n          filters.forEach(function (f) {\n            //If filter brushed NaN values, keep the brush on the bottom of the axis.\n            var brushDomain = y[f.dimension].brush.y().domain();\n\n            if (f.hasOnlyNaN) {\n              f.extent[1] = (y[f.dimension].domain()[1] - brushDomain[0]) * (f.extent[1] - f.extent[0]) / (oldDomainMaxValue[f.dimension] - f.extent[0]) + brushDomain[0];\n            }\n\n            if (f.hasNaN) {\n              f.extent[0] = brushDomain[0];\n            }\n\n            if (visible) y[f.dimension].brush.extent(f.extent);\n          });\n          dimensions.select('.nv-brushBackground').each(function (d) {\n            d3.select(this).call(y[d.key].brush);\n          }).selectAll('rect').attr('x', -8).attr('width', 16);\n          updateTicks();\n        } // Handles a brush event, toggling the display of foreground lines.\n\n\n        function brushstart() {\n          //If brush aren't visible, show it before brushing again.\n          if (displayBrush === false) {\n            displayBrush = true;\n            restoreBrush(true);\n          }\n        } // Handles a brush event, toggling the display of foreground lines.\n\n\n        function brush() {\n          actives = dimensionNames.filter(function (p) {\n            return !y[p].brush.empty();\n          });\n          extents = actives.map(function (p) {\n            return y[p].brush.extent();\n          });\n          filters = []; //erase current filters\n\n          actives.forEach(function (d, i) {\n            filters[i] = {\n              dimension: d,\n              extent: extents[i],\n              hasNaN: false,\n              hasOnlyNaN: false\n            };\n          });\n          active = []; //erase current active list\n\n          foreground.style('display', function (d) {\n            var isActive = actives.every(function (p, i) {\n              if ((isNaN(d.values[p]) || isNaN(parseFloat(d.values[p]))) && extents[i][0] == y[p].brush.y().domain()[0]) return true;\n              return extents[i][0] <= d.values[p] && d.values[p] <= extents[i][1] && !isNaN(parseFloat(d.values[p]));\n            });\n            if (isActive) active.push(d);\n            return isActive ? null : 'none';\n          });\n          updateTicks();\n          dispatch.brush({\n            filters: filters,\n            active: active\n          });\n        }\n\n        function brushend() {\n          var hasActiveBrush = actives.length > 0 ? true : false;\n          filters.forEach(function (f) {\n            if (f.extent[0] === y[f.dimension].brush.y().domain()[0] && axisWithUndefinedValues.indexOf(f.dimension) >= 0) f.hasNaN = true;\n            if (f.extent[1] < y[f.dimension].domain()[0]) f.hasOnlyNaN = true;\n          });\n          dispatch.brushEnd(active, hasActiveBrush);\n        }\n\n        function updateTicks() {\n          dimensions.select('.nv-axis').each(function (d, i) {\n            var f = filters.filter(function (k) {\n              return k.dimension == d.key;\n            });\n            currentTicks[d.key] = y[d.key].domain(); //If brush are available, display brush extent\n\n            if (f.length != 0 && displayBrush) {\n              currentTicks[d.key] = [];\n              if (f[0].extent[1] > y[d.key].domain()[0]) currentTicks[d.key] = [f[0].extent[1]];\n              if (f[0].extent[0] >= y[d.key].domain()[0]) currentTicks[d.key].push(f[0].extent[0]);\n            }\n\n            d3.select(this).call(axis.scale(y[d.key]).tickFormat(d.format).tickValues(currentTicks[d.key]));\n          });\n        }\n\n        function dragStart(d) {\n          dragging[d.key] = this.parentNode.__origin__ = x(d.key);\n          background.attr(\"visibility\", \"hidden\");\n        }\n\n        function dragMove(d) {\n          dragging[d.key] = Math.min(availableWidth, Math.max(0, this.parentNode.__origin__ += d3.event.x));\n          foreground.attr(\"d\", path);\n          enabledDimensions.sort(function (a, b) {\n            return dimensionPosition(a.key) - dimensionPosition(b.key);\n          });\n          enabledDimensions.forEach(function (d, i) {\n            return d.currentPosition = i;\n          });\n          x.domain(enabledDimensions.map(function (d) {\n            return d.key;\n          }));\n          dimensions.attr(\"transform\", function (d) {\n            return \"translate(\" + dimensionPosition(d.key) + \")\";\n          });\n        }\n\n        function dragEnd(d, i) {\n          delete this.parentNode.__origin__;\n          delete dragging[d.key];\n          d3.select(this.parentNode).attr(\"transform\", \"translate(\" + x(d.key) + \")\");\n          foreground.attr(\"d\", path);\n          background.attr(\"d\", path).attr(\"visibility\", null);\n          dispatch.dimensionsOrder(enabledDimensions);\n        }\n\n        function dimensionPosition(d) {\n          var v = dragging[d];\n          return v == null ? x(d) : v;\n        }\n      });\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      dimensionData: {\n        get: function () {\n          return dimensionData;\n        },\n        set: function (_) {\n          dimensionData = _;\n        }\n      },\n      displayBrush: {\n        get: function () {\n          return displayBrush;\n        },\n        set: function (_) {\n          displayBrush = _;\n        }\n      },\n      filters: {\n        get: function () {\n          return filters;\n        },\n        set: function (_) {\n          filters = _;\n        }\n      },\n      active: {\n        get: function () {\n          return active;\n        },\n        set: function (_) {\n          active = _;\n        }\n      },\n      lineTension: {\n        get: function () {\n          return lineTension;\n        },\n        set: function (_) {\n          lineTension = _;\n        }\n      },\n      undefinedValuesLabel: {\n        get: function () {\n          return undefinedValuesLabel;\n        },\n        set: function (_) {\n          undefinedValuesLabel = _;\n        }\n      },\n      // deprecated options\n      dimensions: {\n        get: function () {\n          return dimensionData.map(function (d) {\n            return d.key;\n          });\n        },\n        set: function (_) {\n          // deprecated after 1.8.1\n          nv.deprecated('dimensions', 'use dimensionData instead');\n\n          if (dimensionData.length === 0) {\n            _.forEach(function (k) {\n              dimensionData.push({\n                key: k\n              });\n            });\n          } else {\n            _.forEach(function (k, i) {\n              dimensionData[i].key = k;\n            });\n          }\n        }\n      },\n      dimensionNames: {\n        get: function () {\n          return dimensionData.map(function (d) {\n            return d.key;\n          });\n        },\n        set: function (_) {\n          // deprecated after 1.8.1\n          nv.deprecated('dimensionNames', 'use dimensionData instead');\n          dimensionNames = [];\n\n          if (dimensionData.length === 0) {\n            _.forEach(function (k) {\n              dimensionData.push({\n                key: k\n              });\n            });\n          } else {\n            _.forEach(function (k, i) {\n              dimensionData[i].key = k;\n            });\n          }\n        }\n      },\n      dimensionFormats: {\n        get: function () {\n          return dimensionData.map(function (d) {\n            return d.format;\n          });\n        },\n        set: function (_) {\n          // deprecated after 1.8.1\n          nv.deprecated('dimensionFormats', 'use dimensionData instead');\n\n          if (dimensionData.length === 0) {\n            _.forEach(function (f) {\n              dimensionData.push({\n                format: f\n              });\n            });\n          } else {\n            _.forEach(function (f, i) {\n              dimensionData[i].format = f;\n            });\n          }\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.parallelCoordinatesChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var parallelCoordinates = nv.models.parallelCoordinates();\n    var legend = nv.models.legend();\n    var tooltip = nv.models.tooltip();\n    var dimensionTooltip = nv.models.tooltip();\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        showLegend = true,\n        color = nv.utils.defaultColor(),\n        state = nv.utils.state(),\n        dimensionData = [],\n        displayBrush = true,\n        defaultState = null,\n        noData = null,\n        nanValue = \"undefined\",\n        dispatch = d3.dispatch('dimensionsOrder', 'brushEnd', 'stateChange', 'changeState', 'renderEnd'),\n        controlWidth = function () {\n      return showControls ? 180 : 0;\n    }; //============================================================\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          })\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.active !== undefined) {\n          data.forEach(function (series, i) {\n            series.disabled = !state.active[i];\n          });\n        }\n      };\n    };\n\n    tooltip.contentGenerator(function (data) {\n      var str = '<table><thead><tr><td class=\"legend-color-guide\"><div style=\"background-color:' + data.color + '\"></div></td><td><strong>' + data.key + '</strong></td></tr></thead>';\n\n      if (data.series.length !== 0) {\n        str = str + '<tbody><tr><td height =\"10px\"></td></tr>';\n        data.series.forEach(function (d) {\n          str = str + '<tr><td class=\"legend-color-guide\"><div style=\"background-color:' + d.color + '\"></div></td><td class=\"key\">' + d.key + '</td><td class=\"value\">' + d.value + '</td></tr>';\n        });\n        str = str + '</tbody>';\n      }\n\n      str = str + '</table>';\n      return str;\n    }); //============================================================\n    // Chart function\n    //------------------------------------------------------------\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(parallelCoordinates);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var that = this;\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          container.call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(dimensionData), chart.update).getter(stateGetter(dimensionData)).update(); //set state.disabled\n\n        state.disabled = dimensionData.map(function (d) {\n          return !!d.disabled;\n        }); //Keep dimensions position in memory\n\n        dimensionData = dimensionData.map(function (d) {\n          d.disabled = !!d.disabled;\n          return d;\n        });\n        dimensionData.forEach(function (d, i) {\n          d.originalPosition = isNaN(d.originalPosition) ? i : d.originalPosition;\n          d.currentPosition = isNaN(d.currentPosition) ? i : d.currentPosition;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display No Data message if there's nothing to show.\n\n\n        if (!data || !data.length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } //------------------------------------------------------------\n        // Setup containers and skeleton of chart\n\n\n        var wrap = container.selectAll('g.nv-wrap.nv-parallelCoordinatesChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-parallelCoordinatesChart').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-parallelCoordinatesWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        g.select(\"rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight > 0 ? availableHeight : 0); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          legend.width(availableWidth).color(function (d) {\n            return \"rgb(188,190,192)\";\n          });\n          g.select('.nv-legendWrap').datum(dimensionData.sort(function (a, b) {\n            return a.originalPosition - b.originalPosition;\n          })).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n          }\n\n          wrap.select('.nv-legendWrap').attr('transform', 'translate( 0 ,' + -margin.top + ')');\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Main Chart Component(s)\n\n        parallelCoordinates.width(availableWidth).height(availableHeight).dimensionData(dimensionData).displayBrush(displayBrush);\n        var parallelCoordinatesWrap = g.select('.nv-parallelCoordinatesWrap ').datum(data);\n        parallelCoordinatesWrap.transition().call(parallelCoordinates); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n        //Display reset brush button\n\n        parallelCoordinates.dispatch.on('brushEnd', function (active, hasActiveBrush) {\n          if (hasActiveBrush) {\n            displayBrush = true;\n            dispatch.brushEnd(active);\n          } else {\n            displayBrush = false;\n          }\n        });\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) {\n            state[key] = newState[key];\n          }\n\n          dispatch.stateChange(state);\n          chart.update();\n        }); //Update dimensions order and display reset sorting button\n\n        parallelCoordinates.dispatch.on('dimensionsOrder', function (e) {\n          dimensionData.sort(function (a, b) {\n            return a.currentPosition - b.currentPosition;\n          });\n          var isSorted = false;\n          dimensionData.forEach(function (d, i) {\n            d.currentPosition = i;\n            if (d.currentPosition !== d.originalPosition) isSorted = true;\n          });\n          dispatch.dimensionsOrder(dimensionData, isSorted);\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            dimensionData.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          chart.update();\n        });\n      });\n      renderWatch.renderEnd('parraleleCoordinateChart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    parallelCoordinates.dispatch.on('elementMouseover.tooltip', function (evt) {\n      var tp = {\n        key: evt.label,\n        color: evt.color,\n        series: []\n      };\n\n      if (evt.values) {\n        Object.keys(evt.values).forEach(function (d) {\n          var dim = evt.dimensions.filter(function (dd) {\n            return dd.key === d;\n          })[0];\n\n          if (dim) {\n            var v;\n\n            if (isNaN(evt.values[d]) || isNaN(parseFloat(evt.values[d]))) {\n              v = nanValue;\n            } else {\n              v = dim.format(evt.values[d]);\n            }\n\n            tp.series.push({\n              idx: dim.currentPosition,\n              key: d,\n              value: v,\n              color: dim.color\n            });\n          }\n        });\n        tp.series.sort(function (a, b) {\n          return a.idx - b.idx;\n        });\n      }\n\n      tooltip.data(tp).hidden(false);\n    });\n    parallelCoordinates.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    parallelCoordinates.dispatch.on('elementMousemove.tooltip', function () {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.parallelCoordinates = parallelCoordinates;\n    chart.legend = legend;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      dimensionData: {\n        get: function () {\n          return dimensionData;\n        },\n        set: function (_) {\n          dimensionData = _;\n        }\n      },\n      displayBrush: {\n        get: function () {\n          return displayBrush;\n        },\n        set: function (_) {\n          displayBrush = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      nanValue: {\n        get: function () {\n          return nanValue;\n        },\n        set: function (_) {\n          nanValue = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n          parallelCoordinates.color(color);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, parallelCoordinates);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.pie = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 500,\n        height = 500,\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container = null,\n        color = nv.utils.defaultColor(),\n        valueFormat = d3.format(',.2f'),\n        showLabels = true,\n        labelsOutside = false,\n        labelType = \"key\",\n        labelThreshold = .02 //if slice percentage is under this, don't show label\n    ,\n        hideOverlapLabels = false //Hide labels that don't fit in slice\n    ,\n        donut = false,\n        title = false,\n        growOnHover = true,\n        titleOffset = 0,\n        labelSunbeamLayout = false,\n        startAngle = false,\n        padAngle = false,\n        endAngle = false,\n        cornerRadius = 0,\n        donutRatio = 0.5,\n        duration = 250,\n        arcsRadius = [],\n        dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd');\n\n    var arcs = [];\n    var arcsOver = []; //============================================================\n    // chart function\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom,\n            radius = Math.min(availableWidth, availableHeight) / 2,\n            arcsRadiusOuter = [],\n            arcsRadiusInner = [];\n        container = d3.select(this);\n\n        if (arcsRadius.length === 0) {\n          var outer = radius - radius / 10;\n          var inner = donutRatio * radius;\n\n          for (var i = 0; i < data[0].length; i++) {\n            arcsRadiusOuter.push(outer);\n            arcsRadiusInner.push(inner);\n          }\n        } else {\n          if (growOnHover) {\n            arcsRadiusOuter = arcsRadius.map(function (d) {\n              return (d.outer - d.outer / 10) * radius;\n            });\n            arcsRadiusInner = arcsRadius.map(function (d) {\n              return (d.inner - d.inner / 10) * radius;\n            });\n            donutRatio = d3.min(arcsRadius.map(function (d) {\n              return d.inner - d.inner / 10;\n            }));\n          } else {\n            arcsRadiusOuter = arcsRadius.map(function (d) {\n              return d.outer * radius;\n            });\n            arcsRadiusInner = arcsRadius.map(function (d) {\n              return d.inner * radius;\n            });\n            donutRatio = d3.min(arcsRadius.map(function (d) {\n              return d.inner;\n            }));\n          }\n        }\n\n        nv.utils.initSVG(container); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('.nv-wrap.nv-pie').data(data);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-pie nv-chart-' + id);\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        var g_pie = gEnter.append('g').attr('class', 'nv-pie');\n        gEnter.append('g').attr('class', 'nv-pieLabels');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        g.select('.nv-pie').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n        g.select('.nv-pieLabels').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')'); //\n\n        container.on('click', function (d, i) {\n          dispatch.chartClick({\n            data: d,\n            index: i,\n            pos: d3.event,\n            id: id\n          });\n        });\n        arcs = [];\n        arcsOver = [];\n\n        for (var i = 0; i < data[0].length; i++) {\n          var arc = d3.svg.arc().outerRadius(arcsRadiusOuter[i]);\n          var arcOver = d3.svg.arc().outerRadius(arcsRadiusOuter[i] + 5);\n\n          if (startAngle !== false) {\n            arc.startAngle(startAngle);\n            arcOver.startAngle(startAngle);\n          }\n\n          if (endAngle !== false) {\n            arc.endAngle(endAngle);\n            arcOver.endAngle(endAngle);\n          }\n\n          if (donut) {\n            arc.innerRadius(arcsRadiusInner[i]);\n            arcOver.innerRadius(arcsRadiusInner[i]);\n          }\n\n          if (arc.cornerRadius && cornerRadius) {\n            arc.cornerRadius(cornerRadius);\n            arcOver.cornerRadius(cornerRadius);\n          }\n\n          arcs.push(arc);\n          arcsOver.push(arcOver);\n        } // Setup the Pie chart and choose the data element\n\n\n        var pie = d3.layout.pie().sort(null).value(function (d) {\n          return d.disabled ? 0 : getY(d);\n        }); // padAngle added in d3 3.5\n\n        if (pie.padAngle && padAngle) {\n          pie.padAngle(padAngle);\n        } // if title is specified and donut, put it in the middle\n\n\n        if (donut && title) {\n          g_pie.append(\"text\").attr('class', 'nv-pie-title');\n          wrap.select('.nv-pie-title').style(\"text-anchor\", \"middle\").text(function (d) {\n            return title;\n          }).style(\"font-size\", Math.min(availableWidth, availableHeight) * donutRatio * 2 / (title.length + 2) + \"px\").attr(\"dy\", \"0.35em\") // trick to vertically center text\n          .attr('transform', function (d, i) {\n            return 'translate(0, ' + titleOffset + ')';\n          });\n        }\n\n        var slices = wrap.select('.nv-pie').selectAll('.nv-slice').data(pie);\n        var pieLabels = wrap.select('.nv-pieLabels').selectAll('.nv-label').data(pie);\n        slices.exit().remove();\n        pieLabels.exit().remove();\n        var ae = slices.enter().append('g');\n        ae.attr('class', 'nv-slice');\n        ae.on('mouseover', function (d, i) {\n          d3.select(this).classed('hover', true);\n\n          if (growOnHover) {\n            d3.select(this).select(\"path\").transition().duration(70).attr(\"d\", arcsOver[i]);\n          }\n\n          dispatch.elementMouseover({\n            data: d.data,\n            index: i,\n            color: d3.select(this).style(\"fill\"),\n            percent: (d.endAngle - d.startAngle) / (2 * Math.PI)\n          });\n        });\n        ae.on('mouseout', function (d, i) {\n          d3.select(this).classed('hover', false);\n\n          if (growOnHover) {\n            d3.select(this).select(\"path\").transition().duration(50).attr(\"d\", arcs[i]);\n          }\n\n          dispatch.elementMouseout({\n            data: d.data,\n            index: i\n          });\n        });\n        ae.on('mousemove', function (d, i) {\n          dispatch.elementMousemove({\n            data: d.data,\n            index: i\n          });\n        });\n        ae.on('click', function (d, i) {\n          var element = this;\n          dispatch.elementClick({\n            data: d.data,\n            index: i,\n            color: d3.select(this).style(\"fill\"),\n            event: d3.event,\n            element: element\n          });\n        });\n        ae.on('dblclick', function (d, i) {\n          dispatch.elementDblClick({\n            data: d.data,\n            index: i,\n            color: d3.select(this).style(\"fill\")\n          });\n        });\n        slices.attr('fill', function (d, i) {\n          return color(d.data, i);\n        });\n        slices.attr('stroke', function (d, i) {\n          return color(d.data, i);\n        });\n        var paths = ae.append('path').each(function (d) {\n          this._current = d;\n        });\n        slices.select('path').transition().duration(duration).attr('d', function (d, i) {\n          return arcs[i](d);\n        }).attrTween('d', arcTween);\n\n        if (showLabels) {\n          // This does the normal label\n          var labelsArc = [];\n\n          for (var i = 0; i < data[0].length; i++) {\n            labelsArc.push(arcs[i]);\n\n            if (labelsOutside) {\n              if (donut) {\n                labelsArc[i] = d3.svg.arc().outerRadius(arcs[i].outerRadius());\n                if (startAngle !== false) labelsArc[i].startAngle(startAngle);\n                if (endAngle !== false) labelsArc[i].endAngle(endAngle);\n              }\n            } else if (!donut) {\n              labelsArc[i].innerRadius(0);\n            }\n          }\n\n          pieLabels.enter().append(\"g\").classed(\"nv-label\", true).each(function (d, i) {\n            var group = d3.select(this);\n            group.attr('transform', function (d, i) {\n              if (labelSunbeamLayout) {\n                d.outerRadius = arcsRadiusOuter[i] + 10; // Set Outer Coordinate\n\n                d.innerRadius = arcsRadiusOuter[i] + 15; // Set Inner Coordinate\n\n                var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n\n                if ((d.startAngle + d.endAngle) / 2 < Math.PI) {\n                  rotateAngle -= 90;\n                } else {\n                  rotateAngle += 90;\n                }\n\n                return 'translate(' + labelsArc[i].centroid(d) + ') rotate(' + rotateAngle + ')';\n              } else {\n                d.outerRadius = radius + 10; // Set Outer Coordinate\n\n                d.innerRadius = radius + 15; // Set Inner Coordinate\n\n                return 'translate(' + labelsArc[i].centroid(d) + ')';\n              }\n            });\n            group.append('rect').style('stroke', '#fff').style('fill', '#fff').attr(\"rx\", 3).attr(\"ry\", 3);\n            group.append('text').style('text-anchor', labelSunbeamLayout ? (d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end' : 'middle') //center the text on it's origin or begin/end if orthogonal aligned\n            .style('fill', '#000');\n          });\n          var labelLocationHash = {};\n          var avgHeight = 14;\n          var avgWidth = 140;\n\n          var createHashKey = function (coordinates) {\n            return Math.floor(coordinates[0] / avgWidth) * avgWidth + ',' + Math.floor(coordinates[1] / avgHeight) * avgHeight;\n          };\n\n          var getSlicePercentage = function (d) {\n            return (d.endAngle - d.startAngle) / (2 * Math.PI);\n          };\n\n          pieLabels.watchTransition(renderWatch, 'pie labels').attr('transform', function (d, i) {\n            if (labelSunbeamLayout) {\n              d.outerRadius = arcsRadiusOuter[i] + 10; // Set Outer Coordinate\n\n              d.innerRadius = arcsRadiusOuter[i] + 15; // Set Inner Coordinate\n\n              var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n\n              if ((d.startAngle + d.endAngle) / 2 < Math.PI) {\n                rotateAngle -= 90;\n              } else {\n                rotateAngle += 90;\n              }\n\n              return 'translate(' + labelsArc[i].centroid(d) + ') rotate(' + rotateAngle + ')';\n            } else {\n              d.outerRadius = radius + 10; // Set Outer Coordinate\n\n              d.innerRadius = radius + 15; // Set Inner Coordinate\n\n              /*\n              Overlapping pie labels are not good. What this attempts to do is, prevent overlapping.\n              Each label location is hashed, and if a hash collision occurs, we assume an overlap.\n              Adjust the label's y-position to remove the overlap.\n              */\n\n              var center = labelsArc[i].centroid(d);\n              var percent = getSlicePercentage(d);\n\n              if (d.value && percent >= labelThreshold) {\n                var hashKey = createHashKey(center);\n\n                if (labelLocationHash[hashKey]) {\n                  center[1] -= avgHeight;\n                }\n\n                labelLocationHash[createHashKey(center)] = true;\n              }\n\n              return 'translate(' + center + ')';\n            }\n          });\n          pieLabels.select(\".nv-label text\").style('text-anchor', function (d, i) {\n            //center the text on it's origin or begin/end if orthogonal aligned\n            return labelSunbeamLayout ? (d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end' : 'middle';\n          }).text(function (d, i) {\n            var percent = getSlicePercentage(d);\n            var label = '';\n            if (!d.value || percent < labelThreshold) return '';\n\n            if (typeof labelType === 'function') {\n              label = labelType(d, i, {\n                'key': getX(d.data),\n                'value': getY(d.data),\n                'percent': valueFormat(percent)\n              });\n            } else {\n              switch (labelType) {\n                case 'key':\n                  label = getX(d.data);\n                  break;\n\n                case 'value':\n                  label = valueFormat(getY(d.data));\n                  break;\n\n                case 'percent':\n                  label = d3.format('%')(percent);\n                  break;\n              }\n            }\n\n            return label;\n          });\n\n          if (hideOverlapLabels) {\n            pieLabels.each(function (d, i) {\n              if (!this.getBBox) return;\n              var bb = this.getBBox(),\n                  center = labelsArc[i].centroid(d);\n              var topLeft = {\n                x: center[0] + bb.x,\n                y: center[1] + bb.y\n              };\n              var topRight = {\n                x: topLeft.x + bb.width,\n                y: topLeft.y\n              };\n              var bottomLeft = {\n                x: topLeft.x,\n                y: topLeft.y + bb.height\n              };\n              var bottomRight = {\n                x: topLeft.x + bb.width,\n                y: topLeft.y + bb.height\n              };\n              d.visible = nv.utils.pointIsInArc(topLeft, d, arc) && nv.utils.pointIsInArc(topRight, d, arc) && nv.utils.pointIsInArc(bottomLeft, d, arc) && nv.utils.pointIsInArc(bottomRight, d, arc);\n            }).style('display', function (d) {\n              return d.visible ? null : 'none';\n            });\n          }\n        } // Computes the angle of an arc, converting from radians to degrees.\n\n\n        function angle(d) {\n          var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;\n          return a > 90 ? a - 180 : a;\n        }\n\n        function arcTween(a, idx) {\n          a.endAngle = isNaN(a.endAngle) ? 0 : a.endAngle;\n          a.startAngle = isNaN(a.startAngle) ? 0 : a.startAngle;\n          if (!donut) a.innerRadius = 0;\n          var i = d3.interpolate(this._current, a);\n          this._current = i(0);\n          return function (t) {\n            return arcs[idx](i(t));\n          };\n        }\n      });\n      renderWatch.renderEnd('pie immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      arcsRadius: {\n        get: function () {\n          return arcsRadius;\n        },\n        set: function (_) {\n          arcsRadius = _;\n        }\n      },\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLabels: {\n        get: function () {\n          return showLabels;\n        },\n        set: function (_) {\n          showLabels = _;\n        }\n      },\n      title: {\n        get: function () {\n          return title;\n        },\n        set: function (_) {\n          title = _;\n        }\n      },\n      titleOffset: {\n        get: function () {\n          return titleOffset;\n        },\n        set: function (_) {\n          titleOffset = _;\n        }\n      },\n      labelThreshold: {\n        get: function () {\n          return labelThreshold;\n        },\n        set: function (_) {\n          labelThreshold = _;\n        }\n      },\n      hideOverlapLabels: {\n        get: function () {\n          return hideOverlapLabels;\n        },\n        set: function (_) {\n          hideOverlapLabels = _;\n        }\n      },\n      valueFormat: {\n        get: function () {\n          return valueFormat;\n        },\n        set: function (_) {\n          valueFormat = _;\n        }\n      },\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      endAngle: {\n        get: function () {\n          return endAngle;\n        },\n        set: function (_) {\n          endAngle = _;\n        }\n      },\n      startAngle: {\n        get: function () {\n          return startAngle;\n        },\n        set: function (_) {\n          startAngle = _;\n        }\n      },\n      padAngle: {\n        get: function () {\n          return padAngle;\n        },\n        set: function (_) {\n          padAngle = _;\n        }\n      },\n      cornerRadius: {\n        get: function () {\n          return cornerRadius;\n        },\n        set: function (_) {\n          cornerRadius = _;\n        }\n      },\n      donutRatio: {\n        get: function () {\n          return donutRatio;\n        },\n        set: function (_) {\n          donutRatio = _;\n        }\n      },\n      labelsOutside: {\n        get: function () {\n          return labelsOutside;\n        },\n        set: function (_) {\n          labelsOutside = _;\n        }\n      },\n      labelSunbeamLayout: {\n        get: function () {\n          return labelSunbeamLayout;\n        },\n        set: function (_) {\n          labelSunbeamLayout = _;\n        }\n      },\n      donut: {\n        get: function () {\n          return donut;\n        },\n        set: function (_) {\n          donut = _;\n        }\n      },\n      growOnHover: {\n        get: function () {\n          return growOnHover;\n        },\n        set: function (_) {\n          growOnHover = _;\n        }\n      },\n      // depreciated after 1.7.1\n      pieLabelsOutside: {\n        get: function () {\n          return labelsOutside;\n        },\n        set: function (_) {\n          labelsOutside = _;\n          nv.deprecated('pieLabelsOutside', 'use labelsOutside instead');\n        }\n      },\n      // depreciated after 1.7.1\n      donutLabelsOutside: {\n        get: function () {\n          return labelsOutside;\n        },\n        set: function (_) {\n          labelsOutside = _;\n          nv.deprecated('donutLabelsOutside', 'use labelsOutside instead');\n        }\n      },\n      // deprecated after 1.7.1\n      labelFormat: {\n        get: function () {\n          return valueFormat;\n        },\n        set: function (_) {\n          valueFormat = _;\n          nv.deprecated('labelFormat', 'use valueFormat instead');\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = typeof _.top != 'undefined' ? _.top : margin.top;\n          margin.right = typeof _.right != 'undefined' ? _.right : margin.right;\n          margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n          margin.left = typeof _.left != 'undefined' ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = d3.functor(_);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      labelType: {\n        get: function () {\n          return labelType;\n        },\n        set: function (_) {\n          labelType = _ || 'key';\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.pieChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var pie = nv.models.pie();\n    var legend = nv.models.legend();\n    var tooltip = nv.models.tooltip();\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 20,\n      left: 20\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        showTooltipPercent = false,\n        showLegend = true,\n        legendPosition = \"top\",\n        color = nv.utils.defaultColor(),\n        state = nv.utils.state(),\n        defaultState = null,\n        noData = null,\n        duration = 250,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd');\n    tooltip.duration(0).headerEnabled(false).valueFormatter(function (d, i) {\n      return pie.valueFormat()(d, i);\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          })\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.active !== undefined) {\n          data.forEach(function (series, i) {\n            series.disabled = !state.active[i];\n          });\n        }\n      };\n    }; //============================================================\n    // Chart function\n    //------------------------------------------------------------\n\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(pie);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var that = this;\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          container.transition().call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); //set state.disabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display No Data message if there's nothing to show.\n\n\n        if (!data || !data.length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup containers and skeleton of chart\n\n\n        var wrap = container.selectAll('g.nv-wrap.nv-pieChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-pieChart').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-pieWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          if (legendPosition === \"top\") {\n            legend.width(availableWidth).key(pie.x());\n            wrap.select('.nv-legendWrap').datum(data).call(legend);\n\n            if (!marginTop && legend.height() !== margin.top) {\n              margin.top = legend.height();\n              availableHeight = nv.utils.availableHeight(height, container, margin);\n            }\n\n            wrap.select('.nv-legendWrap').attr('transform', 'translate(0,' + -margin.top + ')');\n          } else if (legendPosition === \"right\") {\n            var legendWidth = nv.models.legend().width();\n\n            if (availableWidth / 2 < legendWidth) {\n              legendWidth = availableWidth / 2;\n            }\n\n            legend.height(availableHeight).key(pie.x());\n            legend.width(legendWidth);\n            availableWidth -= legend.width();\n            wrap.select('.nv-legendWrap').datum(data).call(legend).attr('transform', 'translate(' + availableWidth + ',0)');\n          } else if (legendPosition === \"bottom\") {\n            legend.width(availableWidth).key(pie.x());\n            wrap.select('.nv-legendWrap').datum(data).call(legend);\n            margin.bottom = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n            wrap.select('.nv-legendWrap').attr('transform', 'translate(0,' + availableHeight + ')');\n          }\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Main Chart Component(s)\n\n        pie.width(availableWidth).height(availableHeight);\n        var pieWrap = g.select('.nv-pieWrap').datum([data]);\n        d3.transition(pieWrap).call(pie); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) {\n            state[key] = newState[key];\n          }\n\n          dispatch.stateChange(state);\n          chart.update();\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          chart.update();\n        });\n      });\n      renderWatch.renderEnd('pieChart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    pie.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt['series'] = {\n        key: chart.x()(evt.data),\n        value: chart.y()(evt.data),\n        color: evt.color,\n        percent: evt.percent\n      };\n\n      if (!showTooltipPercent) {\n        delete evt.percent;\n        delete evt.series.percent;\n      }\n\n      tooltip.data(evt).hidden(false);\n    });\n    pie.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    pie.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.legend = legend;\n    chart.dispatch = dispatch;\n    chart.pie = pie;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart); // use Object get/set functionality to map between vars and chart functions\n\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      showTooltipPercent: {\n        get: function () {\n          return showTooltipPercent;\n        },\n        set: function (_) {\n          showTooltipPercent = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      legendPosition: {\n        get: function () {\n          return legendPosition;\n        },\n        set: function (_) {\n          legendPosition = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      // options that require extra logic in the setter\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = _;\n          legend.color(color);\n          pie.color(color);\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          pie.duration(duration);\n        }\n      },\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, pie);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.sankey = function () {\n    'use strict'; // Sources:\n    // - https://bost.ocks.org/mike/sankey/\n    // - https://github.com/soxofaan/d3-plugin-captain-sankey\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var sankey = {},\n        nodeWidth = 24,\n        nodePadding = 8,\n        size = [1, 1],\n        nodes = [],\n        links = [],\n        sinksRight = true;\n\n    var layout = function (iterations) {\n      computeNodeLinks();\n      computeNodeValues();\n      computeNodeBreadths();\n      computeNodeDepths(iterations);\n    };\n\n    var relayout = function () {\n      computeLinkDepths();\n    }; // SVG path data generator, to be used as 'd' attribute on 'path' element selection.\n\n\n    var link = function () {\n      var curvature = .5;\n\n      function link(d) {\n        var x0 = d.source.x + d.source.dx,\n            x1 = d.target.x,\n            xi = d3.interpolateNumber(x0, x1),\n            x2 = xi(curvature),\n            x3 = xi(1 - curvature),\n            y0 = d.source.y + d.sy + d.dy / 2,\n            y1 = d.target.y + d.ty + d.dy / 2;\n        var linkPath = 'M' + x0 + ',' + y0 + 'C' + x2 + ',' + y0 + ' ' + x3 + ',' + y1 + ' ' + x1 + ',' + y1;\n        return linkPath;\n      }\n\n      link.curvature = function (_) {\n        if (!arguments.length) return curvature;\n        curvature = +_;\n        return link;\n      };\n\n      return link;\n    }; // Y-position of the middle of a node.\n\n\n    var center = function (node) {\n      return node.y + node.dy / 2;\n    }; //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n    // Populate the sourceLinks and targetLinks for each node.\n    // Also, if the source and target are not objects, assume they are indices.\n\n\n    function computeNodeLinks() {\n      nodes.forEach(function (node) {\n        // Links that have this node as source.\n        node.sourceLinks = []; // Links that have this node as target.\n\n        node.targetLinks = [];\n      });\n      links.forEach(function (link) {\n        var source = link.source,\n            target = link.target;\n        if (typeof source === 'number') source = link.source = nodes[link.source];\n        if (typeof target === 'number') target = link.target = nodes[link.target];\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      });\n    } // Compute the value (size) of each node by summing the associated links.\n\n\n    function computeNodeValues() {\n      nodes.forEach(function (node) {\n        node.value = Math.max(d3.sum(node.sourceLinks, value), d3.sum(node.targetLinks, value));\n      });\n    } // Iteratively assign the breadth (x-position) for each node.\n    // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n    // nodes with no incoming links are assigned breadth zero, while\n    // nodes with no outgoing links are assigned the maximum breadth.\n\n\n    function computeNodeBreadths() {\n      //\n      var remainingNodes = nodes,\n          nextNodes,\n          x = 0; // Work from left to right.\n      // Keep updating the breath (x-position) of nodes that are target of recently updated nodes.\n      //\n\n      while (remainingNodes.length && x < nodes.length) {\n        nextNodes = [];\n        remainingNodes.forEach(function (node) {\n          node.x = x;\n          node.dx = nodeWidth;\n          node.sourceLinks.forEach(function (link) {\n            if (nextNodes.indexOf(link.target) < 0) {\n              nextNodes.push(link.target);\n            }\n          });\n        });\n        remainingNodes = nextNodes;\n        ++x; //\n      } // Optionally move pure sinks always to the right.\n\n\n      if (sinksRight) {\n        moveSinksRight(x);\n      }\n\n      scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n    }\n\n    function moveSourcesRight() {\n      nodes.forEach(function (node) {\n        if (!node.targetLinks.length) {\n          node.x = d3.min(node.sourceLinks, function (d) {\n            return d.target.x;\n          }) - 1;\n        }\n      });\n    }\n\n    function moveSinksRight(x) {\n      nodes.forEach(function (node) {\n        if (!node.sourceLinks.length) {\n          node.x = x - 1;\n        }\n      });\n    }\n\n    function scaleNodeBreadths(kx) {\n      nodes.forEach(function (node) {\n        node.x *= kx;\n      });\n    } // Compute the depth (y-position) for each node.\n\n\n    function computeNodeDepths(iterations) {\n      // Group nodes by breath.\n      var nodesByBreadth = d3.nest().key(function (d) {\n        return d.x;\n      }).sortKeys(d3.ascending).entries(nodes).map(function (d) {\n        return d.values;\n      }); //\n\n      initializeNodeDepth();\n      resolveCollisions();\n      computeLinkDepths();\n\n      for (var alpha = 1; iterations > 0; --iterations) {\n        relaxRightToLeft(alpha *= .99);\n        resolveCollisions();\n        computeLinkDepths();\n        relaxLeftToRight(alpha);\n        resolveCollisions();\n        computeLinkDepths();\n      }\n\n      function initializeNodeDepth() {\n        // Calculate vertical scaling factor.\n        var ky = d3.min(nodesByBreadth, function (nodes) {\n          return (size[1] - (nodes.length - 1) * nodePadding) / d3.sum(nodes, value);\n        });\n        nodesByBreadth.forEach(function (nodes) {\n          nodes.forEach(function (node, i) {\n            node.y = i;\n            node.dy = node.value * ky;\n          });\n        });\n        links.forEach(function (link) {\n          link.dy = link.value * ky;\n        });\n      }\n\n      function relaxLeftToRight(alpha) {\n        nodesByBreadth.forEach(function (nodes, breadth) {\n          nodes.forEach(function (node) {\n            if (node.targetLinks.length) {\n              // Value-weighted average of the y-position of source node centers linked to this node.\n              var y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n        function weightedSource(link) {\n          return (link.source.y + link.sy + link.dy / 2) * link.value;\n        }\n      }\n\n      function relaxRightToLeft(alpha) {\n        nodesByBreadth.slice().reverse().forEach(function (nodes) {\n          nodes.forEach(function (node) {\n            if (node.sourceLinks.length) {\n              // Value-weighted average of the y-positions of target nodes linked to this node.\n              var y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n        function weightedTarget(link) {\n          return (link.target.y + link.ty + link.dy / 2) * link.value;\n        }\n      }\n\n      function resolveCollisions() {\n        nodesByBreadth.forEach(function (nodes) {\n          var node,\n              dy,\n              y0 = 0,\n              n = nodes.length,\n              i; // Push any overlapping nodes down.\n\n          nodes.sort(ascendingDepth);\n\n          for (i = 0; i < n; ++i) {\n            node = nodes[i];\n            dy = y0 - node.y;\n            if (dy > 0) node.y += dy;\n            y0 = node.y + node.dy + nodePadding;\n          } // If the bottommost node goes outside the bounds, push it back up.\n\n\n          dy = y0 - nodePadding - size[1];\n\n          if (dy > 0) {\n            y0 = node.y -= dy; // Push any overlapping nodes back up.\n\n            for (i = n - 2; i >= 0; --i) {\n              node = nodes[i];\n              dy = node.y + node.dy + nodePadding - y0;\n              if (dy > 0) node.y -= dy;\n              y0 = node.y;\n            }\n          }\n        });\n      }\n\n      function ascendingDepth(a, b) {\n        return a.y - b.y;\n      }\n    } // Compute y-offset of the source endpoint (sy) and target endpoints (ty) of links,\n    // relative to the source/target node's y-position.\n\n\n    function computeLinkDepths() {\n      nodes.forEach(function (node) {\n        node.sourceLinks.sort(ascendingTargetDepth);\n        node.targetLinks.sort(ascendingSourceDepth);\n      });\n      nodes.forEach(function (node) {\n        var sy = 0,\n            ty = 0;\n        node.sourceLinks.forEach(function (link) {\n          link.sy = sy;\n          sy += link.dy;\n        });\n        node.targetLinks.forEach(function (link) {\n          link.ty = ty;\n          ty += link.dy;\n        });\n      });\n\n      function ascendingSourceDepth(a, b) {\n        return a.source.y - b.source.y;\n      }\n\n      function ascendingTargetDepth(a, b) {\n        return a.target.y - b.target.y;\n      }\n    } // Value property accessor.\n\n\n    function value(x) {\n      return x.value;\n    }\n\n    sankey.options = nv.utils.optionsFunc.bind(sankey);\n    sankey._options = Object.create({}, {\n      nodeWidth: {\n        get: function () {\n          return nodeWidth;\n        },\n        set: function (_) {\n          nodeWidth = +_;\n        }\n      },\n      nodePadding: {\n        get: function () {\n          return nodePadding;\n        },\n        set: function (_) {\n          nodePadding = _;\n        }\n      },\n      nodes: {\n        get: function () {\n          return nodes;\n        },\n        set: function (_) {\n          nodes = _;\n        }\n      },\n      links: {\n        get: function () {\n          return links;\n        },\n        set: function (_) {\n          links = _;\n        }\n      },\n      size: {\n        get: function () {\n          return size;\n        },\n        set: function (_) {\n          size = _;\n        }\n      },\n      sinksRight: {\n        get: function () {\n          return sinksRight;\n        },\n        set: function (_) {\n          sinksRight = _;\n        }\n      },\n      layout: {\n        get: function () {\n          layout(32);\n        },\n        set: function (_) {\n          layout(_);\n        }\n      },\n      relayout: {\n        get: function () {\n          relayout();\n        },\n        set: function (_) {}\n      },\n      center: {\n        get: function () {\n          return center();\n        },\n        set: function (_) {\n          if (typeof _ === 'function') {\n            center = _;\n          }\n        }\n      },\n      link: {\n        get: function () {\n          return link();\n        },\n        set: function (_) {\n          if (typeof _ === 'function') {\n            link = _;\n          }\n\n          return link();\n        }\n      }\n    });\n    nv.utils.initOptions(sankey);\n    return sankey;\n  };\n\n  nv.models.sankeyChart = function () {\n    \"use strict\"; // Sources:\n    // - https://bost.ocks.org/mike/sankey/\n    // - https://github.com/soxofaan/d3-plugin-captain-sankey\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 5,\n      right: 0,\n      bottom: 5,\n      left: 0\n    },\n        sankey = nv.models.sankey(),\n        width = 600,\n        height = 400,\n        nodeWidth = 36,\n        nodePadding = 40,\n        units = 'units',\n        center = undefined; //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var formatNumber = d3.format(',.0f'); // zero decimal places\n\n    var format = function (d) {\n      return formatNumber(d) + ' ' + units;\n    };\n\n    var color = d3.scale.category20();\n\n    var linkTitle = function (d) {\n      return d.source.name + ' → ' + d.target.name + '\\n' + format(d.value);\n    };\n\n    var nodeFillColor = function (d) {\n      return d.color = color(d.name.replace(/ .*/, ''));\n    };\n\n    var nodeStrokeColor = function (d) {\n      return d3.rgb(d.color).darker(2);\n    };\n\n    var nodeTitle = function (d) {\n      return d.name + '\\n' + format(d.value);\n    };\n\n    var showError = function (element, message) {\n      element.append('text').attr('x', 0).attr('y', 0).attr('class', 'nvd3-sankey-chart-error').attr('text-anchor', 'middle').text(message);\n    };\n\n    function chart(selection) {\n      selection.each(function (data) {\n        var testData = {\n          nodes: [{\n            'node': 1,\n            'name': 'Test 1'\n          }, {\n            'node': 2,\n            'name': 'Test 2'\n          }, {\n            'node': 3,\n            'name': 'Test 3'\n          }, {\n            'node': 4,\n            'name': 'Test 4'\n          }, {\n            'node': 5,\n            'name': 'Test 5'\n          }, {\n            'node': 6,\n            'name': 'Test 6'\n          }],\n          links: [{\n            'source': 0,\n            'target': 1,\n            'value': 2295\n          }, {\n            'source': 0,\n            'target': 5,\n            'value': 1199\n          }, {\n            'source': 1,\n            'target': 2,\n            'value': 1119\n          }, {\n            'source': 1,\n            'target': 5,\n            'value': 1176\n          }, {\n            'source': 2,\n            'target': 3,\n            'value': 487\n          }, {\n            'source': 2,\n            'target': 5,\n            'value': 632\n          }, {\n            'source': 3,\n            'target': 4,\n            'value': 301\n          }, {\n            'source': 3,\n            'target': 5,\n            'value': 186\n          }]\n        }; // Error handling\n\n        var isDataValid = false;\n        var dataAvailable = false; // check if data is valid\n\n        if ((typeof data['nodes'] === 'object' && data['nodes'].length) >= 0 && (typeof data['links'] === 'object' && data['links'].length) >= 0) {\n          isDataValid = true;\n        } // check if data is available\n\n\n        if (data['nodes'] && data['nodes'].length > 0 && data['links'] && data['links'].length > 0) {\n          dataAvailable = true;\n        } // show error\n\n\n        if (!isDataValid) {\n          console.error('NVD3 Sankey chart error:', 'invalid data format for', data);\n          console.info('Valid data format is: ', testData, JSON.stringify(testData));\n          showError(selection, 'Error loading chart, data is invalid');\n          return false;\n        } // TODO use nv.utils.noData\n\n\n        if (!dataAvailable) {\n          showError(selection, 'No data available');\n          return false;\n        } // No errors, continue\n        // append the svg canvas to the page\n\n\n        var svg = selection.append('svg').attr('width', width).attr('height', height).append('g').attr('class', 'nvd3 nv-wrap nv-sankeyChart'); // Set the sankey diagram properties\n\n        sankey.nodeWidth(nodeWidth).nodePadding(nodePadding).size([width, height]);\n        var path = sankey.link();\n        sankey.nodes(data.nodes).links(data.links).layout(32).center(center); // add in the links\n\n        var link = svg.append('g').selectAll('.link').data(data.links).enter().append('path').attr('class', 'link').attr('d', path).style('stroke-width', function (d) {\n          return Math.max(1, d.dy);\n        }).sort(function (a, b) {\n          return b.dy - a.dy;\n        }); // add the link titles\n\n        link.append('title').text(linkTitle); // add in the nodes\n\n        var node = svg.append('g').selectAll('.node').data(data.nodes).enter().append('g').attr('class', 'node').attr('transform', function (d) {\n          return 'translate(' + d.x + ',' + d.y + ')';\n        }).call(d3.behavior.drag().origin(function (d) {\n          return d;\n        }).on('dragstart', function () {\n          this.parentNode.appendChild(this);\n        }).on('drag', dragmove)); // add the rectangles for the nodes\n\n        node.append('rect').attr('height', function (d) {\n          return d.dy;\n        }).attr('width', sankey.nodeWidth()).style('fill', nodeFillColor).style('stroke', nodeStrokeColor).append('title').text(nodeTitle); // add in the title for the nodes\n\n        node.append('text').attr('x', -6).attr('y', function (d) {\n          return d.dy / 2;\n        }).attr('dy', '.35em').attr('text-anchor', 'end').attr('transform', null).text(function (d) {\n          return d.name;\n        }).filter(function (d) {\n          return d.x < width / 2;\n        }).attr('x', 6 + sankey.nodeWidth()).attr('text-anchor', 'start'); // the function for moving the nodes\n\n        function dragmove(d) {\n          d3.select(this).attr('transform', 'translate(' + d.x + ',' + (d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))) + ')');\n          sankey.relayout();\n          link.attr('d', path);\n        }\n      });\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      units: {\n        get: function () {\n          return units;\n        },\n        set: function (_) {\n          units = _;\n        }\n      },\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      format: {\n        get: function () {\n          return format;\n        },\n        set: function (_) {\n          format = _;\n        }\n      },\n      linkTitle: {\n        get: function () {\n          return linkTitle;\n        },\n        set: function (_) {\n          linkTitle = _;\n        }\n      },\n      nodeWidth: {\n        get: function () {\n          return nodeWidth;\n        },\n        set: function (_) {\n          nodeWidth = _;\n        }\n      },\n      nodePadding: {\n        get: function () {\n          return nodePadding;\n        },\n        set: function (_) {\n          nodePadding = _;\n        }\n      },\n      center: {\n        get: function () {\n          return center;\n        },\n        set: function (_) {\n          center = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      nodeStyle: {\n        get: function () {\n          return {};\n        },\n        set: function (_) {\n          nodeFillColor = _.fillColor !== undefined ? _.fillColor : nodeFillColor;\n          nodeStrokeColor = _.strokeColor !== undefined ? _.strokeColor : nodeStrokeColor;\n          nodeTitle = _.title !== undefined ? _.title : nodeTitle;\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.scatter = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = null,\n        height = null,\n        color = nv.utils.defaultColor() // chooses color\n    ,\n        pointBorderColor = null,\n        id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't select one\n    ,\n        container = null,\n        x = d3.scale.linear(),\n        y = d3.scale.linear(),\n        z = d3.scale.linear() //linear because d3.svg.shape.size is treated as area\n    ,\n        getX = function (d) {\n      return d.x;\n    } // accessor to get the x value\n    ,\n        getY = function (d) {\n      return d.y;\n    } // accessor to get the y value\n    ,\n        getSize = function (d) {\n      return d.size || 1;\n    } // accessor to get the point size\n    ,\n        getShape = function (d) {\n      return d.shape || 'circle';\n    } // accessor to get point shape\n    ,\n        forceX = [] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n    ,\n        forceY = [] // List of numbers to Force into the Y scale\n    ,\n        forceSize = [] // List of numbers to Force into the Size scale\n    ,\n        interactive = true // If true, plots a voronoi overlay for advanced point intersection\n    ,\n        pointActive = function (d) {\n      return !d.notActive;\n    } // any points that return false will be filtered out\n    ,\n        padData = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n    ,\n        padDataOuter = .1 //outerPadding to imitate ordinal scale outer padding\n    ,\n        clipEdge = false // if true, masks points within x and y scale\n    ,\n        clipVoronoi = true // if true, masks each point with a circle... can turn off to slightly increase performance\n    ,\n        showVoronoi = false // display the voronoi areas\n    ,\n        clipRadius = function () {\n      return 25;\n    } // function to get the radius for voronoi point clips\n    ,\n        xDomain = null // Override x domain (skips the calculation from data)\n    ,\n        yDomain = null // Override y domain\n    ,\n        xRange = null // Override x range\n    ,\n        yRange = null // Override y range\n    ,\n        sizeDomain = null // Override point size domain\n    ,\n        sizeRange = null,\n        singlePoint = false,\n        dispatch = d3.dispatch('elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'renderEnd'),\n        useVoronoi = true,\n        duration = 250,\n        interactiveUpdateDelay = 300,\n        showLabels = false; //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var x0,\n        y0,\n        z0 // used to store previous scales\n    ,\n        xDom,\n        yDom // used to store previous domains\n    ,\n        width0,\n        height0,\n        timeoutID,\n        needsUpdate = false // Flag for when the points are visually updating, but the interactive layer is behind, to disable tooltips\n    ,\n        renderWatch = nv.utils.renderWatch(dispatch, duration),\n        _sizeRange_def = [16, 256],\n        _cache = {}; //============================================================\n    // Diff and Cache Utilities\n    //------------------------------------------------------------\n    // getDiffs is used to filter unchanged points from the update\n    // selection. It implicitly updates it's cache when called and\n    // therefor the diff is based upon the previous invocation NOT\n    // the previous update.\n    //\n    // getDiffs takes a point as its first argument followed by n\n    // key getter pairs (d, [key, get... key, get]) this approach\n    // was chosen for efficiency. (The filter will call it a LOT).\n    //\n    // It is important to call delCache on point exit to prevent a\n    // memory leak. It is also needed to prevent invalid caches if\n    // a new point uses the same series and point id key.\n    //\n    // Argument Performance Concerns:\n    // - Object property lists for key getter pairs would be very\n    // expensive (points * objects for the GC every update).\n    // - ES6 function names for implicit keys would be nice but\n    // they are not guaranteed to be unique.\n    // - function.toString to obtain implicit keys is possible\n    // but long object keys are not free (internal hash).\n    // - Explicit key without objects are the most efficient.\n\n    function getCache(d) {\n      var key, val;\n      key = d[0].series + ':' + d[1];\n      val = _cache[key] = _cache[key] || {};\n      return val;\n    }\n\n    function delCache(d) {\n      var key, val;\n      key = d[0].series + ':' + d[1];\n      delete _cache[key];\n    }\n\n    function getDiffs(d) {\n      var i,\n          key,\n          val,\n          cache = getCache(d),\n          diffs = false;\n\n      for (i = 1; i < arguments.length; i += 2) {\n        key = arguments[i];\n        val = arguments[i + 1](d[0], d[1]);\n\n        if (cache[key] !== val || !cache.hasOwnProperty(key)) {\n          cache[key] = val;\n          diffs = true;\n        }\n      }\n\n      return diffs;\n    }\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        container = d3.select(this);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n        nv.utils.initSVG(container); //add series index to each data point for reference\n\n        data.forEach(function (series, i) {\n          series.values.forEach(function (point) {\n            point.series = i;\n          });\n        }); // Setup Scales\n\n        var logScale = typeof chart.yScale().base === \"function\"; // Only log scale has a method \"base()\"\n        // remap and flatten the data for use in calculating the scales' domains\n\n        var seriesData = xDomain && yDomain && sizeDomain ? [] : // if we know xDomain and yDomain and sizeDomain, no need to calculate.... if Size is constant remember to set sizeDomain to speed up performance\n        d3.merge(data.map(function (d) {\n          return d.values.map(function (d, i) {\n            return {\n              x: getX(d, i),\n              y: getY(d, i),\n              size: getSize(d, i)\n            };\n          });\n        }));\n        x.domain(xDomain || d3.extent(seriesData.map(function (d) {\n          return d.x;\n        }).concat(forceX)));\n        if (padData && data[0]) x.range(xRange || [(availableWidth * padDataOuter + availableWidth) / (2 * data[0].values.length), availableWidth - availableWidth * (1 + padDataOuter) / (2 * data[0].values.length)]); //x.range([availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n        else x.range(xRange || [0, availableWidth]);\n\n        if (logScale) {\n          var min = d3.min(seriesData.map(function (d) {\n            if (d.y !== 0) return d.y;\n          }));\n          y.clamp(true).domain(yDomain || d3.extent(seriesData.map(function (d) {\n            if (d.y !== 0) return d.y;else return min * 0.1;\n          }).concat(forceY))).range(yRange || [availableHeight, 0]);\n        } else {\n          y.domain(yDomain || d3.extent(seriesData.map(function (d) {\n            return d.y;\n          }).concat(forceY))).range(yRange || [availableHeight, 0]);\n        }\n\n        z.domain(sizeDomain || d3.extent(seriesData.map(function (d) {\n          return d.size;\n        }).concat(forceSize))).range(sizeRange || _sizeRange_def); // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n\n        singlePoint = x.domain()[0] === x.domain()[1] || y.domain()[0] === y.domain()[1];\n        if (x.domain()[0] === x.domain()[1]) x.domain()[0] ? x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01]) : x.domain([-1, 1]);\n        if (y.domain()[0] === y.domain()[1]) y.domain()[0] ? y.domain([y.domain()[0] - y.domain()[0] * 0.01, y.domain()[1] + y.domain()[1] * 0.01]) : y.domain([-1, 1]);\n\n        if (isNaN(x.domain()[0])) {\n          x.domain([-1, 1]);\n        }\n\n        if (isNaN(y.domain()[0])) {\n          y.domain([-1, 1]);\n        }\n\n        x0 = x0 || x;\n        y0 = y0 || y;\n        z0 = z0 || z;\n        var scaleDiff = x(1) !== x0(1) || y(1) !== y0(1) || z(1) !== z0(1);\n        width0 = width0 || width;\n        height0 = height0 || height;\n        var sizeDiff = width0 !== width || height0 !== height; // Domain Diffs\n\n        xDom = xDom || [];\n        var domainDiff = xDom[0] !== x.domain()[0] || xDom[1] !== x.domain()[1];\n        xDom = x.domain();\n        yDom = yDom || [];\n        domainDiff = domainDiff || yDom[0] !== y.domain()[0] || yDom[1] !== y.domain()[1];\n        yDom = y.domain(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-scatter').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatter nv-chart-' + id);\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        wrap.classed('nv-single-point', singlePoint);\n        gEnter.append('g').attr('class', 'nv-groups');\n        gEnter.append('g').attr('class', 'nv-point-paths');\n        wrapEnter.append('g').attr('class', 'nv-point-clips');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        defsEnter.append('clipPath').attr('id', 'nv-edge-clip-' + id).append('rect').attr('transform', 'translate( -10, -10)');\n        wrap.select('#nv-edge-clip-' + id + ' rect').attr('width', availableWidth + 20).attr('height', availableHeight > 0 ? availableHeight + 20 : 0);\n        g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n        function updateInteractiveLayer() {\n          // Always clear needs-update flag regardless of whether or not\n          // we will actually do anything (avoids needless invocations).\n          needsUpdate = false;\n          if (!interactive) return false; // inject series and point index for reference into voronoi\n\n          if (useVoronoi === true) {\n            // nuke all voronoi paths on reload and recreate them\n            wrap.select('.nv-point-paths').selectAll('path').remove();\n            var vertices = d3.merge(data.map(function (group, groupIndex) {\n              return group.values.map(function (point, pointIndex) {\n                // *Adding noise to make duplicates very unlikely\n                // *Injecting series and point index for reference\n                // *Adding a 'jitter' to the points, because there's an issue in d3.geom.voronoi.\n                var pX = getX(point, pointIndex);\n                var pY = getY(point, pointIndex);\n                return [nv.utils.NaNtoZero(x(pX)) + Math.random() * 1e-4, nv.utils.NaNtoZero(y(pY)) + Math.random() * 1e-4, groupIndex, pointIndex, point];\n              }).filter(function (pointArray, pointIndex) {\n                return pointActive(pointArray[4], pointIndex); // Issue #237.. move filter to after map, so pointIndex is correct!\n              });\n            }));\n            if (vertices.length == 0) return false; // No active points, we're done\n\n            if (vertices.length < 3) {\n              // Issue #283 - Adding 2 dummy points to the voronoi b/c voronoi requires min 3 points to work\n              vertices.push([x.range()[0] - 20, y.range()[0] - 20, null, null]);\n              vertices.push([x.range()[1] + 20, y.range()[1] + 20, null, null]);\n              vertices.push([x.range()[0] - 20, y.range()[0] + 20, null, null]);\n              vertices.push([x.range()[1] + 20, y.range()[1] - 20, null, null]);\n            } // keep voronoi sections from going more than 10 outside of graph\n            // to avoid overlap with other things like legend etc\n\n\n            var bounds = d3.geom.polygon([[-10, -10], [-10, height + 10], [width + 10, height + 10], [width + 10, -10]]); // delete duplicates from vertices - essential assumption for d3.geom.voronoi\n\n            var epsilon = 1e-4; // Uses 1e-4 to determine equivalence.\n\n            vertices = vertices.sort(function (a, b) {\n              return a[0] - b[0] || a[1] - b[1];\n            });\n\n            for (var i = 0; i < vertices.length - 1;) {\n              if (Math.abs(vertices[i][0] - vertices[i + 1][0]) < epsilon && Math.abs(vertices[i][1] - vertices[i + 1][1]) < epsilon) {\n                vertices.splice(i + 1, 1);\n              } else {\n                i++;\n              }\n            }\n\n            var voronoi = d3.geom.voronoi(vertices).map(function (d, i) {\n              return {\n                'data': bounds.clip(d),\n                'series': vertices[i][2],\n                'point': vertices[i][3]\n              };\n            });\n            var pointPaths = wrap.select('.nv-point-paths').selectAll('path').data(voronoi);\n            var vPointPaths = pointPaths.enter().append(\"svg:path\").attr(\"d\", function (d) {\n              if (!d || !d.data || d.data.length === 0) return 'M 0 0';else return \"M\" + d.data.join(\",\") + \"Z\";\n            }).attr(\"id\", function (d, i) {\n              return \"nv-path-\" + i;\n            }).attr(\"clip-path\", function (d, i) {\n              return \"url(#nv-clip-\" + id + \"-\" + i + \")\";\n            }); // good for debugging point hover issues\n\n            if (showVoronoi) {\n              vPointPaths.style(\"fill\", d3.rgb(230, 230, 230)).style('fill-opacity', 0.4).style('stroke-opacity', 1).style(\"stroke\", d3.rgb(200, 200, 200));\n            }\n\n            if (clipVoronoi) {\n              // voronoi sections are already set to clip,\n              // just create the circles with the IDs they expect\n              wrap.select('.nv-point-clips').selectAll('*').remove(); // must do * since it has sub-dom\n\n              var pointClips = wrap.select('.nv-point-clips').selectAll('clipPath').data(vertices);\n              var vPointClips = pointClips.enter().append(\"svg:clipPath\").attr(\"id\", function (d, i) {\n                return \"nv-clip-\" + id + \"-\" + i;\n              }).append(\"svg:circle\").attr('cx', function (d) {\n                return d[0];\n              }).attr('cy', function (d) {\n                return d[1];\n              }).attr('r', clipRadius);\n            }\n\n            var mouseEventCallback = function (el, d, mDispatch) {\n              if (needsUpdate) return 0;\n              var series = data[d.series];\n              if (series === undefined) return;\n              var point = series.values[d.point];\n              point['color'] = color(series, d.series); // standardize attributes for tooltip.\n\n              point['x'] = getX(point);\n              point['y'] = getY(point); // can't just get box of event node since it's actually a voronoi polygon\n\n              var box = container.node().getBoundingClientRect();\n              var scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n              var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n              var pos = {\n                left: x(getX(point, d.point)) + box.left + scrollLeft + margin.left + 10,\n                top: y(getY(point, d.point)) + box.top + scrollTop + margin.top + 10\n              };\n              mDispatch({\n                point: point,\n                series: series,\n                pos: pos,\n                relativePos: [x(getX(point, d.point)) + margin.left, y(getY(point, d.point)) + margin.top],\n                seriesIndex: d.series,\n                pointIndex: d.point,\n                event: d3.event,\n                element: el\n              });\n            };\n\n            pointPaths.on('click', function (d) {\n              mouseEventCallback(this, d, dispatch.elementClick);\n            }).on('dblclick', function (d) {\n              mouseEventCallback(this, d, dispatch.elementDblClick);\n            }).on('mouseover', function (d) {\n              mouseEventCallback(this, d, dispatch.elementMouseover);\n            }).on('mouseout', function (d, i) {\n              mouseEventCallback(this, d, dispatch.elementMouseout);\n            });\n          } else {\n            // add event handlers to points instead voronoi paths\n            wrap.select('.nv-groups').selectAll('.nv-group').selectAll('.nv-point') //.data(dataWithPoints)\n            //.style('pointer-events', 'auto') // recativate events, disabled by css\n            .on('click', function (d, i) {\n              //nv.log('test', d, i);\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\n              var series = data[d.series],\n                  point = series.values[i];\n              var element = this;\n              dispatch.elementClick({\n                point: point,\n                series: series,\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                //TODO: make this pos base on the page\n                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                seriesIndex: d.series,\n                pointIndex: i,\n                event: d3.event,\n                element: element\n              });\n            }).on('dblclick', function (d, i) {\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\n              var series = data[d.series],\n                  point = series.values[i];\n              dispatch.elementDblClick({\n                point: point,\n                series: series,\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                //TODO: make this pos base on the page\n                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                seriesIndex: d.series,\n                pointIndex: i\n              });\n            }).on('mouseover', function (d, i) {\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\n              var series = data[d.series],\n                  point = series.values[i];\n              dispatch.elementMouseover({\n                point: point,\n                series: series,\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                //TODO: make this pos base on the page\n                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                seriesIndex: d.series,\n                pointIndex: i,\n                color: color(d, i)\n              });\n            }).on('mouseout', function (d, i) {\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n\n              var series = data[d.series],\n                  point = series.values[i];\n              dispatch.elementMouseout({\n                point: point,\n                series: series,\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                //TODO: make this pos base on the page\n                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                seriesIndex: d.series,\n                pointIndex: i,\n                color: color(d, i)\n              });\n            });\n          }\n        }\n\n        needsUpdate = true;\n        var groups = wrap.select('.nv-groups').selectAll('.nv-group').data(function (d) {\n          return d;\n        }, function (d) {\n          return d.key;\n        });\n        groups.enter().append('g').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n        groups.exit().remove();\n        groups.attr('class', function (d, i) {\n          return (d.classed || '') + ' nv-group nv-series-' + i;\n        }).classed('nv-noninteractive', !interactive).classed('hover', function (d) {\n          return d.hover;\n        });\n        groups.watchTransition(renderWatch, 'scatter: groups').style('fill', function (d, i) {\n          return color(d, i);\n        }).style('stroke', function (d, i) {\n          return d.pointBorderColor || pointBorderColor || color(d, i);\n        }).style('stroke-opacity', 1).style('fill-opacity', .5); // create the points, maintaining their IDs from the original data set\n\n        var points = groups.selectAll('path.nv-point').data(function (d) {\n          return d.values.map(function (point, pointIndex) {\n            return [point, pointIndex];\n          }).filter(function (pointArray, pointIndex) {\n            return pointActive(pointArray[0], pointIndex);\n          });\n        });\n        points.enter().append('path').attr('class', function (d) {\n          return 'nv-point nv-point-' + d[1];\n        }).style('fill', function (d) {\n          return d.color;\n        }).style('stroke', function (d) {\n          return d.color;\n        }).attr('transform', function (d) {\n          return 'translate(' + nv.utils.NaNtoZero(x0(getX(d[0], d[1]))) + ',' + nv.utils.NaNtoZero(y0(getY(d[0], d[1]))) + ')';\n        }).attr('d', nv.utils.symbol().type(function (d) {\n          return getShape(d[0]);\n        }).size(function (d) {\n          return z(getSize(d[0], d[1]));\n        }));\n        points.exit().each(delCache).remove();\n        groups.exit().selectAll('path.nv-point').watchTransition(renderWatch, 'scatter exit').attr('transform', function (d) {\n          return 'translate(' + nv.utils.NaNtoZero(x(getX(d[0], d[1]))) + ',' + nv.utils.NaNtoZero(y(getY(d[0], d[1]))) + ')';\n        }).remove(); //============================================================\n        // Point Update Optimisation Notes\n        //------------------------------------------------------------\n        // The following update selections are filtered with getDiffs\n        // (defined at the top of this file) this brings a performance\n        // benefit for charts with large data sets that accumulate a\n        // subset of changes or additions over time.\n        //\n        // Uneccesary and expensive DOM calls are avoided by culling\n        // unchanged points from the selection in exchange for the\n        // cheaper overhead of caching and diffing each point first.\n        //\n        // Due to the way D3 and NVD3 work, other global changes need\n        // to be considered in addition to local point properties.\n        // This is a potential source of bugs (if any of the global\n        // changes that possibly affect points are missed).\n        // Update Point Positions [x, y]\n\n        points.filter(function (d) {\n          // getDiffs must always be called to update cache\n          return getDiffs(d, 'x', getX, 'y', getY) || scaleDiff || sizeDiff || domainDiff;\n        }).watchTransition(renderWatch, 'scatter points').attr('transform', function (d) {\n          return 'translate(' + nv.utils.NaNtoZero(x(getX(d[0], d[1]))) + ',' + nv.utils.NaNtoZero(y(getY(d[0], d[1]))) + ')';\n        }); // Update Point Appearance [shape, size]\n\n        points.filter(function (d) {\n          // getDiffs must always be called to update cache\n          return getDiffs(d, 'shape', getShape, 'size', getSize) || scaleDiff || sizeDiff || domainDiff;\n        }).watchTransition(renderWatch, 'scatter points').attr('d', nv.utils.symbol().type(function (d) {\n          return getShape(d[0]);\n        }).size(function (d) {\n          return z(getSize(d[0], d[1]));\n        })); // add label a label to scatter chart\n\n        if (showLabels) {\n          var titles = groups.selectAll('.nv-label').data(function (d) {\n            return d.values.map(function (point, pointIndex) {\n              return [point, pointIndex];\n            }).filter(function (pointArray, pointIndex) {\n              return pointActive(pointArray[0], pointIndex);\n            });\n          });\n          titles.enter().append('text').style('fill', function (d, i) {\n            return d.color;\n          }).style('stroke-opacity', 0).style('fill-opacity', 1).attr('transform', function (d) {\n            var dx = nv.utils.NaNtoZero(x0(getX(d[0], d[1]))) + Math.sqrt(z(getSize(d[0], d[1])) / Math.PI) + 2;\n            return 'translate(' + dx + ',' + nv.utils.NaNtoZero(y0(getY(d[0], d[1]))) + ')';\n          }).text(function (d, i) {\n            return d[0].label;\n          });\n          titles.exit().remove();\n          groups.exit().selectAll('path.nv-label').watchTransition(renderWatch, 'scatter exit').attr('transform', function (d) {\n            var dx = nv.utils.NaNtoZero(x(getX(d[0], d[1]))) + Math.sqrt(z(getSize(d[0], d[1])) / Math.PI) + 2;\n            return 'translate(' + dx + ',' + nv.utils.NaNtoZero(y(getY(d[0], d[1]))) + ')';\n          }).remove();\n          titles.each(function (d) {\n            d3.select(this).classed('nv-label', true).classed('nv-label-' + d[1], false).classed('hover', false);\n          });\n          titles.watchTransition(renderWatch, 'scatter labels').attr('transform', function (d) {\n            var dx = nv.utils.NaNtoZero(x(getX(d[0], d[1]))) + Math.sqrt(z(getSize(d[0], d[1])) / Math.PI) + 2;\n            return 'translate(' + dx + ',' + nv.utils.NaNtoZero(y(getY(d[0], d[1]))) + ')';\n          });\n        } // Delay updating the invisible interactive layer for smoother animation\n\n\n        if (interactiveUpdateDelay) {\n          clearTimeout(timeoutID); // stop repeat calls to updateInteractiveLayer\n\n          timeoutID = setTimeout(updateInteractiveLayer, interactiveUpdateDelay);\n        } else {\n          updateInteractiveLayer();\n        } //store old scales for use in transitions on update\n\n\n        x0 = x.copy();\n        y0 = y.copy();\n        z0 = z.copy();\n        width0 = width;\n        height0 = height;\n      });\n      renderWatch.renderEnd('scatter immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart); // utility function calls provided by this chart\n\n    chart._calls = new function () {\n      this.clearHighlights = function () {\n        nv.dom.write(function () {\n          container.selectAll(\".nv-point.hover\").classed(\"hover\", false);\n        });\n        return null;\n      };\n\n      this.highlightPoint = function (seriesIndex, pointIndex, isHoverOver) {\n        nv.dom.write(function () {\n          container.select('.nv-groups').selectAll(\".nv-series-\" + seriesIndex).selectAll(\".nv-point-\" + pointIndex).classed(\"hover\", isHoverOver);\n        });\n      };\n    }(); // trigger calls from events too\n\n    dispatch.on('elementMouseover.point', function (d) {\n      if (interactive) chart._calls.highlightPoint(d.seriesIndex, d.pointIndex, true);\n    });\n    dispatch.on('elementMouseout.point', function (d) {\n      if (interactive) chart._calls.highlightPoint(d.seriesIndex, d.pointIndex, false);\n    });\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      pointScale: {\n        get: function () {\n          return z;\n        },\n        set: function (_) {\n          z = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      pointDomain: {\n        get: function () {\n          return sizeDomain;\n        },\n        set: function (_) {\n          sizeDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      pointRange: {\n        get: function () {\n          return sizeRange;\n        },\n        set: function (_) {\n          sizeRange = _;\n        }\n      },\n      forceX: {\n        get: function () {\n          return forceX;\n        },\n        set: function (_) {\n          forceX = _;\n        }\n      },\n      forceY: {\n        get: function () {\n          return forceY;\n        },\n        set: function (_) {\n          forceY = _;\n        }\n      },\n      forcePoint: {\n        get: function () {\n          return forceSize;\n        },\n        set: function (_) {\n          forceSize = _;\n        }\n      },\n      interactive: {\n        get: function () {\n          return interactive;\n        },\n        set: function (_) {\n          interactive = _;\n        }\n      },\n      pointActive: {\n        get: function () {\n          return pointActive;\n        },\n        set: function (_) {\n          pointActive = _;\n        }\n      },\n      padDataOuter: {\n        get: function () {\n          return padDataOuter;\n        },\n        set: function (_) {\n          padDataOuter = _;\n        }\n      },\n      padData: {\n        get: function () {\n          return padData;\n        },\n        set: function (_) {\n          padData = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      clipVoronoi: {\n        get: function () {\n          return clipVoronoi;\n        },\n        set: function (_) {\n          clipVoronoi = _;\n        }\n      },\n      clipRadius: {\n        get: function () {\n          return clipRadius;\n        },\n        set: function (_) {\n          clipRadius = _;\n        }\n      },\n      showVoronoi: {\n        get: function () {\n          return showVoronoi;\n        },\n        set: function (_) {\n          showVoronoi = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      interactiveUpdateDelay: {\n        get: function () {\n          return interactiveUpdateDelay;\n        },\n        set: function (_) {\n          interactiveUpdateDelay = _;\n        }\n      },\n      showLabels: {\n        get: function () {\n          return showLabels;\n        },\n        set: function (_) {\n          showLabels = _;\n        }\n      },\n      pointBorderColor: {\n        get: function () {\n          return pointBorderColor;\n        },\n        set: function (_) {\n          pointBorderColor = _;\n        }\n      },\n      // simple functor options\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = d3.functor(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = d3.functor(_);\n        }\n      },\n      pointSize: {\n        get: function () {\n          return getSize;\n        },\n        set: function (_) {\n          getSize = d3.functor(_);\n        }\n      },\n      pointShape: {\n        get: function () {\n          return getShape;\n        },\n        set: function (_) {\n          getShape = d3.functor(_);\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      useVoronoi: {\n        get: function () {\n          return useVoronoi;\n        },\n        set: function (_) {\n          useVoronoi = _;\n\n          if (useVoronoi === false) {\n            clipVoronoi = false;\n          }\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.scatterChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var scatter = nv.models.scatter(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend(),\n        distX = nv.models.distribution(),\n        distY = nv.models.distribution(),\n        tooltip = nv.models.tooltip();\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 50,\n      left: 75\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        container = null,\n        color = nv.utils.defaultColor(),\n        x = scatter.xScale(),\n        y = scatter.yScale(),\n        showDistX = false,\n        showDistY = false,\n        showLegend = true,\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        state = nv.utils.state(),\n        defaultState = null,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'),\n        noData = null,\n        duration = 250,\n        showLabels = false;\n    scatter.xScale(x).yScale(y);\n    xAxis.orient('bottom').tickPadding(10);\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left').tickPadding(10);\n    distX.axis('x');\n    distY.axis('y');\n    tooltip.headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    }); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0,\n        y0,\n        renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          })\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(scatter);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      if (showDistX) renderWatch.models(distX);\n      if (showDistY) renderWatch.models(distY);\n      selection.each(function (data) {\n        var that = this;\n        container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          if (duration === 0) container.call(chart);else container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disableddisabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display noData message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          renderWatch.renderEnd('scatter immediate');\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = scatter.xScale();\n        y = scatter.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-scatterChart').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatterChart nv-chart-' + scatter.id());\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g'); // background for pointer events\n\n        gEnter.append('rect').attr('class', 'nvd3 nv-background').style(\"pointer-events\", \"none\");\n        gEnter.append('g').attr('class', 'nv-x nv-axis');\n        gEnter.append('g').attr('class', 'nv-y nv-axis');\n        gEnter.append('g').attr('class', 'nv-scatterWrap');\n        gEnter.append('g').attr('class', 'nv-regressionLinesWrap');\n        gEnter.append('g').attr('class', 'nv-distWrap');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } // Legend\n\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          var legendWidth = availableWidth;\n          legend.width(legendWidth);\n          wrap.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (!marginTop && legend.height() !== margin.top) {\n            margin.top = legend.height();\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n          }\n\n          wrap.select('.nv-legendWrap').attr('transform', 'translate(0' + ',' + -margin.top + ')');\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Main Chart Component(s)\n\n        scatter.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          d.color = d.color || color(d, i);\n          return d.color;\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        })).showLabels(showLabels);\n        wrap.select('.nv-scatterWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        })).call(scatter);\n        wrap.select('.nv-regressionLinesWrap').attr('clip-path', 'url(#nv-edge-clip-' + scatter.id() + ')');\n        var regWrap = wrap.select('.nv-regressionLinesWrap').selectAll('.nv-regLines').data(function (d) {\n          return d;\n        });\n        regWrap.enter().append('g').attr('class', 'nv-regLines');\n        var regLine = regWrap.selectAll('.nv-regLine').data(function (d) {\n          return [d];\n        });\n        regLine.enter().append('line').attr('class', 'nv-regLine').style('stroke-opacity', 0); // don't add lines unless we have slope and intercept to use\n\n        regLine.filter(function (d) {\n          return d.intercept && d.slope;\n        }).watchTransition(renderWatch, 'scatterPlusLineChart: regline').attr('x1', x.range()[0]).attr('x2', x.range()[1]).attr('y1', function (d, i) {\n          return y(x.domain()[0] * d.slope + d.intercept);\n        }).attr('y2', function (d, i) {\n          return y(x.domain()[1] * d.slope + d.intercept);\n        }).style('stroke', function (d, i, j) {\n          return color(d, j);\n        }).style('stroke-opacity', function (d, i) {\n          return d.disabled || typeof d.slope === 'undefined' || typeof d.intercept === 'undefined' ? 0 : 1;\n        }); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n\n          g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')').call(xAxis);\n        }\n\n        if (showYAxis) {\n          yAxis.scale(y)._ticks(nv.utils.calcTicksY(availableHeight / 36, data)).tickSize(-availableWidth, 0);\n\n          g.select('.nv-y.nv-axis').call(yAxis);\n        } // Setup Distribution\n\n\n        if (showDistX) {\n          distX.getData(scatter.x()).scale(x).width(availableWidth).color(data.map(function (d, i) {\n            return d.color || color(d, i);\n          }).filter(function (d, i) {\n            return !data[i].disabled;\n          }));\n          gEnter.select('.nv-distWrap').append('g').attr('class', 'nv-distributionX');\n          g.select('.nv-distributionX').attr('transform', 'translate(0,' + y.range()[0] + ')').datum(data.filter(function (d) {\n            return !d.disabled;\n          })).call(distX);\n        }\n\n        if (showDistY) {\n          distY.getData(scatter.y()).scale(y).width(availableHeight).color(data.map(function (d, i) {\n            return d.color || color(d, i);\n          }).filter(function (d, i) {\n            return !data[i].disabled;\n          }));\n          gEnter.select('.nv-distWrap').append('g').attr('class', 'nv-distributionY');\n          g.select('.nv-distributionY').attr('transform', 'translate(' + (rightAlignYAxis ? availableWidth : -distY.size()) + ',0)').datum(data.filter(function (d) {\n            return !d.disabled;\n          })).call(distY);\n        } //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined') {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          chart.update();\n        }); // mouseover needs availableHeight so we just keep scatter mouse events inside the chart block\n\n        scatter.dispatch.on('elementMouseout.tooltip', function (evt) {\n          tooltip.hidden(true);\n          container.select('.nv-chart-' + scatter.id() + ' .nv-series-' + evt.seriesIndex + ' .nv-distx-' + evt.pointIndex).attr('y1', 0);\n          container.select('.nv-chart-' + scatter.id() + ' .nv-series-' + evt.seriesIndex + ' .nv-disty-' + evt.pointIndex).attr('x2', distY.size());\n        });\n        scatter.dispatch.on('elementMouseover.tooltip', function (evt) {\n          container.select('.nv-series-' + evt.seriesIndex + ' .nv-distx-' + evt.pointIndex).attr('y1', evt.relativePos[1] - availableHeight);\n          container.select('.nv-series-' + evt.seriesIndex + ' .nv-disty-' + evt.pointIndex).attr('x2', evt.relativePos[0] + distX.size());\n          tooltip.data(evt).hidden(false);\n        }); //store old scales for use in transitions on update\n\n        x0 = x.copy();\n        y0 = y.copy();\n      });\n      renderWatch.renderEnd('scatter with line immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n    chart.legend = legend;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.distX = distX;\n    chart.distY = distY;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      container: {\n        get: function () {\n          return container;\n        },\n        set: function (_) {\n          container = _;\n        }\n      },\n      showDistX: {\n        get: function () {\n          return showDistX;\n        },\n        set: function (_) {\n          showDistX = _;\n        }\n      },\n      showDistY: {\n        get: function () {\n          return showDistY;\n        },\n        set: function (_) {\n          showDistY = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n        }\n      },\n      showLabels: {\n        get: function () {\n          return showLabels;\n        },\n        set: function (_) {\n          showLabels = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(_ ? 'right' : 'left');\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n          distX.color(color);\n          distY.color(color);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, scatter);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.sparkline = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 2,\n      right: 0,\n      bottom: 2,\n      left: 0\n    },\n        width = 400,\n        height = 32,\n        container = null,\n        animate = true,\n        x = d3.scale.linear(),\n        y = d3.scale.linear(),\n        getX = function (d) {\n      return d.x;\n    },\n        getY = function (d) {\n      return d.y;\n    },\n        color = nv.utils.getColor(['#000']),\n        xDomain,\n        yDomain,\n        xRange,\n        yRange,\n        showMinMaxPoints = true,\n        showCurrentPoint = true,\n        dispatch = d3.dispatch('renderEnd'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container); // Setup Scales\n\n        x.domain(xDomain || d3.extent(data, getX)).range(xRange || [0, availableWidth]);\n        y.domain(yDomain || d3.extent(data, getY)).range(yRange || [availableHeight, 0]); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-sparkline').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparkline');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n        var paths = wrap.selectAll('path').data(function (d) {\n          return [d];\n        });\n        paths.enter().append('path');\n        paths.exit().remove();\n        paths.style('stroke', function (d, i) {\n          return d.color || color(d, i);\n        }).attr('d', d3.svg.line().x(function (d, i) {\n          return x(getX(d, i));\n        }).y(function (d, i) {\n          return y(getY(d, i));\n        })); // TODO: Add CURRENT data point (Need Min, Mac, Current / Most recent)\n\n        var points = wrap.selectAll('circle.nv-point').data(function (data) {\n          var yValues = data.map(function (d, i) {\n            return getY(d, i);\n          });\n\n          function pointIndex(index) {\n            if (index != -1) {\n              var result = data[index];\n              result.pointIndex = index;\n              return result;\n            } else {\n              return null;\n            }\n          }\n\n          var maxPoint = pointIndex(yValues.lastIndexOf(y.domain()[1])),\n              minPoint = pointIndex(yValues.indexOf(y.domain()[0])),\n              currentPoint = pointIndex(yValues.length - 1);\n          return [showMinMaxPoints ? minPoint : null, showMinMaxPoints ? maxPoint : null, showCurrentPoint ? currentPoint : null].filter(function (d) {\n            return d != null;\n          });\n        });\n        points.enter().append('circle');\n        points.exit().remove();\n        points.attr('cx', function (d, i) {\n          return x(getX(d, d.pointIndex));\n        }).attr('cy', function (d, i) {\n          return y(getY(d, d.pointIndex));\n        }).attr('r', 2).attr('class', function (d, i) {\n          return getX(d, d.pointIndex) == x.domain()[1] ? 'nv-point nv-currentValue' : getY(d, d.pointIndex) == y.domain()[0] ? 'nv-point nv-minValue' : 'nv-point nv-maxValue';\n        });\n      });\n      renderWatch.renderEnd('sparkline immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      xDomain: {\n        get: function () {\n          return xDomain;\n        },\n        set: function (_) {\n          xDomain = _;\n        }\n      },\n      yDomain: {\n        get: function () {\n          return yDomain;\n        },\n        set: function (_) {\n          yDomain = _;\n        }\n      },\n      xRange: {\n        get: function () {\n          return xRange;\n        },\n        set: function (_) {\n          xRange = _;\n        }\n      },\n      yRange: {\n        get: function () {\n          return yRange;\n        },\n        set: function (_) {\n          yRange = _;\n        }\n      },\n      xScale: {\n        get: function () {\n          return x;\n        },\n        set: function (_) {\n          x = _;\n        }\n      },\n      yScale: {\n        get: function () {\n          return y;\n        },\n        set: function (_) {\n          y = _;\n        }\n      },\n      animate: {\n        get: function () {\n          return animate;\n        },\n        set: function (_) {\n          animate = _;\n        }\n      },\n      showMinMaxPoints: {\n        get: function () {\n          return showMinMaxPoints;\n        },\n        set: function (_) {\n          showMinMaxPoints = _;\n        }\n      },\n      showCurrentPoint: {\n        get: function () {\n          return showCurrentPoint;\n        },\n        set: function (_) {\n          showCurrentPoint = _;\n        }\n      },\n      //functor options\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = d3.functor(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = d3.functor(_);\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    chart.dispatch = dispatch;\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.sparklinePlus = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var sparkline = nv.models.sparkline();\n    var margin = {\n      top: 15,\n      right: 100,\n      bottom: 10,\n      left: 50\n    },\n        width = null,\n        height = null,\n        x,\n        y,\n        index = [],\n        paused = false,\n        xTickFormat = d3.format(',r'),\n        yTickFormat = d3.format(',.2f'),\n        showLastValue = true,\n        alignValue = true,\n        rightAlignValue = false,\n        noData = null,\n        dispatch = d3.dispatch('renderEnd'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(sparkline);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          container.call(chart);\n        };\n\n        chart.container = this; // Display No Data message if there's nothing to show.\n\n        if (!data || !data.length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        }\n\n        var currentValue = sparkline.y()(data[data.length - 1], data.length - 1); // Setup Scales\n\n        x = sparkline.xScale();\n        y = sparkline.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-sparklineplus').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparklineplus');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-sparklineWrap');\n        gEnter.append('g').attr('class', 'nv-valueWrap');\n        gEnter.append('g').attr('class', 'nv-hoverArea');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // Main Chart Component(s)\n\n        var sparklineWrap = g.select('.nv-sparklineWrap');\n        sparkline.width(availableWidth).height(availableHeight);\n        sparklineWrap.call(sparkline);\n\n        if (showLastValue) {\n          var valueWrap = g.select('.nv-valueWrap');\n          var value = valueWrap.selectAll('.nv-currentValue').data([currentValue]);\n          value.enter().append('text').attr('class', 'nv-currentValue').attr('dx', rightAlignValue ? -8 : 8).attr('dy', '.9em').style('text-anchor', rightAlignValue ? 'end' : 'start');\n          value.attr('x', availableWidth + (rightAlignValue ? margin.right : 0)).attr('y', alignValue ? function (d) {\n            return y(d);\n          } : 0).style('fill', sparkline.color()(data[data.length - 1], data.length - 1)).text(yTickFormat(currentValue));\n        }\n\n        gEnter.select('.nv-hoverArea').append('rect').on('mousemove', sparklineHover).on('click', function () {\n          paused = !paused;\n        }).on('mouseout', function () {\n          index = [];\n          updateValueLine();\n        });\n        g.select('.nv-hoverArea rect').attr('transform', function (d) {\n          return 'translate(' + -margin.left + ',' + -margin.top + ')';\n        }).attr('width', availableWidth + margin.left + margin.right).attr('height', availableHeight + margin.top); //index is currently global (within the chart), may or may not keep it that way\n\n        function updateValueLine() {\n          if (paused) return;\n          var hoverValue = g.selectAll('.nv-hoverValue').data(index);\n          var hoverEnter = hoverValue.enter().append('g').attr('class', 'nv-hoverValue').style('stroke-opacity', 0).style('fill-opacity', 0);\n          hoverValue.exit().transition().duration(250).style('stroke-opacity', 0).style('fill-opacity', 0).remove();\n          hoverValue.attr('transform', function (d) {\n            return 'translate(' + x(sparkline.x()(data[d], d)) + ',0)';\n          }).transition().duration(250).style('stroke-opacity', 1).style('fill-opacity', 1);\n          if (!index.length) return;\n          hoverEnter.append('line').attr('x1', 0).attr('y1', -margin.top).attr('x2', 0).attr('y2', availableHeight);\n          hoverEnter.append('text').attr('class', 'nv-xValue').attr('x', -6).attr('y', -margin.top).attr('text-anchor', 'end').attr('dy', '.9em');\n          g.select('.nv-hoverValue .nv-xValue').text(xTickFormat(sparkline.x()(data[index[0]], index[0])));\n          hoverEnter.append('text').attr('class', 'nv-yValue').attr('x', 6).attr('y', -margin.top).attr('text-anchor', 'start').attr('dy', '.9em');\n          g.select('.nv-hoverValue .nv-yValue').text(yTickFormat(sparkline.y()(data[index[0]], index[0])));\n        }\n\n        function sparklineHover() {\n          if (paused) return;\n          var pos = d3.mouse(this)[0] - margin.left;\n\n          function getClosestIndex(data, x) {\n            var distance = Math.abs(sparkline.x()(data[0], 0) - x);\n            var closestIndex = 0;\n\n            for (var i = 0; i < data.length; i++) {\n              if (Math.abs(sparkline.x()(data[i], i) - x) < distance) {\n                distance = Math.abs(sparkline.x()(data[i], i) - x);\n                closestIndex = i;\n              }\n            }\n\n            return closestIndex;\n          }\n\n          index = [getClosestIndex(data, Math.round(x.invert(pos)))];\n          updateValueLine();\n        }\n      });\n      renderWatch.renderEnd('sparklinePlus immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n\n    chart.dispatch = dispatch;\n    chart.sparkline = sparkline;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      xTickFormat: {\n        get: function () {\n          return xTickFormat;\n        },\n        set: function (_) {\n          xTickFormat = _;\n        }\n      },\n      yTickFormat: {\n        get: function () {\n          return yTickFormat;\n        },\n        set: function (_) {\n          yTickFormat = _;\n        }\n      },\n      showLastValue: {\n        get: function () {\n          return showLastValue;\n        },\n        set: function (_) {\n          showLastValue = _;\n        }\n      },\n      alignValue: {\n        get: function () {\n          return alignValue;\n        },\n        set: function (_) {\n          alignValue = _;\n        }\n      },\n      rightAlignValue: {\n        get: function () {\n          return rightAlignValue;\n        },\n        set: function (_) {\n          rightAlignValue = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, sparkline);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.stackedArea = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 960,\n        height = 500,\n        color = nv.utils.defaultColor() // a function that computes the color\n    ,\n        id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't selet one\n    ,\n        container = null,\n        getX = function (d) {\n      return d.x;\n    } // accessor to get the x value from a data point\n    ,\n        getY = function (d) {\n      return d.y;\n    } // accessor to get the y value from a data point\n    ,\n        defined = function (d, i) {\n      return !isNaN(getY(d, i)) && getY(d, i) !== null;\n    } // allows a line to be not continuous when it is not defined\n    ,\n        style = 'stack',\n        offset = 'zero',\n        order = 'default',\n        interpolate = 'linear' // controls the line interpolation\n    ,\n        clipEdge = false // if true, masks lines within x and y scale\n    ,\n        x //can be accessed via chart.xScale()\n    ,\n        y //can be accessed via chart.yScale()\n    ,\n        scatter = nv.models.scatter(),\n        duration = 250,\n        dispatch = d3.dispatch('areaClick', 'areaMouseover', 'areaMouseout', 'renderEnd', 'elementClick', 'elementMouseover', 'elementMouseout');\n\n    scatter.pointSize(2.2) // default size\n    .pointDomain([2.2, 2.2]) // all the same size by default\n    ;\n    /************************************\n     * offset:\n     *   'wiggle' (stream)\n     *   'zero' (stacked)\n     *   'expand' (normalize to 100%)\n     *   'silhouette' (simple centered)\n     *\n     * order:\n     *   'inside-out' (stream)\n     *   'default' (input order)\n     ************************************/\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(scatter);\n      selection.each(function (data) {\n        var availableWidth = width - margin.left - margin.right,\n            availableHeight = height - margin.top - margin.bottom;\n        container = d3.select(this);\n        nv.utils.initSVG(container); // Setup Scales\n\n        x = scatter.xScale();\n        y = scatter.yScale();\n        var dataRaw = data; // Injecting point index into each point because d3.layout.stack().out does not give index\n\n        data.forEach(function (aseries, i) {\n          aseries.seriesIndex = i;\n          aseries.values = aseries.values.map(function (d, j) {\n            d.index = j;\n            d.seriesIndex = i;\n            return d;\n          });\n        });\n        var dataFiltered = data.filter(function (series) {\n          return !series.disabled;\n        });\n        data = d3.layout.stack().order(order).offset(offset).values(function (d) {\n          return d.values;\n        }) //TODO: make values customizeable in EVERY model in this fashion\n        .x(getX).y(getY).out(function (d, y0, y) {\n          d.display = {\n            y: y,\n            y0: y0\n          };\n        })(dataFiltered); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-stackedarea').data([data]);\n        var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedarea');\n        var defsEnter = wrapEnter.append('defs');\n        var gEnter = wrapEnter.append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-areaWrap');\n        gEnter.append('g').attr('class', 'nv-scatterWrap');\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // If the user has not specified forceY, make sure 0 is included in the domain\n        // Otherwise, use user-specified values for forceY\n\n        if (scatter.forceY().length == 0) {\n          scatter.forceY().push(0);\n        }\n\n        scatter.width(availableWidth).height(availableHeight).x(getX).y(function (d) {\n          if (d.display !== undefined) {\n            return d.display.y + d.display.y0;\n          }\n        }).color(data.map(function (d, i) {\n          d.color = d.color || color(d, d.seriesIndex);\n          return d.color;\n        }));\n        var scatterWrap = g.select('.nv-scatterWrap').datum(data);\n        scatterWrap.call(scatter);\n        defsEnter.append('clipPath').attr('id', 'nv-edge-clip-' + id).append('rect');\n        wrap.select('#nv-edge-clip-' + id + ' rect').attr('width', availableWidth).attr('height', availableHeight);\n        g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n        var area = d3.svg.area().defined(defined).x(function (d, i) {\n          return x(getX(d, i));\n        }).y0(function (d) {\n          return y(d.display.y0);\n        }).y1(function (d) {\n          return y(d.display.y + d.display.y0);\n        }).interpolate(interpolate);\n        var zeroArea = d3.svg.area().defined(defined).x(function (d, i) {\n          return x(getX(d, i));\n        }).y0(function (d) {\n          return y(d.display.y0);\n        }).y1(function (d) {\n          return y(d.display.y0);\n        });\n        var path = g.select('.nv-areaWrap').selectAll('path.nv-area').data(function (d) {\n          return d;\n        });\n        path.enter().append('path').attr('class', function (d, i) {\n          return 'nv-area nv-area-' + i;\n        }).attr('d', function (d, i) {\n          return zeroArea(d.values, d.seriesIndex);\n        }).on('mouseover', function (d, i) {\n          d3.select(this).classed('hover', true);\n          dispatch.areaMouseover({\n            point: d,\n            series: d.key,\n            pos: [d3.event.pageX, d3.event.pageY],\n            seriesIndex: d.seriesIndex\n          });\n        }).on('mouseout', function (d, i) {\n          d3.select(this).classed('hover', false);\n          dispatch.areaMouseout({\n            point: d,\n            series: d.key,\n            pos: [d3.event.pageX, d3.event.pageY],\n            seriesIndex: d.seriesIndex\n          });\n        }).on('click', function (d, i) {\n          d3.select(this).classed('hover', false);\n          dispatch.areaClick({\n            point: d,\n            series: d.key,\n            pos: [d3.event.pageX, d3.event.pageY],\n            seriesIndex: d.seriesIndex\n          });\n        });\n        path.exit().remove();\n        path.style('fill', function (d, i) {\n          return d.color || color(d, d.seriesIndex);\n        }).style('stroke', function (d, i) {\n          return d.color || color(d, d.seriesIndex);\n        });\n        path.watchTransition(renderWatch, 'stackedArea path').attr('d', function (d, i) {\n          return area(d.values, i);\n        }); //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n        scatter.dispatch.on('elementMouseover.area', function (e) {\n          g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', true);\n        });\n        scatter.dispatch.on('elementMouseout.area', function (e) {\n          g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', false);\n        }); //Special offset functions\n\n        chart.d3_stackedOffset_stackPercent = function (stackData) {\n          var n = stackData.length,\n              //How many series\n          m = stackData[0].length,\n              //how many points per series\n          i,\n              j,\n              o,\n              y0 = [];\n\n          for (j = 0; j < m; ++j) {\n            //Looping through all points\n            for (i = 0, o = 0; i < dataRaw.length; i++) {\n              //looping through all series\n              o += getY(dataRaw[i].values[j]); //total y value of all series at a certian point in time.\n            }\n\n            if (o) for (i = 0; i < n; i++) {\n              //(total y value of all series at point in time i) != 0\n              stackData[i][j][1] /= o;\n            } else {\n              //(total y value of all series at point in time i) == 0\n              for (i = 0; i < n; i++) {\n                stackData[i][j][1] = 0;\n              }\n            }\n          }\n\n          for (j = 0; j < m; ++j) y0[j] = 0;\n\n          return y0;\n        };\n      });\n      renderWatch.renderEnd('stackedArea immediate');\n      return chart;\n    } //============================================================\n    // Global getters and setters\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n    scatter.dispatch.on('elementClick', function () {\n      dispatch.elementClick.apply(this, arguments);\n    });\n    scatter.dispatch.on('elementMouseover', function () {\n      dispatch.elementMouseover.apply(this, arguments);\n    });\n    scatter.dispatch.on('elementMouseout', function () {\n      dispatch.elementMouseout.apply(this, arguments);\n    });\n\n    chart.interpolate = function (_) {\n      if (!arguments.length) return interpolate;\n      interpolate = _;\n      return chart;\n    };\n\n    chart.duration = function (_) {\n      if (!arguments.length) return duration;\n      duration = _;\n      renderWatch.reset(duration);\n      scatter.duration(duration);\n      return chart;\n    };\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      defined: {\n        get: function () {\n          return defined;\n        },\n        set: function (_) {\n          defined = _;\n        }\n      },\n      clipEdge: {\n        get: function () {\n          return clipEdge;\n        },\n        set: function (_) {\n          clipEdge = _;\n        }\n      },\n      offset: {\n        get: function () {\n          return offset;\n        },\n        set: function (_) {\n          offset = _;\n        }\n      },\n      order: {\n        get: function () {\n          return order;\n        },\n        set: function (_) {\n          order = _;\n        }\n      },\n      interpolate: {\n        get: function () {\n          return interpolate;\n        },\n        set: function (_) {\n          interpolate = _;\n        }\n      },\n      // simple functor options\n      x: {\n        get: function () {\n          return getX;\n        },\n        set: function (_) {\n          getX = d3.functor(_);\n        }\n      },\n      y: {\n        get: function () {\n          return getY;\n        },\n        set: function (_) {\n          getY = d3.functor(_);\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      },\n      style: {\n        get: function () {\n          return style;\n        },\n        set: function (_) {\n          style = _;\n\n          switch (style) {\n            case 'stack':\n              chart.offset('zero');\n              chart.order('default');\n              break;\n\n            case 'stream':\n              chart.offset('wiggle');\n              chart.order('inside-out');\n              break;\n\n            case 'stream-center':\n              chart.offset('silhouette');\n              chart.order('inside-out');\n              break;\n\n            case 'expand':\n              chart.offset('expand');\n              chart.order('default');\n              break;\n\n            case 'stack_percent':\n              chart.offset(chart.d3_stackedOffset_stackPercent);\n              chart.order('default');\n              break;\n          }\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          scatter.duration(duration);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, scatter);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.stackedAreaChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var stacked = nv.models.stackedArea(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis(),\n        legend = nv.models.legend(),\n        controls = nv.models.legend(),\n        interactiveLayer = nv.interactiveGuideline(),\n        tooltip = nv.models.tooltip(),\n        focus = nv.models.focus(nv.models.stackedArea());\n    var margin = {\n      top: 10,\n      right: 25,\n      bottom: 50,\n      left: 60\n    },\n        marginTop = null,\n        width = null,\n        height = null,\n        color = nv.utils.defaultColor(),\n        showControls = true,\n        showLegend = true,\n        legendPosition = 'top',\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        focusEnable = false,\n        useInteractiveGuideline = false,\n        showTotalInTooltip = true,\n        totalLabel = 'TOTAL',\n        x //can be accessed via chart.xScale()\n    ,\n        y //can be accessed via chart.yScale()\n    ,\n        state = nv.utils.state(),\n        defaultState = null,\n        noData = null,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'),\n        controlWidth = 250,\n        controlOptions = ['Stacked', 'Stream', 'Expanded'],\n        controlLabels = {},\n        duration = 250;\n    state.style = stacked.style();\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n    tooltip.headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }).valueFormatter(function (d, i) {\n      return yAxis.tickFormat()(d, i);\n    });\n    interactiveLayer.tooltip.headerFormatter(function (d, i) {\n      return xAxis.tickFormat()(d, i);\n    }).valueFormatter(function (d, i) {\n      return d == null ? \"N/A\" : yAxis.tickFormat()(d, i);\n    });\n    var oldYTickFormat = null,\n        oldValueFormatter = null;\n    controls.updateState(false); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n    var style = stacked.style();\n\n    var stateGetter = function (data) {\n      return function () {\n        return {\n          active: data.map(function (d) {\n            return !d.disabled;\n          }),\n          style: stacked.style()\n        };\n      };\n    };\n\n    var stateSetter = function (data) {\n      return function (state) {\n        if (state.style !== undefined) style = state.style;\n        if (state.active !== undefined) data.forEach(function (series, i) {\n          series.disabled = !state.active[i];\n        });\n      };\n    };\n\n    var percentFormatter = d3.format('%');\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(stacked);\n      if (showXAxis) renderWatch.models(xAxis);\n      if (showYAxis) renderWatch.models(yAxis);\n      selection.each(function (data) {\n        var container = d3.select(this),\n            that = this;\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin),\n            availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n\n        chart.update = function () {\n          container.transition().duration(duration).call(chart);\n        };\n\n        chart.container = this;\n        state.setter(stateSetter(data), chart.update).getter(stateGetter(data)).update(); // DEPRECATED set state.disabled\n\n        state.disabled = data.map(function (d) {\n          return !!d.disabled;\n        });\n\n        if (!defaultState) {\n          var key;\n          defaultState = {};\n\n          for (key in state) {\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\n          }\n        } // Display No Data message if there's nothing to show.\n\n\n        if (!data || !data.length || !data.filter(function (d) {\n          return d.values.length;\n        }).length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        } // Setup Scales\n\n\n        x = stacked.xScale();\n        y = stacked.yScale(); // Setup containers and skeleton of chart\n\n        var wrap = container.selectAll('g.nv-wrap.nv-stackedAreaChart').data([data]);\n        var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedAreaChart').append('g');\n        var g = wrap.select('g');\n        gEnter.append('g').attr('class', 'nv-legendWrap');\n        gEnter.append('g').attr('class', 'nv-controlsWrap');\n        var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n        focusEnter.append('g').attr('class', 'nv-background').append('rect');\n        focusEnter.append('g').attr('class', 'nv-x nv-axis');\n        focusEnter.append('g').attr('class', 'nv-y nv-axis');\n        focusEnter.append('g').attr('class', 'nv-stackedWrap');\n        focusEnter.append('g').attr('class', 'nv-interactive'); // g.select(\"rect\").attr(\"width\",availableWidth).attr(\"height\",availableHeight);\n\n        var contextEnter = gEnter.append('g').attr('class', 'nv-focusWrap'); // Legend\n\n        if (!showLegend) {\n          g.select('.nv-legendWrap').selectAll('*').remove();\n        } else {\n          var legendWidth = showControls && legendPosition === 'top' ? availableWidth - controlWidth : availableWidth;\n          legend.width(legendWidth);\n          g.select('.nv-legendWrap').datum(data).call(legend);\n\n          if (legendPosition === 'bottom') {\n            // constant from axis.js, plus some margin for better layout\n            var xAxisHeight = (showXAxis ? 12 : 0) + 10;\n            margin.bottom = Math.max(legend.height() + xAxisHeight, margin.bottom);\n            availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n            var legendTop = availableHeight + xAxisHeight;\n            g.select('.nv-legendWrap').attr('transform', 'translate(0,' + legendTop + ')');\n          } else if (legendPosition === 'top') {\n            if (!marginTop && margin.top != legend.height()) {\n              margin.top = legend.height();\n              availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n            }\n\n            g.select('.nv-legendWrap').attr('transform', 'translate(' + (availableWidth - legendWidth) + ',' + -margin.top + ')');\n          }\n        } // Controls\n\n\n        if (!showControls) {\n          g.select('.nv-controlsWrap').selectAll('*').remove();\n        } else {\n          var controlsData = [{\n            key: controlLabels.stacked || 'Stacked',\n            metaKey: 'Stacked',\n            disabled: stacked.style() != 'stack',\n            style: 'stack'\n          }, {\n            key: controlLabels.stream || 'Stream',\n            metaKey: 'Stream',\n            disabled: stacked.style() != 'stream',\n            style: 'stream'\n          }, {\n            key: controlLabels.expanded || 'Expanded',\n            metaKey: 'Expanded',\n            disabled: stacked.style() != 'expand',\n            style: 'expand'\n          }, {\n            key: controlLabels.stack_percent || 'Stack %',\n            metaKey: 'Stack_Percent',\n            disabled: stacked.style() != 'stack_percent',\n            style: 'stack_percent'\n          }];\n          controlWidth = controlOptions.length / 3 * 260;\n          controlsData = controlsData.filter(function (d) {\n            return controlOptions.indexOf(d.metaKey) !== -1;\n          });\n          controls.width(controlWidth).color(['#444', '#444', '#444']);\n          g.select('.nv-controlsWrap').datum(controlsData).call(controls);\n          var requiredTop = Math.max(controls.height(), showLegend && legendPosition === 'top' ? legend.height() : 0);\n\n          if (margin.top != requiredTop) {\n            margin.top = requiredTop;\n            availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n          }\n\n          g.select('.nv-controlsWrap').attr('transform', 'translate(0,' + -margin.top + ')');\n        }\n\n        wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        if (rightAlignYAxis) {\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n        } //Set up interactive layer\n\n\n        if (useInteractiveGuideline) {\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({\n            left: margin.left,\n            top: margin.top\n          }).svgContainer(container).xScale(x);\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\n        }\n\n        g.select('.nv-focus .nv-background rect').attr('width', availableWidth).attr('height', availableHeight);\n        stacked.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\n          return d.color || color(d, i);\n        }).filter(function (d, i) {\n          return !data[i].disabled;\n        }));\n        var stackedWrap = g.select('.nv-focus .nv-stackedWrap').datum(data.filter(function (d) {\n          return !d.disabled;\n        })); // Setup Axes\n\n        if (showXAxis) {\n          xAxis.scale(x)._ticks(nv.utils.calcTicksX(availableWidth / 100, data)).tickSize(-availableHeight, 0);\n        }\n\n        if (showYAxis) {\n          var ticks;\n\n          if (stacked.offset() === 'wiggle') {\n            ticks = 0;\n          } else {\n            ticks = nv.utils.calcTicksY(availableHeight / 36, data);\n          }\n\n          yAxis.scale(y)._ticks(ticks).tickSize(-availableWidth, 0);\n        } //============================================================\n        // Update Axes\n        //============================================================\n\n\n        function updateXAxis() {\n          if (showXAxis) {\n            g.select('.nv-focus .nv-x.nv-axis').attr('transform', 'translate(0,' + availableHeight + ')').transition().duration(duration).call(xAxis);\n          }\n        }\n\n        function updateYAxis() {\n          if (showYAxis) {\n            if (stacked.style() === 'expand' || stacked.style() === 'stack_percent') {\n              var currentFormat = yAxis.tickFormat();\n              if (!oldYTickFormat || currentFormat !== percentFormatter) oldYTickFormat = currentFormat; //Forces the yAxis to use percentage in 'expand' mode.\n\n              yAxis.tickFormat(percentFormatter);\n            } else {\n              if (oldYTickFormat) {\n                yAxis.tickFormat(oldYTickFormat);\n                oldYTickFormat = null;\n              }\n            }\n\n            g.select('.nv-focus .nv-y.nv-axis').transition().duration(0).call(yAxis);\n          }\n        } //============================================================\n        // Update Focus\n        //============================================================\n\n\n        if (!focusEnable) {\n          stackedWrap.transition().call(stacked);\n          updateXAxis();\n          updateYAxis();\n        } else {\n          focus.width(availableWidth);\n          g.select('.nv-focusWrap').attr('transform', 'translate(0,' + (availableHeight + margin.bottom + focus.margin().top) + ')').datum(data.filter(function (d) {\n            return !d.disabled;\n          })).call(focus);\n          var extent = focus.brush.empty() ? focus.xDomain() : focus.brush.extent();\n\n          if (extent !== null) {\n            onBrush(extent);\n          }\n        } //============================================================\n        // Event Handling/Dispatching (in chart's scope)\n        //------------------------------------------------------------\n\n\n        stacked.dispatch.on('areaClick.toggle', function (e) {\n          if (data.filter(function (d) {\n            return !d.disabled;\n          }).length === 1) data.forEach(function (d) {\n            d.disabled = false;\n          });else data.forEach(function (d, i) {\n            d.disabled = i != e.seriesIndex;\n          });\n          state.disabled = data.map(function (d) {\n            return !!d.disabled;\n          });\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        legend.dispatch.on('stateChange', function (newState) {\n          for (var key in newState) state[key] = newState[key];\n\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        controls.dispatch.on('legendClick', function (d, i) {\n          if (!d.disabled) return;\n          controlsData = controlsData.map(function (s) {\n            s.disabled = true;\n            return s;\n          });\n          d.disabled = false;\n          stacked.style(d.style);\n          state.style = stacked.style();\n          dispatch.stateChange(state);\n          chart.update();\n        });\n        interactiveLayer.dispatch.on('elementMousemove', function (e) {\n          stacked.clearHighlights();\n          var singlePoint,\n              pointIndex,\n              pointXLocation,\n              allData = [],\n              valueSum = 0,\n              allNullValues = true,\n              atleastOnePoint = false;\n          data.filter(function (series, i) {\n            series.seriesIndex = i;\n            return !series.disabled;\n          }).forEach(function (series, i) {\n            pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n            var point = series.values[pointIndex];\n            var pointYValue = chart.y()(point, pointIndex);\n\n            if (pointYValue != null && pointYValue > 0) {\n              stacked.highlightPoint(i, pointIndex, true);\n              atleastOnePoint = true;\n            } // Draw at least one point if all values are zero.\n\n\n            if (i === data.length - 1 && !atleastOnePoint) {\n              stacked.highlightPoint(i, pointIndex, true);\n            }\n\n            if (typeof point === 'undefined') return;\n            if (typeof singlePoint === 'undefined') singlePoint = point;\n            if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point, pointIndex)); //If we are in 'expand' mode, use the stacked percent value instead of raw value.\n\n            var tooltipValue = stacked.style() == 'expand' ? point.display.y : chart.y()(point, pointIndex);\n            allData.push({\n              key: series.key,\n              value: tooltipValue,\n              color: color(series, series.seriesIndex),\n              point: point\n            });\n\n            if (showTotalInTooltip && stacked.style() != 'expand' && tooltipValue != null) {\n              valueSum += tooltipValue;\n              allNullValues = false;\n            }\n\n            ;\n          });\n          allData.reverse(); //Highlight the tooltip entry based on which stack the mouse is closest to.\n\n          if (allData.length > 2) {\n            var yValue = chart.yScale().invert(e.mouseY);\n            var yDistMax = Infinity,\n                indexToHighlight = null;\n            allData.forEach(function (series, i) {\n              //To handle situation where the stacked area chart is negative, we need to use absolute values\n              //when checking if the mouse Y value is within the stack area.\n              yValue = Math.abs(yValue);\n              var stackedY0 = Math.abs(series.point.display.y0);\n              var stackedY = Math.abs(series.point.display.y);\n\n              if (yValue >= stackedY0 && yValue <= stackedY + stackedY0) {\n                indexToHighlight = i;\n                return;\n              }\n            });\n            if (indexToHighlight != null) allData[indexToHighlight].highlight = true;\n          } //If we are not in 'expand' mode, add a 'Total' row to the tooltip.\n\n\n          if (showTotalInTooltip && stacked.style() != 'expand' && allData.length >= 2 && !allNullValues) {\n            allData.push({\n              key: totalLabel,\n              value: valueSum,\n              total: true\n            });\n          }\n\n          var xValue = chart.x()(singlePoint, pointIndex);\n          var valueFormatter = interactiveLayer.tooltip.valueFormatter(); // Keeps track of the tooltip valueFormatter if the chart changes to expanded view\n\n          if (stacked.style() === 'expand' || stacked.style() === 'stack_percent') {\n            if (!oldValueFormatter) {\n              oldValueFormatter = valueFormatter;\n            } //Forces the tooltip to use percentage in 'expand' mode.\n\n\n            valueFormatter = d3.format(\".1%\");\n          } else {\n            if (oldValueFormatter) {\n              valueFormatter = oldValueFormatter;\n              oldValueFormatter = null;\n            }\n          }\n\n          interactiveLayer.tooltip.valueFormatter(valueFormatter).data({\n            value: xValue,\n            series: allData\n          })();\n          interactiveLayer.renderGuideLine(pointXLocation);\n        });\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\n          stacked.clearHighlights();\n        });\n        /* Update `main' graph on brush update. */\n\n        focus.dispatch.on(\"onBrush\", function (extent) {\n          onBrush(extent);\n        }); // Update chart from a state object passed to event handler\n\n        dispatch.on('changeState', function (e) {\n          if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n            data.forEach(function (series, i) {\n              series.disabled = e.disabled[i];\n            });\n            state.disabled = e.disabled;\n          }\n\n          if (typeof e.style !== 'undefined') {\n            stacked.style(e.style);\n            style = e.style;\n          }\n\n          chart.update();\n        }); //============================================================\n        // Functions\n        //------------------------------------------------------------\n\n        function onBrush(extent) {\n          // Update Main (Focus)\n          var stackedWrap = g.select('.nv-focus .nv-stackedWrap').datum(data.filter(function (d) {\n            return !d.disabled;\n          }).map(function (d, i) {\n            return {\n              key: d.key,\n              area: d.area,\n              classed: d.classed,\n              values: d.values.filter(function (d, i) {\n                return stacked.x()(d, i) >= extent[0] && stacked.x()(d, i) <= extent[1];\n              }),\n              disableTooltip: d.disableTooltip\n            };\n          }));\n          stackedWrap.transition().duration(duration).call(stacked); // Update Main (Focus) Axes\n\n          updateXAxis();\n          updateYAxis();\n        }\n      });\n      renderWatch.renderEnd('stacked Area chart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    stacked.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt.point['x'] = stacked.x()(evt.point);\n      evt.point['y'] = stacked.y()(evt.point);\n      tooltip.data(evt).hidden(false);\n    });\n    stacked.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.stacked = stacked;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.x2Axis = focus.xAxis;\n    chart.yAxis = yAxis;\n    chart.y2Axis = focus.yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.tooltip = tooltip;\n    chart.focus = focus;\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      showLegend: {\n        get: function () {\n          return showLegend;\n        },\n        set: function (_) {\n          showLegend = _;\n        }\n      },\n      legendPosition: {\n        get: function () {\n          return legendPosition;\n        },\n        set: function (_) {\n          legendPosition = _;\n        }\n      },\n      showXAxis: {\n        get: function () {\n          return showXAxis;\n        },\n        set: function (_) {\n          showXAxis = _;\n        }\n      },\n      showYAxis: {\n        get: function () {\n          return showYAxis;\n        },\n        set: function (_) {\n          showYAxis = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      showControls: {\n        get: function () {\n          return showControls;\n        },\n        set: function (_) {\n          showControls = _;\n        }\n      },\n      controlLabels: {\n        get: function () {\n          return controlLabels;\n        },\n        set: function (_) {\n          controlLabels = _;\n        }\n      },\n      controlOptions: {\n        get: function () {\n          return controlOptions;\n        },\n        set: function (_) {\n          controlOptions = _;\n        }\n      },\n      showTotalInTooltip: {\n        get: function () {\n          return showTotalInTooltip;\n        },\n        set: function (_) {\n          showTotalInTooltip = _;\n        }\n      },\n      totalLabel: {\n        get: function () {\n          return totalLabel;\n        },\n        set: function (_) {\n          totalLabel = _;\n        }\n      },\n      focusEnable: {\n        get: function () {\n          return focusEnable;\n        },\n        set: function (_) {\n          focusEnable = _;\n        }\n      },\n      focusHeight: {\n        get: function () {\n          return focus.height();\n        },\n        set: function (_) {\n          focus.height(_);\n        }\n      },\n      brushExtent: {\n        get: function () {\n          return focus.brushExtent();\n        },\n        set: function (_) {\n          focus.brushExtent(_);\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          if (_.top !== undefined) {\n            margin.top = _.top;\n            marginTop = _.top;\n          }\n\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n        }\n      },\n      focusMargin: {\n        get: function () {\n          return focus.margin;\n        },\n        set: function (_) {\n          focus.margin.top = _.top !== undefined ? _.top : focus.margin.top;\n          focus.margin.right = _.right !== undefined ? _.right : focus.margin.right;\n          focus.margin.bottom = _.bottom !== undefined ? _.bottom : focus.margin.bottom;\n          focus.margin.left = _.left !== undefined ? _.left : focus.margin.left;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          stacked.duration(duration);\n          xAxis.duration(duration);\n          yAxis.duration(duration);\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n          legend.color(color);\n          stacked.color(color);\n          focus.color(color);\n        }\n      },\n      x: {\n        get: function () {\n          return stacked.x();\n        },\n        set: function (_) {\n          stacked.x(_);\n          focus.x(_);\n        }\n      },\n      y: {\n        get: function () {\n          return stacked.y();\n        },\n        set: function (_) {\n          stacked.y(_);\n          focus.y(_);\n        }\n      },\n      rightAlignYAxis: {\n        get: function () {\n          return rightAlignYAxis;\n        },\n        set: function (_) {\n          rightAlignYAxis = _;\n          yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n        }\n      },\n      useInteractiveGuideline: {\n        get: function () {\n          return useInteractiveGuideline;\n        },\n        set: function (_) {\n          useInteractiveGuideline = !!_;\n          chart.interactive(!_);\n          chart.useVoronoi(!_);\n          stacked.scatter.interactive(!_);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, stacked);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.stackedAreaWithFocusChart = function () {\n    return nv.models.stackedAreaChart().margin({\n      bottom: 30\n    }).focusEnable(true);\n  }; // based on http://bl.ocks.org/kerryrodden/477c1bfb081b783f80ad\n\n\n  nv.models.sunburst = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n        width = 600,\n        height = 600,\n        mode = \"count\",\n        modes = {\n      count: function (d) {\n        return 1;\n      },\n      value: function (d) {\n        return d.value || d.size;\n      },\n      size: function (d) {\n        return d.value || d.size;\n      }\n    },\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n    ,\n        container = null,\n        color = nv.utils.defaultColor(),\n        showLabels = false,\n        labelFormat = function (d) {\n      if (mode === 'count') {\n        return d.name + ' #' + d.value;\n      } else {\n        return d.name + ' ' + (d.value || d.size);\n      }\n    },\n        labelThreshold = 0.02,\n        sort = function (d1, d2) {\n      return d1.name > d2.name;\n    },\n        key = function (d, i) {\n      if (d.parent !== undefined) {\n        return d.name + '-' + d.parent.name + '-' + i;\n      } else {\n        return d.name;\n      }\n    },\n        groupColorByParent = true,\n        duration = 500,\n        dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMousemove', 'elementMouseover', 'elementMouseout', 'renderEnd'); //============================================================\n    // aux functions and setup\n    //------------------------------------------------------------\n\n\n    var x = d3.scale.linear().range([0, 2 * Math.PI]);\n    var y = d3.scale.sqrt();\n    var partition = d3.layout.partition().sort(sort);\n    var node, availableWidth, availableHeight, radius;\n    var prevPositions = {};\n    var arc = d3.svg.arc().startAngle(function (d) {\n      return Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n    }).endAngle(function (d) {\n      return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n    }).innerRadius(function (d) {\n      return Math.max(0, y(d.y));\n    }).outerRadius(function (d) {\n      return Math.max(0, y(d.y + d.dy));\n    });\n\n    function rotationToAvoidUpsideDown(d) {\n      var centerAngle = computeCenterAngle(d);\n\n      if (centerAngle > 90) {\n        return 180;\n      } else {\n        return 0;\n      }\n    }\n\n    function computeCenterAngle(d) {\n      var startAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n      var endAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n      var centerAngle = (startAngle + endAngle) / 2 * (180 / Math.PI) - 90;\n      return centerAngle;\n    }\n\n    function computeNodePercentage(d) {\n      var startAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n      var endAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n      return (endAngle - startAngle) / (2 * Math.PI);\n    }\n\n    function labelThresholdMatched(d) {\n      var startAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n      var endAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n      var size = endAngle - startAngle;\n      return size > labelThreshold;\n    } // When zooming: interpolate the scales.\n\n\n    function arcTweenZoom(e, i) {\n      var xd = d3.interpolate(x.domain(), [node.x, node.x + node.dx]),\n          yd = d3.interpolate(y.domain(), [node.y, 1]),\n          yr = d3.interpolate(y.range(), [node.y ? 20 : 0, radius]);\n\n      if (i === 0) {\n        return function () {\n          return arc(e);\n        };\n      } else {\n        return function (t) {\n          x.domain(xd(t));\n          y.domain(yd(t)).range(yr(t));\n          return arc(e);\n        };\n      }\n\n      ;\n    }\n\n    function arcTweenUpdate(d) {\n      var ipo = d3.interpolate({\n        x: d.x0,\n        dx: d.dx0,\n        y: d.y0,\n        dy: d.dy0\n      }, d);\n      return function (t) {\n        var b = ipo(t);\n        d.x0 = b.x;\n        d.dx0 = b.dx;\n        d.y0 = b.y;\n        d.dy0 = b.dy;\n        return arc(b);\n      };\n    }\n\n    function updatePrevPosition(node) {\n      var k = key(node);\n      if (!prevPositions[k]) prevPositions[k] = {};\n      var pP = prevPositions[k];\n      pP.dx = node.dx;\n      pP.x = node.x;\n      pP.dy = node.dy;\n      pP.y = node.y;\n    }\n\n    function storeRetrievePrevPositions(nodes) {\n      nodes.forEach(function (n) {\n        var k = key(n);\n        var pP = prevPositions[k]; //console.log(k,n,pP);\n\n        if (pP) {\n          n.dx0 = pP.dx;\n          n.x0 = pP.x;\n          n.dy0 = pP.dy;\n          n.y0 = pP.y;\n        } else {\n          n.dx0 = n.dx;\n          n.x0 = n.x;\n          n.dy0 = n.dy;\n          n.y0 = n.y;\n        }\n\n        updatePrevPosition(n);\n      });\n    }\n\n    function zoomClick(d) {\n      var labels = container.selectAll('text');\n      var path = container.selectAll('path'); // fade out all text elements\n\n      labels.transition().attr(\"opacity\", 0); // to allow reference to the new center node\n\n      node = d;\n      path.transition().duration(duration).attrTween(\"d\", arcTweenZoom).each('end', function (e) {\n        // partially taken from here: http://bl.ocks.org/metmajer/5480307\n        // check if the animated element's data e lies within the visible angle span given in d\n        if (e.x >= d.x && e.x < d.x + d.dx) {\n          if (e.depth >= d.depth) {\n            // get a selection of the associated text element\n            var parentNode = d3.select(this.parentNode);\n            var arcText = parentNode.select('text'); // fade in the text element and recalculate positions\n\n            arcText.transition().duration(duration).text(function (e) {\n              return labelFormat(e);\n            }).attr(\"opacity\", function (d) {\n              if (labelThresholdMatched(d)) {\n                return 1;\n              } else {\n                return 0;\n              }\n            }).attr(\"transform\", function () {\n              var width = this.getBBox().width;\n              if (e.depth === 0) return \"translate(\" + width / 2 * -1 + \",0)\";else if (e.depth === d.depth) {\n                return \"translate(\" + (y(e.y) + 5) + \",0)\";\n              } else {\n                var centerAngle = computeCenterAngle(e);\n                var rotation = rotationToAvoidUpsideDown(e);\n\n                if (rotation === 0) {\n                  return 'rotate(' + centerAngle + ')translate(' + (y(e.y) + 5) + ',0)';\n                } else {\n                  return 'rotate(' + centerAngle + ')translate(' + (y(e.y) + width + 5) + ',0)rotate(' + rotation + ')';\n                }\n              }\n            });\n          }\n        }\n      });\n    } //============================================================\n    // chart function\n    //------------------------------------------------------------\n\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n      renderWatch.reset();\n      selection.each(function (data) {\n        container = d3.select(this);\n        availableWidth = nv.utils.availableWidth(width, container, margin);\n        availableHeight = nv.utils.availableHeight(height, container, margin);\n        radius = Math.min(availableWidth, availableHeight) / 2;\n        y.range([0, radius]); // Setup containers and skeleton of chart\n\n        var wrap = container.select('g.nvd3.nv-wrap.nv-sunburst');\n\n        if (!wrap[0][0]) {\n          wrap = container.append('g').attr('class', 'nvd3 nv-wrap nv-sunburst nv-chart-' + id).attr('transform', 'translate(' + (availableWidth / 2 + margin.left + margin.right) + ',' + (availableHeight / 2 + margin.top + margin.bottom) + ')');\n        } else {\n          wrap.attr('transform', 'translate(' + (availableWidth / 2 + margin.left + margin.right) + ',' + (availableHeight / 2 + margin.top + margin.bottom) + ')');\n        }\n\n        container.on('click', function (d, i) {\n          dispatch.chartClick({\n            data: d,\n            index: i,\n            pos: d3.event,\n            id: id\n          });\n        });\n        partition.value(modes[mode] || modes[\"count\"]); //reverse the drawing order so that the labels of inner\n        //arcs are drawn on top of the outer arcs.\n\n        var nodes = partition.nodes(data[0]).reverse();\n        storeRetrievePrevPositions(nodes);\n        var cG = wrap.selectAll('.arc-container').data(nodes, key); //handle new datapoints\n\n        var cGE = cG.enter().append(\"g\").attr(\"class\", 'arc-container');\n        cGE.append(\"path\").attr(\"d\", arc).style(\"fill\", function (d) {\n          if (d.color) {\n            return d.color;\n          } else if (groupColorByParent) {\n            return color((d.children ? d : d.parent).name);\n          } else {\n            return color(d.name);\n          }\n        }).style(\"stroke\", \"#FFF\").on(\"click\", function (d, i) {\n          zoomClick(d);\n          dispatch.elementClick({\n            data: d,\n            index: i\n          });\n        }).on('mouseover', function (d, i) {\n          d3.select(this).classed('hover', true).style('opacity', 0.8);\n          dispatch.elementMouseover({\n            data: d,\n            color: d3.select(this).style(\"fill\"),\n            percent: computeNodePercentage(d)\n          });\n        }).on('mouseout', function (d, i) {\n          d3.select(this).classed('hover', false).style('opacity', 1);\n          dispatch.elementMouseout({\n            data: d\n          });\n        }).on('mousemove', function (d, i) {\n          dispatch.elementMousemove({\n            data: d\n          });\n        }); ///Iterating via each and selecting based on the this\n        ///makes it work ... a cG.selectAll('path') doesn't.\n        ///Without iteration the data (in the element) didn't update.\n\n        cG.each(function (d) {\n          d3.select(this).select('path').transition().duration(duration).attrTween('d', arcTweenUpdate);\n        });\n\n        if (showLabels) {\n          //remove labels first and add them back\n          cG.selectAll('text').remove(); //this way labels are on top of newly added arcs\n\n          cG.append('text').text(function (e) {\n            return labelFormat(e);\n          }).transition().duration(duration).attr(\"opacity\", function (d) {\n            if (labelThresholdMatched(d)) {\n              return 1;\n            } else {\n              return 0;\n            }\n          }).attr(\"transform\", function (d) {\n            var width = this.getBBox().width;\n\n            if (d.depth === 0) {\n              return \"rotate(0)translate(\" + width / 2 * -1 + \",0)\";\n            } else {\n              var centerAngle = computeCenterAngle(d);\n              var rotation = rotationToAvoidUpsideDown(d);\n\n              if (rotation === 0) {\n                return 'rotate(' + centerAngle + ')translate(' + (y(d.y) + 5) + ',0)';\n              } else {\n                return 'rotate(' + centerAngle + ')translate(' + (y(d.y) + width + 5) + ',0)rotate(' + rotation + ')';\n              }\n            }\n          });\n        } //zoom out to the center when the data is updated.\n\n\n        zoomClick(nodes[nodes.length - 1]); //remove unmatched elements ...\n\n        cG.exit().transition().duration(duration).attr('opacity', 0).each('end', function (d) {\n          var k = key(d);\n          prevPositions[k] = undefined;\n        }).remove();\n      });\n      renderWatch.renderEnd('sunburst immediate');\n      return chart;\n    } //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      width: {\n        get: function () {\n          return width;\n        },\n        set: function (_) {\n          width = _;\n        }\n      },\n      height: {\n        get: function () {\n          return height;\n        },\n        set: function (_) {\n          height = _;\n        }\n      },\n      mode: {\n        get: function () {\n          return mode;\n        },\n        set: function (_) {\n          mode = _;\n        }\n      },\n      id: {\n        get: function () {\n          return id;\n        },\n        set: function (_) {\n          id = _;\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n        }\n      },\n      groupColorByParent: {\n        get: function () {\n          return groupColorByParent;\n        },\n        set: function (_) {\n          groupColorByParent = !!_;\n        }\n      },\n      showLabels: {\n        get: function () {\n          return showLabels;\n        },\n        set: function (_) {\n          showLabels = !!_;\n        }\n      },\n      labelFormat: {\n        get: function () {\n          return labelFormat;\n        },\n        set: function (_) {\n          labelFormat = _;\n        }\n      },\n      labelThreshold: {\n        get: function () {\n          return labelThreshold;\n        },\n        set: function (_) {\n          labelThreshold = _;\n        }\n      },\n      sort: {\n        get: function () {\n          return sort;\n        },\n        set: function (_) {\n          sort = _;\n        }\n      },\n      key: {\n        get: function () {\n          return key;\n        },\n        set: function (_) {\n          key = _;\n        }\n      },\n      // options that require extra logic in the setter\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top != undefined ? _.top : margin.top;\n          margin.right = _.right != undefined ? _.right : margin.right;\n          margin.bottom = _.bottom != undefined ? _.bottom : margin.bottom;\n          margin.left = _.left != undefined ? _.left : margin.left;\n        }\n      },\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = nv.utils.getColor(_);\n        }\n      }\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.models.sunburstChart = function () {\n    \"use strict\"; //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var sunburst = nv.models.sunburst();\n    var tooltip = nv.models.tooltip();\n    var margin = {\n      top: 30,\n      right: 20,\n      bottom: 20,\n      left: 20\n    },\n        width = null,\n        height = null,\n        color = nv.utils.defaultColor(),\n        showTooltipPercent = false,\n        id = Math.round(Math.random() * 100000),\n        defaultState = null,\n        noData = null,\n        duration = 250,\n        dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd'); //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n    tooltip.duration(0).headerEnabled(false).valueFormatter(function (d) {\n      return d;\n    }); //============================================================\n    // Chart function\n    //------------------------------------------------------------\n\n    function chart(selection) {\n      renderWatch.reset();\n      renderWatch.models(sunburst);\n      selection.each(function (data) {\n        var container = d3.select(this);\n        nv.utils.initSVG(container);\n        var availableWidth = nv.utils.availableWidth(width, container, margin);\n        var availableHeight = nv.utils.availableHeight(height, container, margin);\n\n        chart.update = function () {\n          if (duration === 0) {\n            container.call(chart);\n          } else {\n            container.transition().duration(duration).call(chart);\n          }\n        };\n\n        chart.container = container; // Display No Data message if there's nothing to show.\n\n        if (!data || !data.length) {\n          nv.utils.noData(chart, container);\n          return chart;\n        } else {\n          container.selectAll('.nv-noData').remove();\n        }\n\n        sunburst.width(availableWidth).height(availableHeight).margin(margin);\n        container.call(sunburst);\n      });\n      renderWatch.renderEnd('sunburstChart immediate');\n      return chart;\n    } //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n\n    sunburst.dispatch.on('elementMouseover.tooltip', function (evt) {\n      evt.series = {\n        key: evt.data.name,\n        value: evt.data.value || evt.data.size,\n        color: evt.color,\n        percent: evt.percent\n      };\n\n      if (!showTooltipPercent) {\n        delete evt.percent;\n        delete evt.series.percent;\n      }\n\n      tooltip.data(evt).hidden(false);\n    });\n    sunburst.dispatch.on('elementMouseout.tooltip', function (evt) {\n      tooltip.hidden(true);\n    });\n    sunburst.dispatch.on('elementMousemove.tooltip', function (evt) {\n      tooltip();\n    }); //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    // expose chart's sub-components\n\n    chart.dispatch = dispatch;\n    chart.sunburst = sunburst;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart); // use Object get/set functionality to map between vars and chart functions\n\n    chart._options = Object.create({}, {\n      // simple options, just get/set the necessary values\n      noData: {\n        get: function () {\n          return noData;\n        },\n        set: function (_) {\n          noData = _;\n        }\n      },\n      defaultState: {\n        get: function () {\n          return defaultState;\n        },\n        set: function (_) {\n          defaultState = _;\n        }\n      },\n      showTooltipPercent: {\n        get: function () {\n          return showTooltipPercent;\n        },\n        set: function (_) {\n          showTooltipPercent = _;\n        }\n      },\n      // options that require extra logic in the setter\n      color: {\n        get: function () {\n          return color;\n        },\n        set: function (_) {\n          color = _;\n          sunburst.color(color);\n        }\n      },\n      duration: {\n        get: function () {\n          return duration;\n        },\n        set: function (_) {\n          duration = _;\n          renderWatch.reset(duration);\n          sunburst.duration(duration);\n        }\n      },\n      margin: {\n        get: function () {\n          return margin;\n        },\n        set: function (_) {\n          margin.top = _.top !== undefined ? _.top : margin.top;\n          margin.right = _.right !== undefined ? _.right : margin.right;\n          margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n          margin.left = _.left !== undefined ? _.left : margin.left;\n          sunburst.margin(margin);\n        }\n      }\n    });\n    nv.utils.inheritOptions(chart, sunburst);\n    nv.utils.initOptions(chart);\n    return chart;\n  };\n\n  nv.version = \"1.8.6\";\n})();","map":{"version":3,"sources":["/Users/mazigh/Desktop/iots/IoTs-frontend/node_modules/nvd3/build/nv.d3.js"],"names":["nv","dev","tooltip","utils","models","charts","logs","dom","module","exports","d3","require","dispatch","Function","prototype","bind","oThis","TypeError","aArgs","Array","slice","call","arguments","fToBind","fNOP","fBound","apply","concat","on","e","startTime","Date","endTime","totalTime","log","window","console","length","deprecated","name","info","warn","render","step","active","render_start","renderLoop","chart","graph","i","queue","generate","callback","splice","setTimeout","render_end","addGraph","obj","push","write","fastdom","undefined","mutate","read","measure","interactiveGuideline","margin","left","top","width","height","xScale","scale","linear","showGuideLine","svgContainer","isMSIE","ActiveXObject","duration","hideDelay","hidden","layer","selection","each","data","container","select","availableWidth","availableHeight","wrap","selectAll","wrapEnter","enter","append","attr","mouseHandler","mouseX","event","clientX","getBoundingClientRect","mouseY","clientY","subtractMargin","mouseOutAnyReason","offsetX","offsetY","target","tagName","className","baseVal","match","type","relatedTarget","ownerSVGElement","nvPointerEventsClass","elementMouseout","renderGuideLine","scaleIsOrdinal","rangeBands","pointXValue","elementIndex","bisect","range","rangeBand","domain","invert","elementMousemove","elementDblclick","elementClick","elementMouseDown","elementMouseUp","guideLine","x","line","NaNtoZero","String","d","exit","remove","_","interactiveBisect","values","searchVal","xAccessor","_xAccessor","_cmp","v","bisector","index","max","currentValue","nextIndex","min","nextValue","Math","abs","nearestValueIndex","threshold","yDistMax","Infinity","indexToHighlight","forEach","delta","id","floor","random","gravity","distance","snapDistance","classes","lastPosition","enabled","headerEnabled","valueFormatter","p","headerFormatter","keyFormatter","contentGenerator","elem","table","document","createElement","theadEnter","classed","html","value","tbodyEnter","trowEnter","series","highlight","style","color","total","key","filter","percent","format","opacityScale","opacity","node","outerHTML","footer","position","pos","getComputedStyle","body","transform","client","dataSeriesExists","isArray","isObject","calcGravityOffset","offsetHeight","offsetWidth","clientWidth","documentElement","clientHeight","tmp","positionTooltip","gravityOffset","interrupt","transition","delay","old_translate","new_translate","round","translateInterpolator","interpolateString","is_hidden","styleTween","initTooltip","nvtooltip","newContent","innerHTML","options","optionsFunc","_options","Object","create","get","set","chartContainer","fixedTop","offset","point","y","initOptions","windowSize","size","innerWidth","innerHeight","compatMode","a","isFunction","isDate","toString","isNumber","isNaN","windowResize","handler","addEventListener","clear","removeEventListener","getColor","defaultColor","color_scale","ordinal","category20","customTheme","dictionary","getKey","defaultColors","defIndex","pjax","links","content","load","href","fragment","parentNode","replaceChild","history","pushState","textContent","preventDefault","state","calcApproxTextWidth","svgTextElem","text","fontSize","parseInt","replace","textLength","n","watchTransition","renderWatch","args","_duration","renderStack","self","model","__rendered","m","arg","renderEnd","indexOf","reset","pop","every","deepExtend","dst","sources","source","srcObj","_self","_setState","_getState","init","changed","getter","fn","setter","update","_set","settings","JSON","stringify","change","map","calcTicksX","numTicks","numValues","stream_len","calcTicksY","initOption","_calls","_overrides","ops","getOwnPropertyNames","calls","inheritOptionsD3","d3_source","oplist","_d3options","item","ar","unshift","rebind","arrayUnique","sort","symbolMap","symbol","t","s","svg","symbolTypes","functor","inheritOptions","inherited","_inherited","d3ops","initSVG","sanitizeHeight","sanitizeWidth","bottom","right","noData","opt","noDataText","wrapTicks","words","split","reverse","word","lineNumber","lineHeight","dy","parseFloat","tspan","join","getComputedTextLength","arrayEquals","array1","array2","l","pointIsInArc","pt","ptData","d3Arc","r1","innerRadius","r2","outerRadius","theta1","startAngle","theta2","endAngle","dist","angle","atan2","PI","axis","axisLabelText","showMaxMin","rotateLabels","rotateYLabel","staggerLabels","isOrdinal","ticks","axisLabelDistance","tickFormatMaxMin","orient","tickFormat","scale0","gEnter","g","fmt","axisLabel","xLabelMargin","axisMaxMin","w","tickPadding","formatter","maxTextWidth","textHeight","xTicks","rotateLabelsRule","box","sin","maxMinRange","err","copy","boxPlot","yScale","getX","label","getQ1","Q1","getQ2","Q2","getQ3","Q3","getWl","whisker_low","getWh","whisker_high","getOlItems","outliers","getOlValue","j","getOlLabel","getOlColor","xDomain","xRange","yDomain","yRange","maxBoxWidth","xScale0","yScale0","yData","yMin","yMax","q1","q3","wl","wh","olItems","boxplots","boxEnter","hover","f","box_width","box_left","box_right","endpoint","elementMouseover","q2","itemColor","outlierValue","outlierLabel","outlierColor","boxPlotChart","boxplot","xAxis","yAxis","showXAxis","showYAxis","rightAlignYAxis","that","beforeUpdate","clamp","defsEnter","barsWrap","datum","disabled","tickSize","evt","tooltipContent","bullet","ranges","markers","markerLines","measures","rangeLabels","markerLabels","markerLineLabels","measureLabels","forceX","defaultRangeLabels","legacyRangeClassNames","sortLabels","labels","lz","b","iA","iB","descending","rangez","markerz","markerLinez","measurez","rangeLabelz","markerLabelz","markerLineLabelz","measureLabelz","x1","extent","merge","x0","__chart__","rangeMin","rangeMax","rangeAvg","il","rangeClassNames","w0","w1","xp0","xp1","h3","markerData","marker","markerLinesData","bulletChart","title","subtitle","bulletWrap","tick","tickEnter","tickUpdate","timer","flush","candlestickBar","getY","getOpen","open","getClose","close","getHigh","high","getLow","low","forceY","padData","clipEdge","interactive","barWidth","chartClick","tickGroups","lines","rects","highlightPoint","pointIndex","isHoverOver","clearHighlights","cumulativeLineChart","legend","controls","interactiveLayer","marginTop","showLegend","showControls","useInteractiveGuideline","rescaleY","defaultState","average","transitionDuration","noErrorCheck","updateState","dx","currentYDomain","stateGetter","stateSetter","indexDrag","behavior","drag","dragStart","dragMove","dragEnd","updateZero","stateChange","indexify","getCurrentYDomain","interactivePointerEvents","controlsData","rightAlign","tempDisabled","display","linesWrap","seriesIndex","avgLineData","avgLines","getAvgLineY","yVal","indexLine","_ticks","oldDuration","mouse","newState","singlePoint","pointXLocation","allData","yValue","domainExtent","xValue","indexifyYGetter","idx","indexValue","seriesDomains","useVoronoi","discreteBar","showValues","valueFormat","rectClass","y0","seriesData","groups","bars","barsEnter","element","stopPropagation","elementDblClick","discreteBarChart","discretebar","wrapLabels","distribution","getData","availableLength","naxis","distWrap","focus","brush","brushExtent","syncBrushing","pointActive","contentWrap","onBrush","empty","brushBG","brushBGenter","gBrush","resizePath","updateBrushBG","leftWidth","rightWidth","shouldDispatch","interpolate","xTickFormat","yTickFormat","forceDirectedGraph","linkStrength","friction","linkDist","charge","theta","alpha","radius","nodeExtras","nodes","linkExtras","nodeFieldSet","Set","keys","add","force","layout","linkDistance","start","link","sqrt","py","px","nodeColor","field","furiousLegend","maxKeyLength","align","padding","radioButtonMode","expanded","vers","disengaged","seriesEnter","seriesShape","property","seriesCheckbox","setTextColor","seriesText","legendMouseover","legendMouseout","legendClick","userDisabled","engaged","legendDblclick","versPadding","seriesWidths","legendText","trimmedKey","substring","nodeTextLength","Error","seriesPerRow","legendWidth","columnWidths","k","reduce","prev","cur","array","xPositions","curX","ceil","ypos","newxpos","maxwidth","xpos","setBGColor","historicalBar","rval","historicalBarChart","bar_model","tooltipHide","ohlcBarChart","ohlcBar","candlestickBarChart","enableDoubleClick","insert","seriesBG","setBGOpacity","scatter","strokeWidth","defined","isArea","area","pointSize","pointDomain","scatterWrap","fillOpacity","areaPaths","y1","linePaths","lineChart","legendPosition","focusEnable","focusEnter","contextEnter","updateXAxis","updateYAxis","disableTooltip","currentValues","pointYValue","defaultValueFormatter","yPos","focusLinesWrap","x2Axis","y2Axis","focusHeight","focusShowAxisX","focusShowAxisY","focusMargin","lineWithFocusChart","linePlusBarChart","lines2","bars2","y1Axis","y3Axis","y4Axis","margin2","x2","y2","y3","y4","legendLeftAxisHint","legendRightAxisHint","switchYAxisOrder","getBarsAxis","main","getLinesAxis","allDisabled","availableHeight1","availableHeight2","dataBars","bar","dataLines","series1","series2","legendXPosition","originalKey","bars2Wrap","lines2Wrap","dataLine","focusBarsWrap","barsOpacity","linesOpacity","y1Opacity","y2Opacity","multiBar","stacked","stackOffset","hideable","barColor","groupSpacing","last_datalength","nonStackableCount","endFn","parsed","stack","nonStackable","nonStackableSeries","posBase","negBase","exitTransition","rgb","darker","barSelection","multiBarChart","multibar","controlLabels","reduceXTicks","controlWidth","grouped","getTranslate","staggerUp","staggerDown","totalInBetweenTicks","multiBarHorizontal","getYerr","yErr","showBarLabels","valuePadding","xerr","mid","path","yerr","multiBarHorizontalChart","controlsPosition","multiChart","yDomain1","yDomain2","yScale1","yScale2","lines1","scatters1","scatters2","bars1","stack1","stackedArea","stack2","yAxis1","yAxis2","dataLines1","dataLines2","dataScatters1","dataScatters2","dataBars1","dataBars2","dataStack1","dataStack2","color_array","lines1Wrap","scatters1Wrap","bars1Wrap","stack1Wrap","scatters2Wrap","stack2Wrap","extraValue1BarStacked","aVal","extraValue2BarStacked","mouseover_line","yaxis","mouseover_scatter","mouseover_stack","mouseover_bar","serieIndex","parallelCoordinates","undefinedValuesLabel","dimensionData","enabledDimensions","dimensionNames","displayBrush","filters","dragging","axisWithUndefinedValues","lineTension","foreground","background","dimensions","newData","val","dataValues","currentPosition","rangePoints","oldDomainMaxValue","displayMissingValuesline","currentTicks","onlyUndefinedValues","dimension","hasOnlyNaN","hasNaN","brushstart","brushend","tension","axisDrag","missingValuesline","missingValueslineText","lineData","dimensionsEnter","restoreBrush","actives","extents","formerActive","isActive","activeChanged","newscale","visible","brushDomain","updateTicks","hasActiveBrush","brushEnd","tickValues","__origin__","dimensionPosition","dimensionsOrder","dimensionFormats","parallelCoordinatesChart","dimensionTooltip","nanValue","str","originalPosition","parallelCoordinatesWrap","isSorted","tp","dim","dd","pie","showLabels","labelsOutside","labelType","labelThreshold","hideOverlapLabels","donut","growOnHover","titleOffset","labelSunbeamLayout","padAngle","cornerRadius","donutRatio","arcsRadius","arcs","arcsOver","arcsRadiusOuter","arcsRadiusInner","outer","inner","g_pie","arc","arcOver","slices","pieLabels","ae","paths","_current","attrTween","arcTween","labelsArc","group","rotateAngle","centroid","labelLocationHash","avgHeight","avgWidth","createHashKey","coordinates","getSlicePercentage","center","hashKey","getBBox","bb","topLeft","topRight","bottomLeft","bottomRight","pieLabelsOutside","donutLabelsOutside","labelFormat","pieChart","showTooltipPercent","pieWrap","sankey","nodeWidth","nodePadding","sinksRight","iterations","computeNodeLinks","computeNodeValues","computeNodeBreadths","computeNodeDepths","relayout","computeLinkDepths","curvature","xi","interpolateNumber","x3","sy","ty","linkPath","sourceLinks","targetLinks","sum","remainingNodes","nextNodes","moveSinksRight","scaleNodeBreadths","moveSourcesRight","kx","nodesByBreadth","nest","sortKeys","ascending","entries","initializeNodeDepth","resolveCollisions","relaxRightToLeft","relaxLeftToRight","ky","breadth","weightedSource","weightedTarget","ascendingDepth","ascendingTargetDepth","ascendingSourceDepth","sankeyChart","units","formatNumber","linkTitle","nodeFillColor","nodeStrokeColor","nodeTitle","showError","message","testData","isDataValid","dataAvailable","error","origin","appendChild","dragmove","nodeStyle","fillColor","strokeColor","pointBorderColor","z","getSize","getShape","shape","forceSize","notActive","padDataOuter","clipVoronoi","showVoronoi","clipRadius","sizeDomain","sizeRange","interactiveUpdateDelay","z0","xDom","yDom","width0","height0","timeoutID","needsUpdate","_sizeRange_def","_cache","getCache","delCache","getDiffs","cache","diffs","hasOwnProperty","logScale","base","scaleDiff","sizeDiff","domainDiff","updateInteractiveLayer","vertices","groupIndex","pX","pY","pointArray","bounds","geom","polygon","epsilon","voronoi","clip","pointPaths","vPointPaths","pointClips","vPointClips","mouseEventCallback","el","mDispatch","scrollTop","pageYOffset","scrollLeft","pageXOffset","relativePos","points","titles","clearTimeout","pointScale","pointRange","forcePoint","pointShape","scatterChart","distX","distY","showDistX","showDistY","regWrap","regLine","intercept","slope","sparkline","animate","showMinMaxPoints","showCurrentPoint","yValues","result","maxPoint","lastIndexOf","minPoint","currentPoint","sparklinePlus","paused","showLastValue","alignValue","rightAlignValue","sparklineWrap","valueWrap","sparklineHover","updateValueLine","hoverValue","hoverEnter","getClosestIndex","closestIndex","order","dataRaw","aseries","dataFiltered","out","zeroArea","areaMouseover","pageX","pageY","areaMouseout","areaClick","d3_stackedOffset_stackPercent","stackData","o","stackedAreaChart","showTotalInTooltip","totalLabel","controlOptions","oldYTickFormat","oldValueFormatter","percentFormatter","xAxisHeight","legendTop","metaKey","stream","stack_percent","requiredTop","stackedWrap","currentFormat","valueSum","allNullValues","atleastOnePoint","tooltipValue","stackedY0","stackedY","stackedAreaWithFocusChart","sunburst","mode","modes","count","d1","d2","parent","groupColorByParent","partition","prevPositions","rotationToAvoidUpsideDown","centerAngle","computeCenterAngle","computeNodePercentage","labelThresholdMatched","arcTweenZoom","xd","yd","yr","arcTweenUpdate","ipo","dx0","dy0","updatePrevPosition","pP","storeRetrievePrevPositions","zoomClick","depth","arcText","rotation","cG","cGE","children","sunburstChart","version"],"mappings":"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","sourcesContent":["/* nvd3 version 1.8.6 (https://github.com/novus/nvd3) 2017-08-23 */\n(function(){\n\n// set up main nv object\nvar nv = {};\n\n// the major global objects under the nv namespace\nnv.dev = false; //set false when in production\nnv.tooltip = nv.tooltip || {}; // For the tooltip system\nnv.utils = nv.utils || {}; // Utility subsystem\nnv.models = nv.models || {}; //stores all the possible models/components\nnv.charts = {}; //stores all the ready to use charts\nnv.logs = {}; //stores some statistics and potential error messages\nnv.dom = {}; //DOM manipulation functions\n\n// Node/CommonJS - require D3\nif (typeof(module) !== 'undefined' && typeof(exports) !== 'undefined' && typeof(d3) == 'undefined') {\n    d3 = require('d3');\n}\n\nnv.dispatch = d3.dispatch('render_start', 'render_end');\n\n// Function bind polyfill\n// Needed ONLY for phantomJS as it's missing until version 2.0 which is unreleased as of this comment\n// https://github.com/ariya/phantomjs/issues/10522\n// http://kangax.github.io/compat-table/es5/#Function.prototype.bind\n// phantomJS is used for running the test suite\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n        if (typeof this !== \"function\") {\n            // closest thing possible to the ECMAScript 5 internal IsCallable function\n            throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n        }\n\n        var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            fNOP = function () {},\n            fBound = function () {\n                return fToBind.apply(this instanceof fNOP && oThis\n                        ? this\n                        : oThis,\n                    aArgs.concat(Array.prototype.slice.call(arguments)));\n            };\n\n        fNOP.prototype = this.prototype;\n        fBound.prototype = new fNOP();\n        return fBound;\n    };\n}\n\n//  Development render timers - disabled if dev = false\nif (nv.dev) {\n    nv.dispatch.on('render_start', function(e) {\n        nv.logs.startTime = +new Date();\n    });\n\n    nv.dispatch.on('render_end', function(e) {\n        nv.logs.endTime = +new Date();\n        nv.logs.totalTime = nv.logs.endTime - nv.logs.startTime;\n        nv.log('total', nv.logs.totalTime); // used for development, to keep track of graph generation times\n    });\n}\n\n// Logs all arguments, and returns the last so you can test things in place\n// Note: in IE8 console.log is an object not a function, and if modernizr is used\n// then calling Function.prototype.bind with with anything other than a function\n// causes a TypeError to be thrown.\nnv.log = function() {\n    if (nv.dev && window.console && console.log && console.log.apply)\n        console.log.apply(console, arguments);\n    else if (nv.dev && window.console && typeof console.log == \"function\" && Function.prototype.bind) {\n        var log = Function.prototype.bind.call(console.log, console);\n        log.apply(console, arguments);\n    }\n    return arguments[arguments.length - 1];\n};\n\n// print console warning, should be used by deprecated functions\nnv.deprecated = function(name, info) {\n    if (console && console.warn) {\n        console.warn('nvd3 warning: `' + name + '` has been deprecated. ', info || '');\n    }\n};\n\n// The nv.render function is used to queue up chart rendering\n// in non-blocking async functions.\n// When all queued charts are done rendering, nv.dispatch.render_end is invoked.\nnv.render = function render(step) {\n    // number of graphs to generate in each timeout loop\n    step = step || 1;\n\n    nv.render.active = true;\n    nv.dispatch.render_start();\n\n    var renderLoop = function() {\n        var chart, graph;\n\n        for (var i = 0; i < step && (graph = nv.render.queue[i]); i++) {\n            chart = graph.generate();\n            if (typeof graph.callback == typeof(Function)) graph.callback(chart);\n        }\n\n        nv.render.queue.splice(0, i);\n\n        if (nv.render.queue.length) {\n            setTimeout(renderLoop);\n        }\n        else {\n            nv.dispatch.render_end();\n            nv.render.active = false;\n        }\n    };\n\n    setTimeout(renderLoop);\n};\n\nnv.render.active = false;\nnv.render.queue = [];\n\n/*\nAdds a chart to the async rendering queue. This method can take arguments in two forms:\nnv.addGraph({\n    generate: <Function>\n    callback: <Function>\n})\n\nor\n\nnv.addGraph(<generate Function>, <callback Function>)\n\nThe generate function should contain code that creates the NVD3 model, sets options\non it, adds data to an SVG element, and invokes the chart model. The generate function\nshould return the chart model.  See examples/lineChart.html for a usage example.\n\nThe callback function is optional, and it is called when the generate function completes.\n*/\nnv.addGraph = function(obj) {\n    if (typeof arguments[0] === typeof(Function)) {\n        obj = {generate: arguments[0], callback: arguments[1]};\n    }\n\n    nv.render.queue.push(obj);\n\n    if (!nv.render.active) {\n        nv.render();\n    }\n};\n\n// Node/CommonJS exports\nif (typeof(module) !== 'undefined' && typeof(exports) !== 'undefined') {\n  module.exports = nv;\n}\n\nif (typeof(window) !== 'undefined') {\n  window.nv = nv;\n}\n/* Facade for queueing DOM write operations\r\n * with Fastdom (https://github.com/wilsonpage/fastdom)\r\n * if available.\r\n * This could easily be extended to support alternate\r\n * implementations in the future.\r\n */\r\nnv.dom.write = function(callback) {\r\n\tif (window.fastdom !== undefined) {\r\n\t\treturn fastdom.mutate(callback);\r\n\t}\r\n\treturn callback();\r\n};\r\n\r\n/* Facade for queueing DOM read operations\r\n * with Fastdom (https://github.com/wilsonpage/fastdom)\r\n * if available.\r\n * This could easily be extended to support alternate\r\n * implementations in the future.\r\n */\r\nnv.dom.read = function(callback) {\r\n\tif (window.fastdom !== undefined) {\r\n\t\treturn fastdom.measure(callback);\r\n\t}\r\n\treturn callback();\r\n};\r\n/* Utility class to handle creation of an interactive layer.\n This places a rectangle on top of the chart. When you mouse move over it, it sends a dispatch\n containing the X-coordinate. It can also render a vertical line where the mouse is located.\n\n dispatch.elementMousemove is the important event to latch onto.  It is fired whenever the mouse moves over\n the rectangle. The dispatch is given one object which contains the mouseX/Y location.\n It also has 'pointXValue', which is the conversion of mouseX to the x-axis scale.\n */\nnv.interactiveGuideline = function() {\n    \"use strict\";\n\n    var margin = { left: 0, top: 0 } //Pass the chart's top and left magins. Used to calculate the mouseX/Y.\n        ,   width = null\n        ,   height = null\n        ,   xScale = d3.scale.linear()\n        ,   dispatch = d3.dispatch('elementMousemove', 'elementMouseout', 'elementClick', 'elementDblclick', 'elementMouseDown', 'elementMouseUp')\n        ,   showGuideLine = true\n        ,   svgContainer = null // Must pass the chart's svg, we'll use its mousemove event.\n        ,   tooltip = nv.models.tooltip()\n        ,   isMSIE =  window.ActiveXObject// Checkt if IE by looking for activeX. (excludes IE11)\n    ;\n\n    tooltip\n        .duration(0)\n        .hideDelay(0)\n        .hidden(false);\n\n    function layer(selection) {\n        selection.each(function(data) {\n            var container = d3.select(this);\n            var availableWidth = (width || 960), availableHeight = (height || 400);\n            var wrap = container.selectAll(\"g.nv-wrap.nv-interactiveLineLayer\")\n                .data([data]);\n            var wrapEnter = wrap.enter()\n                .append(\"g\").attr(\"class\", \" nv-wrap nv-interactiveLineLayer\");\n            wrapEnter.append(\"g\").attr(\"class\",\"nv-interactiveGuideLine\");\n\n            if (!svgContainer) {\n                return;\n            }\n\n            function mouseHandler() {\n                var mouseX = d3.event.clientX - this.getBoundingClientRect().left;\n                var mouseY = d3.event.clientY - this.getBoundingClientRect().top;\n\n                var subtractMargin = true;\n                var mouseOutAnyReason = false;\n                if (isMSIE) {\n                    /*\n                     D3.js (or maybe SVG.getScreenCTM) has a nasty bug in Internet Explorer 10.\n                     d3.mouse() returns incorrect X,Y mouse coordinates when mouse moving\n                     over a rect in IE 10.\n                     However, d3.event.offsetX/Y also returns the mouse coordinates\n                     relative to the triggering <rect>. So we use offsetX/Y on IE.\n                     */\n                    mouseX = d3.event.offsetX;\n                    mouseY = d3.event.offsetY;\n\n                    /*\n                     On IE, if you attach a mouse event listener to the <svg> container,\n                     it will actually trigger it for all the child elements (like <path>, <circle>, etc).\n                     When this happens on IE, the offsetX/Y is set to where ever the child element\n                     is located.\n                     As a result, we do NOT need to subtract margins to figure out the mouse X/Y\n                     position under this scenario. Removing the line below *will* cause\n                     the interactive layer to not work right on IE.\n                     */\n                    if(d3.event.target.tagName !== \"svg\") {\n                        subtractMargin = false;\n                    }\n\n                    if (d3.event.target.className.baseVal.match(\"nv-legend\")) {\n                        mouseOutAnyReason = true;\n                    }\n\n                }\n\n                if(subtractMargin) {\n                    mouseX -= margin.left;\n                    mouseY -= margin.top;\n                }\n\n                /* If mouseX/Y is outside of the chart's bounds,\n                 trigger a mouseOut event.\n                 */\n                if (d3.event.type === 'mouseout'\n                    || mouseX < 0 || mouseY < 0\n                    || mouseX > availableWidth || mouseY > availableHeight\n                    || (d3.event.relatedTarget && d3.event.relatedTarget.ownerSVGElement === undefined)\n                    || mouseOutAnyReason\n                    ) {\n\n                    if (isMSIE) {\n                        if (d3.event.relatedTarget\n                            && d3.event.relatedTarget.ownerSVGElement === undefined\n                            && (d3.event.relatedTarget.className === undefined\n                                || d3.event.relatedTarget.className.match(tooltip.nvPointerEventsClass))) {\n\n                            return;\n                        }\n                    }\n                    dispatch.elementMouseout({\n                        mouseX: mouseX,\n                        mouseY: mouseY\n                    });\n                    layer.renderGuideLine(null); //hide the guideline\n                    tooltip.hidden(true);\n                    return;\n                } else {\n                    tooltip.hidden(false);\n                }\n\n\n                var scaleIsOrdinal = typeof xScale.rangeBands === 'function';\n                var pointXValue = undefined;\n\n                // Ordinal scale has no invert method\n                if (scaleIsOrdinal) {\n                    var elementIndex = d3.bisect(xScale.range(), mouseX) - 1;\n                    // Check if mouseX is in the range band\n                    if (xScale.range()[elementIndex] + xScale.rangeBand() >= mouseX) {\n                        pointXValue = xScale.domain()[d3.bisect(xScale.range(), mouseX) - 1];\n                    }\n                    else {\n                        dispatch.elementMouseout({\n                            mouseX: mouseX,\n                            mouseY: mouseY\n                        });\n                        layer.renderGuideLine(null); //hide the guideline\n                        tooltip.hidden(true);\n                        return;\n                    }\n                }\n                else {\n                    pointXValue = xScale.invert(mouseX);\n                }\n\n                dispatch.elementMousemove({\n                    mouseX: mouseX,\n                    mouseY: mouseY,\n                    pointXValue: pointXValue\n                });\n\n                //If user double clicks the layer, fire a elementDblclick\n                if (d3.event.type === \"dblclick\") {\n                    dispatch.elementDblclick({\n                        mouseX: mouseX,\n                        mouseY: mouseY,\n                        pointXValue: pointXValue\n                    });\n                }\n\n                // if user single clicks the layer, fire elementClick\n                if (d3.event.type === 'click') {\n                    dispatch.elementClick({\n                        mouseX: mouseX,\n                        mouseY: mouseY,\n                        pointXValue: pointXValue\n                    });\n                }\n\n                // if user presses mouse down the layer, fire elementMouseDown\n                if (d3.event.type === 'mousedown') {\n                \tdispatch.elementMouseDown({\n                \t\tmouseX: mouseX,\n                \t\tmouseY: mouseY,\n                \t\tpointXValue: pointXValue\n                \t});\n                }\n\n                // if user presses mouse down the layer, fire elementMouseUp\n                if (d3.event.type === 'mouseup') {\n                \tdispatch.elementMouseUp({\n                \t\tmouseX: mouseX,\n                \t\tmouseY: mouseY,\n                \t\tpointXValue: pointXValue\n                \t});\n                }\n            }\n\n            svgContainer\n                .on(\"touchmove\",mouseHandler)\n                .on(\"mousemove\",mouseHandler, true)\n                .on(\"mouseout\" ,mouseHandler,true)\n                .on(\"mousedown\" ,mouseHandler,true)\n                .on(\"mouseup\" ,mouseHandler,true)\n                .on(\"dblclick\" ,mouseHandler)\n                .on(\"click\", mouseHandler)\n            ;\n\n            layer.guideLine = null;\n            //Draws a vertical guideline at the given X postion.\n            layer.renderGuideLine = function(x) {\n                if (!showGuideLine) return;\n                if (layer.guideLine && layer.guideLine.attr(\"x1\") === x) return;\n                nv.dom.write(function() {\n                    var line = wrap.select(\".nv-interactiveGuideLine\")\n                        .selectAll(\"line\")\n                        .data((x != null) ? [nv.utils.NaNtoZero(x)] : [], String);\n                    line.enter()\n                        .append(\"line\")\n                        .attr(\"class\", \"nv-guideline\")\n                        .attr(\"x1\", function(d) { return d;})\n                        .attr(\"x2\", function(d) { return d;})\n                        .attr(\"y1\", availableHeight)\n                        .attr(\"y2\",0);\n                    line.exit().remove();\n                });\n            }\n        });\n    }\n\n    layer.dispatch = dispatch;\n    layer.tooltip = tooltip;\n\n    layer.margin = function(_) {\n        if (!arguments.length) return margin;\n        margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n        margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n        return layer;\n    };\n\n    layer.width = function(_) {\n        if (!arguments.length) return width;\n        width = _;\n        return layer;\n    };\n\n    layer.height = function(_) {\n        if (!arguments.length) return height;\n        height = _;\n        return layer;\n    };\n\n    layer.xScale = function(_) {\n        if (!arguments.length) return xScale;\n        xScale = _;\n        return layer;\n    };\n\n    layer.showGuideLine = function(_) {\n        if (!arguments.length) return showGuideLine;\n        showGuideLine = _;\n        return layer;\n    };\n\n    layer.svgContainer = function(_) {\n        if (!arguments.length) return svgContainer;\n        svgContainer = _;\n        return layer;\n    };\n\n    return layer;\n};\n\n/* Utility class that uses d3.bisect to find the index in a given array, where a search value can be inserted.\n This is different from normal bisectLeft; this function finds the nearest index to insert the search value.\n\n For instance, lets say your array is [1,2,3,5,10,30], and you search for 28.\n Normal d3.bisectLeft will return 4, because 28 is inserted after the number 10.  But interactiveBisect will return 5\n because 28 is closer to 30 than 10.\n\n Unit tests can be found in: interactiveBisectTest.html\n\n Has the following known issues:\n * Will not work if the data points move backwards (ie, 10,9,8,7, etc) or if the data points are in random order.\n * Won't work if there are duplicate x coordinate values.\n */\nnv.interactiveBisect = function (values, searchVal, xAccessor) {\n    \"use strict\";\n    if (! (values instanceof Array)) {\n        return null;\n    }\n    var _xAccessor;\n    if (typeof xAccessor !== 'function') {\n        _xAccessor = function(d) {\n            return d.x;\n        }\n    } else {\n        _xAccessor = xAccessor;\n    }\n    var _cmp = function(d, v) {\n        // Accessors are no longer passed the index of the element along with\n        // the element itself when invoked by d3.bisector.\n        //\n        // Starting at D3 v3.4.4, d3.bisector() started inspecting the\n        // function passed to determine if it should consider it an accessor\n        // or a comparator. This meant that accessors that take two arguments\n        // (expecting an index as the second parameter) are treated as\n        // comparators where the second argument is the search value against\n        // which the first argument is compared.\n        return _xAccessor(d) - v;\n    };\n\n    var bisect = d3.bisector(_cmp).left;\n    var index = d3.max([0, bisect(values,searchVal) - 1]);\n    var currentValue = _xAccessor(values[index]);\n\n    if (typeof currentValue === 'undefined') {\n        currentValue = index;\n    }\n\n    if (currentValue === searchVal) {\n        return index; //found exact match\n    }\n\n    var nextIndex = d3.min([index+1, values.length - 1]);\n    var nextValue = _xAccessor(values[nextIndex]);\n\n    if (typeof nextValue === 'undefined') {\n        nextValue = nextIndex;\n    }\n\n    if (Math.abs(nextValue - searchVal) >= Math.abs(currentValue - searchVal)) {\n        return index;\n    } else {\n        return nextIndex\n    }\n};\n\n/*\n Returns the index in the array \"values\" that is closest to searchVal.\n Only returns an index if searchVal is within some \"threshold\".\n Otherwise, returns null.\n */\nnv.nearestValueIndex = function (values, searchVal, threshold) {\n    \"use strict\";\n    var yDistMax = Infinity, indexToHighlight = null;\n    values.forEach(function(d,i) {\n        var delta = Math.abs(searchVal - d);\n        if ( d != null && delta <= yDistMax && delta < threshold) {\n            yDistMax = delta;\n            indexToHighlight = i;\n        }\n    });\n    return indexToHighlight;\n};\n\n/* Model which can be instantiated to handle tooltip rendering.\n Example usage:\n var tip = nv.models.tooltip().gravity('w').distance(23)\n .data(myDataObject);\n\n tip();    //just invoke the returned function to render tooltip.\n */\nnv.models.tooltip = function() {\n    \"use strict\";\n\n    /*\n    Tooltip data. If data is given in the proper format, a consistent tooltip is generated.\n    Example Format of data:\n    {\n        key: \"Date\",\n        value: \"August 2009\",\n        series: [\n            {key: \"Series 1\", value: \"Value 1\", color: \"#000\"},\n            {key: \"Series 2\", value: \"Value 2\", color: \"#00f\"}\n        ]\n    }\n    */\n    var id = \"nvtooltip-\" + Math.floor(Math.random() * 100000) // Generates a unique id when you create a new tooltip() object.\n        ,   data = null\n        ,   gravity = 'w'   // Can be 'n','s','e','w'. Determines how tooltip is positioned.\n        ,   distance = 25 // Distance to offset tooltip from the mouse location.\n        ,   snapDistance = 0   // Tolerance allowed before tooltip is moved from its current position (creates 'snapping' effect)\n        ,   classes = null  // Attaches additional CSS classes to the tooltip DIV that is created.\n        ,   hidden = true  // Start off hidden, toggle with hide/show functions below.\n        ,   hideDelay = 200  // Delay (in ms) before the tooltip hides after calling hide().\n        ,   tooltip = null // d3 select of the tooltip div.\n        ,   lastPosition = { left: null, top: null } // Last position the tooltip was in.\n        ,   enabled = true  // True -> tooltips are rendered. False -> don't render tooltips.\n        ,   duration = 100 // Tooltip movement duration, in ms.\n        ,   headerEnabled = true // If is to show the tooltip header.\n        ,   nvPointerEventsClass = \"nv-pointer-events-none\" // CSS class to specify whether element should not have mouse events.\n    ;\n\n    // Format function for the tooltip values column.\n    // d is value,\n    // i is series index\n    // p is point containing the value\n    var valueFormatter = function(d, i, p) {\n        return d;\n    };\n\n    // Format function for the tooltip header value.\n    var headerFormatter = function(d) {\n        return d;\n    };\n\n    var keyFormatter = function(d, i) {\n        return d;\n    };\n\n    // By default, the tooltip model renders a beautiful table inside a DIV, returned as HTML\n    // You can override this function if a custom tooltip is desired. For instance, you could directly manipulate\n    // the DOM by accessing elem and returning false.\n    var contentGenerator = function(d, elem) {\n        if (d === null) {\n            return '';\n        }\n\n        var table = d3.select(document.createElement(\"table\"));\n        if (headerEnabled) {\n            var theadEnter = table.selectAll(\"thead\")\n                .data([d])\n                .enter().append(\"thead\");\n\n            theadEnter.append(\"tr\")\n                .append(\"td\")\n                .attr(\"colspan\", 3)\n                .append(\"strong\")\n                .classed(\"x-value\", true)\n                .html(headerFormatter(d.value));\n        }\n\n        var tbodyEnter = table.selectAll(\"tbody\")\n            .data([d])\n            .enter().append(\"tbody\");\n\n        var trowEnter = tbodyEnter.selectAll(\"tr\")\n                .data(function(p) { return p.series})\n                .enter()\n                .append(\"tr\")\n                .classed(\"highlight\", function(p) { return p.highlight});\n\n        trowEnter.append(\"td\")\n            .classed(\"legend-color-guide\",true)\n            .append(\"div\")\n            .style(\"background-color\", function(p) { return p.color});\n\n        trowEnter.append(\"td\")\n            .classed(\"key\",true)\n            .classed(\"total\",function(p) { return !!p.total})\n            .html(function(p, i) { return keyFormatter(p.key, i)});\n\n        trowEnter.append(\"td\")\n            .classed(\"value\",true)\n            .html(function(p, i) { return valueFormatter(p.value, i, p) });\n\n        trowEnter.filter(function (p,i) { return p.percent !== undefined }).append(\"td\")\n            .classed(\"percent\", true)\n            .html(function(p, i) { return \"(\" + d3.format('%')(p.percent) + \")\" });\n\n        trowEnter.selectAll(\"td\").each(function(p) {\n            if (p.highlight) {\n                var opacityScale = d3.scale.linear().domain([0,1]).range([\"#fff\",p.color]);\n                var opacity = 0.6;\n                d3.select(this)\n                    .style(\"border-bottom-color\", opacityScale(opacity))\n                    .style(\"border-top-color\", opacityScale(opacity))\n                ;\n            }\n        });\n\n        var html = table.node().outerHTML;\n        if (d.footer !== undefined)\n            html += \"<div class='footer'>\" + d.footer + \"</div>\";\n        return html;\n\n    };\n\n    /*\n     Function that returns the position (relative to the viewport/document.body)\n     the tooltip should be placed in.\n     Should return: {\n        left: <leftPos>,\n        top: <topPos>\n     }\n     */\n    var position = function() {\n        var pos = {\n            left: d3.event !== null ? d3.event.clientX : 0,\n            top: d3.event !== null ? d3.event.clientY : 0\n        };\n\n        if(getComputedStyle(document.body).transform != 'none') {\n            // Take the offset into account, as now the tooltip is relative\n            // to document.body.\n            var client = document.body.getBoundingClientRect();\n            pos.left -= client.left;\n            pos.top -= client.top;\n        }\n\n        return pos;\n    };\n\n    var dataSeriesExists = function(d) {\n        if (d && d.series) {\n            if (nv.utils.isArray(d.series)) {\n                return true;\n            }\n            // if object, it's okay just convert to array of the object\n            if (nv.utils.isObject(d.series)) {\n                d.series = [d.series];\n                return true;\n            }\n        }\n        return false;\n    };\n\n    // Calculates the gravity offset of the tooltip. Parameter is position of tooltip\n    // relative to the viewport.\n    var calcGravityOffset = function(pos) {\n        var height = tooltip.node().offsetHeight,\n            width = tooltip.node().offsetWidth,\n            clientWidth = document.documentElement.clientWidth, // Don't want scrollbars.\n            clientHeight = document.documentElement.clientHeight, // Don't want scrollbars.\n            left, top, tmp;\n\n        // calculate position based on gravity\n        switch (gravity) {\n            case 'e':\n                left = - width - distance;\n                top = - (height / 2);\n                if(pos.left + left < 0) left = distance;\n                if((tmp = pos.top + top) < 0) top -= tmp;\n                if((tmp = pos.top + top + height) > clientHeight) top -= tmp - clientHeight;\n                break;\n            case 'w':\n                left = distance;\n                top = - (height / 2);\n                if (pos.left + left + width > clientWidth) left = - width - distance;\n                if ((tmp = pos.top + top) < 0) top -= tmp;\n                if ((tmp = pos.top + top + height) > clientHeight) top -= tmp - clientHeight;\n                break;\n            case 'n':\n                left = - (width / 2) - 5; // - 5 is an approximation of the mouse's height.\n                top = distance;\n                if (pos.top + top + height > clientHeight) top = - height - distance;\n                if ((tmp = pos.left + left) < 0) left -= tmp;\n                if ((tmp = pos.left + left + width) > clientWidth) left -= tmp - clientWidth;\n                break;\n            case 's':\n                left = - (width / 2);\n                top = - height - distance;\n                if (pos.top + top < 0) top = distance;\n                if ((tmp = pos.left + left) < 0) left -= tmp;\n                if ((tmp = pos.left + left + width) > clientWidth) left -= tmp - clientWidth;\n                break;\n            case 'center':\n                left = - (width / 2);\n                top = - (height / 2);\n                break;\n            default:\n                left = 0;\n                top = 0;\n                break;\n        }\n\n        return { 'left': left, 'top': top };\n    };\n\n    /*\n     Positions the tooltip in the correct place, as given by the position() function.\n     */\n    var positionTooltip = function() {\n        nv.dom.read(function() {\n            var pos = position(),\n                gravityOffset = calcGravityOffset(pos),\n                left = pos.left + gravityOffset.left,\n                top = pos.top + gravityOffset.top;\n\n            // delay hiding a bit to avoid flickering\n            if (hidden) {\n                tooltip\n                    .interrupt()\n                    .transition()\n                    .delay(hideDelay)\n                    .duration(0)\n                    .style('opacity', 0);\n            } else {\n                // using tooltip.style('transform') returns values un-usable for tween\n                var old_translate = 'translate(' + lastPosition.left + 'px, ' + lastPosition.top + 'px)';\n                var new_translate = 'translate(' + Math.round(left) + 'px, ' + Math.round(top) + 'px)';\n                var translateInterpolator = d3.interpolateString(old_translate, new_translate);\n                var is_hidden = tooltip.style('opacity') < 0.1;\n\n                tooltip\n                    .interrupt() // cancel running transitions\n                    .transition()\n                    .duration(is_hidden ? 0 : duration)\n                    // using tween since some versions of d3 can't auto-tween a translate on a div\n                    .styleTween('transform', function (d) {\n                        return translateInterpolator;\n                    }, 'important')\n                    // Safari has its own `-webkit-transform` and does not support `transform`\n                    .styleTween('-webkit-transform', function (d) {\n                        return translateInterpolator;\n                    })\n                    .style('-ms-transform', new_translate)\n                    .style('opacity', 1);\n            }\n\n            lastPosition.left = left;\n            lastPosition.top = top;\n        });\n    };\n\n    // Creates new tooltip container, or uses existing one on DOM.\n    function initTooltip() {\n        if (!tooltip || !tooltip.node()) {\n            // Create new tooltip div if it doesn't exist on DOM.\n\n            var data = [1];\n            tooltip = d3.select(document.body).select('#'+id).data(data);\n\n            tooltip.enter().append('div')\n                   .attr(\"class\", \"nvtooltip \" + (classes ? classes : \"xy-tooltip\"))\n                   .attr(\"id\", id)\n                   .style(\"top\", 0).style(\"left\", 0)\n                   .style('opacity', 0)\n                   .style('position', 'fixed')\n                   .selectAll(\"div, table, td, tr\").classed(nvPointerEventsClass, true)\n                   .classed(nvPointerEventsClass, true);\n\n            tooltip.exit().remove()\n        }\n    }\n\n    // Draw the tooltip onto the DOM.\n    function nvtooltip() {\n        if (!enabled) return;\n        if (!dataSeriesExists(data)) return;\n\n        nv.dom.write(function () {\n            initTooltip();\n            // Generate data and set it into tooltip.\n            // Bonus - If you override contentGenerator and return false, you can use something like\n            //         Angular, React or Knockout to bind the data for your tooltip directly to the DOM.\n            var newContent = contentGenerator(data, tooltip.node());\n            if (newContent) {\n                tooltip.node().innerHTML = newContent;\n            }\n\n            positionTooltip();\n        });\n\n        return nvtooltip;\n    }\n\n    nvtooltip.nvPointerEventsClass = nvPointerEventsClass;\n    nvtooltip.options = nv.utils.optionsFunc.bind(nvtooltip);\n\n    nvtooltip._options = Object.create({}, {\n        // simple read/write options\n        duration: {get: function(){return duration;}, set: function(_){duration=_;}},\n        gravity: {get: function(){return gravity;}, set: function(_){gravity=_;}},\n        distance: {get: function(){return distance;}, set: function(_){distance=_;}},\n        snapDistance: {get: function(){return snapDistance;}, set: function(_){snapDistance=_;}},\n        classes: {get: function(){return classes;}, set: function(_){classes=_;}},\n        enabled: {get: function(){return enabled;}, set: function(_){enabled=_;}},\n        hideDelay: {get: function(){return hideDelay;}, set: function(_){hideDelay=_;}},\n        contentGenerator: {get: function(){return contentGenerator;}, set: function(_){contentGenerator=_;}},\n        valueFormatter: {get: function(){return valueFormatter;}, set: function(_){valueFormatter=_;}},\n        headerFormatter: {get: function(){return headerFormatter;}, set: function(_){headerFormatter=_;}},\n        keyFormatter: {get: function(){return keyFormatter;}, set: function(_){keyFormatter=_;}},\n        headerEnabled: {get: function(){return headerEnabled;}, set: function(_){headerEnabled=_;}},\n        position: {get: function(){return position;}, set: function(_){position=_;}},\n\n        // Deprecated options\n        chartContainer: {get: function(){return document.body;}, set: function(_){\n            // deprecated after 1.8.3\n            nv.deprecated('chartContainer', 'feature removed after 1.8.3');\n        }},\n        fixedTop: {get: function(){return null;}, set: function(_){\n            // deprecated after 1.8.1\n            nv.deprecated('fixedTop', 'feature removed after 1.8.1');\n        }},\n        offset: {get: function(){return {left: 0, top: 0};}, set: function(_){\n            // deprecated after 1.8.1\n            nv.deprecated('offset', 'use chart.tooltip.distance() instead');\n        }},\n\n        // options with extra logic\n        hidden: {get: function(){return hidden;}, set: function(_){\n            if (hidden != _) {\n                hidden = !!_;\n                nvtooltip();\n            }\n        }},\n        data: {get: function(){return data;}, set: function(_){\n            // if showing a single data point, adjust data format with that\n            if (_.point) {\n                _.value = _.point.x;\n                _.series = _.series || {};\n                _.series.value = _.point.y;\n                _.series.color = _.point.color || _.series.color;\n            }\n            data = _;\n        }},\n\n        // read only properties\n        node: {get: function(){return tooltip.node();}, set: function(_){}},\n        id: {get: function(){return id;}, set: function(_){}}\n    });\n\n    nv.utils.initOptions(nvtooltip);\n    return nvtooltip;\n};\n\n\n/*\nGets the browser window size\n\nReturns object with height and width properties\n */\nnv.utils.windowSize = function() {\n    // Sane defaults\n    var size = {width: 640, height: 480};\n\n    // Most recent browsers use\n    if (window.innerWidth && window.innerHeight) {\n        size.width = window.innerWidth;\n        size.height = window.innerHeight;\n        return (size);\n    }\n\n    // IE can use depending on mode it is in\n    if (document.compatMode=='CSS1Compat' &&\n        document.documentElement &&\n        document.documentElement.offsetWidth ) {\n\n        size.width = document.documentElement.offsetWidth;\n        size.height = document.documentElement.offsetHeight;\n        return (size);\n    }\n\n    // Earlier IE uses Doc.body\n    if (document.body && document.body.offsetWidth) {\n        size.width = document.body.offsetWidth;\n        size.height = document.body.offsetHeight;\n        return (size);\n    }\n\n    return (size);\n};\n\n\n/* handle dumb browser quirks...  isinstance breaks if you use frames\ntypeof returns 'object' for null, NaN is a number, etc.\n */\nnv.utils.isArray = Array.isArray;\nnv.utils.isObject = function(a) {\n    return a !== null && typeof a === 'object';\n};\nnv.utils.isFunction = function(a) {\n    return typeof a === 'function';\n};\nnv.utils.isDate = function(a) {\n    return toString.call(a) === '[object Date]';\n};\nnv.utils.isNumber = function(a) {\n    return !isNaN(a) && typeof a === 'number';\n};\n\n\n/*\nBinds callback function to run when window is resized\n */\nnv.utils.windowResize = function(handler) {\n    if (window.addEventListener) {\n        window.addEventListener('resize', handler);\n    } else {\n        nv.log(\"ERROR: Failed to bind to window.resize with: \", handler);\n    }\n    // return object with clear function to remove the single added callback.\n    return {\n        callback: handler,\n        clear: function() {\n            window.removeEventListener('resize', handler);\n        }\n    }\n};\n\n\n/*\nBackwards compatible way to implement more d3-like coloring of graphs.\nCan take in nothing, an array, or a function/scale\nTo use a normal scale, get the range and pass that because we must be able\nto take two arguments and use the index to keep backward compatibility\n*/\nnv.utils.getColor = function(color) {\n    //if you pass in nothing, get default colors back\n    if (color === undefined) {\n        return nv.utils.defaultColor();\n\n    //if passed an array, turn it into a color scale\n    } else if(nv.utils.isArray(color)) {\n        var color_scale = d3.scale.ordinal().range(color);\n        return function(d, i) {\n            var key = i === undefined ? d : i;\n            return d.color || color_scale(key);\n        };\n\n    //if passed a function or scale, return it, or whatever it may be\n    //external libs, such as angularjs-nvd3-directives use this\n    } else {\n        //can't really help it if someone passes rubbish as color\n        return color;\n    }\n};\n\n\n/*\nDefault color chooser uses a color scale of 20 colors from D3\n https://github.com/mbostock/d3/wiki/Ordinal-Scales#categorical-colors\n */\nnv.utils.defaultColor = function() {\n    // get range of the scale so we'll turn it into our own function.\n    return nv.utils.getColor(d3.scale.category20().range());\n};\n\n\n/*\nReturns a color function that takes the result of 'getKey' for each series and\nlooks for a corresponding color from the dictionary\n*/\nnv.utils.customTheme = function(dictionary, getKey, defaultColors) {\n    // use default series.key if getKey is undefined\n    getKey = getKey || function(series) { return series.key };\n    defaultColors = defaultColors || d3.scale.category20().range();\n\n    // start at end of default color list and walk back to index 0\n    var defIndex = defaultColors.length;\n\n    return function(series, index) {\n        var key = getKey(series);\n        if (nv.utils.isFunction(dictionary[key])) {\n            return dictionary[key]();\n        } else if (dictionary[key] !== undefined) {\n            return dictionary[key];\n        } else {\n            // no match in dictionary, use a default color\n            if (!defIndex) {\n                // used all the default colors, start over\n                defIndex = defaultColors.length;\n            }\n            defIndex = defIndex - 1;\n            return defaultColors[defIndex];\n        }\n    };\n};\n\n\n/*\nFrom the PJAX example on d3js.org, while this is not really directly needed\nit's a very cool method for doing pjax, I may expand upon it a little bit,\nopen to suggestions on anything that may be useful\n*/\nnv.utils.pjax = function(links, content) {\n\n    var load = function(href) {\n        d3.html(href, function(fragment) {\n            var target = d3.select(content).node();\n            target.parentNode.replaceChild(\n                d3.select(fragment).select(content).node(),\n                target);\n            nv.utils.pjax(links, content);\n        });\n    };\n\n    d3.selectAll(links).on(\"click\", function() {\n        history.pushState(this.href, this.textContent, this.href);\n        load(this.href);\n        d3.event.preventDefault();\n    });\n\n    d3.select(window).on(\"popstate\", function() {\n        if (d3.event.state) {\n            load(d3.event.state);\n        }\n    });\n};\n\n\n/*\nFor when we want to approximate the width in pixels for an SVG:text element.\nMost common instance is when the element is in a display:none; container.\nForumla is : text.length * font-size * constant_factor\n*/\nnv.utils.calcApproxTextWidth = function (svgTextElem) {\n    if (nv.utils.isFunction(svgTextElem.style) && nv.utils.isFunction(svgTextElem.text)) {\n        var fontSize = parseInt(svgTextElem.style(\"font-size\").replace(\"px\",\"\"), 10);\n        var textLength = svgTextElem.text().length;\n        return nv.utils.NaNtoZero(textLength * fontSize * 0.5);\n    }\n    return 0;\n};\n\n\n/*\nNumbers that are undefined, null or NaN, convert them to zeros.\n*/\nnv.utils.NaNtoZero = function(n) {\n    if (!nv.utils.isNumber(n)\n        || isNaN(n)\n        || n === null\n        || n === Infinity\n        || n === -Infinity) {\n\n        return 0;\n    }\n    return n;\n};\n\n/*\nAdd a way to watch for d3 transition ends to d3\n*/\nd3.selection.prototype.watchTransition = function(renderWatch){\n    var args = [this].concat([].slice.call(arguments, 1));\n    return renderWatch.transition.apply(renderWatch, args);\n};\n\n\n/*\nHelper object to watch when d3 has rendered something\n*/\nnv.utils.renderWatch = function(dispatch, duration) {\n    if (!(this instanceof nv.utils.renderWatch)) {\n        return new nv.utils.renderWatch(dispatch, duration);\n    }\n\n    var _duration = duration !== undefined ? duration : 250;\n    var renderStack = [];\n    var self = this;\n\n    this.models = function(models) {\n        models = [].slice.call(arguments, 0);\n        models.forEach(function(model){\n            model.__rendered = false;\n            (function(m){\n                m.dispatch.on('renderEnd', function(arg){\n                    m.__rendered = true;\n                    self.renderEnd('model');\n                });\n            })(model);\n\n            if (renderStack.indexOf(model) < 0) {\n                renderStack.push(model);\n            }\n        });\n    return this;\n    };\n\n    this.reset = function(duration) {\n        if (duration !== undefined) {\n            _duration = duration;\n        }\n        renderStack = [];\n    };\n\n    this.transition = function(selection, args, duration) {\n        args = arguments.length > 1 ? [].slice.call(arguments, 1) : [];\n\n        if (args.length > 1) {\n            duration = args.pop();\n        } else {\n            duration = _duration !== undefined ? _duration : 250;\n        }\n        selection.__rendered = false;\n\n        if (renderStack.indexOf(selection) < 0) {\n            renderStack.push(selection);\n        }\n\n        if (duration === 0) {\n            selection.__rendered = true;\n            selection.delay = function() { return this; };\n            selection.duration = function() { return this; };\n            return selection;\n        } else {\n            if (selection.length === 0) {\n                selection.__rendered = true;\n            } else if (selection.every( function(d){ return !d.length; } )) {\n                selection.__rendered = true;\n            } else {\n                selection.__rendered = false;\n            }\n\n            var n = 0;\n            return selection\n                .transition()\n                .duration(duration)\n                .each(function(){ ++n; })\n                .each('end', function(d, i) {\n                    if (--n === 0) {\n                        selection.__rendered = true;\n                        self.renderEnd.apply(this, args);\n                    }\n                });\n        }\n    };\n\n    this.renderEnd = function() {\n        if (renderStack.every( function(d){ return d.__rendered; } )) {\n            renderStack.forEach( function(d){ d.__rendered = false; });\n            dispatch.renderEnd.apply(this, arguments);\n        }\n    }\n\n};\n\n\n/*\nTakes multiple objects and combines them into the first one (dst)\nexample:  nv.utils.deepExtend({a: 1}, {a: 2, b: 3}, {c: 4});\ngives:  {a: 2, b: 3, c: 4}\n*/\nnv.utils.deepExtend = function(dst){\n    var sources = arguments.length > 1 ? [].slice.call(arguments, 1) : [];\n    sources.forEach(function(source) {\n        for (var key in source) {\n            var isArray = nv.utils.isArray(dst[key]);\n            var isObject = nv.utils.isObject(dst[key]);\n            var srcObj = nv.utils.isObject(source[key]);\n\n            if (isObject && !isArray && srcObj) {\n                nv.utils.deepExtend(dst[key], source[key]);\n            } else {\n                dst[key] = source[key];\n            }\n        }\n    });\n};\n\n\n/*\nstate utility object, used to track d3 states in the models\n*/\nnv.utils.state = function(){\n    if (!(this instanceof nv.utils.state)) {\n        return new nv.utils.state();\n    }\n    var state = {};\n    var _self = this;\n    var _setState = function(){};\n    var _getState = function(){ return {}; };\n    var init = null;\n    var changed = null;\n\n    this.dispatch = d3.dispatch('change', 'set');\n\n    this.dispatch.on('set', function(state){\n        _setState(state, true);\n    });\n\n    this.getter = function(fn){\n        _getState = fn;\n        return this;\n    };\n\n    this.setter = function(fn, callback) {\n        if (!callback) {\n            callback = function(){};\n        }\n        _setState = function(state, update){\n            fn(state);\n            if (update) {\n                callback();\n            }\n        };\n        return this;\n    };\n\n    this.init = function(state){\n        init = init || {};\n        nv.utils.deepExtend(init, state);\n    };\n\n    var _set = function(){\n        var settings = _getState();\n\n        if (JSON.stringify(settings) === JSON.stringify(state)) {\n            return false;\n        }\n\n        for (var key in settings) {\n            if (state[key] === undefined) {\n                state[key] = {};\n            }\n            state[key] = settings[key];\n            changed = true;\n        }\n        return true;\n    };\n\n    this.update = function(){\n        if (init) {\n            _setState(init, false);\n            init = null;\n        }\n        if (_set.call(this)) {\n            this.dispatch.change(state);\n        }\n    };\n\n};\n\n\n/*\nSnippet of code you can insert into each nv.models.* to give you the ability to\ndo things like:\nchart.options({\n  showXAxis: true,\n  tooltips: true\n});\n\nTo enable in the chart:\nchart.options = nv.utils.optionsFunc.bind(chart);\n*/\nnv.utils.optionsFunc = function(args) {\n    if (args) {\n        d3.map(args).forEach((function(key,value) {\n            if (nv.utils.isFunction(this[key])) {\n                this[key](value);\n            }\n        }).bind(this));\n    }\n    return this;\n};\n\n\n/*\nnumTicks:  requested number of ticks\ndata:  the chart data\n\nreturns the number of ticks to actually use on X axis, based on chart data\nto avoid duplicate ticks with the same value\n*/\nnv.utils.calcTicksX = function(numTicks, data) {\n    // find max number of values from all data streams\n    var numValues = 1;\n    var i = 0;\n    for (i; i < data.length; i += 1) {\n        var stream_len = data[i] && data[i].values ? data[i].values.length : 0;\n        numValues = stream_len > numValues ? stream_len : numValues;\n    }\n    nv.log(\"Requested number of ticks: \", numTicks);\n    nv.log(\"Calculated max values to be: \", numValues);\n    // make sure we don't have more ticks than values to avoid duplicates\n    numTicks = numTicks > numValues ? numTicks = numValues - 1 : numTicks;\n    // make sure we have at least one tick\n    numTicks = numTicks < 1 ? 1 : numTicks;\n    // make sure it's an integer\n    numTicks = Math.floor(numTicks);\n    nv.log(\"Calculating tick count as: \", numTicks);\n    return numTicks;\n};\n\n\n/*\nreturns number of ticks to actually use on Y axis, based on chart data\n*/\nnv.utils.calcTicksY = function(numTicks, data) {\n    // currently uses the same logic but we can adjust here if needed later\n    return nv.utils.calcTicksX(numTicks, data);\n};\n\n\n/*\nAdd a particular option from an options object onto chart\nOptions exposed on a chart are a getter/setter function that returns chart\non set to mimic typical d3 option chaining, e.g. svg.option1('a').option2('b');\n\noption objects should be generated via Object.create() to provide\nthe option of manipulating data via get/set functions.\n*/\nnv.utils.initOption = function(chart, name) {\n    // if it's a call option, just call it directly, otherwise do get/set\n    if (chart._calls && chart._calls[name]) {\n        chart[name] = chart._calls[name];\n    } else {\n        chart[name] = function (_) {\n            if (!arguments.length) return chart._options[name];\n            chart._overrides[name] = true;\n            chart._options[name] = _;\n            return chart;\n        };\n        // calling the option as _option will ignore if set by option already\n        // so nvd3 can set options internally but the stop if set manually\n        chart['_' + name] = function(_) {\n            if (!arguments.length) return chart._options[name];\n            if (!chart._overrides[name]) {\n                chart._options[name] = _;\n            }\n            return chart;\n        }\n    }\n};\n\n\n/*\nAdd all options in an options object to the chart\n*/\nnv.utils.initOptions = function(chart) {\n    chart._overrides = chart._overrides || {};\n    var ops = Object.getOwnPropertyNames(chart._options || {});\n    var calls = Object.getOwnPropertyNames(chart._calls || {});\n    ops = ops.concat(calls);\n    for (var i in ops) {\n        nv.utils.initOption(chart, ops[i]);\n    }\n};\n\n\n/*\nInherit options from a D3 object\nd3.rebind makes calling the function on target actually call it on source\nAlso use _d3options so we can track what we inherit for documentation and chained inheritance\n*/\nnv.utils.inheritOptionsD3 = function(target, d3_source, oplist) {\n    target._d3options = oplist.concat(target._d3options || []);\n    // Find unique d3 options (string) and update d3options\n    target._d3options = (target._d3options || []).filter(function(item, i, ar){ return ar.indexOf(item) === i; });\n    oplist.unshift(d3_source);\n    oplist.unshift(target);\n    d3.rebind.apply(this, oplist);\n};\n\n\n/*\nRemove duplicates from an array\n*/\nnv.utils.arrayUnique = function(a) {\n    return a.sort().filter(function(item, pos) {\n        return !pos || item != a[pos - 1];\n    });\n};\n\n\n/*\nKeeps a list of custom symbols to draw from in addition to d3.svg.symbol\nNecessary since d3 doesn't let you extend its list -_-\nAdd new symbols by doing nv.utils.symbols.set('name', function(size){...});\n*/\nnv.utils.symbolMap = d3.map();\n\n\n/*\nReplaces d3.svg.symbol so that we can look both there and our own map\n */\nnv.utils.symbol = function() {\n    var type,\n        size = 64;\n    function symbol(d,i) {\n        var t = type.call(this,d,i);\n        var s = size.call(this,d,i);\n        if (d3.svg.symbolTypes.indexOf(t) !== -1) {\n            return d3.svg.symbol().type(t).size(s)();\n        } else {\n            return nv.utils.symbolMap.get(t)(s);\n        }\n    }\n    symbol.type = function(_) {\n        if (!arguments.length) return type;\n        type = d3.functor(_);\n        return symbol;\n    };\n    symbol.size = function(_) {\n        if (!arguments.length) return size;\n        size = d3.functor(_);\n        return symbol;\n    };\n    return symbol;\n};\n\n\n/*\nInherit option getter/setter functions from source to target\nd3.rebind makes calling the function on target actually call it on source\nAlso track via _inherited and _d3options so we can track what we inherit\nfor documentation generation purposes and chained inheritance\n*/\nnv.utils.inheritOptions = function(target, source) {\n    // inherit all the things\n    var ops = Object.getOwnPropertyNames(source._options || {});\n    var calls = Object.getOwnPropertyNames(source._calls || {});\n    var inherited = source._inherited || [];\n    var d3ops = source._d3options || [];\n    var args = ops.concat(calls).concat(inherited).concat(d3ops);\n    args.unshift(source);\n    args.unshift(target);\n    d3.rebind.apply(this, args);\n    // pass along the lists to keep track of them, don't allow duplicates\n    target._inherited = nv.utils.arrayUnique(ops.concat(calls).concat(inherited).concat(ops).concat(target._inherited || []));\n    target._d3options = nv.utils.arrayUnique(d3ops.concat(target._d3options || []));\n};\n\n\n/*\nRuns common initialize code on the svg before the chart builds\n*/\nnv.utils.initSVG = function(svg) {\n    svg.classed({'nvd3-svg':true});\n};\n\n\n/*\nSanitize and provide default for the container height.\n*/\nnv.utils.sanitizeHeight = function(height, container) {\n    return (height || parseInt(container.style('height'), 10) || 400);\n};\n\n\n/*\nSanitize and provide default for the container width.\n*/\nnv.utils.sanitizeWidth = function(width, container) {\n    return (width || parseInt(container.style('width'), 10) || 960);\n};\n\n\n/*\nCalculate the available height for a chart.\n*/\nnv.utils.availableHeight = function(height, container, margin) {\n    return Math.max(0,nv.utils.sanitizeHeight(height, container) - margin.top - margin.bottom);\n};\n\n/*\nCalculate the available width for a chart.\n*/\nnv.utils.availableWidth = function(width, container, margin) {\n    return Math.max(0,nv.utils.sanitizeWidth(width, container) - margin.left - margin.right);\n};\n\n/*\nClear any rendered chart components and display a chart's 'noData' message\n*/\nnv.utils.noData = function(chart, container) {\n    var opt = chart.options(),\n        margin = opt.margin(),\n        noData = opt.noData(),\n        data = (noData == null) ? [\"No Data Available.\"] : [noData],\n        height = nv.utils.availableHeight(null, container, margin),\n        width = nv.utils.availableWidth(null, container, margin),\n        x = margin.left + width/2,\n        y = margin.top + height/2;\n\n    //Remove any previously created chart components\n    container.selectAll('g').remove();\n\n    var noDataText = container.selectAll('.nv-noData').data(data);\n\n    noDataText.enter().append('text')\n        .attr('class', 'nvd3 nv-noData')\n        .attr('dy', '-.7em')\n        .style('text-anchor', 'middle');\n\n    noDataText\n        .attr('x', x)\n        .attr('y', y)\n        .text(function(t){ return t; });\n};\n\n/*\n Wrap long labels.\n */\nnv.utils.wrapTicks = function (text, width) {\n    text.each(function() {\n        var text = d3.select(this),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineNumber = 0,\n            lineHeight = 1.1,\n            y = text.attr(\"y\"),\n            dy = parseFloat(text.attr(\"dy\")),\n            tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(\" \"));\n            if (tspan.node().getComputedTextLength() > width) {\n                line.pop();\n                tspan.text(line.join(\" \"));\n                line = [word];\n                tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n            }\n        }\n    });\n};\n\n/*\nCheck equality of 2 array\n*/\nnv.utils.arrayEquals = function (array1, array2) {\n    if (array1 === array2)\n        return true;\n\n    if (!array1 || !array2)\n        return false;\n\n    // compare lengths - can save a lot of time\n    if (array1.length != array2.length)\n        return false;\n\n    for (var i = 0,\n        l = array1.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (array1[i] instanceof Array && array2[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!nv.arrayEquals(array1[i], array2[i]))\n                return false;\n        } else if (array1[i] != array2[i]) {\n            // Warning - two different object instances will never be equal: {x:20} != {x:20}\n            return false;\n        }\n    }\n    return true;\n};\n\n/*\n Check if a point within an arc\n */\nnv.utils.pointIsInArc = function(pt, ptData, d3Arc) {\n    // Center of the arc is assumed to be 0,0\n    // (pt.x, pt.y) are assumed to be relative to the center\n    var r1 = d3Arc.innerRadius()(ptData), // Note: Using the innerRadius\n      r2 = d3Arc.outerRadius()(ptData),\n      theta1 = d3Arc.startAngle()(ptData),\n      theta2 = d3Arc.endAngle()(ptData);\n\n    var dist = pt.x * pt.x + pt.y * pt.y,\n      angle = Math.atan2(pt.x, -pt.y); // Note: different coordinate system.\n\n    angle = (angle < 0) ? (angle + Math.PI * 2) : angle;\n\n    return (r1 * r1 <= dist) && (dist <= r2 * r2) &&\n      (theta1 <= angle) && (angle <= theta2);\n};\n\nnv.models.axis = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var axis = d3.svg.axis();\n    var scale = d3.scale.linear();\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 75 //only used for tickLabel currently\n        , height = 60 //only used for tickLabel currently\n        , axisLabelText = null\n        , showMaxMin = true //TODO: showMaxMin should be disabled on all ordinal scaled axes\n        , rotateLabels = 0\n        , rotateYLabel = true\n        , staggerLabels = false\n        , isOrdinal = false\n        , ticks = null\n        , axisLabelDistance = 0\n        , fontSize = undefined\n        , duration = 250\n        , dispatch = d3.dispatch('renderEnd')\n        , tickFormatMaxMin\n        ;\n    axis\n        .scale(scale)\n        .orient('bottom')\n        .tickFormat(function(d) { return d })\n    ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var scale0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-axis').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-axis');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            if (ticks !== null)\n                axis.ticks(ticks);\n            else if (axis.orient() == 'top' || axis.orient() == 'bottom')\n                axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100);\n\n            //TODO: consider calculating width/height based on whether or not label is added, for reference in charts using this component\n            g.watchTransition(renderWatch, 'axis').call(axis);\n\n            scale0 = scale0 || axis.scale();\n\n            var fmt = axis.tickFormat();\n            if (fmt == null) {\n                fmt = scale0.tickFormat();\n            }\n\n            var axisLabel = g.selectAll('text.nv-axislabel')\n                .data([axisLabelText || null]);\n            axisLabel.exit().remove();\n\n            //only skip when fontSize is undefined so it can be cleared with a null or blank string\n            if (fontSize !== undefined) {\n                g.selectAll('g').select(\"text\").style('font-size', fontSize);\n            }\n\n            var xLabelMargin;\n            var axisMaxMin;\n            var w;\n            switch (axis.orient()) {\n                case 'top':\n                    axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n                  w = 0;\n                  if (scale.range().length === 1) {\n                    w = isOrdinal ? scale.range()[0] * 2 + scale.rangeBand() : 0;\n                  } else if (scale.range().length === 2) {\n                    w = isOrdinal ? scale.range()[0] + scale.range()[1] + scale.rangeBand() : scale.range()[1];\n                  } else if ( scale.range().length > 2){\n                    w = scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]);\n                  };\n                    axisLabel\n                        .attr('text-anchor', 'middle')\n                        .attr('y', 0)\n                        .attr('x', w/2);\n                    if (showMaxMin) {\n                        axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                            .data(scale.domain());\n                        axisMaxMin.enter().append('g').attr('class',function(d,i){\n                                return ['nv-axisMaxMin','nv-axisMaxMin-x',(i == 0 ? 'nv-axisMin-x':'nv-axisMax-x')].join(' ')\n                        }).append('text');\n                        axisMaxMin.exit().remove();\n                        axisMaxMin\n                            .attr('transform', function(d,i) {\n                                return 'translate(' + nv.utils.NaNtoZero(scale(d)) + ',0)'\n                            })\n                            .select('text')\n                            .attr('dy', '-0.5em')\n                            .attr('y', -axis.tickPadding())\n                            .attr('text-anchor', 'middle')\n                            .text(function(d,i) {\n                                var formatter = tickFormatMaxMin || fmt;\n                                var v = formatter(d);\n                                return ('' + v).match('NaN') ? '' : v;\n                            });\n                        axisMaxMin.watchTransition(renderWatch, 'min-max top')\n                            .attr('transform', function(d,i) {\n                                return 'translate(' + nv.utils.NaNtoZero(scale.range()[i]) + ',0)'\n                            });\n                    }\n                    break;\n                case 'bottom':\n                    xLabelMargin = axisLabelDistance + 36;\n                    var maxTextWidth = 30;\n                    var textHeight = 0;\n                    var xTicks = g.selectAll('g').select(\"text\");\n                    var rotateLabelsRule = '';\n                    if (rotateLabels%360) {\n                        //Reset transform on ticks so textHeight can be calculated correctly\n                        xTicks.attr('transform', '');\n                        //Calculate the longest xTick width\n                        xTicks.each(function(d,i){\n                            var box = this.getBoundingClientRect();\n                            var width = box.width;\n                            textHeight = box.height;\n                            if(width > maxTextWidth) maxTextWidth = width;\n                        });\n                        rotateLabelsRule = 'rotate(' + rotateLabels + ' 0,' + (textHeight/2 + axis.tickPadding()) + ')';\n                        //Convert to radians before calculating sin. Add 30 to margin for healthy padding.\n                        var sin = Math.abs(Math.sin(rotateLabels*Math.PI/180));\n                        xLabelMargin = (sin ? sin*maxTextWidth : maxTextWidth)+30;\n                        //Rotate all xTicks\n                        xTicks\n                            .attr('transform', rotateLabelsRule)\n                            .style('text-anchor', rotateLabels%360 > 0 ? 'start' : 'end');\n                    } else {\n                        if (staggerLabels) {\n                            xTicks\n                                .attr('transform', function(d,i) {\n                                    return 'translate(0,' + (i % 2 == 0 ? '0' : '12') + ')'\n                                });\n                        } else {\n                            xTicks.attr('transform', \"translate(0,0)\");\n                        }\n                    }\n                    axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n                    w = 0;\n                    if (scale.range().length === 1) {\n                        w = isOrdinal ? scale.range()[0] * 2 + scale.rangeBand() : 0;\n                    } else if (scale.range().length === 2) {\n                        w = isOrdinal ? scale.range()[0] + scale.range()[1] + scale.rangeBand() : scale.range()[1];\n                    } else if ( scale.range().length > 2){\n                        w = scale.range()[scale.range().length-1]+(scale.range()[1]-scale.range()[0]);\n                    };\n                    axisLabel\n                        .attr('text-anchor', 'middle')\n                        .attr('y', xLabelMargin)\n                        .attr('x', w/2);\n                    if (showMaxMin) {\n                        //if (showMaxMin && !isOrdinal) {\n                        axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                            //.data(scale.domain())\n                            .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);\n                        axisMaxMin.enter().append('g').attr('class',function(d,i){\n                                return ['nv-axisMaxMin','nv-axisMaxMin-x',(i == 0 ? 'nv-axisMin-x':'nv-axisMax-x')].join(' ')\n                        }).append('text');\n                        axisMaxMin.exit().remove();\n                        axisMaxMin\n                            .attr('transform', function(d,i) {\n                                return 'translate(' + nv.utils.NaNtoZero((scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0))) + ',0)'\n                            })\n                            .select('text')\n                            .attr('dy', '.71em')\n                            .attr('y', axis.tickPadding())\n                            .attr('transform', rotateLabelsRule)\n                            .style('text-anchor', rotateLabels ? (rotateLabels%360 > 0 ? 'start' : 'end') : 'middle')\n                            .text(function(d,i) {\n                                var formatter = tickFormatMaxMin || fmt;\n                                var v = formatter(d);\n                                return ('' + v).match('NaN') ? '' : v;\n                            });\n                        axisMaxMin.watchTransition(renderWatch, 'min-max bottom')\n                            .attr('transform', function(d,i) {\n                                return 'translate(' + nv.utils.NaNtoZero((scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0))) + ',0)'\n                            });\n                    }\n\n                    break;\n                case 'right':\n                    axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n                    axisLabel\n                        .style('text-anchor', rotateYLabel ? 'middle' : 'begin')\n                        .attr('transform', rotateYLabel ? 'rotate(90)' : '')\n                        .attr('y', rotateYLabel ? (-Math.max(margin.right, width) + 12 - (axisLabelDistance || 0)) : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\n                        .attr('x', rotateYLabel ? (d3.max(scale.range()) / 2) : axis.tickPadding());\n                    if (showMaxMin) {\n                        axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                            .data(scale.domain());\n                       \taxisMaxMin.enter().append('g').attr('class',function(d,i){\n                                return ['nv-axisMaxMin','nv-axisMaxMin-y',(i == 0 ? 'nv-axisMin-y':'nv-axisMax-y')].join(' ')\n                        }).append('text')\n                            .style('opacity', 0);\n                        axisMaxMin.exit().remove();\n                        axisMaxMin\n                            .attr('transform', function(d,i) {\n                                return 'translate(0,' + nv.utils.NaNtoZero(scale(d)) + ')'\n                            })\n                            .select('text')\n                            .attr('dy', '.32em')\n                            .attr('y', 0)\n                            .attr('x', axis.tickPadding())\n                            .style('text-anchor', 'start')\n                            .text(function(d, i) {\n                                var formatter = tickFormatMaxMin || fmt;\n                                var v = formatter(d);\n                                return ('' + v).match('NaN') ? '' : v;\n                            });\n                        axisMaxMin.watchTransition(renderWatch, 'min-max right')\n                            .attr('transform', function(d,i) {\n                                return 'translate(0,' + nv.utils.NaNtoZero(scale.range()[i]) + ')'\n                            })\n                            .select('text')\n                            .style('opacity', 1);\n                    }\n                    break;\n                case 'left':\n                    /*\n                     //For dynamically placing the label. Can be used with dynamically-sized chart axis margins\n                     var yTicks = g.selectAll('g').select(\"text\");\n                     yTicks.each(function(d,i){\n                     var labelPadding = this.getBoundingClientRect().width + axis.tickPadding() + 16;\n                     if(labelPadding > width) width = labelPadding;\n                     });\n                     */\n                    axisLabel.enter().append('text').attr('class', 'nv-axislabel');\n                    axisLabel\n                        .style('text-anchor', rotateYLabel ? 'middle' : 'end')\n                        .attr('transform', rotateYLabel ? 'rotate(-90)' : '')\n                        .attr('y', rotateYLabel ? (-Math.max(margin.left, width) + 25 - (axisLabelDistance || 0)) : -10)\n                        .attr('x', rotateYLabel ? (-d3.max(scale.range()) / 2) : -axis.tickPadding());\n                    if (showMaxMin) {\n                        axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')\n                            .data(scale.domain());\n                        axisMaxMin.enter().append('g').attr('class',function(d,i){\n                                return ['nv-axisMaxMin','nv-axisMaxMin-y',(i == 0 ? 'nv-axisMin-y':'nv-axisMax-y')].join(' ')\n                        }).append('text')\n                            .style('opacity', 0);\n                        axisMaxMin.exit().remove();\n                        axisMaxMin\n                            .attr('transform', function(d,i) {\n                                return 'translate(0,' + nv.utils.NaNtoZero(scale0(d)) + ')'\n                            })\n                            .select('text')\n                            .attr('dy', '.32em')\n                            .attr('y', 0)\n                            .attr('x', -axis.tickPadding())\n                            .attr('text-anchor', 'end')\n                            .text(function(d,i) {\n                                var formatter = tickFormatMaxMin || fmt;\n                                var v = formatter(d);\n                                return ('' + v).match('NaN') ? '' : v;\n                            });\n                        axisMaxMin.watchTransition(renderWatch, 'min-max right')\n                            .attr('transform', function(d,i) {\n                                return 'translate(0,' + nv.utils.NaNtoZero(scale.range()[i]) + ')'\n                            })\n                            .select('text')\n                            .style('opacity', 1);\n                    }\n                    break;\n            }\n            axisLabel.text(function(d) { return d });\n\n            if (showMaxMin && (axis.orient() === 'left' || axis.orient() === 'right')) {\n                //check if max and min overlap other values, if so, hide the values that overlap\n                g.selectAll('g') // the g's wrapping each tick\n                    .each(function(d,i) {\n                        d3.select(this).select('text').attr('opacity', 1);\n                        if (scale(d) < scale.range()[1] + 10 || scale(d) > scale.range()[0] - 10) { // 10 is assuming text height is 16... if d is 0, leave it!\n                            if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n                                d3.select(this).attr('opacity', 0);\n\n                            d3.select(this).select('text').attr('opacity', 0); // Don't remove the ZERO line!!\n                        }\n                    });\n\n                //if Max and Min = 0 only show min, Issue #281\n                if (scale.domain()[0] == scale.domain()[1] && scale.domain()[0] == 0) {\n                    wrap.selectAll('g.nv-axisMaxMin').style('opacity', function (d, i) {\n                        return !i ? 1 : 0\n                    });\n                }\n            }\n\n            if (showMaxMin && (axis.orient() === 'top' || axis.orient() === 'bottom')) {\n                var maxMinRange = [];\n                wrap.selectAll('g.nv-axisMaxMin')\n                    .each(function(d,i) {\n                        try {\n                            if (i) // i== 1, max position\n                                maxMinRange.push(scale(d) - this.getBoundingClientRect().width - 4);  //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n                            else // i==0, min position\n                                maxMinRange.push(scale(d) + this.getBoundingClientRect().width + 4)\n                        }catch (err) {\n                            if (i) // i== 1, max position\n                                maxMinRange.push(scale(d) - 4);  //assuming the max and min labels are as wide as the next tick (with an extra 4 pixels just in case)\n                            else // i==0, min position\n                                maxMinRange.push(scale(d) + 4);\n                        }\n                    });\n                // the g's wrapping each tick\n                g.selectAll('g').each(function(d, i) {\n                    if (scale(d) < maxMinRange[0] || scale(d) > maxMinRange[1]) {\n                        if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\n                            d3.select(this).remove();\n                        else\n                            d3.select(this).select('text').remove(); // Don't remove the ZERO line!!\n                    }\n                });\n            }\n\n            //Highlight zero tick line\n            g.selectAll('.tick')\n                .filter(function (d) {\n                    /*\n                    The filter needs to return only ticks at or near zero.\n                    Numbers like 0.00001 need to count as zero as well,\n                    and the arithmetic trick below solves that.\n                    */\n                    return !parseFloat(Math.round(d * 100000) / 1000000) && (d !== undefined)\n                })\n                .classed('zero', true);\n\n            //store old scales for use in transitions on update\n            scale0 = scale.copy();\n\n        });\n\n        renderWatch.renderEnd('axis immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.axis = axis;\n    chart.dispatch = dispatch;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        axisLabelDistance: {get: function(){return axisLabelDistance;}, set: function(_){axisLabelDistance=_;}},\n        staggerLabels:     {get: function(){return staggerLabels;}, set: function(_){staggerLabels=_;}},\n        rotateLabels:      {get: function(){return rotateLabels;}, set: function(_){rotateLabels=_;}},\n        rotateYLabel:      {get: function(){return rotateYLabel;}, set: function(_){rotateYLabel=_;}},\n        showMaxMin:        {get: function(){return showMaxMin;}, set: function(_){showMaxMin=_;}},\n        axisLabel:         {get: function(){return axisLabelText;}, set: function(_){axisLabelText=_;}},\n        height:            {get: function(){return height;}, set: function(_){height=_;}},\n        ticks:             {get: function(){return ticks;}, set: function(_){ticks=_;}},\n        width:             {get: function(){return width;}, set: function(_){width=_;}},\n        fontSize:          {get: function(){return fontSize;}, set: function(_){fontSize=_;}},\n        tickFormatMaxMin:  {get: function(){return tickFormatMaxMin;}, set: function(_){tickFormatMaxMin=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top !== undefined    ? _.top    : margin.top;\n            margin.right  = _.right !== undefined  ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left !== undefined   ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration=_;\n            renderWatch.reset(duration);\n        }},\n        scale: {get: function(){return scale;}, set: function(_){\n            scale = _;\n            axis.scale(scale);\n            isOrdinal = typeof scale.rangeBands === 'function';\n            nv.utils.inheritOptionsD3(chart, scale, ['domain', 'range', 'rangeBand', 'rangeBands']);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    nv.utils.inheritOptionsD3(chart, axis, ['orient', 'tickValues', 'tickSubdivide', 'tickSize', 'tickPadding', 'tickFormat']);\n    nv.utils.inheritOptionsD3(chart, scale, ['domain', 'range', 'rangeBand', 'rangeBands']);\n\n    return chart;\n};\nnv.models.boxPlot = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0},\n        width = 960,\n        height = 500,\n        id = Math.floor(Math.random() * 10000), // Create semi-unique ID in case user doesn't select one\n        xScale = d3.scale.ordinal(),\n        yScale = d3.scale.linear(),\n        getX  = function(d) { return d.label }, // Default data model selectors.\n        getQ1 = function(d) { return d.values.Q1 },\n        getQ2 = function(d) { return d.values.Q2 },\n        getQ3 = function(d) { return d.values.Q3 },\n        getWl = function(d) { return d.values.whisker_low },\n        getWh = function(d) { return d.values.whisker_high },\n        getColor = function(d) { return d.color },\n        getOlItems  = function(d) { return d.values.outliers },\n        getOlValue = function(d, i, j) { return d },\n        getOlLabel = function(d, i, j) { return d },\n        getOlColor = function(d, i, j) { return undefined },\n        color = nv.utils.defaultColor(),\n        container = null,\n        xDomain, xRange,\n        yDomain, yRange,\n        dispatch = d3.dispatch('elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd'),\n        duration = 250,\n        maxBoxWidth = null;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var xScale0, yScale0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            // Setup Scales\n            xScale.domain(xDomain || data.map(function(d,i) { return getX(d,i); }))\n                .rangeBands(xRange || [0, availableWidth], 0.1);\n\n            // if we know yDomain, no need to calculate\n            var yData = []\n            if (!yDomain) {\n                // (y-range is based on quartiles, whiskers and outliers)\n                var values = [], yMin, yMax;\n                data.forEach(function (d, i) {\n                    var q1 = getQ1(d), q3 = getQ3(d), wl = getWl(d), wh = getWh(d);\n                    var olItems = getOlItems(d);\n                    if (olItems) {\n                        olItems.forEach(function (e, i) {\n                            values.push(getOlValue(e, i, undefined));\n                        });\n                    }\n                    if (wl) { values.push(wl) }\n                    if (q1) { values.push(q1) }\n                    if (q3) { values.push(q3) }\n                    if (wh) { values.push(wh) }\n                });\n                yMin = d3.min(values);\n                yMax = d3.max(values);\n                yData = [ yMin, yMax ] ;\n            }\n\n            yScale.domain(yDomain || yData);\n            yScale.range(yRange || [availableHeight, 0]);\n\n            //store old scales if they exist\n            xScale0 = xScale0 || xScale;\n            yScale0 = yScale0 || yScale.copy().range([yScale(0),yScale(0)]);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap');\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            var boxplots = wrap.selectAll('.nv-boxplot').data(function(d) { return d });\n            var boxEnter = boxplots.enter().append('g').style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n            boxplots\n                .attr('class', 'nv-boxplot')\n                .attr('transform', function(d,i,j) { return 'translate(' + (xScale(getX(d,i)) + xScale.rangeBand() * 0.05) + ', 0)'; })\n                .classed('hover', function(d) { return d.hover });\n            boxplots\n                .watchTransition(renderWatch, 'nv-boxplot: boxplots')\n                .style('stroke-opacity', 1)\n                .style('fill-opacity', 0.75)\n                .delay(function(d,i) { return i * duration / data.length })\n                .attr('transform', function(d,i) {\n                    return 'translate(' + (xScale(getX(d,i)) + xScale.rangeBand() * 0.05) + ', 0)';\n                });\n            boxplots.exit().remove();\n\n            // ----- add the SVG elements for each boxPlot -----\n\n            // conditionally append whisker lines\n            boxEnter.each(function(d,i) {\n                var box = d3.select(this);\n                [getWl, getWh].forEach(function (f) {\n                    if (f(d) !== undefined && f(d) !== null) {\n                        var key = (f === getWl) ? 'low' : 'high';\n                        box.append('line')\n                          .style('stroke', getColor(d) || color(d,i))\n                          .attr('class', 'nv-boxplot-whisker nv-boxplot-' + key);\n                        box.append('line')\n                          .style('stroke', getColor(d) || color(d,i))\n                          .attr('class', 'nv-boxplot-tick nv-boxplot-' + key);\n                    }\n                });\n            });\n\n            var box_width = function() { return (maxBoxWidth === null ? xScale.rangeBand() * 0.9 : Math.min(75, xScale.rangeBand() * 0.9)); };\n            var box_left  = function() { return xScale.rangeBand() * 0.45 - box_width()/2; };\n            var box_right = function() { return xScale.rangeBand() * 0.45 + box_width()/2; };\n\n            // update whisker lines and ticks\n            [getWl, getWh].forEach(function (f) {\n                var key = (f === getWl) ? 'low' : 'high';\n                var endpoint = (f === getWl) ? getQ1 : getQ3;\n                boxplots.select('line.nv-boxplot-whisker.nv-boxplot-' + key)\n                  .watchTransition(renderWatch, 'nv-boxplot: boxplots')\n                    .attr('x1', xScale.rangeBand() * 0.45 )\n                    .attr('y1', function(d,i) { return yScale(f(d)); })\n                    .attr('x2', xScale.rangeBand() * 0.45 )\n                    .attr('y2', function(d,i) { return yScale(endpoint(d)); });\n                boxplots.select('line.nv-boxplot-tick.nv-boxplot-' + key)\n                  .watchTransition(renderWatch, 'nv-boxplot: boxplots')\n                    .attr('x1', box_left )\n                    .attr('y1', function(d,i) { return yScale(f(d)); })\n                    .attr('x2', box_right )\n                    .attr('y2', function(d,i) { return yScale(f(d)); });\n            });\n\n            [getWl, getWh].forEach(function (f) {\n                var key = (f === getWl) ? 'low' : 'high';\n                boxEnter.selectAll('.nv-boxplot-' + key)\n                  .on('mouseover', function(d,i,j) {\n                      d3.select(this).classed('hover', true);\n                      dispatch.elementMouseover({\n                          series: { key: f(d), color: getColor(d) || color(d,j) },\n                          e: d3.event\n                      });\n                  })\n                  .on('mouseout', function(d,i,j) {\n                      d3.select(this).classed('hover', false);\n                      dispatch.elementMouseout({\n                          series: { key: f(d), color: getColor(d) || color(d,j) },\n                          e: d3.event\n                      });\n                  })\n                  .on('mousemove', function(d,i) {\n                      dispatch.elementMousemove({e: d3.event});\n                  });\n            });\n\n            // boxes\n            boxEnter.append('rect')\n                .attr('class', 'nv-boxplot-box')\n                // tooltip events\n                .on('mouseover', function(d,i) {\n                    d3.select(this).classed('hover', true);\n                    dispatch.elementMouseover({\n                        key: getX(d),\n                        value: getX(d),\n                        series: [\n                            { key: 'Q3', value: getQ3(d), color: getColor(d) || color(d,i) },\n                            { key: 'Q2', value: getQ2(d), color: getColor(d) || color(d,i) },\n                            { key: 'Q1', value: getQ1(d), color: getColor(d) || color(d,i) }\n                        ],\n                        data: d,\n                        index: i,\n                        e: d3.event\n                    });\n                })\n                .on('mouseout', function(d,i) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.elementMouseout({\n                        key: getX(d),\n                        value: getX(d),\n                        series: [\n                            { key: 'Q3', value: getQ3(d), color: getColor(d) || color(d,i) },\n                            { key: 'Q2', value: getQ2(d), color: getColor(d) || color(d,i) },\n                            { key: 'Q1', value: getQ1(d), color: getColor(d) || color(d,i) }\n                        ],\n                        data: d,\n                        index: i,\n                        e: d3.event\n                    });\n                })\n                .on('mousemove', function(d,i) {\n                    dispatch.elementMousemove({e: d3.event});\n                });\n\n            // box transitions\n            boxplots.select('rect.nv-boxplot-box')\n              .watchTransition(renderWatch, 'nv-boxplot: boxes')\n                .attr('y', function(d,i) { return yScale(getQ3(d)); })\n                .attr('width', box_width)\n                .attr('x', box_left )\n                .attr('height', function(d,i) { return Math.abs(yScale(getQ3(d)) - yScale(getQ1(d))) || 1 })\n                .style('fill', function(d,i) { return getColor(d) || color(d,i) })\n                .style('stroke', function(d,i) { return getColor(d) || color(d,i) });\n\n            // median line\n            boxEnter.append('line').attr('class', 'nv-boxplot-median');\n\n            boxplots.select('line.nv-boxplot-median')\n              .watchTransition(renderWatch, 'nv-boxplot: boxplots line')\n                .attr('x1', box_left)\n                .attr('y1', function(d,i) { return yScale(getQ2(d)); })\n                .attr('x2', box_right)\n                .attr('y2', function(d,i) { return yScale(getQ2(d)); });\n\n            // outliers\n            var outliers = boxplots.selectAll('.nv-boxplot-outlier').data(function(d) {\n                return getOlItems(d) || [];\n            });\n            outliers.enter().append('circle')\n                .style('fill', function(d,i,j) { return getOlColor(d,i,j) || color(d,j) })\n                .style('stroke', function(d,i,j) { return getOlColor(d,i,j) || color(d,j) })\n                .style('z-index', 9000)\n                .on('mouseover', function(d,i,j) {\n                    d3.select(this).classed('hover', true);\n                    dispatch.elementMouseover({\n                        series: { key: getOlLabel(d,i,j), color: getOlColor(d,i,j) || color(d,j) },\n                        e: d3.event\n                    });\n                })\n                .on('mouseout', function(d,i,j) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.elementMouseout({\n                        series: { key: getOlLabel(d,i,j), color: getOlColor(d,i,j) || color(d,j) },\n                        e: d3.event\n                    });\n                })\n                .on('mousemove', function(d,i) {\n                    dispatch.elementMousemove({e: d3.event});\n                });\n            outliers.attr('class', 'nv-boxplot-outlier');\n            outliers\n              .watchTransition(renderWatch, 'nv-boxplot: nv-boxplot-outlier')\n                .attr('cx', xScale.rangeBand() * 0.45)\n                .attr('cy', function(d,i,j) { return yScale(getOlValue(d,i,j)); })\n                .attr('r', '3');\n            outliers.exit().remove();\n\n            //store old scales for use in transitions on update\n            xScale0 = xScale.copy();\n            yScale0 = yScale.copy();\n        });\n\n        renderWatch.renderEnd('nv-boxplot immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:       {get: function(){return width;}, set: function(_){width=_;}},\n        height:      {get: function(){return height;}, set: function(_){height=_;}},\n        maxBoxWidth: {get: function(){return maxBoxWidth;}, set: function(_){maxBoxWidth=_;}},\n        x:           {get: function(){return getX;}, set: function(_){getX=_;}},\n        q1: {get: function(){return getQ1;}, set: function(_){getQ1=_;}},\n        q2: {get: function(){return getQ2;}, set: function(_){getQ2=_;}},\n        q3: {get: function(){return getQ3;}, set: function(_){getQ3=_;}},\n        wl: {get: function(){return getWl;}, set: function(_){getWl=_;}},\n        wh: {get: function(){return getWh;}, set: function(_){getWh=_;}},\n        itemColor:    {get: function(){return getColor;}, set: function(_){getColor=_;}},\n        outliers:     {get: function(){return getOlItems;}, set: function(_){getOlItems=_;}},\n        outlierValue: {get: function(){return getOlValue;}, set: function(_){getOlValue=_;}},\n        outlierLabel: {get: function(){return getOlLabel;}, set: function(_){getOlLabel=_;}},\n        outlierColor: {get: function(){return getOlColor;}, set: function(_){getOlColor=_;}},\n        xScale:  {get: function(){return xScale;}, set: function(_){xScale=_;}},\n        yScale:  {get: function(){return yScale;}, set: function(_){yScale=_;}},\n        xDomain: {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain: {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:  {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:  {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        id:          {get: function(){return id;}, set: function(_){id=_;}},\n        // rectClass: {get: function(){return rectClass;}, set: function(_){rectClass=_;}},\n        y: {\n            get: function() {\n                console.warn('BoxPlot \\'y\\' chart option is deprecated. Please use model overrides instead.');\n                return {};\n            },\n            set: function(_) {\n                console.warn('BoxPlot \\'y\\' chart option is deprecated. Please use model overrides instead.');\n            }\n        },\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\nnv.models.boxPlotChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var boxplot = nv.models.boxPlot(),\n        xAxis = nv.models.axis(),\n        yAxis = nv.models.axis();\n\n    var margin = {top: 15, right: 10, bottom: 50, left: 60},\n        width = null,\n        height = null,\n        color = nv.utils.getColor(),\n        showXAxis = true,\n        showYAxis = true,\n        rightAlignYAxis = false,\n        staggerLabels = false,\n        tooltip = nv.models.tooltip(),\n        x, y,\n        noData = 'No Data Available.',\n        dispatch = d3.dispatch('beforeUpdate', 'renderEnd'),\n        duration = 250;\n\n    xAxis\n        .orient('bottom')\n        .showMaxMin(false)\n        .tickFormat(function(d) { return d })\n    ;\n    yAxis\n        .orient((rightAlignYAxis) ? 'right' : 'left')\n        .tickFormat(d3.format(',.1f'))\n    ;\n\n    tooltip.duration(0);\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(boxplot);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this), that = this;\n            nv.utils.initSVG(container);\n            var availableWidth = (width  || parseInt(container.style('width')) || 960) - margin.left - margin.right;\n            var availableHeight = (height || parseInt(container.style('height')) || 400) - margin.top - margin.bottom;\n\n            chart.update = function() {\n                dispatch.beforeUpdate();\n                container.transition().duration(duration).call(chart);\n            };\n            chart.container = this;\n\n            // TODO still need to find a way to validate quartile data presence using boxPlot callbacks.\n            // Display No Data message if there's nothing to show. (quartiles required at minimum).\n            if (!data || !data.length) {\n                var noDataText = container.selectAll('.nv-noData').data([noData]);\n\n                noDataText.enter().append('text')\n                    .attr('class', 'nvd3 nv-noData')\n                    .attr('dy', '-.7em')\n                    .style('text-anchor', 'middle');\n\n                noDataText\n                    .attr('x', margin.left + availableWidth / 2)\n                    .attr('y', margin.top + availableHeight / 2)\n                    .text(function(d) { return d });\n\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = boxplot.xScale();\n            y = boxplot.yScale().clamp(true);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-boxPlotWithAxes').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-boxPlotWithAxes').append('g');\n            var defsEnter = gEnter.append('defs');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis')\n                .append('g').attr('class', 'nv-zeroLine')\n                .append('line');\n\n            gEnter.append('g').attr('class', 'nv-barsWrap');\n            g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            if (rightAlignYAxis) {\n                g.select('.nv-y.nv-axis')\n                    .attr('transform', 'translate(' + availableWidth + ',0)');\n            }\n\n            // Main Chart Component(s)\n            boxplot.width(availableWidth).height(availableHeight);\n\n            var barsWrap = g.select('.nv-barsWrap')\n                .datum(data.filter(function(d) { return !d.disabled }))\n\n            barsWrap.transition().call(boxplot);\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-x-label-clip-' + boxplot.id())\n                .append('rect');\n\n            g.select('#nv-x-label-clip-' + boxplot.id() + ' rect')\n                .attr('width', x.rangeBand() * (staggerLabels ? 2 : 1))\n                .attr('height', 16)\n                .attr('x', -x.rangeBand() / (staggerLabels ? 1 : 2 ));\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    .ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight, 0);\n\n                g.select('.nv-x.nv-axis').attr('transform', 'translate(0,' + y.range()[0] + ')');\n                g.select('.nv-x.nv-axis').call(xAxis);\n\n                var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n                if (staggerLabels) {\n                    xTicks\n                        .selectAll('text')\n                        .attr('transform', function(d,i,j) { return 'translate(0,' + (j % 2 === 0 ? '5' : '17') + ')' })\n                }\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    .ticks( Math.floor(availableHeight/36) ) // can't use nv.utils.calcTicksY with Object data\n                    .tickSize( -availableWidth, 0);\n\n                g.select('.nv-y.nv-axis').call(yAxis);\n            }\n\n            // Zero line\n            g.select('.nv-zeroLine line')\n                .attr('x1',0)\n                .attr('x2',availableWidth)\n                .attr('y1', y(0))\n                .attr('y2', y(0))\n            ;\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n        });\n\n        renderWatch.renderEnd('nv-boxplot chart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    boxplot.dispatch.on('elementMouseover.tooltip', function(evt) {\n        tooltip.data(evt).hidden(false);\n    });\n\n    boxplot.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.data(evt).hidden(true);\n    });\n\n    boxplot.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.boxplot = boxplot;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        staggerLabels: {get: function(){return staggerLabels;}, set: function(_){staggerLabels=_;}},\n        showXAxis: {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis: {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        tooltipContent:    {get: function(){return tooltip;}, set: function(_){tooltip=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            boxplot.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            boxplot.color(color);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( (_) ? 'right' : 'left');\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, boxplot);\n    nv.utils.initOptions(chart);\n\n    return chart;\n}\n\n// Chart design based on the recommendations of Stephen Few. Implementation\n// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n// http://projects.instantcognition.com/protovis/bulletchart/\n\nnv.models.bullet = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , orient = 'left' // TODO top & bottom\n        , reverse = false\n        , ranges = function(d) { return d.ranges }\n        , markers = function(d) { return d.markers ? d.markers : [] }\n        , markerLines = function(d) { return d.markerLines ? d.markerLines : [0] }\n        , measures = function(d) { return d.measures }\n        , rangeLabels = function(d) { return d.rangeLabels ? d.rangeLabels : [] }\n        , markerLabels = function(d) { return d.markerLabels ? d.markerLabels : []  }\n        , markerLineLabels = function(d) { return d.markerLineLabels ? d.markerLineLabels : []  }\n        , measureLabels = function(d) { return d.measureLabels ? d.measureLabels : []  }\n        , forceX = [0] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n        , width = 380\n        , height = 30\n        , container = null\n        , tickFormat = null\n        , color = nv.utils.getColor(['#1f77b4'])\n        , dispatch = d3.dispatch('elementMouseover', 'elementMouseout', 'elementMousemove')\n        , defaultRangeLabels = [\"Maximum\", \"Mean\", \"Minimum\"]\n        , legacyRangeClassNames = [\"Max\", \"Avg\", \"Min\"]\n        , duration = 1000\n        ;\n\n    function sortLabels(labels, values){\n        var lz = labels.slice();\n        labels.sort(function(a, b){\n            var iA = lz.indexOf(a);\n            var iB = lz.indexOf(b);\n            return d3.descending(values[iA], values[iB]);\n        });\n    };\n\n    function chart(selection) {\n        selection.each(function(d, i) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            var rangez = ranges.call(this, d, i).slice(),\n                markerz = markers.call(this, d, i).slice(),\n                markerLinez = markerLines.call(this, d, i).slice(),\n                measurez = measures.call(this, d, i).slice(),\n                rangeLabelz = rangeLabels.call(this, d, i).slice(),\n                markerLabelz = markerLabels.call(this, d, i).slice(),\n                markerLineLabelz = markerLineLabels.call(this, d, i).slice(),\n                measureLabelz = measureLabels.call(this, d, i).slice();\n\n            // Sort labels according to their sorted values\n            sortLabels(rangeLabelz, rangez);\n            sortLabels(markerLabelz, markerz);\n            sortLabels(markerLineLabelz, markerLinez);\n            sortLabels(measureLabelz, measurez);\n\n            // sort values descending\n            rangez.sort(d3.descending);\n            markerz.sort(d3.descending);\n            markerLinez.sort(d3.descending);\n            measurez.sort(d3.descending);\n\n            // Setup Scales\n            // Compute the new x-scale.\n            var x1 = d3.scale.linear()\n                .domain( d3.extent(d3.merge([forceX, rangez])) )\n                .range(reverse ? [availableWidth, 0] : [0, availableWidth]);\n\n            // Retrieve the old x-scale, if this is an update.\n            var x0 = this.__chart__ || d3.scale.linear()\n                .domain([0, Infinity])\n                .range(x1.range());\n\n            // Stash the new scale.\n            this.__chart__ = x1;\n\n            var rangeMin = d3.min(rangez), //rangez[2]\n                rangeMax = d3.max(rangez), //rangez[0]\n                rangeAvg = rangez[1];\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-bullet').data([d]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bullet');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            for(var i=0,il=rangez.length; i<il; i++){\n                var rangeClassNames = 'nv-range nv-range'+i;\n                if(i <= 2){\n                    rangeClassNames = rangeClassNames + ' nv-range'+legacyRangeClassNames[i];\n                }\n                gEnter.append('rect').attr('class', rangeClassNames);\n            }\n\n            gEnter.append('rect').attr('class', 'nv-measure');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            var w0 = function(d) { return Math.abs(x0(d) - x0(0)) }, // TODO: could optimize by precalculating x0(0) and x1(0)\n                w1 = function(d) { return Math.abs(x1(d) - x1(0)) };\n            var xp0 = function(d) { return d < 0 ? x0(d) : x0(0) },\n                xp1 = function(d) { return d < 0 ? x1(d) : x1(0) };\n\n            for(var i=0,il=rangez.length; i<il; i++){\n                var range = rangez[i];\n                g.select('rect.nv-range'+i)\n                    .datum(range)\n                    .attr('height', availableHeight)\n                    .transition()\n                    .duration(duration)\n                    .attr('width', w1(range))\n                    .attr('x', xp1(range))\n            }\n\n            g.select('rect.nv-measure')\n                .style('fill', color)\n                .attr('height', availableHeight / 3)\n                .attr('y', availableHeight / 3)\n                .on('mouseover', function() {\n                    dispatch.elementMouseover({\n                        value: measurez[0],\n                        label: measureLabelz[0] || 'Current',\n                        color: d3.select(this).style(\"fill\")\n                    })\n                })\n                .on('mousemove', function() {\n                    dispatch.elementMousemove({\n                        value: measurez[0],\n                        label: measureLabelz[0] || 'Current',\n                        color: d3.select(this).style(\"fill\")\n                    })\n                })\n                .on('mouseout', function() {\n                    dispatch.elementMouseout({\n                        value: measurez[0],\n                        label: measureLabelz[0] || 'Current',\n                        color: d3.select(this).style(\"fill\")\n                    })\n                })\n                .transition()\n                .duration(duration)\n                .attr('width', measurez < 0 ?\n                    x1(0) - x1(measurez[0])\n                    : x1(measurez[0]) - x1(0))\n                .attr('x', xp1(measurez));\n\n            var h3 =  availableHeight / 6;\n\n            var markerData = markerz.map( function(marker, index) {\n                return {value: marker, label: markerLabelz[index]}\n            });\n            gEnter\n              .selectAll(\"path.nv-markerTriangle\")\n              .data(markerData)\n              .enter()\n              .append('path')\n              .attr('class', 'nv-markerTriangle')\n              .attr('d', 'M0,' + h3 + 'L' + h3 + ',' + (-h3) + ' ' + (-h3) + ',' + (-h3) + 'Z')\n              .on('mouseover', function(d) {\n                dispatch.elementMouseover({\n                  value: d.value,\n                  label: d.label || 'Previous',\n                  color: d3.select(this).style(\"fill\"),\n                  pos: [x1(d.value), availableHeight/2]\n                })\n\n              })\n              .on('mousemove', function(d) {\n                  dispatch.elementMousemove({\n                      value: d.value,\n                      label: d.label || 'Previous',\n                      color: d3.select(this).style(\"fill\")\n                  })\n              })\n              .on('mouseout', function(d, i) {\n                  dispatch.elementMouseout({\n                      value: d.value,\n                      label: d.label || 'Previous',\n                      color: d3.select(this).style(\"fill\")\n                  })\n              });\n\n            g.selectAll(\"path.nv-markerTriangle\")\n              .data(markerData)\n              .transition()\n              .duration(duration)\n              .attr('transform', function(d) { return 'translate(' + x1(d.value) + ',' + (availableHeight / 2) + ')' });\n\n            var markerLinesData = markerLinez.map( function(marker, index) {\n                return {value: marker, label: markerLineLabelz[index]}\n            });\n            gEnter\n              .selectAll(\"line.nv-markerLine\")\n              .data(markerLinesData)\n              .enter()\n              .append('line')\n              .attr('cursor', '')\n              .attr('class', 'nv-markerLine')\n              .attr('x1', function(d) { return x1(d.value) })\n              .attr('y1', '2')\n              .attr('x2', function(d) { return x1(d.value) })\n              .attr('y2', availableHeight - 2)\n              .on('mouseover', function(d) {\n                dispatch.elementMouseover({\n                  value: d.value,\n                  label: d.label || 'Previous',\n                  color: d3.select(this).style(\"fill\"),\n                  pos: [x1(d.value), availableHeight/2]\n                })\n\n              })\n              .on('mousemove', function(d) {\n                  dispatch.elementMousemove({\n                      value: d.value,\n                      label: d.label || 'Previous',\n                      color: d3.select(this).style(\"fill\")\n                  })\n              })\n              .on('mouseout', function(d, i) {\n                  dispatch.elementMouseout({\n                      value: d.value,\n                      label: d.label || 'Previous',\n                      color: d3.select(this).style(\"fill\")\n                  })\n              });\n\n            g.selectAll(\"line.nv-markerLine\")\n              .data(markerLinesData)\n              .transition()\n              .duration(duration)\n              .attr('x1', function(d) { return x1(d.value) })\n              .attr('x2', function(d) { return x1(d.value) });\n\n            wrap.selectAll('.nv-range')\n                .on('mouseover', function(d,i) {\n                    var label = rangeLabelz[i] || defaultRangeLabels[i];\n                    dispatch.elementMouseover({\n                        value: d,\n                        label: label,\n                        color: d3.select(this).style(\"fill\")\n                    })\n                })\n                .on('mousemove', function() {\n                    dispatch.elementMousemove({\n                        value: measurez[0],\n                        label: measureLabelz[0] || 'Previous',\n                        color: d3.select(this).style(\"fill\")\n                    })\n                })\n                .on('mouseout', function(d,i) {\n                    var label = rangeLabelz[i] || defaultRangeLabels[i];\n                    dispatch.elementMouseout({\n                        value: d,\n                        label: label,\n                        color: d3.select(this).style(\"fill\")\n                    })\n                });\n        });\n\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        ranges:      {get: function(){return ranges;}, set: function(_){ranges=_;}}, // ranges (bad, satisfactory, good)\n        markers:     {get: function(){return markers;}, set: function(_){markers=_;}}, // markers (previous, goal)\n        measures: {get: function(){return measures;}, set: function(_){measures=_;}}, // measures (actual, forecast)\n        forceX:      {get: function(){return forceX;}, set: function(_){forceX=_;}},\n        width:    {get: function(){return width;}, set: function(_){width=_;}},\n        height:    {get: function(){return height;}, set: function(_){height=_;}},\n        tickFormat:    {get: function(){return tickFormat;}, set: function(_){tickFormat=_;}},\n        duration:    {get: function(){return duration;}, set: function(_){duration=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        orient: {get: function(){return orient;}, set: function(_){ // left, right, top, bottom\n            orient = _;\n            reverse = orient == 'right' || orient == 'bottom';\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    return chart;\n};\n\n\n\n// Chart design based on the recommendations of Stephen Few. Implementation\n// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\n// http://projects.instantcognition.com/protovis/bulletchart/\nnv.models.bulletChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var bullet = nv.models.bullet();\n    var tooltip = nv.models.tooltip();\n\n    var orient = 'left' // TODO top & bottom\n        , reverse = false\n        , margin = {top: 5, right: 40, bottom: 20, left: 120}\n        , ranges = function(d) { return d.ranges }\n        , markers = function(d) { return d.markers ? d.markers : [] }\n        , measures = function(d) { return d.measures }\n        , width = null\n        , height = 55\n        , tickFormat = null\n        , ticks = null\n        , noData = null\n        , dispatch = d3.dispatch()\n        ;\n\n    tooltip\n        .duration(0)\n        .headerEnabled(false);\n\n    function chart(selection) {\n        selection.each(function(d, i) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = height - margin.top - margin.bottom,\n                that = this;\n\n            chart.update = function() { chart(selection) };\n            chart.container = this;\n\n            // Display No Data message if there's nothing to show.\n            if (!d || !ranges.call(this, d, i)) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\n                markerz = markers.call(this, d, i).slice().sort(d3.descending),\n                measurez = measures.call(this, d, i).slice().sort(d3.descending);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-bulletChart').data([d]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-bulletChart');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-bulletWrap');\n            gEnter.append('g').attr('class', 'nv-titles');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            // Compute the new x-scale.\n            var x1 = d3.scale.linear()\n                .domain([0, Math.max(rangez[0], (markerz[0] || 0), measurez[0])])  // TODO: need to allow forceX and forceY, and xDomain, yDomain\n                .range(reverse ? [availableWidth, 0] : [0, availableWidth]);\n\n            // Retrieve the old x-scale, if this is an update.\n            var x0 = this.__chart__ || d3.scale.linear()\n                .domain([0, Infinity])\n                .range(x1.range());\n\n            // Stash the new scale.\n            this.__chart__ = x1;\n\n            var w0 = function(d) { return Math.abs(x0(d) - x0(0)) }, // TODO: could optimize by precalculating x0(0) and x1(0)\n                w1 = function(d) { return Math.abs(x1(d) - x1(0)) };\n\n            var title = gEnter.select('.nv-titles').append('g')\n                .attr('text-anchor', 'end')\n                .attr('transform', 'translate(-6,' + (height - margin.top - margin.bottom) / 2 + ')');\n            title.append('text')\n                .attr('class', 'nv-title')\n                .text(function(d) { return d.title; });\n\n            title.append('text')\n                .attr('class', 'nv-subtitle')\n                .attr('dy', '1em')\n                .text(function(d) { return d.subtitle; });\n\n            bullet\n                .width(availableWidth)\n                .height(availableHeight);\n\n            var bulletWrap = g.select('.nv-bulletWrap');\n            d3.transition(bulletWrap).call(bullet);\n\n            // Compute the tick format.\n            var format = tickFormat || x1.tickFormat( availableWidth / 100 );\n\n            // Update the tick groups.\n            var tick = g.selectAll('g.nv-tick')\n                .data(x1.ticks( ticks ? ticks : (availableWidth / 50) ), function(d) {\n                    return this.textContent || format(d);\n                });\n\n            // Initialize the ticks with the old scale, x0.\n            var tickEnter = tick.enter().append('g')\n                .attr('class', 'nv-tick')\n                .attr('transform', function(d) { return 'translate(' + x0(d) + ',0)' })\n                .style('opacity', 1e-6);\n\n            tickEnter.append('line')\n                .attr('y1', availableHeight)\n                .attr('y2', availableHeight * 7 / 6);\n\n            tickEnter.append('text')\n                .attr('text-anchor', 'middle')\n                .attr('dy', '1em')\n                .attr('y', availableHeight * 7 / 6)\n                .text(format);\n\n            // Transition the updating ticks to the new scale, x1.\n            var tickUpdate = d3.transition(tick)\n                .transition()\n                .duration(bullet.duration())\n                .attr('transform', function(d) { return 'translate(' + x1(d) + ',0)' })\n                .style('opacity', 1);\n\n            tickUpdate.select('line')\n                .attr('y1', availableHeight)\n                .attr('y2', availableHeight * 7 / 6);\n\n            tickUpdate.select('text')\n                .attr('y', availableHeight * 7 / 6);\n\n            // Transition the exiting ticks to the new scale, x1.\n            d3.transition(tick.exit())\n                .transition()\n                .duration(bullet.duration())\n                .attr('transform', function(d) { return 'translate(' + x1(d) + ',0)' })\n                .style('opacity', 1e-6)\n                .remove();\n        });\n\n        d3.timer.flush();\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    bullet.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt['series'] = {\n            key: evt.label,\n            value: evt.value,\n            color: evt.color\n        };\n        tooltip.data(evt).hidden(false);\n    });\n\n    bullet.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    bullet.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.bullet = bullet;\n    chart.dispatch = dispatch;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        ranges:      {get: function(){return ranges;}, set: function(_){ranges=_;}}, // ranges (bad, satisfactory, good)\n        markers:     {get: function(){return markers;}, set: function(_){markers=_;}}, // markers (previous, goal)\n        measures: {get: function(){return measures;}, set: function(_){measures=_;}}, // measures (actual, forecast)\n        width:    {get: function(){return width;}, set: function(_){width=_;}},\n        height:    {get: function(){return height;}, set: function(_){height=_;}},\n        tickFormat:    {get: function(){return tickFormat;}, set: function(_){tickFormat=_;}},\n        ticks:    {get: function(){return ticks;}, set: function(_){ticks=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        orient: {get: function(){return orient;}, set: function(_){ // left, right, top, bottom\n            orient = _;\n            reverse = orient == 'right' || orient == 'bottom';\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, bullet);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\n\n\nnv.models.candlestickBar = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = null\n        , height = null\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container\n        , x = d3.scale.linear()\n        , y = d3.scale.linear()\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , getOpen = function(d) { return d.open }\n        , getClose = function(d) { return d.close }\n        , getHigh = function(d) { return d.high }\n        , getLow = function(d) { return d.low }\n        , forceX = []\n        , forceY = []\n        , padData     = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n        , clipEdge = true\n        , color = nv.utils.defaultColor()\n        , interactive = false\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd', 'chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove')\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    function chart(selection) {\n        selection.each(function(data) {\n            container = d3.select(this);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            nv.utils.initSVG(container);\n\n            // Width of the candlestick bars.\n            var barWidth = (availableWidth / data[0].values.length) * .45;\n\n            // Setup Scales\n            x.domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ));\n\n            if (padData)\n                x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n            else\n                x.range(xRange || [5 + barWidth / 2, availableWidth - barWidth / 2 - 5]);\n\n            y.domain(yDomain || [\n                    d3.min(data[0].values.map(getLow).concat(forceY)),\n                    d3.max(data[0].values.map(getHigh).concat(forceY))\n                ]\n            ).range(yRange || [availableHeight, 0]);\n\n            // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n            if (x.domain()[0] === x.domain()[1])\n                x.domain()[0] ?\n                    x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n                    : x.domain([-1,1]);\n\n            if (y.domain()[0] === y.domain()[1])\n                y.domain()[0] ?\n                    y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n                    : y.domain([-1,1]);\n\n            // Setup containers and skeleton of chart\n            var wrap = d3.select(this).selectAll('g.nv-wrap.nv-candlestickBar').data([data[0].values]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-candlestickBar');\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-ticks');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            container\n                .on('click', function(d,i) {\n                    dispatch.chartClick({\n                        data: d,\n                        index: i,\n                        pos: d3.event,\n                        id: id\n                    });\n                });\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-chart-clip-path-' + id)\n                .append('rect');\n\n            wrap.select('#nv-chart-clip-path-' + id + ' rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            g   .attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\n            var ticks = wrap.select('.nv-ticks').selectAll('.nv-tick')\n                .data(function(d) { return d });\n            ticks.exit().remove();\n\n            var tickGroups = ticks.enter().append('g');\n\n            // The colors are currently controlled by CSS.\n            ticks\n                .attr('class', function(d, i, j) { return (getOpen(d, i) > getClose(d, i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i});\n\n            var lines = tickGroups.append('line')\n                .attr('class', 'nv-candlestick-lines')\n                .attr('transform', function(d, i) { return 'translate(' + x(getX(d, i)) + ',0)'; })\n                .attr('x1', 0)\n                .attr('y1', function(d, i) { return y(getHigh(d, i)); })\n                .attr('x2', 0)\n                .attr('y2', function(d, i) { return y(getLow(d, i)); });\n\n            var rects = tickGroups.append('rect')\n                .attr('class', 'nv-candlestick-rects nv-bars')\n                .attr('transform', function(d, i) {\n                    return 'translate(' + (x(getX(d, i)) - barWidth/2) + ','\n                    + (y(getY(d, i)) - (getOpen(d, i) > getClose(d, i) ? (y(getClose(d, i)) - y(getOpen(d, i))) : 0))\n                    + ')';\n                })\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('width', barWidth)\n                .attr('height', function(d, i) {\n                    var open = getOpen(d, i);\n                    var close = getClose(d, i);\n                    return open > close ? y(close) - y(open) : y(open) - y(close);\n                });\n\n            ticks.select('.nv-candlestick-lines').transition()\n                .attr('transform', function(d, i) { return 'translate(' + x(getX(d, i)) + ',0)'; })\n                .attr('x1', 0)\n                .attr('y1', function(d, i) { return y(getHigh(d, i)); })\n                .attr('x2', 0)\n                .attr('y2', function(d, i) { return y(getLow(d, i)); });\n\n            ticks.select('.nv-candlestick-rects').transition()\n                .attr('transform', function(d, i) {\n                    return 'translate(' + (x(getX(d, i)) - barWidth/2) + ','\n                    + (y(getY(d, i)) - (getOpen(d, i) > getClose(d, i) ? (y(getClose(d, i)) - y(getOpen(d, i))) : 0))\n                    + ')';\n                })\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('width', barWidth)\n                .attr('height', function(d, i) {\n                    var open = getOpen(d, i);\n                    var close = getClose(d, i);\n                    return open > close ? y(close) - y(open) : y(open) - y(close);\n                });\n        });\n\n        return chart;\n    }\n\n\n    //Create methods to allow outside functions to highlight a specific bar.\n    chart.highlightPoint = function(pointIndex, isHoverOver) {\n        chart.clearHighlights();\n        container.select(\".nv-candlestickBar .nv-tick-0-\" + pointIndex)\n            .classed(\"hover\", isHoverOver)\n        ;\n    };\n\n    chart.clearHighlights = function() {\n        container.select(\".nv-candlestickBar .nv-tick.hover\")\n            .classed(\"hover\", false)\n        ;\n    };\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:    {get: function(){return width;}, set: function(_){width=_;}},\n        height:   {get: function(){return height;}, set: function(_){height=_;}},\n        xScale:   {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:   {get: function(){return y;}, set: function(_){y=_;}},\n        xDomain:  {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain:  {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:   {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:   {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        forceX:   {get: function(){return forceX;}, set: function(_){forceX=_;}},\n        forceY:   {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        padData:  {get: function(){return padData;}, set: function(_){padData=_;}},\n        clipEdge: {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n        id:       {get: function(){return id;}, set: function(_){id=_;}},\n        interactive: {get: function(){return interactive;}, set: function(_){interactive=_;}},\n\n        x:     {get: function(){return getX;}, set: function(_){getX=_;}},\n        y:     {get: function(){return getY;}, set: function(_){getY=_;}},\n        open:  {get: function(){return getOpen();}, set: function(_){getOpen=_;}},\n        close: {get: function(){return getClose();}, set: function(_){getClose=_;}},\n        high:  {get: function(){return getHigh;}, set: function(_){getHigh=_;}},\n        low:   {get: function(){return getLow;}, set: function(_){getLow=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    != undefined ? _.top    : margin.top;\n            margin.right  = _.right  != undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom != undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   != undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    return chart;\n};\n\nnv.models.cumulativeLineChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var lines = nv.models.line()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , legend = nv.models.legend()\n        , controls = nv.models.legend()\n        , interactiveLayer = nv.interactiveGuideline()\n        , tooltip = nv.models.tooltip()\n        ;\n\n    var margin = {top: 30, right: 30, bottom: 50, left: 60}\n        , marginTop = null\n        , color = nv.utils.defaultColor()\n        , width = null\n        , height = null\n        , showLegend = true\n        , showXAxis = true\n        , showYAxis = true\n        , rightAlignYAxis = false\n        , showControls = true\n        , useInteractiveGuideline = false\n        , rescaleY = true\n        , x //can be accessed via chart.xScale()\n        , y //can be accessed via chart.yScale()\n        , id = lines.id()\n        , state = nv.utils.state()\n        , defaultState = null\n        , noData = null\n        , average = function(d) { return d.average }\n        , dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd')\n        , transitionDuration = 250\n        , duration = 250\n        , noErrorCheck = false  //if set to TRUE, will bypass an error check in the indexify function.\n        ;\n\n    state.index = 0;\n    state.rescaleY = rescaleY;\n\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient((rightAlignYAxis) ? 'right' : 'left');\n\n    tooltip.valueFormatter(function(d, i) {\n        return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function(d, i) {\n        return xAxis.tickFormat()(d, i);\n    });\n\n    controls.updateState(false);\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var dx = d3.scale.linear()\n        , index = {i: 0, x: 0}\n        , renderWatch = nv.utils.renderWatch(dispatch, duration)\n        , currentYDomain\n        ;\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled }),\n                index: index.i,\n                rescaleY: rescaleY\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.index !== undefined)\n                index.i = state.index;\n            if (state.rescaleY !== undefined)\n                rescaleY = state.rescaleY;\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        }\n    };\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(lines);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n        selection.each(function(data) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n            container.classed('nv-chart-' + id, true);\n            var that = this;\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() {\n                if (duration === 0)\n                    container.call(chart);\n                else\n                    container.transition().duration(duration).call(chart)\n            };\n            chart.container = this;\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disableddisabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            var indexDrag = d3.behavior.drag()\n                .on('dragstart', dragStart)\n                .on('drag', dragMove)\n                .on('dragend', dragEnd);\n\n\n            function dragStart(d,i) {\n                d3.select(chart.container)\n                    .style('cursor', 'ew-resize');\n            }\n\n            function dragMove(d,i) {\n                index.x = d3.event.x;\n                index.i = Math.round(dx.invert(index.x));\n                updateZero();\n            }\n\n            function dragEnd(d,i) {\n                d3.select(chart.container)\n                    .style('cursor', 'auto');\n\n                // update state and send stateChange with new index\n                state.index = index.i;\n                dispatch.stateChange(state);\n            }\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = lines.xScale();\n            y = lines.yScale();\n\n\n            dx.domain([0, data[0].values.length - 1]) //Assumes all series have same length\n                .range([0, availableWidth])\n                .clamp(true);\n\n            var data = indexify(index.i, data);\n\n            // initialize the starting yDomain for the not-rescale case after indexify (to have calculated point.display)\n            if (typeof(currentYDomain) === \"undefined\") {\n                currentYDomain = getCurrentYDomain(data);\n            }\n\n            if (!rescaleY) {\n                lines.yDomain(currentYDomain);\n                lines.clipEdge(true);\n            } else {\n                lines.yDomain(null);\n            }\n\n            // Setup containers and skeleton of chart\n            var interactivePointerEvents = (useInteractiveGuideline) ? \"none\" : \"all\";\n            var wrap = container.selectAll('g.nv-wrap.nv-cumulativeLine').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-cumulativeLine').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-interactive');\n            gEnter.append('g').attr('class', 'nv-x nv-axis').style(\"pointer-events\",\"none\");\n            gEnter.append('g').attr('class', 'nv-y nv-axis');\n            gEnter.append('g').attr('class', 'nv-background');\n            gEnter.append('g').attr('class', 'nv-linesWrap').style(\"pointer-events\",interactivePointerEvents);\n            gEnter.append('g').attr('class', 'nv-avgLinesWrap').style(\"pointer-events\",\"none\");\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n            gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                legend.width(availableWidth);\n\n                g.select('.nv-legendWrap')\n                    .datum(data)\n                    .call(legend);\n\n                if (!marginTop && legend.height() !== margin.top) {\n                    margin.top = legend.height();\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n                }\n\n                g.select('.nv-legendWrap')\n                    .attr('transform', 'translate(0,' + (-margin.top) +')')\n            }\n\n            // Controls\n            if (!showControls) {\n                 g.select('.nv-controlsWrap').selectAll('*').remove();\n            } else {\n                var controlsData = [\n                    { key: 'Re-scale y-axis', disabled: !rescaleY }\n                ];\n\n                controls\n                    .width(140)\n                    .color(['#444', '#444', '#444'])\n                    .rightAlign(false)\n                    .margin({top: 5, right: 0, bottom: 5, left: 20})\n                ;\n\n                g.select('.nv-controlsWrap')\n                    .datum(controlsData)\n                    .attr('transform', 'translate(0,' + (-margin.top) +')')\n                    .call(controls);\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            // Show error if index point value is 0 (division by zero avoided)\n            var tempDisabled = data.filter(function(d) { return d.tempDisabled });\n\n            wrap.select('.tempDisabled').remove(); //clean-up and prevent duplicates\n            if (tempDisabled.length) {\n                wrap.append('text').attr('class', 'tempDisabled')\n                    .attr('x', availableWidth / 2)\n                    .attr('y', '-.71em')\n                    .style('text-anchor', 'end')\n                    .text(tempDisabled.map(function(d) { return d.key }).join(', ') + ' values cannot be calculated for this time period.');\n            }\n\n            //Set up interactive layer\n            if (useInteractiveGuideline) {\n                interactiveLayer\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .margin({left:margin.left,top:margin.top})\n                    .svgContainer(container)\n                    .xScale(x);\n                wrap.select(\".nv-interactive\").call(interactiveLayer);\n            }\n\n            gEnter.select('.nv-background')\n                .append('rect');\n\n            g.select('.nv-background rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            lines\n                //.x(function(d) { return d.x })\n                .y(function(d) { return d.display.y })\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled && !data[i].tempDisabled; }));\n\n            var linesWrap = g.select('.nv-linesWrap')\n                .datum(data.filter(function(d) { return  !d.disabled && !d.tempDisabled }));\n\n            linesWrap.call(lines);\n\n            //Store a series index number in the data array.\n            data.forEach(function(d,i) {\n                d.seriesIndex = i;\n            });\n\n            var avgLineData = data.filter(function(d) {\n                return !d.disabled && !!average(d);\n            });\n\n            var avgLines = g.select(\".nv-avgLinesWrap\").selectAll(\"line\")\n                .data(avgLineData, function(d) { return d.key; });\n\n            var getAvgLineY = function(d) {\n                //If average lines go off the svg element, clamp them to the svg bounds.\n                var yVal = y(average(d));\n                if (yVal < 0) return 0;\n                if (yVal > availableHeight) return availableHeight;\n                return yVal;\n            };\n\n            avgLines.enter()\n                .append('line')\n                .style('stroke-width',2)\n                .style('stroke-dasharray','10,10')\n                .style('stroke',function (d,i) {\n                    return lines.color()(d,d.seriesIndex);\n                })\n                .attr('x1',0)\n                .attr('x2',availableWidth)\n                .attr('y1', getAvgLineY)\n                .attr('y2', getAvgLineY);\n\n            avgLines\n                .style('stroke-opacity',function(d){\n                    //If average lines go offscreen, make them transparent\n                    var yVal = y(average(d));\n                    if (yVal < 0 || yVal > availableHeight) return 0;\n                    return 1;\n                })\n                .attr('x1',0)\n                .attr('x2',availableWidth)\n                .attr('y1', getAvgLineY)\n                .attr('y2', getAvgLineY);\n\n            avgLines.exit().remove();\n\n            //Create index line\n            var indexLine = linesWrap.selectAll('.nv-indexLine')\n                .data([index]);\n            indexLine.enter().append('rect').attr('class', 'nv-indexLine')\n                .attr('width', 3)\n                .attr('x', -2)\n                .attr('fill', 'red')\n                .attr('fill-opacity', .5)\n                .style(\"pointer-events\",\"all\")\n                .call(indexDrag);\n\n            indexLine\n                .attr('transform', function(d) { return 'translate(' + dx(d.i) + ',0)' })\n                .attr('height', availableHeight);\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/70, data) )\n                    .tickSize(-availableHeight, 0);\n\n                g.select('.nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y.range()[0] + ')');\n                g.select('.nv-x.nv-axis')\n                    .call(xAxis);\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n\n                g.select('.nv-y.nv-axis')\n                    .call(yAxis);\n            }\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            function updateZero() {\n                indexLine\n                    .data([index]);\n\n                //When dragging the index line, turn off line transitions.\n                // Then turn them back on when done dragging.\n                var oldDuration = chart.duration();\n                chart.duration(0);\n                chart.update();\n                chart.duration(oldDuration);\n            }\n\n            g.select('.nv-background rect')\n                .on('click', function() {\n                    index.x = d3.mouse(this)[0];\n                    index.i = Math.round(dx.invert(index.x));\n\n                    // update state and send stateChange with new index\n                    state.index = index.i;\n                    dispatch.stateChange(state);\n\n                    updateZero();\n                });\n\n            lines.dispatch.on('elementClick', function(e) {\n                index.i = e.pointIndex;\n                index.x = dx(index.i);\n\n                // update state and send stateChange with new index\n                state.index = index.i;\n                dispatch.stateChange(state);\n\n                updateZero();\n            });\n\n            controls.dispatch.on('legendClick', function(d,i) {\n                d.disabled = !d.disabled;\n                rescaleY = !d.disabled;\n                state.rescaleY = rescaleY;\n                if (!rescaleY) {\n                    currentYDomain = getCurrentYDomain(data); // rescale is turned off, so set the currentYDomain\n                }\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            interactiveLayer.dispatch.on('elementMousemove', function(e) {\n                lines.clearHighlights();\n                var singlePoint, pointIndex, pointXLocation, allData = [];\n\n                data\n                    .filter(function(series, i) {\n                        series.seriesIndex = i;\n                        return !(series.disabled || series.tempDisabled);\n                    })\n                    .forEach(function(series,i) {\n                        pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n                        lines.highlightPoint(i, pointIndex, true);\n                        var point = series.values[pointIndex];\n                        if (typeof point === 'undefined') return;\n                        if (typeof singlePoint === 'undefined') singlePoint = point;\n                        if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n                        allData.push({\n                            key: series.key,\n                            value: chart.y()(point, pointIndex),\n                            color: color(series,series.seriesIndex)\n                        });\n                    });\n\n                //Highlight the tooltip entry based on which point the mouse is closest to.\n                if (allData.length > 2) {\n                    var yValue = chart.yScale().invert(e.mouseY);\n                    var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n                    var threshold = 0.03 * domainExtent;\n                    var indexToHighlight = nv.nearestValueIndex(allData.map(function(d){return d.value}),yValue,threshold);\n                    if (indexToHighlight !== null)\n                        allData[indexToHighlight].highlight = true;\n                }\n\n                var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex), pointIndex);\n                interactiveLayer.tooltip\n                    .valueFormatter(function(d,i) {\n                        return yAxis.tickFormat()(d);\n                    })\n                    .data(\n                    {\n                        value: xValue,\n                        series: allData\n                    }\n                )();\n\n                interactiveLayer.renderGuideLine(pointXLocation);\n            });\n\n            interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n                lines.clearHighlights();\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n\n                    state.disabled = e.disabled;\n                }\n\n                if (typeof e.index !== 'undefined') {\n                    index.i = e.index;\n                    index.x = dx(index.i);\n\n                    state.index = e.index;\n\n                    indexLine\n                        .data([index]);\n                }\n\n                if (typeof e.rescaleY !== 'undefined') {\n                    rescaleY = e.rescaleY;\n                }\n\n                chart.update();\n            });\n\n        });\n\n        renderWatch.renderEnd('cumulativeLineChart immediate');\n\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    lines.dispatch.on('elementMouseover.tooltip', function(evt) {\n        var point = {\n            x: chart.x()(evt.point),\n            y: chart.y()(evt.point),\n            color: evt.point.color\n        };\n        evt.point = point;\n        tooltip.data(evt).hidden(false);\n    });\n\n    lines.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true)\n    });\n\n    //============================================================\n    // Functions\n    //------------------------------------------------------------\n\n    var indexifyYGetter = null;\n    /* Normalize the data according to an index point. */\n    function indexify(idx, data) {\n        if (!indexifyYGetter) indexifyYGetter = lines.y();\n        return data.map(function(line, i) {\n            if (!line.values) {\n                return line;\n            }\n            var indexValue = line.values[idx];\n            if (indexValue == null) {\n                return line;\n            }\n            var v = indexifyYGetter(indexValue, idx);\n\n            // avoid divide by zero\n            if (Math.abs(v) < 0.00001 && !noErrorCheck) {\n                line.tempDisabled = true;\n                return line;\n            }\n\n            line.tempDisabled = false;\n\n            line.values = line.values.map(function(point, pointIndex) {\n                point.display = {'y': (indexifyYGetter(point, pointIndex) - v) / v };\n                return point;\n            });\n\n            return line;\n        })\n    }\n\n    function getCurrentYDomain(data) {\n        var seriesDomains = data\n            .filter(function(series) { return !(series.disabled || series.tempDisabled)})\n            .map(function(series,i) {\n                return d3.extent(series.values, function (d) { return d.display.y });\n            });\n\n        return [\n            d3.min(seriesDomains, function(d) { return d[0] }),\n            d3.max(seriesDomains, function(d) { return d[1] })\n        ];\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.lines = lines;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.state = state;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showControls:     {get: function(){return showControls;}, set: function(_){showControls=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        average: {get: function(){return average;}, set: function(_){average=_;}},\n        defaultState:    {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        showXAxis:    {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:    {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        noErrorCheck:    {get: function(){return noErrorCheck;}, set: function(_){noErrorCheck=_;}},\n\n        // options that require extra logic in the setter\n        rescaleY:     {get: function(){return rescaleY;}, set: function(_){\n            rescaleY = _;\n            chart.state.rescaleY = _; // also update state\n        }},\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n        }},\n        useInteractiveGuideline: {get: function(){return useInteractiveGuideline;}, set: function(_){\n            useInteractiveGuideline = _;\n            if (_ === true) {\n                chart.interactive(false);\n                chart.useVoronoi(false);\n            }\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( (_) ? 'right' : 'left');\n        }},\n        duration:    {get: function(){return duration;}, set: function(_){\n            duration = _;\n            lines.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n            renderWatch.reset(duration);\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, lines);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n//TODO: consider deprecating by adding necessary features to multiBar model\nnv.models.discreteBar = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 960\n        , height = 500\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container\n        , x = d3.scale.ordinal()\n        , y = d3.scale.linear()\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n        , color = nv.utils.defaultColor()\n        , showValues = false\n        , valueFormat = d3.format(',.2f')\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd')\n        , rectClass = 'discreteBar'\n        , duration = 250\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0, y0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            //add series index to each data point for reference\n            data.forEach(function(series, i) {\n                series.values.forEach(function(point) {\n                    point.series = i;\n                });\n            });\n\n            // Setup Scales\n            // remap and flatten the data for use in calculating the scales' domains\n            var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n                data.map(function(d) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d,i), y: getY(d,i), y0: d.y0 }\n                    })\n                });\n\n            x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n                .rangeBands(xRange || [0, availableWidth], .1);\n            y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y }).concat(forceY)));\n\n            // If showValues, pad the Y axis range to account for label height\n            if (showValues) y.range(yRange || [availableHeight - (y.domain()[0] < 0 ? 12 : 0), y.domain()[1] > 0 ? 12 : 0]);\n            else y.range(yRange || [availableHeight, 0]);\n\n            //store old scales if they exist\n            x0 = x0 || x;\n            y0 = y0 || y.copy().range([y(0),y(0)]);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-discretebar').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discretebar');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-groups');\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            //TODO: by definition, the discrete bar should not have multiple groups, will modify/remove later\n            var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n                .data(function(d) { return d }, function(d) { return d.key });\n            groups.enter().append('g')\n                .style('stroke-opacity', 1e-6)\n                .style('fill-opacity', 1e-6);\n            groups.exit()\n                .watchTransition(renderWatch, 'discreteBar: exit groups')\n                .style('stroke-opacity', 1e-6)\n                .style('fill-opacity', 1e-6)\n                .remove();\n            groups\n                .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n                .classed('hover', function(d) { return d.hover });\n            groups\n                .watchTransition(renderWatch, 'discreteBar: groups')\n                .style('stroke-opacity', 1)\n                .style('fill-opacity', .75);\n\n            var bars = groups.selectAll('g.nv-bar')\n                .data(function(d) { return d.values });\n            bars.exit().remove();\n\n            var barsEnter = bars.enter().append('g')\n                .attr('transform', function(d,i,j) {\n                    return 'translate(' + (x(getX(d,i)) + x.rangeBand() * .05 ) + ', ' + y(0) + ')'\n                })\n                .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n                    d3.select(this).classed('hover', true);\n                    dispatch.elementMouseover({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mouseout', function(d,i) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.elementMouseout({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mousemove', function(d,i) {\n                    dispatch.elementMousemove({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('click', function(d,i) {\n                    var element = this;\n                    dispatch.elementClick({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\"),\n                        event: d3.event,\n                        element: element\n                    });\n                    d3.event.stopPropagation();\n                })\n                .on('dblclick', function(d,i) {\n                    dispatch.elementDblClick({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                    d3.event.stopPropagation();\n                });\n\n            barsEnter.append('rect')\n                .attr('height', 0)\n                .attr('width', x.rangeBand() * .9 / data.length )\n\n            if (showValues) {\n                barsEnter.append('text')\n                    .attr('text-anchor', 'middle')\n                ;\n\n                bars.select('text')\n                    .text(function(d,i) { return valueFormat(getY(d,i)) })\n                    .watchTransition(renderWatch, 'discreteBar: bars text')\n                    .attr('x', x.rangeBand() * .9 / 2)\n                    .attr('y', function(d,i) { return getY(d,i) < 0 ? y(getY(d,i)) - y(0) + 12 : -4 })\n\n                ;\n            } else {\n                bars.selectAll('text').remove();\n            }\n\n            bars\n                .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive' })\n                .style('fill', function(d,i) { return d.color || color(d,i) })\n                .style('stroke', function(d,i) { return d.color || color(d,i) })\n                .select('rect')\n                .attr('class', rectClass)\n                .watchTransition(renderWatch, 'discreteBar: bars rect')\n                .attr('width', x.rangeBand() * .9 / data.length);\n            bars.watchTransition(renderWatch, 'discreteBar: bars')\n                //.delay(function(d,i) { return i * 1200 / data[0].values.length })\n                .attr('transform', function(d,i) {\n                    var left = x(getX(d,i)) + x.rangeBand() * .05,\n                        top = getY(d,i) < 0 ?\n                            y(0) :\n                                y(0) - y(getY(d,i)) < 1 ?\n                            y(0) - 1 : //make 1 px positive bars show up above y=0\n                            y(getY(d,i));\n\n                    return 'translate(' + left + ', ' + top + ')'\n                })\n                .select('rect')\n                .attr('height', function(d,i) {\n                    return  Math.max(Math.abs(y(getY(d,i)) - y(0)), 1)\n                });\n\n\n            //store old scales for use in transitions on update\n            x0 = x.copy();\n            y0 = y.copy();\n\n        });\n\n        renderWatch.renderEnd('discreteBar immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:   {get: function(){return width;}, set: function(_){width=_;}},\n        height:  {get: function(){return height;}, set: function(_){height=_;}},\n        forceY:  {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        showValues: {get: function(){return showValues;}, set: function(_){showValues=_;}},\n        x:       {get: function(){return getX;}, set: function(_){getX=_;}},\n        y:       {get: function(){return getY;}, set: function(_){getY=_;}},\n        xScale:  {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:  {get: function(){return y;}, set: function(_){y=_;}},\n        xDomain: {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain: {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:  {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:  {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        valueFormat:    {get: function(){return valueFormat;}, set: function(_){valueFormat=_;}},\n        id:          {get: function(){return id;}, set: function(_){id=_;}},\n        rectClass: {get: function(){return rectClass;}, set: function(_){rectClass=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.discreteBarChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var discretebar = nv.models.discreteBar()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n\t, legend = nv.models.legend()\n        , tooltip = nv.models.tooltip()\n        ;\n\n    var margin = {top: 15, right: 10, bottom: 50, left: 60}\n        , marginTop = null\n        , width = null\n        , height = null\n        , color = nv.utils.getColor()\n\t, showLegend = false\n        , showXAxis = true\n        , showYAxis = true\n        , rightAlignYAxis = false\n        , staggerLabels = false\n        , wrapLabels = false\n        , rotateLabels = 0\n        , x\n        , y\n        , noData = null\n        , dispatch = d3.dispatch('beforeUpdate','renderEnd')\n        , duration = 250\n        ;\n\n    xAxis\n        .orient('bottom')\n        .showMaxMin(false)\n        .tickFormat(function(d) { return d })\n    ;\n    yAxis\n        .orient((rightAlignYAxis) ? 'right' : 'left')\n        .tickFormat(d3.format(',.1f'))\n    ;\n\n    tooltip\n        .duration(0)\n        .headerEnabled(false)\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        })\n        .keyFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(discretebar);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() {\n                dispatch.beforeUpdate();\n                container.transition().duration(duration).call(chart);\n            };\n            chart.container = this;\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container);\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = discretebar.xScale();\n            y = discretebar.yScale().clamp(true);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-discreteBarWithAxes').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-discreteBarWithAxes').append('g');\n            var defsEnter = gEnter.append('defs');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis')\n                .append('g').attr('class', 'nv-zeroLine')\n                .append('line');\n\n            gEnter.append('g').attr('class', 'nv-barsWrap');\n\t    gEnter.append('g').attr('class', 'nv-legendWrap');\n\n            g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                legend.width(availableWidth);\n\n                g.select('.nv-legendWrap')\n                    .datum(data)\n                    .call(legend);\n\n                if (!marginTop && legend.height() !== margin.top) {\n                    margin.top = legend.height();\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n                }\n\n                wrap.select('.nv-legendWrap')\n                    .attr('transform', 'translate(0,' + (-margin.top) +')')\n            }\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            // Main Chart Component(s)\n            discretebar\n                .width(availableWidth)\n                .height(availableHeight);\n\n            var barsWrap = g.select('.nv-barsWrap')\n                .datum(data.filter(function(d) { return !d.disabled }));\n\n            barsWrap.transition().call(discretebar);\n\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-x-label-clip-' + discretebar.id())\n                .append('rect');\n\n            g.select('#nv-x-label-clip-' + discretebar.id() + ' rect')\n                .attr('width', x.rangeBand() * (staggerLabels ? 2 : 1))\n                .attr('height', 16)\n                .attr('x', -x.rangeBand() / (staggerLabels ? 1 : 2 ));\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight, 0);\n\n                g.select('.nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + (y.range()[0] + ((discretebar.showValues() && y.domain()[0] < 0) ? 16 : 0)) + ')');\n                g.select('.nv-x.nv-axis').call(xAxis);\n\n                var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n                if (staggerLabels) {\n                    xTicks\n                        .selectAll('text')\n                        .attr('transform', function(d,i,j) { return 'translate(0,' + (j % 2 == 0 ? '5' : '17') + ')' })\n                }\n\n                if (rotateLabels) {\n                    xTicks\n                        .selectAll('.tick text')\n                        .attr('transform', 'rotate(' + rotateLabels + ' 0,0)')\n                        .style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\n                }\n\n                if (wrapLabels) {\n                    g.selectAll('.tick text')\n                        .call(nv.utils.wrapTicks, chart.xAxis.rangeBand())\n                }\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n\n                g.select('.nv-y.nv-axis').call(yAxis);\n            }\n\n            // Zero line\n            g.select(\".nv-zeroLine line\")\n                .attr(\"x1\",0)\n                .attr(\"x2\",(rightAlignYAxis) ? -availableWidth : availableWidth)\n                .attr(\"y1\", y(0))\n                .attr(\"y2\", y(0))\n            ;\n        });\n\n        renderWatch.renderEnd('discreteBar chart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    discretebar.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt['series'] = {\n            key: chart.x()(evt.data),\n            value: chart.y()(evt.data),\n            color: evt.color\n        };\n        tooltip.data(evt).hidden(false);\n    });\n\n    discretebar.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    discretebar.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.discretebar = discretebar;\n    chart.legend = legend;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n\tshowLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        staggerLabels: {get: function(){return staggerLabels;}, set: function(_){staggerLabels=_;}},\n        rotateLabels:  {get: function(){return rotateLabels;}, set: function(_){rotateLabels=_;}},\n        wrapLabels:  {get: function(){return wrapLabels;}, set: function(_){wrapLabels=!!_;}},\n        showXAxis: {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis: {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            discretebar.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            discretebar.color(color);\n\t    legend.color(color);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( (_) ? 'right' : 'left');\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, discretebar);\n    nv.utils.initOptions(chart);\n\n    return chart;\n}\n\nnv.models.distribution = function() {\n    \"use strict\";\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 400 //technically width or height depending on x or y....\n        , size = 8\n        , axis = 'x' // 'x' or 'y'... horizontal or vertical\n        , getData = function(d) { return d[axis] }  // defaults d.x or d.y\n        , color = nv.utils.defaultColor()\n        , scale = d3.scale.linear()\n        , domain\n        , duration = 250\n        , dispatch = d3.dispatch('renderEnd')\n        ;\n\n    //============================================================\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var scale0;\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    //============================================================\n\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableLength = width - (axis === 'x' ? margin.left + margin.right : margin.top + margin.bottom),\n                naxis = axis == 'x' ? 'y' : 'x',\n                container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            //------------------------------------------------------------\n            // Setup Scales\n\n            scale0 = scale0 || scale;\n\n            //------------------------------------------------------------\n\n\n            //------------------------------------------------------------\n            // Setup containers and skeleton of chart\n\n            var wrap = container.selectAll('g.nv-distribution').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-distribution');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n            //------------------------------------------------------------\n\n\n            var distWrap = g.selectAll('g.nv-dist')\n                .data(function(d) { return d }, function(d) { return d.key });\n\n            distWrap.enter().append('g');\n            distWrap\n                .attr('class', function(d,i) { return 'nv-dist nv-series-' + i })\n                .style('stroke', function(d,i) { return color(d, i) });\n\n            var dist = distWrap.selectAll('line.nv-dist' + axis)\n                .data(function(d) { return d.values })\n            dist.enter().append('line')\n                .attr(axis + '1', function(d,i) { return scale0(getData(d,i)) })\n                .attr(axis + '2', function(d,i) { return scale0(getData(d,i)) })\n            renderWatch.transition(distWrap.exit().selectAll('line.nv-dist' + axis), 'dist exit')\n                // .transition()\n                .attr(axis + '1', function(d,i) { return scale(getData(d,i)) })\n                .attr(axis + '2', function(d,i) { return scale(getData(d,i)) })\n                .style('stroke-opacity', 0)\n                .remove();\n            dist\n                .attr('class', function(d,i) { return 'nv-dist' + axis + ' nv-dist' + axis + '-' + i })\n                .attr(naxis + '1', 0)\n                .attr(naxis + '2', size);\n            renderWatch.transition(dist, 'dist')\n                // .transition()\n                .attr(axis + '1', function(d,i) { return scale(getData(d,i)) })\n                .attr(axis + '2', function(d,i) { return scale(getData(d,i)) })\n\n\n            scale0 = scale.copy();\n\n        });\n        renderWatch.renderEnd('distribution immediate');\n        return chart;\n    }\n\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart.dispatch = dispatch;\n\n    chart.margin = function(_) {\n        if (!arguments.length) return margin;\n        margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n        margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n        margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n        margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n        return chart;\n    };\n\n    chart.width = function(_) {\n        if (!arguments.length) return width;\n        width = _;\n        return chart;\n    };\n\n    chart.axis = function(_) {\n        if (!arguments.length) return axis;\n        axis = _;\n        return chart;\n    };\n\n    chart.size = function(_) {\n        if (!arguments.length) return size;\n        size = _;\n        return chart;\n    };\n\n    chart.getData = function(_) {\n        if (!arguments.length) return getData;\n        getData = d3.functor(_);\n        return chart;\n    };\n\n    chart.scale = function(_) {\n        if (!arguments.length) return scale;\n        scale = _;\n        return chart;\n    };\n\n    chart.color = function(_) {\n        if (!arguments.length) return color;\n        color = nv.utils.getColor(_);\n        return chart;\n    };\n\n    chart.duration = function(_) {\n        if (!arguments.length) return duration;\n        duration = _;\n        renderWatch.reset(duration);\n        return chart;\n    };\n    //============================================================\n\n\n    return chart;\n}\nnv.models.focus = function(content) {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var content = content || nv.models.line()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , brush = d3.svg.brush()\n        ;\n\n    var margin = {top: 10, right: 0, bottom: 30, left: 0}\n        , color = nv.utils.defaultColor()\n        , width = null\n        , height = 70\n        , showXAxis = true\n        , showYAxis = false\n        , rightAlignYAxis = false\n        , ticks = null\n        , x\n        , y\n        , brushExtent = null\n        , duration = 250\n        , dispatch = d3.dispatch('brush', 'onBrush', 'renderEnd')\n        , syncBrushing = true\n        ;\n\n    content.interactive(false);\n    content.pointActive(function(d) { return false; });\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(content);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = height - margin.top - margin.bottom;\n\n            chart.update = function() { \n                if( duration === 0 ) {\n                    container.call( chart );\n                } else {\n                    container.transition().duration(duration).call(chart);\n                }\n            };\n            chart.container = this;\n\n            // Setup Scales\n            x = content.xScale();\n            y = content.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-focus').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-focus').append('g');\n            var g = wrap.select('g');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            gEnter.append('g').attr('class', 'nv-background').append('rect');\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis');\n            gEnter.append('g').attr('class', 'nv-contentWrap');\n            gEnter.append('g').attr('class', 'nv-brushBackground');\n            gEnter.append('g').attr('class', 'nv-x nv-brush');\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            g.select('.nv-background rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n                \n            content\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled; }));\n\n            var contentWrap = g.select('.nv-contentWrap')\n                .datum(data.filter(function(d) { return !d.disabled; }));\n\n            d3.transition(contentWrap).call(content);\n            \n            // Setup Brush\n            brush\n                .x(x)\n                .on('brush', function() {\n                    onBrush(syncBrushing);\n                });\n\n            brush.on('brushend', function () {\n                if (!syncBrushing) {\n                    dispatch.onBrush(brush.empty() ? x.domain() : brush.extent());\n                }\n            });\n\n            if (brushExtent) brush.extent(brushExtent);\n\n            var brushBG = g.select('.nv-brushBackground').selectAll('g')\n                .data([brushExtent || brush.extent()]);\n    \n            var brushBGenter = brushBG.enter()\n                .append('g');\n\n            brushBGenter.append('rect')\n                .attr('class', 'left')\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('height', availableHeight);\n\n            brushBGenter.append('rect')\n                .attr('class', 'right')\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('height', availableHeight);\n\n            var gBrush = g.select('.nv-x.nv-brush')\n                .call(brush);\n            gBrush.selectAll('rect')\n                .attr('height', availableHeight);\n            gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n\n            onBrush(true);\n\n            g.select('.nv-background rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            if (showXAxis) {\n                xAxis.scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight, 0);\n  \n                g.select('.nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y.range()[0] + ')');\n                d3.transition(g.select('.nv-x.nv-axis'))\n                    .call(xAxis);\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n\n                d3.transition(g.select('.nv-y.nv-axis'))\n                    .call(yAxis);\n            }\n            \n            g.select('.nv-x.nv-axis')\n                .attr('transform', 'translate(0,' + y.range()[0] + ')');\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            //============================================================\n            // Functions\n            //------------------------------------------------------------\n    \n            // Taken from crossfilter (http://square.github.com/crossfilter/)\n            function resizePath(d) {\n                var e = +(d == 'e'),\n                    x = e ? 1 : -1,\n                    y = availableHeight / 3;\n                return 'M' + (0.5 * x) + ',' + y\n                    + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n                    + 'V' + (2 * y - 6)\n                    + 'A6,6 0 0 ' + e + ' ' + (0.5 * x) + ',' + (2 * y)\n                    + 'Z'\n                    + 'M' + (2.5 * x) + ',' + (y + 8)\n                    + 'V' + (2 * y - 8)\n                    + 'M' + (4.5 * x) + ',' + (y + 8)\n                    + 'V' + (2 * y - 8);\n            }\n    \n    \n            function updateBrushBG() {\n                if (!brush.empty()) brush.extent(brushExtent);\n                brushBG\n                    .data([brush.empty() ? x.domain() : brushExtent])\n                    .each(function(d,i) {\n                        var leftWidth = x(d[0]) - x.range()[0],\n                            rightWidth = availableWidth - x(d[1]);\n                        d3.select(this).select('.left')\n                            .attr('width',  leftWidth < 0 ? 0 : leftWidth);\n    \n                        d3.select(this).select('.right')\n                            .attr('x', x(d[1]))\n                            .attr('width', rightWidth < 0 ? 0 : rightWidth);\n                    });\n            }\n\n\n            function onBrush(shouldDispatch) {\n                brushExtent = brush.empty() ? null : brush.extent();\n                var extent = brush.empty() ? x.domain() : brush.extent();\n                dispatch.brush({extent: extent, brush: brush});\n                updateBrushBG();\n                if (shouldDispatch) {\n                    dispatch.onBrush(extent);\n                }\n            }\n        });\n\n        renderWatch.renderEnd('focus immediate');\n        return chart;\n    }\n\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.content = content;\n    chart.brush = brush;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showXAxis:      {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:    {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        brushExtent: {get: function(){return brushExtent;}, set: function(_){brushExtent=_;}},\n        syncBrushing: {get: function(){return syncBrushing;}, set: function(_){syncBrushing=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            content.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            content.color(color);\n        }},\n        interpolate: {get: function(){return content.interpolate();}, set: function(_){\n            content.interpolate(_);\n        }},\n        xTickFormat: {get: function(){return xAxis.tickFormat();}, set: function(_){\n            xAxis.tickFormat(_);\n        }},\n        yTickFormat: {get: function(){return yAxis.tickFormat();}, set: function(_){\n            yAxis.tickFormat(_);\n        }},\n        x: {get: function(){return content.x();}, set: function(_){\n            content.x(_);\n        }},\n        y: {get: function(){return content.y();}, set: function(_){\n            content.y(_);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( rightAlignYAxis ? 'right' : 'left');\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, content);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\nnv.models.forceDirectedGraph = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n    var margin = {top: 2, right: 0, bottom: 2, left: 0}\n        , width = 400\n        , height = 32\n        , container = null\n        , dispatch = d3.dispatch('renderEnd')\n        , color = nv.utils.getColor(['#000'])\n        , tooltip      = nv.models.tooltip()\n        , noData = null\n        // Force directed graph specific parameters [default values]\n        , linkStrength = 0.1\n        , friction = 0.9\n        , linkDist = 30\n        , charge = -120\n        , gravity = 0.1\n        , theta = 0.8\n        , alpha = 0.1\n        , radius = 5\n        // These functions allow to add extra attributes to ndes and links\n        ,nodeExtras = function(nodes) { /* Do nothing */ }\n        ,linkExtras = function(links) { /* Do nothing */ }\n        , getX=d3.functor(0.0)\n        , getY=d3.functor(0.0)\n        ;\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n        renderWatch.reset();\n\n        selection.each(function(data) {\n          container = d3.select(this);\n          nv.utils.initSVG(container);\n\n          var availableWidth = nv.utils.availableWidth(width, container, margin),\n              availableHeight = nv.utils.availableHeight(height, container, margin);\n\n          container\n                  .attr(\"width\", availableWidth)\n                  .attr(\"height\", availableHeight);\n\n          // Display No Data message if there's nothing to show.\n          if (!data || !data.links || !data.nodes) {\n              nv.utils.noData(chart, container)\n              return chart;\n          } else {\n              container.selectAll('.nv-noData').remove();\n          }\n          container.selectAll('*').remove();\n\n          // Collect names of all fields in the nodes\n          var nodeFieldSet = new Set();\n          data.nodes.forEach(function(node) {\n            var keys = Object.keys(node);\n            keys.forEach(function(key) {\n              nodeFieldSet.add(key);\n            });\n          });\n\n          var force = d3.layout.force()\n                .nodes(data.nodes)\n                .links(data.links)\n                .size([availableWidth, availableHeight])\n                .linkStrength(linkStrength)\n                .friction(friction)\n                .linkDistance(linkDist)\n                .charge(charge)\n                .gravity(gravity)\n                .theta(theta)\n                .alpha(alpha)\n                .start();\n\n          var link = container.selectAll(\".link\")\n                .data(data.links)\n                .enter().append(\"line\")\n                .attr(\"class\", \"nv-force-link\")\n                .style(\"stroke-width\", function(d) { return Math.sqrt(d.value); });\n\n          var node = container.selectAll(\".node\")\n                .data(data.nodes)\n                .enter()\n                .append(\"g\")\n                .attr(\"class\", \"nv-force-node\")\n                .call(force.drag);\n\n          node\n            .append(\"circle\")\n            .attr(\"r\", radius)\n            .style(\"fill\", function(d) { return color(d) } )\n            .on(\"mouseover\", function(evt) {\n              container.select('.nv-series-' + evt.seriesIndex + ' .nv-distx-' + evt.pointIndex)\n                  .attr('y1', evt.py);\n              container.select('.nv-series-' + evt.seriesIndex + ' .nv-disty-' + evt.pointIndex)\n                  .attr('x2', evt.px);\n\n              // Add 'series' object to\n              var nodeColor = color(evt);\n              evt.series = [];\n              nodeFieldSet.forEach(function(field) {\n                evt.series.push({\n                  color: nodeColor,\n                  key:   field,\n                  value: evt[field]\n                });\n              });\n              tooltip.data(evt).hidden(false);\n            })\n            .on(\"mouseout\",  function(d) {\n              tooltip.hidden(true);\n            });\n\n          tooltip.headerFormatter(function(d) {return \"Node\";});\n\n          // Apply extra attributes to nodes and links (if any)\n          linkExtras(link);\n          nodeExtras(node);\n\n          force.on(\"tick\", function() {\n              link.attr(\"x1\", function(d) { return d.source.x; })\n                  .attr(\"y1\", function(d) { return d.source.y; })\n                  .attr(\"x2\", function(d) { return d.target.x; })\n                  .attr(\"y2\", function(d) { return d.target.y; });\n\n              node.attr(\"transform\", function(d) {\n                return \"translate(\" + d.x + \", \" + d.y + \")\";\n              });\n            });\n        });\n\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:     {get: function(){return width;}, set: function(_){width=_;}},\n        height:    {get: function(){return height;}, set: function(_){height=_;}},\n\n        // Force directed graph specific parameters\n        linkStrength:{get: function(){return linkStrength;}, set: function(_){linkStrength=_;}},\n        friction:    {get: function(){return friction;}, set: function(_){friction=_;}},\n        linkDist:    {get: function(){return linkDist;}, set: function(_){linkDist=_;}},\n        charge:      {get: function(){return charge;}, set: function(_){charge=_;}},\n        gravity:     {get: function(){return gravity;}, set: function(_){gravity=_;}},\n        theta:       {get: function(){return theta;}, set: function(_){theta=_;}},\n        alpha:       {get: function(){return alpha;}, set: function(_){alpha=_;}},\n        radius:      {get: function(){return radius;}, set: function(_){radius=_;}},\n\n        //functor options\n        x: {get: function(){return getX;}, set: function(_){getX=d3.functor(_);}},\n        y: {get: function(){return getY;}, set: function(_){getY=d3.functor(_);}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        nodeExtras: {get: function(){return nodeExtras;}, set: function(_){\n            nodeExtras = _;\n        }},\n        linkExtras: {get: function(){return linkExtras;}, set: function(_){\n            linkExtras = _;\n        }}\n    });\n\n    chart.dispatch = dispatch;\n    chart.tooltip = tooltip;\n    nv.utils.initOptions(chart);\n    return chart;\n};\nnv.models.furiousLegend = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 5, right: 0, bottom: 5, left: 0}\n        , width = 400\n        , height = 20\n        , getKey = function(d) { return d.key }\n        , keyFormatter = function (d) { return d }\n        , color = nv.utils.getColor()\n        , maxKeyLength = 20 //default value for key lengths\n        , align = true\n        , padding = 28 //define how much space between legend items. - recommend 32 for furious version\n        , rightAlign = true\n        , updateState = true   //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\n        , radioButtonMode = false   //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\n        , expanded = false\n        , dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange')\n        , vers = 'classic' //Options are \"classic\" and \"furious\"\n        ;\n\n    function chart(selection) {\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-legend').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-legend').append('g');\n            var g = wrap.select('g');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            var series = g.selectAll('.nv-series')\n                .data(function(d) {\n                    if(vers != 'furious') return d;\n\n                    return d.filter(function(n) {\n                        return expanded ? true : !n.disengaged;\n                    });\n                });\n            var seriesEnter = series.enter().append('g').attr('class', 'nv-series')\n\n            var seriesShape;\n\n            if(vers == 'classic') {\n                seriesEnter.append('circle')\n                    .style('stroke-width', 2)\n                    .attr('class','nv-legend-symbol')\n                    .attr('r', 5);\n\n                seriesShape = series.select('circle');\n            } else if (vers == 'furious') {\n                seriesEnter.append('rect')\n                    .style('stroke-width', 2)\n                    .attr('class','nv-legend-symbol')\n                    .attr('rx', 3)\n                    .attr('ry', 3);\n\n                seriesShape = series.select('rect');\n\n                seriesEnter.append('g')\n                    .attr('class', 'nv-check-box')\n                    .property('innerHTML','<path d=\"M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z\" class=\"nv-box\"></path><path d=\"M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511\" class=\"nv-check\"></path>')\n                    .attr('transform', 'translate(-10,-8)scale(0.5)');\n\n                var seriesCheckbox = series.select('.nv-check-box');\n\n                seriesCheckbox.each(function(d,i) {\n                    d3.select(this).selectAll('path')\n                        .attr('stroke', setTextColor(d,i));\n                });\n            }\n\n            seriesEnter.append('text')\n                .attr('text-anchor', 'start')\n                .attr('class','nv-legend-text')\n                .attr('dy', '.32em')\n                .attr('dx', '8');\n\n            var seriesText = series.select('text.nv-legend-text');\n\n            series\n                .on('mouseover', function(d,i) {\n                    dispatch.legendMouseover(d,i);  //TODO: Make consistent with other event objects\n                })\n                .on('mouseout', function(d,i) {\n                    dispatch.legendMouseout(d,i);\n                })\n                .on('click', function(d,i) {\n                    dispatch.legendClick(d,i);\n                    // make sure we re-get data in case it was modified\n                    var data = series.data();\n                    if (updateState) {\n                        if(vers =='classic') {\n                            if (radioButtonMode) {\n                                //Radio button mode: set every series to disabled,\n                                //  and enable the clicked series.\n                                data.forEach(function(series) { series.disabled = true});\n                                d.disabled = false;\n                            }\n                            else {\n                                d.disabled = !d.disabled;\n                                if (data.every(function(series) { return series.disabled})) {\n                                    //the default behavior of NVD3 legends is, if every single series\n                                    // is disabled, turn all series' back on.\n                                    data.forEach(function(series) { series.disabled = false});\n                                }\n                            }\n                        } else if(vers == 'furious') {\n                            if(expanded) {\n                                d.disengaged = !d.disengaged;\n                                d.userDisabled = d.userDisabled == undefined ? !!d.disabled : d.userDisabled;\n                                d.disabled = d.disengaged || d.userDisabled;\n                            } else if (!expanded) {\n                                d.disabled = !d.disabled;\n                                d.userDisabled = d.disabled;\n                                var engaged = data.filter(function(d) { return !d.disengaged; });\n                                if (engaged.every(function(series) { return series.userDisabled })) {\n                                    //the default behavior of NVD3 legends is, if every single series\n                                    // is disabled, turn all series' back on.\n                                    data.forEach(function(series) {\n                                        series.disabled = series.userDisabled = false;\n                                    });\n                                }\n                            }\n                        }\n                        dispatch.stateChange({\n                            disabled: data.map(function(d) { return !!d.disabled }),\n                            disengaged: data.map(function(d) { return !!d.disengaged })\n                        });\n\n                    }\n                })\n                .on('dblclick', function(d,i) {\n                    if(vers == 'furious' && expanded) return;\n                    dispatch.legendDblclick(d,i);\n                    if (updateState) {\n                        // make sure we re-get data in case it was modified\n                        var data = series.data();\n                        //the default behavior of NVD3 legends, when double clicking one,\n                        // is to set all other series' to false, and make the double clicked series enabled.\n                        data.forEach(function(series) {\n                            series.disabled = true;\n                            if(vers == 'furious') series.userDisabled = series.disabled;\n                        });\n                        d.disabled = false;\n                        if(vers == 'furious') d.userDisabled = d.disabled;\n                        dispatch.stateChange({\n                            disabled: data.map(function(d) { return !!d.disabled })\n                        });\n                    }\n                });\n\n            series.classed('nv-disabled', function(d) { return d.userDisabled });\n            series.exit().remove();\n\n            seriesText\n                .attr('fill', setTextColor)\n                .text(function (d) { return keyFormatter(getKey(d)) });\n\n            //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\n            // NEW ALIGNING CODE, TODO: clean up\n\n            var versPadding;\n            switch(vers) {\n                case 'furious' :\n                    versPadding = 23;\n                    break;\n                case 'classic' :\n                    versPadding = 20;\n            }\n\n            if (align) {\n\n                var seriesWidths = [];\n                series.each(function(d,i) {\n                    var legendText;\n                    if (keyFormatter(getKey(d)) && keyFormatter(getKey(d)).length > maxKeyLength) {\n                        var trimmedKey = keyFormatter(getKey(d)).substring(0, maxKeyLength);\n                        legendText = d3.select(this).select('text').text(trimmedKey + \"...\");\n                        d3.select(this).append(\"svg:title\").text(keyFormatter(getKey(d)));\n                    } else {\n                        legendText = d3.select(this).select('text');\n                    }\n                    var nodeTextLength;\n                    try {\n                        nodeTextLength = legendText.node().getComputedTextLength();\n                        // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\n                        if(nodeTextLength <= 0) throw Error();\n                    }\n                    catch(e) {\n                        nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\n                    }\n\n                    seriesWidths.push(nodeTextLength + padding);\n                });\n\n                var seriesPerRow = 0;\n                var legendWidth = 0;\n                var columnWidths = [];\n\n                while ( legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\n                    columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\n                    legendWidth += seriesWidths[seriesPerRow++];\n                }\n                if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\n\n                while ( legendWidth > availableWidth && seriesPerRow > 1 ) {\n                    columnWidths = [];\n                    seriesPerRow--;\n\n                    for (var k = 0; k < seriesWidths.length; k++) {\n                        if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0) )\n                            columnWidths[k % seriesPerRow] = seriesWidths[k];\n                    }\n\n                    legendWidth = columnWidths.reduce(function(prev, cur, index, array) {\n                        return prev + cur;\n                    });\n                }\n\n                var xPositions = [];\n                for (var i = 0, curX = 0; i < seriesPerRow; i++) {\n                    xPositions[i] = curX;\n                    curX += columnWidths[i];\n                }\n\n                series\n                    .attr('transform', function(d, i) {\n                        return 'translate(' + xPositions[i % seriesPerRow] + ',' + (5 + Math.floor(i / seriesPerRow) * versPadding) + ')';\n                    });\n\n                //position legend as far right as possible within the total width\n                if (rightAlign) {\n                    g.attr('transform', 'translate(' + (width - margin.right - legendWidth) + ',' + margin.top + ')');\n                }\n                else {\n                    g.attr('transform', 'translate(0' + ',' + margin.top + ')');\n                }\n\n                height = margin.top + margin.bottom + (Math.ceil(seriesWidths.length / seriesPerRow) * versPadding);\n\n            } else {\n\n                var ypos = 5,\n                    newxpos = 5,\n                    maxwidth = 0,\n                    xpos;\n                series\n                    .attr('transform', function(d, i) {\n                        var length = d3.select(this).select('text').node().getComputedTextLength() + padding;\n                        xpos = newxpos;\n\n                        if (width < margin.left + margin.right + xpos + length) {\n                            newxpos = xpos = 5;\n                            ypos += versPadding;\n                        }\n\n                        newxpos += length;\n                        if (newxpos > maxwidth) maxwidth = newxpos;\n\n                        return 'translate(' + xpos + ',' + ypos + ')';\n                    });\n\n                //position legend as far right as possible within the total width\n                g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n\n                height = margin.top + margin.bottom + ypos + 15;\n            }\n\n            if(vers == 'furious') {\n                // Size rectangles after text is placed\n                seriesShape\n                    .attr('width', function(d,i) {\n                        return seriesText[0][i].getComputedTextLength() + 27;\n                    })\n                    .attr('height', 18)\n                    .attr('y', -9)\n                    .attr('x', -15)\n            }\n\n            seriesShape\n                .style('fill', setBGColor)\n                .style('stroke', function(d,i) { return d.color || color(d, i) });\n        });\n\n        function setTextColor(d,i) {\n            if(vers != 'furious') return '#000';\n            if(expanded) {\n                return d.disengaged ? color(d,i) : '#fff';\n            } else if (!expanded) {\n                return !!d.disabled ? color(d,i) : '#fff';\n            }\n        }\n\n        function setBGColor(d,i) {\n            if(expanded && vers == 'furious') {\n                return d.disengaged ? '#fff' : color(d,i);\n            } else {\n                return !!d.disabled ? '#fff' : color(d,i);\n            }\n        }\n\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:          {get: function(){return width;}, set: function(_){width=_;}},\n        height:         {get: function(){return height;}, set: function(_){height=_;}},\n        key:            {get: function(){return getKey;}, set: function(_){getKey=_;}},\n        keyFormatter:   {get: function(){return keyFormatter;}, set: function(_){keyFormatter=_;}},\n        align:          {get: function(){return align;}, set: function(_){align=_;}},\n        rightAlign:     {get: function(){return rightAlign;}, set: function(_){rightAlign=_;}},\n        maxKeyLength:   {get: function(){return maxKeyLength;}, set: function(_){maxKeyLength=_;}},\n        padding:        {get: function(){return padding;}, set: function(_){padding=_;}},\n        updateState:    {get: function(){return updateState;}, set: function(_){updateState=_;}},\n        radioButtonMode:{get: function(){return radioButtonMode;}, set: function(_){radioButtonMode=_;}},\n        expanded:       {get: function(){return expanded;}, set: function(_){expanded=_;}},\n        vers:           {get: function(){return vers;}, set: function(_){vers=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n//TODO: consider deprecating and using multibar with single series for this\nnv.models.historicalBar = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = null\n        , height = null\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container = null\n        , x = d3.scale.linear()\n        , y = d3.scale.linear()\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , forceX = []\n        , forceY = [0]\n        , padData = false\n        , clipEdge = true\n        , color = nv.utils.defaultColor()\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd')\n        , interactive = true\n        ;\n\n    var renderWatch = nv.utils.renderWatch(dispatch, 0);\n\n    function chart(selection) {\n        selection.each(function(data) {\n            renderWatch.reset();\n\n            container = d3.select(this);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            nv.utils.initSVG(container);\n\n            // Setup Scales\n            x.domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ));\n\n            if (padData)\n                x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n            else\n                x.range(xRange || [0, availableWidth]);\n\n            y.domain(yDomain || d3.extent(data[0].values.map(getY).concat(forceY) ))\n                .range(yRange || [availableHeight, 0]);\n\n            // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n            if (x.domain()[0] === x.domain()[1])\n                x.domain()[0] ?\n                    x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n                    : x.domain([-1,1]);\n\n            if (y.domain()[0] === y.domain()[1])\n                y.domain()[0] ?\n                    y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n                    : y.domain([-1,1]);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-historicalBar-' + id).data([data[0].values]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBar-' + id);\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-bars');\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            container\n                .on('click', function(d,i) {\n                    dispatch.chartClick({\n                        data: d,\n                        index: i,\n                        pos: d3.event,\n                        id: id\n                    });\n                });\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-chart-clip-path-' + id)\n                .append('rect');\n\n            wrap.select('#nv-chart-clip-path-' + id + ' rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            g.attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\n            var bars = wrap.select('.nv-bars').selectAll('.nv-bar')\n                .data(function(d) { return d }, function(d,i) {return getX(d,i)});\n            bars.exit().remove();\n\n            bars.enter().append('rect')\n                .attr('x', 0 )\n                .attr('y', function(d,i) {  return nv.utils.NaNtoZero(y(Math.max(0, getY(d,i)))) })\n                .attr('height', function(d,i) { return nv.utils.NaNtoZero(Math.abs(y(getY(d,i)) - y(0))) })\n                .attr('transform', function(d,i) { return 'translate(' + (x(getX(d,i)) - availableWidth / data[0].values.length * .45) + ',0)'; })\n                .on('mouseover', function(d,i) {\n                    if (!interactive) return;\n                    d3.select(this).classed('hover', true);\n                    dispatch.elementMouseover({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n\n                })\n                .on('mouseout', function(d,i) {\n                    if (!interactive) return;\n                    d3.select(this).classed('hover', false);\n                    dispatch.elementMouseout({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mousemove', function(d,i) {\n                    if (!interactive) return;\n                    dispatch.elementMousemove({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('click', function(d,i) {\n                    if (!interactive) return;\n                    var element = this;\n                    dispatch.elementClick({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\"),\n                        event: d3.event,\n                        element: element\n                    });\n                    d3.event.stopPropagation();\n                })\n                .on('dblclick', function(d,i) {\n                    if (!interactive) return;\n                    dispatch.elementDblClick({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                    d3.event.stopPropagation();\n                });\n\n            bars\n                .attr('fill', function(d,i) { return color(d, i); })\n                .attr('class', function(d,i,j) { return (getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive') + ' nv-bar-' + j + '-' + i })\n                .watchTransition(renderWatch, 'bars')\n                .attr('transform', function(d,i) { return 'translate(' + (x(getX(d,i)) - availableWidth / data[0].values.length * .45) + ',0)'; })\n                //TODO: better width calculations that don't assume always uniform data spacing;w\n                .attr('width', (availableWidth / data[0].values.length) * .9 );\n\n            bars.watchTransition(renderWatch, 'bars')\n                .attr('y', function(d,i) {\n                    var rval = getY(d,i) < 0 ?\n                        y(0) :\n                            y(0) - y(getY(d,i)) < 1 ?\n                        y(0) - 1 :\n                        y(getY(d,i));\n                    return nv.utils.NaNtoZero(rval);\n                })\n                .attr('height', function(d,i) { return nv.utils.NaNtoZero(Math.max(Math.abs(y(getY(d,i)) - y(0)),1)) });\n\n        });\n\n        renderWatch.renderEnd('historicalBar immediate');\n        return chart;\n    }\n\n    //Create methods to allow outside functions to highlight a specific bar.\n    chart.highlightPoint = function(pointIndex, isHoverOver) {\n        container\n            .select(\".nv-bars .nv-bar-0-\" + pointIndex)\n            .classed(\"hover\", isHoverOver)\n        ;\n    };\n\n    chart.clearHighlights = function() {\n        container\n            .select(\".nv-bars .nv-bar.hover\")\n            .classed(\"hover\", false)\n        ;\n    };\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:   {get: function(){return width;}, set: function(_){width=_;}},\n        height:  {get: function(){return height;}, set: function(_){height=_;}},\n        forceX:  {get: function(){return forceX;}, set: function(_){forceX=_;}},\n        forceY:  {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        padData: {get: function(){return padData;}, set: function(_){padData=_;}},\n        x:       {get: function(){return getX;}, set: function(_){getX=_;}},\n        y:       {get: function(){return getY;}, set: function(_){getY=_;}},\n        xScale:  {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:  {get: function(){return y;}, set: function(_){y=_;}},\n        xDomain: {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain: {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:  {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:  {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        clipEdge:    {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n        id:          {get: function(){return id;}, set: function(_){id=_;}},\n        interactive: {get: function(){return interactive;}, set: function(_){interactive=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.historicalBarChart = function(bar_model) {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var bars = bar_model || nv.models.historicalBar()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , legend = nv.models.legend()\n        , interactiveLayer = nv.interactiveGuideline()\n        , tooltip = nv.models.tooltip()\n        ;\n\n\n    var margin = {top: 30, right: 90, bottom: 50, left: 90}\n        , marginTop = null\n        , color = nv.utils.defaultColor()\n        , width = null\n        , height = null\n        , showLegend = false\n        , showXAxis = true\n        , showYAxis = true\n        , rightAlignYAxis = false\n        , useInteractiveGuideline = false\n        , x\n        , y\n        , state = {}\n        , defaultState = null\n        , noData = null\n        , dispatch = d3.dispatch('tooltipHide', 'stateChange', 'changeState', 'renderEnd')\n        , transitionDuration = 250\n        ;\n\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient( (rightAlignYAxis) ? 'right' : 'left');\n    tooltip\n        .duration(0)\n        .headerEnabled(false)\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        })\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, 0);\n\n    function chart(selection) {\n        selection.each(function(data) {\n            renderWatch.reset();\n            renderWatch.models(bars);\n            if (showXAxis) renderWatch.models(xAxis);\n            if (showYAxis) renderWatch.models(yAxis);\n\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() { container.transition().duration(transitionDuration).call(chart) };\n            chart.container = this;\n\n            //set state.disabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display noData message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = bars.xScale();\n            y = bars.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-historicalBarChart').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-historicalBarChart').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis');\n            gEnter.append('g').attr('class', 'nv-barsWrap');\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n            gEnter.append('g').attr('class', 'nv-interactive');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                legend.width(availableWidth);\n\n                g.select('.nv-legendWrap')\n                    .datum(data)\n                    .call(legend);\n\n                if (!marginTop && legend.height() !== margin.top) {\n                    margin.top = legend.height();\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n                }\n\n                wrap.select('.nv-legendWrap')\n                    .attr('transform', 'translate(0,' + (-margin.top) +')')\n            }\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            //Set up interactive layer\n            if (useInteractiveGuideline) {\n                interactiveLayer\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .margin({left:margin.left, top:margin.top})\n                    .svgContainer(container)\n                    .xScale(x);\n                wrap.select(\".nv-interactive\").call(interactiveLayer);\n            }\n            bars\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled }));\n\n            var barsWrap = g.select('.nv-barsWrap')\n                .datum(data.filter(function(d) { return !d.disabled }));\n            barsWrap.transition().call(bars);\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight, 0);\n\n                g.select('.nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y.range()[0] + ')');\n                g.select('.nv-x.nv-axis')\n                    .transition()\n                    .call(xAxis);\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n\n                g.select('.nv-y.nv-axis')\n                    .transition()\n                    .call(yAxis);\n            }\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            interactiveLayer.dispatch.on('elementMousemove', function(e) {\n                bars.clearHighlights();\n\n                var singlePoint, pointIndex, pointXLocation, allData = [];\n                data\n                    .filter(function(series, i) {\n                        series.seriesIndex = i;\n                        return !series.disabled;\n                    })\n                    .forEach(function(series,i) {\n                        pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n                        bars.highlightPoint(pointIndex,true);\n                        var point = series.values[pointIndex];\n                        if (point === undefined) return;\n                        if (singlePoint === undefined) singlePoint = point;\n                        if (pointXLocation === undefined) pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n                        allData.push({\n                            key: series.key,\n                            value: chart.y()(point, pointIndex),\n                            color: color(series,series.seriesIndex),\n                            data: series.values[pointIndex]\n                        });\n                    });\n\n                var xValue = xAxis.tickFormat()(chart.x()(singlePoint,pointIndex));\n                interactiveLayer.tooltip\n                    .valueFormatter(function(d,i) {\n                        return yAxis.tickFormat()(d);\n                    })\n                    .data({\n                        value: xValue,\n                        index: pointIndex,\n                        series: allData\n                    })();\n\n                interactiveLayer.renderGuideLine(pointXLocation);\n\n            });\n\n            interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n                dispatch.tooltipHide();\n                bars.clearHighlights();\n            });\n\n            legend.dispatch.on('legendClick', function(d,i) {\n                d.disabled = !d.disabled;\n\n                if (!data.filter(function(d) { return !d.disabled }).length) {\n                    data.map(function(d) {\n                        d.disabled = false;\n                        wrap.selectAll('.nv-series').classed('disabled', false);\n                        return d;\n                    });\n                }\n\n                state.disabled = data.map(function(d) { return !!d.disabled });\n                dispatch.stateChange(state);\n\n                selection.transition().call(chart);\n            });\n\n            legend.dispatch.on('legendDblclick', function(d) {\n                //Double clicking should always enable current series, and disabled all others.\n                data.forEach(function(d) {\n                    d.disabled = true;\n                });\n                d.disabled = false;\n\n                state.disabled = data.map(function(d) { return !!d.disabled });\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n\n                    state.disabled = e.disabled;\n                }\n\n                chart.update();\n            });\n        });\n\n        renderWatch.renderEnd('historicalBarChart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    bars.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt['series'] = {\n            key: chart.x()(evt.data),\n            value: chart.y()(evt.data),\n            color: evt.color\n        };\n        tooltip.data(evt).hidden(false);\n    });\n\n    bars.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    bars.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.bars = bars;\n    chart.legend = legend;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        showXAxis: {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis: {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        defaultState:    {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n            bars.color(color);\n        }},\n        duration:    {get: function(){return transitionDuration;}, set: function(_){\n            transitionDuration=_;\n            renderWatch.reset(transitionDuration);\n            yAxis.duration(transitionDuration);\n            xAxis.duration(transitionDuration);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( (_) ? 'right' : 'left');\n        }},\n        useInteractiveGuideline: {get: function(){return useInteractiveGuideline;}, set: function(_){\n            useInteractiveGuideline = _;\n            if (_ === true) {\n                chart.interactive(false);\n            }\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, bars);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\n\n// ohlcChart is just a historical chart with ohlc bars and some tweaks\nnv.models.ohlcBarChart = function() {\n    var chart = nv.models.historicalBarChart(nv.models.ohlcBar());\n\n    // special default tooltip since we show multiple values per x\n    chart.useInteractiveGuideline(true);\n    chart.interactiveLayer.tooltip.contentGenerator(function(data) {\n        // we assume only one series exists for this chart\n        var d = data.series[0].data;\n        // match line colors as defined in nv.d3.css\n        var color = d.open < d.close ? \"2ca02c\" : \"d62728\";\n        return '' +\n            '<h3 style=\"color: #' + color + '\">' + data.value + '</h3>' +\n            '<table>' +\n            '<tr><td>open:</td><td>' + chart.yAxis.tickFormat()(d.open) + '</td></tr>' +\n            '<tr><td>close:</td><td>' + chart.yAxis.tickFormat()(d.close) + '</td></tr>' +\n            '<tr><td>high</td><td>' + chart.yAxis.tickFormat()(d.high) + '</td></tr>' +\n            '<tr><td>low:</td><td>' + chart.yAxis.tickFormat()(d.low) + '</td></tr>' +\n            '</table>';\n    });\n    return chart;\n};\n\n// candlestickChart is just a historical chart with candlestick bars and some tweaks\nnv.models.candlestickBarChart = function() {\n    var chart = nv.models.historicalBarChart(nv.models.candlestickBar());\n\n    // special default tooltip since we show multiple values per x\n    chart.useInteractiveGuideline(true);\n    chart.interactiveLayer.tooltip.contentGenerator(function(data) {\n        // we assume only one series exists for this chart\n        var d = data.series[0].data;\n        // match line colors as defined in nv.d3.css\n        var color = d.open < d.close ? \"2ca02c\" : \"d62728\";\n        return '' +\n            '<h3 style=\"color: #' + color + '\">' + data.value + '</h3>' +\n            '<table>' +\n            '<tr><td>open:</td><td>' + chart.yAxis.tickFormat()(d.open) + '</td></tr>' +\n            '<tr><td>close:</td><td>' + chart.yAxis.tickFormat()(d.close) + '</td></tr>' +\n            '<tr><td>high</td><td>' + chart.yAxis.tickFormat()(d.high) + '</td></tr>' +\n            '<tr><td>low:</td><td>' + chart.yAxis.tickFormat()(d.low) + '</td></tr>' +\n            '</table>';\n    });\n    return chart;\n};\nnv.models.legend = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 5, right: 0, bottom: 5, left: 0}\n        , width = 400\n        , height = 20\n        , getKey = function(d) { return d.key }\n        , keyFormatter = function (d) { return d }\n        , color = nv.utils.getColor()\n        , maxKeyLength = 20 //default value for key lengths\n        , align = true\n        , padding = 32 //define how much space between legend items. - recommend 32 for furious version\n        , rightAlign = true\n        , updateState = true   //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\n        , enableDoubleClick = true   //If true, legend will enable double click handling\n        , radioButtonMode = false   //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\n        , expanded = false\n        , dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange')\n        , vers = 'classic' //Options are \"classic\" and \"furious\"\n        ;\n\n    function chart(selection) {\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-legend').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-legend').append('g');\n            var g = wrap.select('g');\n\n            if (rightAlign)\n                wrap.attr('transform', 'translate(' + (- margin.right) + ',' + margin.top + ')');\n            else\n                wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            var series = g.selectAll('.nv-series')\n                .data(function(d) {\n                    if(vers != 'furious') return d;\n\n                    return d.filter(function(n) {\n                        return expanded ? true : !n.disengaged;\n                    });\n                });\n\n            var seriesEnter = series.enter().append('g').attr('class', 'nv-series');\n            var seriesShape;\n\n            var versPadding;\n            switch(vers) {\n                case 'furious' :\n                    versPadding = 23;\n                    break;\n                case 'classic' :\n                    versPadding = 20;\n            }\n\n            if(vers == 'classic') {\n                seriesEnter.append('circle')\n                    .style('stroke-width', 2)\n                    .attr('class','nv-legend-symbol')\n                    .attr('r', 5);\n\n                seriesShape = series.select('.nv-legend-symbol');\n            } else if (vers == 'furious') {\n                seriesEnter.append('rect')\n                    .style('stroke-width', 2)\n                    .attr('class','nv-legend-symbol')\n                    .attr('rx', 3)\n                    .attr('ry', 3);\n                seriesShape = series.select('.nv-legend-symbol');\n\n                seriesEnter.append('g')\n                    .attr('class', 'nv-check-box')\n                    .property('innerHTML','<path d=\"M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z\" class=\"nv-box\"></path><path d=\"M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511\" class=\"nv-check\"></path>')\n                    .attr('transform', 'translate(-10,-8)scale(0.5)');\n\n                var seriesCheckbox = series.select('.nv-check-box');\n\n                seriesCheckbox.each(function(d,i) {\n                    d3.select(this).selectAll('path')\n                        .attr('stroke', setTextColor(d,i));\n                });\n            }\n\n            seriesEnter.append('text')\n                .attr('text-anchor', 'start')\n                .attr('class','nv-legend-text')\n                .attr('dy', '.32em')\n                .attr('dx', '8');\n\n            var seriesText = series.select('text.nv-legend-text');\n\n            series\n                .on('mouseover', function(d,i) {\n                    dispatch.legendMouseover(d,i);  //TODO: Make consistent with other event objects\n                })\n                .on('mouseout', function(d,i) {\n                    dispatch.legendMouseout(d,i);\n                })\n                .on('click', function(d,i) {\n                    dispatch.legendClick(d,i);\n                    // make sure we re-get data in case it was modified\n                    var data = series.data();\n                    if (updateState) {\n                        if(vers =='classic') {\n                            if (radioButtonMode) {\n                                //Radio button mode: set every series to disabled,\n                                //  and enable the clicked series.\n                                data.forEach(function(series) { series.disabled = true});\n                                d.disabled = false;\n                            }\n                            else {\n                                d.disabled = !d.disabled;\n                                if (data.every(function(series) { return series.disabled})) {\n                                    //the default behavior of NVD3 legends is, if every single series\n                                    // is disabled, turn all series' back on.\n                                    data.forEach(function(series) { series.disabled = false});\n                                }\n                            }\n                        } else if(vers == 'furious') {\n                            if(expanded) {\n                                d.disengaged = !d.disengaged;\n                                d.userDisabled = d.userDisabled == undefined ? !!d.disabled : d.userDisabled;\n                                d.disabled = d.disengaged || d.userDisabled;\n                            } else if (!expanded) {\n                                d.disabled = !d.disabled;\n                                d.userDisabled = d.disabled;\n                                var engaged = data.filter(function(d) { return !d.disengaged; });\n                                if (engaged.every(function(series) { return series.userDisabled })) {\n                                    //the default behavior of NVD3 legends is, if every single series\n                                    // is disabled, turn all series' back on.\n                                    data.forEach(function(series) {\n                                        series.disabled = series.userDisabled = false;\n                                    });\n                                }\n                            }\n                        }\n                        dispatch.stateChange({\n                            disabled: data.map(function(d) { return !!d.disabled }),\n                            disengaged: data.map(function(d) { return !!d.disengaged })\n                        });\n\n                    }\n                })\n                .on('dblclick', function(d,i) {\n                    if (enableDoubleClick) {\n                        if (vers == 'furious' && expanded) return;\n                        dispatch.legendDblclick(d, i);\n                        if (updateState) {\n                            // make sure we re-get data in case it was modified\n                            var data = series.data();\n                            //the default behavior of NVD3 legends, when double clicking one,\n                            // is to set all other series' to false, and make the double clicked series enabled.\n                            data.forEach(function (series) {\n                                series.disabled = true;\n                                if (vers == 'furious') series.userDisabled = series.disabled;\n                            });\n                            d.disabled = false;\n                            if (vers == 'furious') d.userDisabled = d.disabled;\n                            dispatch.stateChange({\n                                disabled: data.map(function (d) {\n                                    return !!d.disabled\n                                })\n                            });\n                        }\n                    }\n                });\n\n            series.classed('nv-disabled', function(d) { return d.userDisabled });\n            series.exit().remove();\n\n            seriesText\n                .attr('fill', setTextColor)\n                .text(function (d) { return keyFormatter(getKey(d)) });\n\n            //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\n            // NEW ALIGNING CODE, TODO: clean up\n            var legendWidth = 0;\n            if (align) {\n\n                var seriesWidths = [];\n                series.each(function(d,i) {\n                    var legendText;\n                    if (keyFormatter(getKey(d)) && keyFormatter(getKey(d)).length > maxKeyLength) {\n                        var trimmedKey = keyFormatter(getKey(d)).substring(0, maxKeyLength);\n                        legendText = d3.select(this).select('text').text(trimmedKey + \"...\");\n                        d3.select(this).append(\"svg:title\").text(keyFormatter(getKey(d)));\n                    } else {\n                        legendText = d3.select(this).select('text');\n                    }\n                    var nodeTextLength;\n                    try {\n                        nodeTextLength = legendText.node().getComputedTextLength();\n                        // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\n                        if(nodeTextLength <= 0) throw Error();\n                    }\n                    catch(e) {\n                        nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\n                    }\n\n                    seriesWidths.push(nodeTextLength + padding);\n                });\n\n                var seriesPerRow = 0;\n                var columnWidths = [];\n                legendWidth = 0;\n\n                while ( legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\n                    columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\n                    legendWidth += seriesWidths[seriesPerRow++];\n                }\n                if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\n\n                while ( legendWidth > availableWidth && seriesPerRow > 1 ) {\n                    columnWidths = [];\n                    seriesPerRow--;\n\n                    for (var k = 0; k < seriesWidths.length; k++) {\n                        if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0) )\n                            columnWidths[k % seriesPerRow] = seriesWidths[k];\n                    }\n\n                    legendWidth = columnWidths.reduce(function(prev, cur, index, array) {\n                        return prev + cur;\n                    });\n                }\n\n                var xPositions = [];\n                for (var i = 0, curX = 0; i < seriesPerRow; i++) {\n                    xPositions[i] = curX;\n                    curX += columnWidths[i];\n                }\n\n                series\n                    .attr('transform', function(d, i) {\n                        return 'translate(' + xPositions[i % seriesPerRow] + ',' + (5 + Math.floor(i / seriesPerRow) * versPadding) + ')';\n                    });\n\n                //position legend as far right as possible within the total width\n                if (rightAlign) {\n                    g.attr('transform', 'translate(' + (width - margin.right - legendWidth) + ',' + margin.top + ')');\n                }\n                else {\n                    g.attr('transform', 'translate(0' + ',' + margin.top + ')');\n                }\n\n                height = margin.top + margin.bottom + (Math.ceil(seriesWidths.length / seriesPerRow) * versPadding);\n\n            } else {\n\n                var ypos = 5,\n                    newxpos = 5,\n                    maxwidth = 0,\n                    xpos;\n                series\n                    .attr('transform', function(d, i) {\n                        var length = d3.select(this).select('text').node().getComputedTextLength() + padding;\n                        xpos = newxpos;\n\n                        if (width < margin.left + margin.right + xpos + length) {\n                            newxpos = xpos = 5;\n                            ypos += versPadding;\n                        }\n\n                        newxpos += length;\n                        if (newxpos > maxwidth) maxwidth = newxpos;\n\n                        if(legendWidth < xpos + maxwidth) {\n                            legendWidth = xpos + maxwidth;\n                        }\n                        return 'translate(' + xpos + ',' + ypos + ')';\n                    });\n\n                //position legend as far right as possible within the total width\n                g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n\n                height = margin.top + margin.bottom + ypos + 15;\n            }\n\n            if(vers == 'furious') {\n                // Size rectangles after text is placed\n                seriesShape\n                    .attr('width', function(d,i) {\n                        return seriesText[0][i].getComputedTextLength() + 27;\n                    })\n                    .attr('height', 18)\n                    .attr('y', -9)\n                    .attr('x', -15);\n\n                // The background for the expanded legend (UI)\n                gEnter.insert('rect',':first-child')\n                    .attr('class', 'nv-legend-bg')\n                    .attr('fill', '#eee')\n                    // .attr('stroke', '#444')\n                    .attr('opacity',0);\n\n                var seriesBG = g.select('.nv-legend-bg');\n\n                seriesBG\n                .transition().duration(300)\n                    .attr('x', -versPadding )\n                    .attr('width', legendWidth + versPadding - 12)\n                    .attr('height', height + 10)\n                    .attr('y', -margin.top - 10)\n                    .attr('opacity', expanded ? 1 : 0);\n\n\n            }\n\n            seriesShape\n                .style('fill', setBGColor)\n                .style('fill-opacity', setBGOpacity)\n                .style('stroke', setBGColor);\n        });\n\n        function setTextColor(d,i) {\n            if(vers != 'furious') return '#000';\n            if(expanded) {\n                return d.disengaged ? '#000' : '#fff';\n            } else if (!expanded) {\n                if(!d.color) d.color = color(d,i);\n                return !!d.disabled ? d.color : '#fff';\n            }\n        }\n\n        function setBGColor(d,i) {\n            if(expanded && vers == 'furious') {\n                return d.disengaged ? '#eee' : d.color || color(d,i);\n            } else {\n                return d.color || color(d,i);\n            }\n        }\n\n\n        function setBGOpacity(d,i) {\n            if(expanded && vers == 'furious') {\n                return 1;\n            } else {\n                return !!d.disabled ? 0 : 1;\n            }\n        }\n\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:          {get: function(){return width;}, set: function(_){width=_;}},\n        height:         {get: function(){return height;}, set: function(_){height=_;}},\n        key:            {get: function(){return getKey;}, set: function(_){getKey=_;}},\n        keyFormatter:   {get: function(){return keyFormatter;}, set: function(_){keyFormatter=_;}},\n        align:          {get: function(){return align;}, set: function(_){align=_;}},\n        maxKeyLength:   {get: function(){return maxKeyLength;}, set: function(_){maxKeyLength=_;}},\n        rightAlign:     {get: function(){return rightAlign;}, set: function(_){rightAlign=_;}},\n        padding:        {get: function(){return padding;}, set: function(_){padding=_;}},\n        updateState:    {get: function(){return updateState;}, set: function(_){updateState=_;}},\n        enableDoubleClick: {get: function(){return enableDoubleClick;}, set: function(_){enableDoubleClick=_;}},\n        radioButtonMode:{get: function(){return radioButtonMode;}, set: function(_){radioButtonMode=_;}},\n        expanded:       {get: function(){return expanded;}, set: function(_){expanded=_;}},\n        vers:           {get: function(){return vers;}, set: function(_){vers=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.line = function() {\n    \"use strict\";\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var  scatter = nv.models.scatter()\n        ;\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 960\n        , height = 500\n        , container = null\n        , strokeWidth = 1.5\n        , color = nv.utils.defaultColor() // a function that returns a color\n        , getX = function(d) { return d.x } // accessor to get the x value from a data point\n        , getY = function(d) { return d.y } // accessor to get the y value from a data point\n        , defined = function(d,i) { return !isNaN(getY(d,i)) && getY(d,i) !== null } // allows a line to be not continuous when it is not defined\n        , isArea = function(d) { return d.area } // decides if a line is an area or just a line\n        , clipEdge = false // if true, masks lines within x and y scale\n        , x //can be accessed via chart.xScale()\n        , y //can be accessed via chart.yScale()\n        , interpolate = \"linear\" // controls the line interpolation\n        , duration = 250\n        , dispatch = d3.dispatch('elementClick', 'elementMouseover', 'elementMouseout', 'renderEnd')\n        ;\n\n    scatter\n        .pointSize(16) // default size\n        .pointDomain([16,256]) //set to speed up calculation, needs to be unset if there is a custom size accessor\n    ;\n\n    //============================================================\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0, y0 //used to store previous scales\n        , renderWatch = nv.utils.renderWatch(dispatch, duration)\n        ;\n\n    //============================================================\n\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(scatter);\n        selection.each(function(data) {\n            container = d3.select(this);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n            nv.utils.initSVG(container);\n\n            // Setup Scales\n            x = scatter.xScale();\n            y = scatter.yScale();\n\n            x0 = x0 || x;\n            y0 = y0 || y;\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-line').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-line');\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-groups');\n            gEnter.append('g').attr('class', 'nv-scatterWrap');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            scatter\n                .width(availableWidth)\n                .height(availableHeight);\n\n            var scatterWrap = wrap.select('.nv-scatterWrap');\n            scatterWrap.call(scatter);\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-edge-clip-' + scatter.id())\n                .append('rect');\n\n            wrap.select('#nv-edge-clip-' + scatter.id() + ' rect')\n                .attr('width', availableWidth)\n                .attr('height', (availableHeight > 0) ? availableHeight : 0);\n\n            g   .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n            scatterWrap\n                .attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + scatter.id() + ')' : '');\n\n            var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n                .data(function(d) { return d }, function(d) { return d.key });\n            groups.enter().append('g')\n                .style('stroke-opacity', 1e-6)\n                .style('stroke-width', function(d) { return d.strokeWidth || strokeWidth })\n                .style('fill-opacity', 1e-6);\n\n            groups.exit().remove();\n\n            groups\n                .attr('class', function(d,i) {\n                    return (d.classed || '') + ' nv-group nv-series-' + i;\n                })\n                .classed('hover', function(d) { return d.hover })\n                .style('fill', function(d,i){ return color(d, i) })\n                .style('stroke', function(d,i){ return color(d, i)});\n            groups.watchTransition(renderWatch, 'line: groups')\n                .style('stroke-opacity', 1)\n                .style('fill-opacity', function(d) { return d.fillOpacity || .5});\n\n            var areaPaths = groups.selectAll('path.nv-area')\n                .data(function(d) { return isArea(d) ? [d] : [] }); // this is done differently than lines because I need to check if series is an area\n            areaPaths.enter().append('path')\n                .attr('class', 'nv-area')\n                .attr('d', function(d) {\n                    return d3.svg.area()\n                        .interpolate(interpolate)\n                        .defined(defined)\n                        .x(function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n                        .y0(function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n                        .y1(function(d,i) { return y0( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\n                        //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n                        .apply(this, [d.values])\n                });\n            groups.exit().selectAll('path.nv-area')\n                .remove();\n\n            areaPaths.watchTransition(renderWatch, 'line: areaPaths')\n                .attr('d', function(d) {\n                    return d3.svg.area()\n                        .interpolate(interpolate)\n                        .defined(defined)\n                        .x(function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n                        .y0(function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n                        .y1(function(d,i) { return y( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\n                        //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\n                        .apply(this, [d.values])\n                });\n\n            var linePaths = groups.selectAll('path.nv-line')\n                .data(function(d) { return [d.values] });\n\n            linePaths.enter().append('path')\n                .attr('class', 'nv-line')\n                .attr('d',\n                    d3.svg.line()\n                    .interpolate(interpolate)\n                    .defined(defined)\n                    .x(function(d,i) { return nv.utils.NaNtoZero(x0(getX(d,i))) })\n                    .y(function(d,i) { return nv.utils.NaNtoZero(y0(getY(d,i))) })\n            );\n\n            linePaths.watchTransition(renderWatch, 'line: linePaths')\n                .attr('d',\n                    d3.svg.line()\n                    .interpolate(interpolate)\n                    .defined(defined)\n                    .x(function(d,i) { return nv.utils.NaNtoZero(x(getX(d,i))) })\n                    .y(function(d,i) { return nv.utils.NaNtoZero(y(getY(d,i))) })\n            );\n\n            //store old scales for use in transitions on update\n            x0 = x.copy();\n            y0 = y.copy();\n        });\n        renderWatch.renderEnd('line immediate');\n        return chart;\n    }\n\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n    // Pass through events\n    scatter.dispatch.on('elementClick', function(){ dispatch.elementClick.apply(this, arguments); });\n    scatter.dispatch.on('elementMouseover', function(){ dispatch.elementMouseover.apply(this, arguments); });\n    scatter.dispatch.on('elementMouseout', function(){ dispatch.elementMouseout.apply(this, arguments); });\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        defined: {get: function(){return defined;}, set: function(_){defined=_;}},\n        interpolate:      {get: function(){return interpolate;}, set: function(_){interpolate=_;}},\n        clipEdge:    {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            scatter.duration(duration);\n        }},\n        isArea: {get: function(){return isArea;}, set: function(_){\n            isArea = d3.functor(_);\n        }},\n        x: {get: function(){return getX;}, set: function(_){\n            getX = _;\n            scatter.x(_);\n        }},\n        y: {get: function(){return getY;}, set: function(_){\n            getY = _;\n            scatter.y(_);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            scatter.color(color);\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, scatter);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\nnv.models.lineChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var lines = nv.models.line()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , legend = nv.models.legend()\n        , interactiveLayer = nv.interactiveGuideline()\n        , tooltip = nv.models.tooltip()\n        , focus = nv.models.focus(nv.models.line())\n        ;\n\n    var margin = {top: 30, right: 20, bottom: 50, left: 60}\n        , marginTop = null\n        , color = nv.utils.defaultColor()\n        , width = null\n        , height = null\n        , showLegend = true\n        , legendPosition = 'top'\n        , showXAxis = true\n        , showYAxis = true\n        , rightAlignYAxis = false\n        , useInteractiveGuideline = false\n        , x\n        , y\n        , focusEnable = false\n        , state = nv.utils.state()\n        , defaultState = null\n        , noData = null\n        , dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd')\n        , duration = 250\n        ;\n\n    // set options on sub-objects for this chart\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient(rightAlignYAxis ? 'right' : 'left');\n\n    lines.clipEdge(true).duration(0);\n\n    tooltip.valueFormatter(function(d, i) {\n        return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function(d, i) {\n        return xAxis.tickFormat()(d, i);\n    });\n\n    interactiveLayer.tooltip.valueFormatter(function(d, i) {\n        return yAxis.tickFormat()(d, i);\n    }).headerFormatter(function(d, i) {\n        return xAxis.tickFormat()(d, i);\n    });\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled; })\n            };\n        };\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        };\n    };\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(lines);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n            chart.update = function() {\n                if( duration === 0 ) {\n                    container.call( chart );\n                } else {\n                    container.transition().duration(duration).call(chart);\n                }\n            };\n            chart.container = this;\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disabled\n            state.disabled = data.map(function(d) { return !!d.disabled; });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display noData message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length; }).length) {\n                nv.utils.noData(chart, container);\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            /* Update `main' graph on brush update. */\n            focus.dispatch.on(\"onBrush\", function(extent) {\n                onBrush(extent);\n            });\n\n            // Setup Scales\n            x = lines.xScale();\n            y = lines.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-lineChart').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-lineChart').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n\n            var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n            focusEnter.append('g').attr('class', 'nv-background').append('rect');\n            focusEnter.append('g').attr('class', 'nv-x nv-axis');\n            focusEnter.append('g').attr('class', 'nv-y nv-axis');\n            focusEnter.append('g').attr('class', 'nv-linesWrap');\n            focusEnter.append('g').attr('class', 'nv-interactive');\n\n            var contextEnter = gEnter.append('g').attr('class', 'nv-focusWrap');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                legend.width(availableWidth);\n\n                g.select('.nv-legendWrap')\n                    .datum(data)\n                    .call(legend);\n\n                if (legendPosition === 'bottom') {\n                     margin.bottom = xAxis.height() + legend.height();\n                     availableHeight = nv.utils.availableHeight(height, container, margin);\n                     g.select('.nv-legendWrap')\n                         .attr('transform', 'translate(0,' + (availableHeight + xAxis.height())  +')');\n                } else if (legendPosition === 'top') {\n                    if (!marginTop && legend.height() !== margin.top) {\n                        margin.top = legend.height();\n                        availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n                    }\n\n                    wrap.select('.nv-legendWrap')\n                        .attr('transform', 'translate(0,' + (-margin.top) +')');\n                }\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            //Set up interactive layer\n            if (useInteractiveGuideline) {\n                interactiveLayer\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .margin({left:margin.left, top:margin.top})\n                    .svgContainer(container)\n                    .xScale(x);\n                wrap.select(\".nv-interactive\").call(interactiveLayer);\n            }\n\n            g.select('.nv-focus .nv-background rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            lines\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled; }));\n\n            var linesWrap = g.select('.nv-linesWrap')\n                .datum(data.filter(function(d) { return !d.disabled; }));\n\n\n            // Setup Main (Focus) Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks(nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight, 0);\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n            }\n\n            //============================================================\n            // Update Axes\n            //============================================================\n            function updateXAxis() {\n              if(showXAxis) {\n                g.select('.nv-focus .nv-x.nv-axis')\n                  .transition()\n                  .duration(duration)\n                  .call(xAxis)\n                ;\n              }\n            }\n\n            function updateYAxis() {\n              if(showYAxis) {\n                g.select('.nv-focus .nv-y.nv-axis')\n                  .transition()\n                  .duration(duration)\n                  .call(yAxis)\n                ;\n              }\n            }\n\n            g.select('.nv-focus .nv-x.nv-axis')\n                .attr('transform', 'translate(0,' + availableHeight + ')');\n\n            //============================================================\n            // Update Focus\n            //============================================================\n            if (!focusEnable && focus.brush.extent() === null) {\n                linesWrap.call(lines);\n                updateXAxis();\n                updateYAxis();\n            } else {\n                focus.width(availableWidth);\n                g.select('.nv-focusWrap')\n                    .style('display', focusEnable ? 'initial' : 'none')\n                    .attr('transform', 'translate(0,' + ( availableHeight + margin.bottom + focus.margin().top) + ')')\n                    .call(focus);\n                var extent = focus.brush.empty() ? focus.xDomain() : focus.brush.extent();\n                if (extent !== null) {\n                    onBrush(extent);\n                }\n            }\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            interactiveLayer.dispatch.on('elementMousemove', function(e) {\n                lines.clearHighlights();\n                var singlePoint, pointIndex, pointXLocation, allData = [];\n                data\n                    .filter(function(series, i) {\n                        series.seriesIndex = i;\n                        return !series.disabled && !series.disableTooltip;\n                    })\n                    .forEach(function(series,i) {\n                        var extent = focus.brush.extent() !== null ? (focus.brush.empty() ? focus.xScale().domain() : focus.brush.extent()) : x.domain();\n                        var currentValues = series.values.filter(function(d,i) {\n                            // Checks if the x point is between the extents, handling case where extent[0] is greater than extent[1]\n                            // (e.g. x domain is manually set to reverse the x-axis)\n                            if(extent[0] <= extent[1]) {\n                                return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n                            } else {\n                                return lines.x()(d,i) >= extent[1] && lines.x()(d,i) <= extent[0];\n                            }\n                        });\n\n                        pointIndex = nv.interactiveBisect(currentValues, e.pointXValue, lines.x());\n                        var point = currentValues[pointIndex];\n                        var pointYValue = chart.y()(point, pointIndex);\n                        if (pointYValue !== null) {\n                            lines.highlightPoint(i, pointIndex, true);\n                        }\n                        if (point === undefined) return;\n                        if (singlePoint === undefined) singlePoint = point;\n                        if (pointXLocation === undefined) pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n                        allData.push({\n                            key: series.key,\n                            value: pointYValue,\n                            color: color(series,series.seriesIndex),\n                            data: point\n                        });\n                    });\n                //Highlight the tooltip entry based on which point the mouse is closest to.\n                if (allData.length > 2) {\n                    var yValue = chart.yScale().invert(e.mouseY);\n                    var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\n                    var threshold = 0.03 * domainExtent;\n                    var indexToHighlight = nv.nearestValueIndex(allData.map(function(d){return d.value;}),yValue,threshold);\n                    if (indexToHighlight !== null)\n                        allData[indexToHighlight].highlight = true;\n                }\n\n                var defaultValueFormatter = function(d,i) {\n                    return d == null ? \"N/A\" : yAxis.tickFormat()(d);\n                };\n\n                interactiveLayer.tooltip\n                    .valueFormatter(interactiveLayer.tooltip.valueFormatter() || defaultValueFormatter)\n                    .data({\n                        value: chart.x()( singlePoint,pointIndex ),\n                        index: pointIndex,\n                        series: allData\n                    })();\n\n                interactiveLayer.renderGuideLine(pointXLocation);\n\n            });\n\n            interactiveLayer.dispatch.on('elementClick', function(e) {\n                var pointXLocation, allData = [];\n\n                data.filter(function(series, i) {\n                    series.seriesIndex = i;\n                    return !series.disabled;\n                }).forEach(function(series) {\n                    var pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n                    var point = series.values[pointIndex];\n                    if (typeof point === 'undefined') return;\n                    if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n                    var yPos = chart.yScale()(chart.y()(point,pointIndex));\n                    allData.push({\n                        point: point,\n                        pointIndex: pointIndex,\n                        pos: [pointXLocation, yPos],\n                        seriesIndex: series.seriesIndex,\n                        series: series\n                    });\n                });\n\n                lines.dispatch.elementClick(allData);\n            });\n\n            interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n                lines.clearHighlights();\n            });\n\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n\n                    state.disabled = e.disabled;\n                }\n                chart.update();\n            });\n\n            //============================================================\n            // Functions\n            //------------------------------------------------------------\n\n            // Taken from crossfilter (http://square.github.com/crossfilter/)\n            function resizePath(d) {\n                var e = +(d == 'e'),\n                    x = e ? 1 : -1,\n                    y = availableHeight / 3;\n                return 'M' + (0.5 * x) + ',' + y\n                    + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n                    + 'V' + (2 * y - 6)\n                    + 'A6,6 0 0 ' + e + ' ' + (0.5 * x) + ',' + (2 * y)\n                    + 'Z'\n                    + 'M' + (2.5 * x) + ',' + (y + 8)\n                    + 'V' + (2 * y - 8)\n                    + 'M' + (4.5 * x) + ',' + (y + 8)\n                    + 'V' + (2 * y - 8);\n            }\n\n            function onBrush(extent) {\n                // Update Main (Focus)\n                var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n                    .datum(\n                    data.filter(function(d) { return !d.disabled; })\n                        .map(function(d,i) {\n                            return {\n                                key: d.key,\n                                area: d.area,\n                                classed: d.classed,\n                                values: d.values.filter(function(d,i) {\n                                    return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n                                }),\n                                disableTooltip: d.disableTooltip\n                            };\n                        })\n                );\n                focusLinesWrap.transition().duration(duration).call(lines);\n\n                // Update Main (Focus) Axes\n                updateXAxis();\n                updateYAxis();\n            }\n        });\n\n        renderWatch.renderEnd('lineChart immediate');\n        return chart;\n    }\n\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    lines.dispatch.on('elementMouseover.tooltip', function(evt) {\n        if(!evt.series.disableTooltip){\n            tooltip.data(evt).hidden(false);\n        }\n    });\n\n    lines.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.lines = lines;\n    chart.legend = legend;\n    chart.focus = focus;\n    chart.xAxis = xAxis;\n    chart.x2Axis = focus.xAxis\n    chart.yAxis = yAxis;\n    chart.y2Axis = focus.yAxis\n    chart.interactiveLayer = interactiveLayer;\n    chart.tooltip = tooltip;\n    chart.state = state;\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        legendPosition: {get: function(){return legendPosition;}, set: function(_){legendPosition=_;}},\n        showXAxis:      {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:    {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        defaultState:    {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        // Focus options, mostly passed onto focus model.\n        focusEnable:    {get: function(){return focusEnable;}, set: function(_){focusEnable=_;}},\n        focusHeight:     {get: function(){return focus.height();}, set: function(_){focus.height(_);}},\n        focusShowAxisX:    {get: function(){return focus.showXAxis();}, set: function(_){focus.showXAxis(_);}},\n        focusShowAxisY:    {get: function(){return focus.showYAxis();}, set: function(_){focus.showYAxis(_);}},\n        brushExtent: {get: function(){return focus.brushExtent();}, set: function(_){focus.brushExtent(_);}},\n\n        // options that require extra logic in the setter\n        focusMargin: {get: function(){return focus.margin}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            focus.margin.right  = _.right  !== undefined ? _.right  : focus.margin.right;\n            focus.margin.bottom = _.bottom !== undefined ? _.bottom : focus.margin.bottom;\n            focus.margin.left   = _.left   !== undefined ? _.left   : focus.margin.left;\n        }},\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            lines.duration(duration);\n            focus.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n            lines.color(color);\n            focus.color(color);\n        }},\n        interpolate: {get: function(){return lines.interpolate();}, set: function(_){\n            lines.interpolate(_);\n            focus.interpolate(_);\n        }},\n        xTickFormat: {get: function(){return xAxis.tickFormat();}, set: function(_){\n            xAxis.tickFormat(_);\n            focus.xTickFormat(_);\n        }},\n        yTickFormat: {get: function(){return yAxis.tickFormat();}, set: function(_){\n            yAxis.tickFormat(_);\n            focus.yTickFormat(_);\n        }},\n        x: {get: function(){return lines.x();}, set: function(_){\n            lines.x(_);\n            focus.x(_);\n        }},\n        y: {get: function(){return lines.y();}, set: function(_){\n            lines.y(_);\n            focus.y(_);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( rightAlignYAxis ? 'right' : 'left');\n        }},\n        useInteractiveGuideline: {get: function(){return useInteractiveGuideline;}, set: function(_){\n            useInteractiveGuideline = _;\n            if (useInteractiveGuideline) {\n                lines.interactive(false);\n                lines.useVoronoi(false);\n            }\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, lines);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.lineWithFocusChart = function() {\n  return nv.models.lineChart()\n    .margin({ bottom: 30 })\n    .focusEnable( true );\n};\nnv.models.linePlusBarChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var lines = nv.models.line()\n        , lines2 = nv.models.line()\n        , bars = nv.models.historicalBar()\n        , bars2 = nv.models.historicalBar()\n        , xAxis = nv.models.axis()\n        , x2Axis = nv.models.axis()\n        , y1Axis = nv.models.axis()\n        , y2Axis = nv.models.axis()\n        , y3Axis = nv.models.axis()\n        , y4Axis = nv.models.axis()\n        , legend = nv.models.legend()\n        , brush = d3.svg.brush()\n        , tooltip = nv.models.tooltip()\n        ;\n\n    var margin = {top: 30, right: 30, bottom: 30, left: 60}\n        , marginTop = null\n        , margin2 = {top: 0, right: 30, bottom: 20, left: 60}\n        , width = null\n        , height = null\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , color = nv.utils.defaultColor()\n        , showLegend = true\n        , focusEnable = true\n        , focusShowAxisY = false\n        , focusShowAxisX = true\n        , focusHeight = 50\n        , extent\n        , brushExtent = null\n        , x\n        , x2\n        , y1\n        , y2\n        , y3\n        , y4\n        , noData = null\n        , dispatch = d3.dispatch('brush', 'stateChange', 'changeState')\n        , transitionDuration = 0\n        , state = nv.utils.state()\n        , defaultState = null\n        , legendLeftAxisHint = ' (left axis)'\n        , legendRightAxisHint = ' (right axis)'\n        , switchYAxisOrder = false\n        ;\n\n    lines.clipEdge(true);\n    lines2.interactive(false);\n    // We don't want any points emitted for the focus chart's scatter graph.\n    lines2.pointActive(function(d) { return false });\n    xAxis.orient('bottom').tickPadding(5);\n    y1Axis.orient('left');\n    y2Axis.orient('right');\n    x2Axis.orient('bottom').tickPadding(5);\n    y3Axis.orient('left');\n    y4Axis.orient('right');\n\n    tooltip.headerEnabled(true).headerFormatter(function(d, i) {\n        return xAxis.tickFormat()(d, i);\n    });\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var getBarsAxis = function() {\n        return switchYAxisOrder\n            ? { main: y2Axis, focus: y4Axis }\n            : { main: y1Axis, focus: y3Axis }\n    }\n\n    var getLinesAxis = function() {\n        return switchYAxisOrder\n            ? { main: y1Axis, focus: y3Axis }\n            : { main: y2Axis, focus: y4Axis }\n    }\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled })\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        }\n    };\n\n    var allDisabled = function(data) {\n      return data.every(function(series) {\n        return series.disabled;\n      });\n    }\n\n    function chart(selection) {\n        selection.each(function(data) {\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight1 = nv.utils.availableHeight(height, container, margin)\n                    - (focusEnable ? focusHeight : 0),\n                availableHeight2 = focusHeight - margin2.top - margin2.bottom;\n\n            chart.update = function() { container.transition().duration(transitionDuration).call(chart); };\n            chart.container = this;\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disableddisabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            var dataBars = data.filter(function(d) { return !d.disabled && d.bar });\n            var dataLines = data.filter(function(d) { return !d.bar }); // removed the !d.disabled clause here to fix Issue #240\n\n            if (dataBars.length && !switchYAxisOrder) {\n                x = bars.xScale();\n            } else {\n                x = lines.xScale();\n            }\n\n            x2 = x2Axis.scale();\n\n            // select the scales and series based on the position of the yAxis\n            y1 = switchYAxisOrder ? lines.yScale() : bars.yScale();\n            y2 = switchYAxisOrder ? bars.yScale() : lines.yScale();\n            y3 = switchYAxisOrder ? lines2.yScale() : bars2.yScale();\n            y4 = switchYAxisOrder ? bars2.yScale() : lines2.yScale();\n\n            var series1 = data\n                .filter(function(d) { return !d.disabled && (switchYAxisOrder ? !d.bar : d.bar) })\n                .map(function(d) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d,i), y: getY(d,i) }\n                    })\n                });\n\n            var series2 = data\n                .filter(function(d) { return !d.disabled && (switchYAxisOrder ? d.bar : !d.bar) })\n                .map(function(d) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d,i), y: getY(d,i) }\n                    })\n                });\n\n            x.range([0, availableWidth]);\n\n            x2  .domain(d3.extent(d3.merge(series1.concat(series2)), function(d) { return d.x } ))\n                .range([0, availableWidth]);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-linePlusBar').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-linePlusBar').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n\n            // this is the main chart\n            var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n            focusEnter.append('g').attr('class', 'nv-x nv-axis');\n            focusEnter.append('g').attr('class', 'nv-y1 nv-axis');\n            focusEnter.append('g').attr('class', 'nv-y2 nv-axis');\n            focusEnter.append('g').attr('class', 'nv-barsWrap');\n            focusEnter.append('g').attr('class', 'nv-linesWrap');\n\n            // context chart is where you can focus in\n            var contextEnter = gEnter.append('g').attr('class', 'nv-context');\n            contextEnter.append('g').attr('class', 'nv-x nv-axis');\n            contextEnter.append('g').attr('class', 'nv-y1 nv-axis');\n            contextEnter.append('g').attr('class', 'nv-y2 nv-axis');\n            contextEnter.append('g').attr('class', 'nv-barsWrap');\n            contextEnter.append('g').attr('class', 'nv-linesWrap');\n            contextEnter.append('g').attr('class', 'nv-brushBackground');\n            contextEnter.append('g').attr('class', 'nv-x nv-brush');\n\n            //============================================================\n            // Legend\n            //------------------------------------------------------------\n\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                var legendWidth = legend.align() ? availableWidth / 2 : availableWidth;\n                var legendXPosition = legend.align() ? legendWidth : 0;\n\n                legend.width(legendWidth);\n\n                g.select('.nv-legendWrap')\n                    .datum(data.map(function(series) {\n                        series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n                        if(switchYAxisOrder) {\n                            series.key = series.originalKey + (series.bar ? legendRightAxisHint : legendLeftAxisHint);\n                        } else {\n                            series.key = series.originalKey + (series.bar ? legendLeftAxisHint : legendRightAxisHint);\n                        }\n                        return series;\n                    }))\n                    .call(legend);\n\n                if (!marginTop && legend.height() !== margin.top) {\n                    margin.top = legend.height();\n                    // FIXME: shouldn't this be \"- (focusEnabled ? focusHeight : 0)\"?\n                    availableHeight1 = nv.utils.availableHeight(height, container, margin) - focusHeight;\n                }\n\n                g.select('.nv-legendWrap')\n                    .attr('transform', 'translate(' + legendXPosition + ',' + (-margin.top) +')');\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            //============================================================\n            // Context chart (focus chart) components\n            //------------------------------------------------------------\n\n            // hide or show the focus context chart\n            g.select('.nv-context').style('display', focusEnable ? 'initial' : 'none');\n\n            bars2\n                .width(availableWidth)\n                .height(availableHeight2)\n                .color(data.map(function (d, i) {\n                    return d.color || color(d, i);\n                }).filter(function (d, i) {\n                    return !data[i].disabled && data[i].bar\n                }));\n            lines2\n                .width(availableWidth)\n                .height(availableHeight2)\n                .color(data.map(function (d, i) {\n                    return d.color || color(d, i);\n                }).filter(function (d, i) {\n                    return !data[i].disabled && !data[i].bar\n                }));\n\n            var bars2Wrap = g.select('.nv-context .nv-barsWrap')\n                .datum(dataBars.length ? dataBars : [\n                    {values: []}\n                ]);\n            var lines2Wrap = g.select('.nv-context .nv-linesWrap')\n                .datum(allDisabled(dataLines) ?\n                       [{values: []}] :\n                       dataLines.filter(function(dataLine) {\n                         return !dataLine.disabled;\n                       }));\n\n            g.select('.nv-context')\n                .attr('transform', 'translate(0,' + ( availableHeight1 + margin.bottom + margin2.top) + ')');\n\n            bars2Wrap.transition().call(bars2);\n            lines2Wrap.transition().call(lines2);\n\n            // context (focus chart) axis controls\n            if (focusShowAxisX) {\n                x2Axis\n                    ._ticks( nv.utils.calcTicksX(availableWidth / 100, data))\n                    .tickSize(-availableHeight2, 0);\n                g.select('.nv-context .nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y3.range()[0] + ')');\n                g.select('.nv-context .nv-x.nv-axis').transition()\n                    .call(x2Axis);\n            }\n\n            if (focusShowAxisY) {\n                y3Axis\n                    .scale(y3)\n                    ._ticks( availableHeight2 / 36 )\n                    .tickSize( -availableWidth, 0);\n                y4Axis\n                    .scale(y4)\n                    ._ticks( availableHeight2 / 36 )\n                    .tickSize(dataBars.length ? 0 : -availableWidth, 0); // Show the y2 rules only if y1 has none\n\n                g.select('.nv-context .nv-y3.nv-axis')\n                    .style('opacity', dataBars.length ? 1 : 0)\n                    .attr('transform', 'translate(0,' + x2.range()[0] + ')');\n                g.select('.nv-context .nv-y2.nv-axis')\n                    .style('opacity', dataLines.length ? 1 : 0)\n                    .attr('transform', 'translate(' + x2.range()[1] + ',0)');\n\n                g.select('.nv-context .nv-y1.nv-axis').transition()\n                    .call(y3Axis);\n                g.select('.nv-context .nv-y2.nv-axis').transition()\n                    .call(y4Axis);\n            }\n\n            // Setup Brush\n            brush.x(x2).on('brush', onBrush);\n\n            if (brushExtent) brush.extent(brushExtent);\n\n            var brushBG = g.select('.nv-brushBackground').selectAll('g')\n                .data([brushExtent || brush.extent()]);\n\n            var brushBGenter = brushBG.enter()\n                .append('g');\n\n            brushBGenter.append('rect')\n                .attr('class', 'left')\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('height', availableHeight2);\n\n            brushBGenter.append('rect')\n                .attr('class', 'right')\n                .attr('x', 0)\n                .attr('y', 0)\n                .attr('height', availableHeight2);\n\n            var gBrush = g.select('.nv-x.nv-brush')\n                .call(brush);\n            gBrush.selectAll('rect')\n                //.attr('y', -5)\n                .attr('height', availableHeight2);\n            gBrush.selectAll('.resize').append('path').attr('d', resizePath);\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n                    state.disabled = e.disabled;\n                }\n                chart.update();\n            });\n\n            //============================================================\n            // Functions\n            //------------------------------------------------------------\n\n            // Taken from crossfilter (http://square.github.com/crossfilter/)\n            function resizePath(d) {\n                var e = +(d == 'e'),\n                    x = e ? 1 : -1,\n                    y = availableHeight2 / 3;\n                return 'M' + (.5 * x) + ',' + y\n                    + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ',' + (y + 6)\n                    + 'V' + (2 * y - 6)\n                    + 'A6,6 0 0 ' + e + ' ' + (.5 * x) + ',' + (2 * y)\n                    + 'Z'\n                    + 'M' + (2.5 * x) + ',' + (y + 8)\n                    + 'V' + (2 * y - 8)\n                    + 'M' + (4.5 * x) + ',' + (y + 8)\n                    + 'V' + (2 * y - 8);\n            }\n\n\n            function updateBrushBG() {\n                if (!brush.empty()) brush.extent(brushExtent);\n                brushBG\n                    .data([brush.empty() ? x2.domain() : brushExtent])\n                    .each(function(d,i) {\n                        var leftWidth = x2(d[0]) - x2.range()[0],\n                            rightWidth = x2.range()[1] - x2(d[1]);\n                        d3.select(this).select('.left')\n                            .attr('width',  leftWidth < 0 ? 0 : leftWidth);\n\n                        d3.select(this).select('.right')\n                            .attr('x', x2(d[1]))\n                            .attr('width', rightWidth < 0 ? 0 : rightWidth);\n                    });\n            }\n\n            function onBrush() {\n                brushExtent = brush.empty() ? null : brush.extent();\n                extent = brush.empty() ? x2.domain() : brush.extent();\n                dispatch.brush({extent: extent, brush: brush});\n                updateBrushBG();\n\n                // Prepare Main (Focus) Bars and Lines\n                bars\n                    .width(availableWidth)\n                    .height(availableHeight1)\n                    .color(data.map(function(d,i) {\n                        return d.color || color(d, i);\n                    }).filter(function(d,i) { return !data[i].disabled && data[i].bar }));\n\n                lines\n                    .width(availableWidth)\n                    .height(availableHeight1)\n                    .color(data.map(function(d,i) {\n                        return d.color || color(d, i);\n                    }).filter(function(d,i) { return !data[i].disabled && !data[i].bar }));\n\n                var focusBarsWrap = g.select('.nv-focus .nv-barsWrap')\n                    .datum(!dataBars.length ? [{values:[]}] :\n                        dataBars\n                            .map(function(d,i) {\n                                return {\n                                    key: d.key,\n                                    values: d.values.filter(function(d,i) {\n                                        return bars.x()(d,i) >= extent[0] && bars.x()(d,i) <= extent[1];\n                                    })\n                                }\n                            })\n                );\n\n                var focusLinesWrap = g.select('.nv-focus .nv-linesWrap')\n                    .datum(allDisabled(dataLines) ? [{values:[]}] :\n                           dataLines\n                           .filter(function(dataLine) { return !dataLine.disabled; })\n                           .map(function(d,i) {\n                                return {\n                                    area: d.area,\n                                    fillOpacity: d.fillOpacity,\n                                    strokeWidth: d.strokeWidth,\n                                    key: d.key,\n                                    values: d.values.filter(function(d,i) {\n                                        return lines.x()(d,i) >= extent[0] && lines.x()(d,i) <= extent[1];\n                                    })\n                                }\n                            })\n                );\n\n                // Update Main (Focus) X Axis\n                if (dataBars.length && !switchYAxisOrder) {\n                    x = bars.xScale();\n                } else {\n                    x = lines.xScale();\n                }\n\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight1, 0);\n\n                xAxis.domain([Math.ceil(extent[0]), Math.floor(extent[1])]);\n\n                g.select('.nv-x.nv-axis').transition().duration(transitionDuration)\n                    .call(xAxis);\n\n                // Update Main (Focus) Bars and Lines\n                focusBarsWrap.transition().duration(transitionDuration).call(bars);\n                focusLinesWrap.transition().duration(transitionDuration).call(lines);\n\n                // Setup and Update Main (Focus) Y Axes\n                g.select('.nv-focus .nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y1.range()[0] + ')');\n\n                y1Axis\n                    .scale(y1)\n                    ._ticks( nv.utils.calcTicksY(availableHeight1/36, data) )\n                    .tickSize(-availableWidth, 0);\n                y2Axis\n                    .scale(y2)\n                    ._ticks( nv.utils.calcTicksY(availableHeight1/36, data) );\n\n                // Show the y2 rules only if y1 has none\n                if(!switchYAxisOrder) {\n                    y2Axis.tickSize(dataBars.length ? 0 : -availableWidth, 0);\n                } else {\n                    y2Axis.tickSize(dataLines.length ? 0 : -availableWidth, 0);\n                }\n\n                // Calculate opacity of the axis\n                var barsOpacity = dataBars.length ? 1 : 0;\n                var linesOpacity = dataLines.length && !allDisabled(dataLines) ? 1 : 0;\n\n                var y1Opacity = switchYAxisOrder ? linesOpacity : barsOpacity;\n                var y2Opacity = switchYAxisOrder ? barsOpacity : linesOpacity;\n\n                g.select('.nv-focus .nv-y1.nv-axis')\n                    .style('opacity', y1Opacity);\n                g.select('.nv-focus .nv-y2.nv-axis')\n                    .style('opacity', y2Opacity)\n                    .attr('transform', 'translate(' + x.range()[1] + ',0)');\n\n                g.select('.nv-focus .nv-y1.nv-axis').transition().duration(transitionDuration)\n                    .call(y1Axis);\n                g.select('.nv-focus .nv-y2.nv-axis').transition().duration(transitionDuration)\n                    .call(y2Axis);\n            }\n\n            onBrush();\n\n        });\n\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    lines.dispatch.on('elementMouseover.tooltip', function(evt) {\n        tooltip\n            .duration(100)\n            .valueFormatter(function(d, i) {\n                return getLinesAxis().main.tickFormat()(d, i);\n            })\n            .data(evt)\n            .hidden(false);\n    });\n\n    lines.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true)\n    });\n\n    bars.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt.value = chart.x()(evt.data);\n        evt['series'] = {\n            value: chart.y()(evt.data),\n            color: evt.color\n        };\n        tooltip\n            .duration(0)\n            .valueFormatter(function(d, i) {\n                return getBarsAxis().main.tickFormat()(d, i);\n            })\n            .data(evt)\n            .hidden(false);\n    });\n\n    bars.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    bars.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.legend = legend;\n    chart.lines = lines;\n    chart.lines2 = lines2;\n    chart.bars = bars;\n    chart.bars2 = bars2;\n    chart.xAxis = xAxis;\n    chart.x2Axis = x2Axis;\n    chart.y1Axis = y1Axis;\n    chart.y2Axis = y2Axis;\n    chart.y3Axis = y3Axis;\n    chart.y4Axis = y4Axis;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        brushExtent:    {get: function(){return brushExtent;}, set: function(_){brushExtent=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        focusEnable:    {get: function(){return focusEnable;}, set: function(_){focusEnable=_;}},\n        focusHeight:    {get: function(){return focusHeight;}, set: function(_){focusHeight=_;}},\n        focusShowAxisX:    {get: function(){return focusShowAxisX;}, set: function(_){focusShowAxisX=_;}},\n        focusShowAxisY:    {get: function(){return focusShowAxisY;}, set: function(_){focusShowAxisY=_;}},\n        legendLeftAxisHint:    {get: function(){return legendLeftAxisHint;}, set: function(_){legendLeftAxisHint=_;}},\n        legendRightAxisHint:    {get: function(){return legendRightAxisHint;}, set: function(_){legendRightAxisHint=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        focusMargin: {get: function(){return margin2;}, set: function(_){\n            margin2.top    = _.top    !== undefined ? _.top    : margin2.top;\n            margin2.right  = _.right  !== undefined ? _.right  : margin2.right;\n            margin2.bottom = _.bottom !== undefined ? _.bottom : margin2.bottom;\n            margin2.left   = _.left   !== undefined ? _.left   : margin2.left;\n        }},\n        duration: {get: function(){return transitionDuration;}, set: function(_){\n            transitionDuration = _;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n        }},\n        x: {get: function(){return getX;}, set: function(_){\n            getX = _;\n            lines.x(_);\n            lines2.x(_);\n            bars.x(_);\n            bars2.x(_);\n        }},\n        y: {get: function(){return getY;}, set: function(_){\n            getY = _;\n            lines.y(_);\n            lines2.y(_);\n            bars.y(_);\n            bars2.y(_);\n        }},\n        switchYAxisOrder:    {get: function(){return switchYAxisOrder;}, set: function(_){\n            // Switch the tick format for the yAxis\n            if(switchYAxisOrder !== _) {\n                var y1 = y1Axis;\n                y1Axis = y2Axis;\n                y2Axis = y1;\n\n                var y3 = y3Axis;\n                y3Axis = y4Axis;\n                y4Axis = y3;\n            }\n            switchYAxisOrder=_;\n\n            y1Axis.orient('left');\n            y2Axis.orient('right');\n            y3Axis.orient('left');\n            y4Axis.orient('right');\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, lines);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.multiBar = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 960\n        , height = 500\n        , x = d3.scale.ordinal()\n        , y = d3.scale.linear()\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container = null\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n        , clipEdge = true\n        , stacked = false\n        , stackOffset = 'zero' // options include 'silhouette', 'wiggle', 'expand', 'zero', or a custom function\n        , color = nv.utils.defaultColor()\n        , hideable = false\n        , barColor = null // adding the ability to set the color for each rather than the whole group\n        , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n        , duration = 500\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , groupSpacing = 0.1\n        , fillOpacity = 0.75\n        , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd')\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0, y0 //used to store previous scales\n        , renderWatch = nv.utils.renderWatch(dispatch, duration)\n        ;\n\n    var last_datalength = 0;\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n            var nonStackableCount = 0;\n            // This function defines the requirements for render complete\n            var endFn = function(d, i) {\n                if (d.series === data.length - 1 && i === data[0].values.length - 1)\n                    return true;\n                return false;\n            };\n\n            if(hideable && data.length) hideable = [{\n                values: data[0].values.map(function(d) {\n                        return {\n                            x: d.x,\n                            y: 0,\n                            series: d.series,\n                            size: 0.01\n                        };}\n                )}];\n\n            if (stacked) {\n                var parsed = d3.layout.stack()\n                    .offset(stackOffset)\n                    .values(function(d){ return d.values })\n                    .y(getY)\n                (!data.length && hideable ? hideable : data);\n\n                parsed.forEach(function(series, i){\n                    // if series is non-stackable, use un-parsed data\n                    if (series.nonStackable) {\n                        data[i].nonStackableSeries = nonStackableCount++;\n                        parsed[i] = data[i];\n                    } else {\n                        // don't stack this seires on top of the nonStackable seriees\n                        if (i > 0 && parsed[i - 1].nonStackable){\n                            parsed[i].values.map(function(d,j){\n                                d.y0 -= parsed[i - 1].values[j].y;\n                                d.y1 = d.y0 + d.y;\n                            });\n                        }\n                    }\n                });\n                data = parsed;\n            }\n            //add series index and key to each data point for reference\n            data.forEach(function(series, i) {\n                series.values.forEach(function(point) {\n                    point.series = i;\n                    point.key = series.key;\n                });\n            });\n\n            // HACK for negative value stacking\n            if (stacked && data.length > 0) {\n                data[0].values.map(function(d,i) {\n                    var posBase = 0, negBase = 0;\n                    data.map(function(d, idx) {\n                        if (!data[idx].nonStackable) {\n                            var f = d.values[i]\n                            f.size = Math.abs(f.y);\n                            if (f.y<0)  {\n                                f.y1 = negBase;\n                                negBase = negBase - f.size;\n                            } else\n                            {\n                                f.y1 = f.size + posBase;\n                                posBase = posBase + f.size;\n                            }\n                        }\n\n                    });\n                });\n            }\n            // Setup Scales\n            // remap and flatten the data for use in calculating the scales' domains\n            var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n                data.map(function(d, idx) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1, idx:idx }\n                    })\n                });\n\n            x.domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n                .rangeBands(xRange || [0, availableWidth], groupSpacing);\n\n            y.domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) {\n                var domain = d.y;\n                // increase the domain range if this series is stackable\n                if (stacked && !data[d.idx].nonStackable) {\n                    if (d.y > 0){\n                        domain = d.y1\n                    } else {\n                        domain = d.y1 + d.y\n                    }\n                }\n                return domain;\n            }).concat(forceY)))\n            .range(yRange || [availableHeight, 0]);\n\n            // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n            if (x.domain()[0] === x.domain()[1])\n                x.domain()[0] ?\n                    x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n                    : x.domain([-1,1]);\n\n            if (y.domain()[0] === y.domain()[1])\n                y.domain()[0] ?\n                    y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n                    : y.domain([-1,1]);\n\n            x0 = x0 || x;\n            y0 = y0 || y;\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-multibar').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibar');\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-groups');\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-edge-clip-' + id)\n                .append('rect');\n            wrap.select('#nv-edge-clip-' + id + ' rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n            var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n                .data(function(d) { return d }, function(d,i) { return i });\n            groups.enter().append('g')\n                .style('stroke-opacity', 1e-6)\n                .style('fill-opacity', 1e-6);\n\n            var exitTransition = renderWatch\n                .transition(groups.exit().selectAll('rect.nv-bar'), 'multibarExit', Math.min(100, duration))\n                .attr('y', function(d, i, j) {\n                    var yVal = y0(0) || 0;\n                    if (stacked) {\n                        if (data[d.series] && !data[d.series].nonStackable) {\n                            yVal = y0(d.y0);\n                        }\n                    }\n                    return yVal;\n                })\n                .attr('height', 0)\n                .remove();\n            if (exitTransition.delay)\n                exitTransition.delay(function(d,i) {\n                    var delay = i * (duration / (last_datalength + 1)) - i;\n                    return delay;\n                });\n            groups\n                .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n                .classed('hover', function(d) { return d.hover })\n                .style('fill', function(d,i){ return color(d, i) })\n                .style('stroke', function(d,i){ return color(d, i) });\n            groups\n                .style('stroke-opacity', 1)\n                .style('fill-opacity', fillOpacity);\n\n            var bars = groups.selectAll('rect.nv-bar')\n                .data(function(d) { return (hideable && !data.length) ? hideable.values : d.values });\n            bars.exit().remove();\n\n            var barsEnter = bars.enter().append('rect')\n                    .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n                    .attr('x', function(d,i,j) {\n                        return stacked && !data[j].nonStackable ? 0 : (j * x.rangeBand() / data.length )\n                    })\n                    .attr('y', function(d,i,j) { return y0(stacked && !data[j].nonStackable ? d.y0 : 0) || 0 })\n                    .attr('height', 0)\n                    .attr('width', function(d,i,j) { return x.rangeBand() / (stacked && !data[j].nonStackable ? 1 : data.length) })\n                    .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',0)'; })\n                ;\n            bars\n                .style('fill', function(d,i,j){ return color(d, j, i);  })\n                .style('stroke', function(d,i,j){ return color(d, j, i); })\n                .on('mouseover', function(d,i,j) {\n                    d3.select(this).classed('hover', true);\n                    dispatch.elementMouseover({\n                        data: d,\n                        index: i,\n                        series: data[j],\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mouseout', function(d,i,j) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.elementMouseout({\n                        data: d,\n                        index: i,\n                        series: data[j],\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mousemove', function(d,i,j) {\n                    dispatch.elementMousemove({\n                        data: d,\n                        index: i,\n                        series: data[j],\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('click', function(d,i,j) {\n                    var element = this;\n                    dispatch.elementClick({\n                        data: d,\n                        index: i,\n                        series: data[j],\n                        color: d3.select(this).style(\"fill\"),\n                        event: d3.event,\n                        element: element\n                    });\n                    d3.event.stopPropagation();\n                })\n                .on('dblclick', function(d,i,j) {\n                    dispatch.elementDblClick({\n                        data: d,\n                        index: i,\n                        series: data[j],\n                        color: d3.select(this).style(\"fill\")\n                    });\n                    d3.event.stopPropagation();\n                });\n            bars\n                .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n                .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',0)'; })\n\n            if (barColor) {\n                if (!disabled) disabled = data.map(function() { return true });\n                bars\n                    .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\n                    .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\n            }\n\n            var barSelection =\n                bars.watchTransition(renderWatch, 'multibar', Math.min(250, duration))\n                    .delay(function(d,i) {\n                        return i * duration / data[0].values.length;\n                    });\n            if (stacked){\n                barSelection\n                    .attr('y', function(d,i,j) {\n                        var yVal = 0;\n                        // if stackable, stack it on top of the previous series\n                        if (!data[j].nonStackable) {\n                            yVal = y(d.y1);\n                        } else {\n                            if (getY(d,i) < 0){\n                                yVal = y(0);\n                            } else {\n                                if (y(0) - y(getY(d,i)) < -1){\n                                    yVal = y(0) - 1;\n                                } else {\n                                    yVal = y(getY(d, i)) || 0;\n                                }\n                            }\n                        }\n                        return yVal;\n                    })\n                    .attr('height', function(d,i,j) {\n                        if (!data[j].nonStackable) {\n                            return Math.max(Math.abs(y(d.y+d.y0) - y(d.y0)), 0);\n                        } else {\n                            return Math.max(Math.abs(y(getY(d,i)) - y(0)), 0) || 0;\n                        }\n                    })\n                    .attr('x', function(d,i,j) {\n                        var width = 0;\n                        if (data[j].nonStackable) {\n                            width = d.series * x.rangeBand() / data.length;\n                            if (data.length !== nonStackableCount){\n                                width = data[j].nonStackableSeries * x.rangeBand()/(nonStackableCount*2);\n                            }\n                        }\n                        return width;\n                    })\n                    .attr('width', function(d,i,j){\n                        if (!data[j].nonStackable) {\n                            return x.rangeBand();\n                        } else {\n                            // if all series are nonStacable, take the full width\n                            var width = (x.rangeBand() / nonStackableCount);\n                            // otherwise, nonStackable graph will be only taking the half-width\n                            // of the x rangeBand\n                            if (data.length !== nonStackableCount) {\n                                width = x.rangeBand()/(nonStackableCount*2);\n                            }\n                            return width;\n                        }\n                    });\n            }\n            else {\n                barSelection\n                    .attr('x', function(d,i) {\n                        return d.series * x.rangeBand() / data.length;\n                    })\n                    .attr('width', x.rangeBand() / data.length)\n                    .attr('y', function(d,i) {\n                        return getY(d,i) < 0 ?\n                            y(0) :\n                                y(0) - y(getY(d,i)) < 1 ?\n                            y(0) - 1 :\n                            y(getY(d,i)) || 0;\n                    })\n                    .attr('height', function(d,i) {\n                        return Math.max(Math.abs(y(getY(d,i)) - y(0)),1) || 0;\n                    });\n            }\n\n            //store old scales for use in transitions on update\n            x0 = x.copy();\n            y0 = y.copy();\n\n            // keep track of the last data value length for transition calculations\n            if (data[0] && data[0].values) {\n                last_datalength = data[0].values.length;\n            }\n\n        });\n\n        renderWatch.renderEnd('multibar immediate');\n\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:   {get: function(){return width;}, set: function(_){width=_;}},\n        height:  {get: function(){return height;}, set: function(_){height=_;}},\n        x:       {get: function(){return getX;}, set: function(_){getX=_;}},\n        y:       {get: function(){return getY;}, set: function(_){getY=_;}},\n        xScale:  {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:  {get: function(){return y;}, set: function(_){y=_;}},\n        xDomain: {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain: {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:  {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:  {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        forceY:  {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        stacked: {get: function(){return stacked;}, set: function(_){stacked=_;}},\n        stackOffset: {get: function(){return stackOffset;}, set: function(_){stackOffset=_;}},\n        clipEdge:    {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n        disabled:    {get: function(){return disabled;}, set: function(_){disabled=_;}},\n        id:          {get: function(){return id;}, set: function(_){id=_;}},\n        hideable:    {get: function(){return hideable;}, set: function(_){hideable=_;}},\n        groupSpacing:{get: function(){return groupSpacing;}, set: function(_){groupSpacing=_;}},\n        fillOpacity: {get: function(){return fillOpacity;}, set: function(_){fillOpacity=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        barColor:  {get: function(){return barColor;}, set: function(_){\n            barColor = _ ? nv.utils.getColor(_) : null;\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\nnv.models.multiBarChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var multibar = nv.models.multiBar()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , interactiveLayer = nv.interactiveGuideline()\n        , legend = nv.models.legend()\n        , controls = nv.models.legend()\n        , tooltip = nv.models.tooltip()\n        ;\n\n    var margin = {top: 30, right: 20, bottom: 50, left: 60}\n        , marginTop = null\n        , width = null\n        , height = null\n        , color = nv.utils.defaultColor()\n        , showControls = true\n        , controlLabels = {}\n        , showLegend = true\n        , legendPosition = null\n        , showXAxis = true\n        , showYAxis = true\n        , rightAlignYAxis = false\n        , reduceXTicks = true // if false a tick will show for every data point\n        , staggerLabels = false\n        , wrapLabels = false\n        , rotateLabels = 0\n        , x //can be accessed via chart.xScale()\n        , y //can be accessed via chart.yScale()\n        , state = nv.utils.state()\n        , defaultState = null\n        , noData = null\n        , dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd')\n        , controlWidth = function() { return showControls ? 180 : 0 }\n        , duration = 250\n        , useInteractiveGuideline = false\n        ;\n\n    state.stacked = false // DEPRECATED Maintained for backward compatibility\n\n    multibar.stacked(false);\n    xAxis\n        .orient('bottom')\n        .tickPadding(7)\n        .showMaxMin(false)\n        .tickFormat(function(d) { return d })\n    ;\n    yAxis\n        .orient((rightAlignYAxis) ? 'right' : 'left')\n        .tickFormat(d3.format(',.1f'))\n    ;\n\n    tooltip\n        .duration(0)\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        })\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n    interactiveLayer.tooltip\n        .valueFormatter(function(d, i) {\n            return d == null ? \"N/A\" : yAxis.tickFormat()(d, i);\n        })\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n    interactiveLayer.tooltip\n        .valueFormatter(function (d, i) {\n            return d == null ? \"N/A\" : yAxis.tickFormat()(d, i);\n        })\n        .headerFormatter(function (d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n    interactiveLayer.tooltip\n        .duration(0)\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        })\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n    controls.updateState(false);\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n    var stacked = false;\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled }),\n                stacked: stacked\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.stacked !== undefined)\n                stacked = state.stacked;\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        }\n    };\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(multibar);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() {\n                if (duration === 0)\n                    container.call(chart);\n                else\n                    container.transition()\n                        .duration(duration)\n                        .call(chart);\n            };\n            chart.container = this;\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disableddisabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display noData message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = multibar.xScale();\n            y = multibar.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-multiBarWithLegend').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarWithLegend').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis');\n            gEnter.append('g').attr('class', 'nv-barsWrap');\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n            gEnter.append('g').attr('class', 'nv-controlsWrap');\n            gEnter.append('g').attr('class', 'nv-interactive');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                if (legendPosition === 'bottom') {\n                    legend.width(availableWidth - margin.right);\n\n                     g.select('.nv-legendWrap')\n                         .datum(data)\n                         .call(legend);\n\n                     margin.bottom = xAxis.height() + legend.height();\n                     availableHeight = nv.utils.availableHeight(height, container, margin);\n                     g.select('.nv-legendWrap')\n                         .attr('transform', 'translate(0,' + (availableHeight + xAxis.height())  +')');\n                } else {\n                    legend.width(availableWidth - controlWidth());\n\n                    g.select('.nv-legendWrap')\n                        .datum(data)\n                        .call(legend);\n\n                    if (!marginTop && legend.height() !== margin.top) {\n                        margin.top = legend.height();\n                        availableHeight = nv.utils.availableHeight(height, container, margin);\n                    }\n\n                    g.select('.nv-legendWrap')\n                        .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\n                }\n            }\n\n            // Controls\n            if (!showControls) {\n                 g.select('.nv-controlsWrap').selectAll('*').remove();\n            } else {\n                var controlsData = [\n                    { key: controlLabels.grouped || 'Grouped', disabled: multibar.stacked() },\n                    { key: controlLabels.stacked || 'Stacked', disabled: !multibar.stacked() }\n                ];\n\n                controls.width(controlWidth()).color(['#444', '#444', '#444']);\n                g.select('.nv-controlsWrap')\n                    .datum(controlsData)\n                    .attr('transform', 'translate(0,' + (-margin.top) +')')\n                    .call(controls);\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            // Main Chart Component(s)\n            multibar\n                .disabled(data.map(function(series) { return series.disabled }))\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled }));\n\n\n            var barsWrap = g.select('.nv-barsWrap')\n                .datum(data.filter(function(d) { return !d.disabled }));\n\n            barsWrap.call(multibar);\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize(-availableHeight, 0);\n\n                g.select('.nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y.range()[0] + ')');\n                g.select('.nv-x.nv-axis')\n                    .call(xAxis);\n\n                var xTicks = g.select('.nv-x.nv-axis > g').selectAll('g');\n\n                xTicks\n                    .selectAll('line, text')\n                    .style('opacity', 1)\n\n                if (staggerLabels) {\n                    var getTranslate = function(x,y) {\n                        return \"translate(\" + x + \",\" + y + \")\";\n                    };\n\n                    var staggerUp = 5, staggerDown = 17;  //pixels to stagger by\n                    // Issue #140\n                    xTicks\n                        .selectAll(\"text\")\n                        .attr('transform', function(d,i,j) {\n                            return  getTranslate(0, (j % 2 == 0 ? staggerUp : staggerDown));\n                        });\n\n                    var totalInBetweenTicks = d3.selectAll(\".nv-x.nv-axis .nv-wrap g g text\")[0].length;\n                    g.selectAll(\".nv-x.nv-axis .nv-axisMaxMin text\")\n                        .attr(\"transform\", function(d,i) {\n                            return getTranslate(0, (i === 0 || totalInBetweenTicks % 2 !== 0) ? staggerDown : staggerUp);\n                        });\n                }\n\n                if (wrapLabels) {\n                    g.selectAll('.tick text')\n                        .call(nv.utils.wrapTicks, chart.xAxis.rangeBand())\n                }\n\n                if (reduceXTicks)\n                    xTicks\n                        .filter(function(d,i) {\n                            return i % Math.ceil(data[0].values.length / (availableWidth / 100)) !== 0;\n                        })\n                        .selectAll('text, line')\n                        .style('opacity', 0);\n\n                if(rotateLabels)\n                    xTicks\n                        .selectAll('.tick text')\n                        .attr('transform', 'rotate(' + rotateLabels + ' 0,0)')\n                        .style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\n\n                g.select('.nv-x.nv-axis').selectAll('g.nv-axisMaxMin text')\n                    .style('opacity', 1);\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n\n                g.select('.nv-y.nv-axis')\n                    .call(yAxis);\n            }\n\n            //Set up interactive layer\n            if (useInteractiveGuideline) {\n                interactiveLayer\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .margin({left:margin.left, top:margin.top})\n                    .svgContainer(container)\n                    .xScale(x);\n                wrap.select(\".nv-interactive\").call(interactiveLayer);\n            }\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            controls.dispatch.on('legendClick', function(d,i) {\n                if (!d.disabled) return;\n                controlsData = controlsData.map(function(s) {\n                    s.disabled = true;\n                    return s;\n                });\n                d.disabled = false;\n\n                switch (d.key) {\n                    case 'Grouped':\n                    case controlLabels.grouped:\n                        multibar.stacked(false);\n                        break;\n                    case 'Stacked':\n                    case controlLabels.stacked:\n                        multibar.stacked(true);\n                        break;\n                }\n\n                state.stacked = multibar.stacked();\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n                    state.disabled = e.disabled;\n                }\n                if (typeof e.stacked !== 'undefined') {\n                    multibar.stacked(e.stacked);\n                    state.stacked = e.stacked;\n                    stacked = e.stacked;\n                }\n                chart.update();\n            });\n\n            if (useInteractiveGuideline) {\n                interactiveLayer.dispatch.on('elementMousemove', function(e) {\n                    if (e.pointXValue == undefined) return;\n\n                    var singlePoint, pointIndex, pointXLocation, xValue, allData = [];\n                    data\n                        .filter(function(series, i) {\n                            series.seriesIndex = i;\n                            return !series.disabled;\n                        })\n                        .forEach(function(series,i) {\n                            pointIndex = x.domain().indexOf(e.pointXValue)\n\n                            var point = series.values[pointIndex];\n                            if (point === undefined) return;\n\n                            xValue = point.x;\n                            if (singlePoint === undefined) singlePoint = point;\n                            if (pointXLocation === undefined) pointXLocation = e.mouseX\n                            allData.push({\n                                key: series.key,\n                                value: chart.y()(point, pointIndex),\n                                color: color(series,series.seriesIndex),\n                                data: series.values[pointIndex]\n                            });\n                        });\n\n                    interactiveLayer.tooltip\n                        .data({\n                            value: xValue,\n                            index: pointIndex,\n                            series: allData\n                        })();\n\n                    interactiveLayer.renderGuideLine(pointXLocation);\n                });\n\n                interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n                    interactiveLayer.tooltip.hidden(true);\n                });\n            }\n            else {\n                multibar.dispatch.on('elementMouseover.tooltip', function(evt) {\n                    evt.value = chart.x()(evt.data);\n                    evt['series'] = {\n                        key: evt.data.key,\n                        value: chart.y()(evt.data),\n                        color: evt.color\n                    };\n                    tooltip.data(evt).hidden(false);\n                });\n\n                multibar.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true);\n                });\n\n                multibar.dispatch.on('elementMousemove.tooltip', function(evt) {\n                    tooltip();\n                });\n            }\n        });\n\n        renderWatch.renderEnd('multibarchart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.multibar = multibar;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.state = state;\n    chart.tooltip = tooltip;\n    chart.interactiveLayer = interactiveLayer;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        legendPosition: {get: function(){return legendPosition;}, set: function(_){legendPosition=_;}},\n        showControls: {get: function(){return showControls;}, set: function(_){showControls=_;}},\n        controlLabels: {get: function(){return controlLabels;}, set: function(_){controlLabels=_;}},\n        showXAxis:      {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:    {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        defaultState:    {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        reduceXTicks:    {get: function(){return reduceXTicks;}, set: function(_){reduceXTicks=_;}},\n        rotateLabels:    {get: function(){return rotateLabels;}, set: function(_){rotateLabels=_;}},\n        staggerLabels:    {get: function(){return staggerLabels;}, set: function(_){staggerLabels=_;}},\n        wrapLabels:   {get: function(){return wrapLabels;}, set: function(_){wrapLabels=!!_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            multibar.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n            renderWatch.reset(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( rightAlignYAxis ? 'right' : 'left');\n        }},\n        useInteractiveGuideline: {get: function(){return useInteractiveGuideline;}, set: function(_){\n            useInteractiveGuideline = _;\n        }},\n        barColor:  {get: function(){return multibar.barColor;}, set: function(_){\n            multibar.barColor(_);\n            legend.color(function(d,i) {return d3.rgb('#ccc').darker(i * 1.5).toString();})\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, multibar);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.multiBarHorizontal = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 960\n        , height = 500\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container = null\n        , x = d3.scale.ordinal()\n        , y = d3.scale.linear()\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , getYerr = function(d) { return d.yErr }\n        , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\n        , color = nv.utils.defaultColor()\n        , barColor = null // adding the ability to set the color for each rather than the whole group\n        , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\n        , stacked = false\n        , showValues = false\n        , showBarLabels = false\n        , valuePadding = 60\n        , groupSpacing = 0.1\n        , fillOpacity = 0.75\n        , valueFormat = d3.format(',.2f')\n        , delay = 1200\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , duration = 250\n        , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd')\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0, y0; //used to store previous scales\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            if (stacked)\n                data = d3.layout.stack()\n                    .offset('zero')\n                    .values(function(d){ return d.values })\n                    .y(getY)\n                (data);\n\n            //add series index and key to each data point for reference\n            data.forEach(function(series, i) {\n                series.values.forEach(function(point) {\n                    point.series = i;\n                    point.key = series.key;\n                });\n            });\n\n            // HACK for negative value stacking\n            if (stacked)\n                data[0].values.map(function(d,i) {\n                    var posBase = 0, negBase = 0;\n                    data.map(function(d) {\n                        var f = d.values[i]\n                        f.size = Math.abs(f.y);\n                        if (f.y<0)  {\n                            f.y1 = negBase - f.size;\n                            negBase = negBase - f.size;\n                        } else\n                        {\n                            f.y1 = posBase;\n                            posBase = posBase + f.size;\n                        }\n                    });\n                });\n\n            // Setup Scales\n            // remap and flatten the data for use in calculating the scales' domains\n            var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\n                data.map(function(d) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1 }\n                    })\n                });\n\n            x.domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\n                .rangeBands(xRange || [0, availableHeight], groupSpacing);\n\n            y.domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return stacked ? (d.y > 0 ? d.y1 + d.y : d.y1 ) : d.y }).concat(forceY)))\n\n            if (showValues && !stacked)\n                y.range(yRange || [(y.domain()[0] < 0 ? valuePadding : 0), availableWidth - (y.domain()[1] > 0 ? valuePadding : 0) ]);\n            else\n                y.range(yRange || [0, availableWidth]);\n\n            x0 = x0 || x;\n            y0 = y0 || d3.scale.linear().domain(y.domain()).range([y(0),y(0)]);\n\n            // Setup containers and skeleton of chart\n            var wrap = d3.select(this).selectAll('g.nv-wrap.nv-multibarHorizontal').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibarHorizontal');\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-groups');\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n                .data(function(d) { return d }, function(d,i) { return i });\n            groups.enter().append('g')\n                .style('stroke-opacity', 1e-6)\n                .style('fill-opacity', 1e-6);\n            groups.exit().watchTransition(renderWatch, 'multibarhorizontal: exit groups')\n                .style('stroke-opacity', 1e-6)\n                .style('fill-opacity', 1e-6)\n                .remove();\n            groups\n                .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\n                .classed('hover', function(d) { return d.hover })\n                .style('fill', function(d,i){ return color(d, i) })\n                .style('stroke', function(d,i){ return color(d, i) });\n            groups.watchTransition(renderWatch, 'multibarhorizontal: groups')\n                .style('stroke-opacity', 1)\n                .style('fill-opacity', fillOpacity);\n\n            var bars = groups.selectAll('g.nv-bar')\n                .data(function(d) { return d.values });\n            bars.exit().remove();\n\n            var barsEnter = bars.enter().append('g')\n                .attr('transform', function(d,i,j) {\n                    return 'translate(' + y0(stacked ? d.y0 : 0) + ',' + (stacked ? 0 : (j * x.rangeBand() / data.length ) + x(getX(d,i))) + ')'\n                });\n\n            barsEnter.append('rect')\n                .attr('width', 0)\n                .attr('height', x.rangeBand() / (stacked ? 1 : data.length) )\n\n            bars\n                .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\n                    d3.select(this).classed('hover', true);\n                    dispatch.elementMouseover({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mouseout', function(d,i) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.elementMouseout({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mouseout', function(d,i) {\n                    dispatch.elementMouseout({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('mousemove', function(d,i) {\n                    dispatch.elementMousemove({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                })\n                .on('click', function(d,i) {\n                    var element = this;\n                    dispatch.elementClick({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\"),\n                        event: d3.event,\n                        element: element\n                    });\n                    d3.event.stopPropagation();\n                })\n                .on('dblclick', function(d,i) {\n                    dispatch.elementDblClick({\n                        data: d,\n                        index: i,\n                        color: d3.select(this).style(\"fill\")\n                    });\n                    d3.event.stopPropagation();\n                });\n\n            if (getYerr(data[0],0)) {\n                barsEnter.append('polyline');\n\n                bars.select('polyline')\n                    .attr('fill', 'none')\n                    .attr('points', function(d,i) {\n                        var xerr = getYerr(d,i)\n                            , mid = 0.8 * x.rangeBand() / ((stacked ? 1 : data.length) * 2);\n                        xerr = xerr.length ? xerr : [-Math.abs(xerr), Math.abs(xerr)];\n                        xerr = xerr.map(function(e) { return y(e + ((getY(d,i) < 0) ? 0 : getY(d,i))) - y(0); });\n                        var a = [[xerr[0],-mid], [xerr[0],mid], [xerr[0],0], [xerr[1],0], [xerr[1],-mid], [xerr[1],mid]];\n                        return a.map(function (path) { return path.join(',') }).join(' ');\n                    })\n                    .attr('transform', function(d,i) {\n                        var mid = x.rangeBand() / ((stacked ? 1 : data.length) * 2);\n                        return 'translate(0, ' + mid + ')';\n                    });\n            }\n\n            barsEnter.append('text');\n\n            if (showValues && !stacked) {\n                bars.select('text')\n                    .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'end' : 'start' })\n                    .attr('y', x.rangeBand() / (data.length * 2))\n                    .attr('dy', '.32em')\n                    .text(function(d,i) {\n                        var t = valueFormat(getY(d,i))\n                            , yerr = getYerr(d,i);\n                        if (yerr === undefined)\n                            return t;\n                        if (!yerr.length)\n                            return t + '±' + valueFormat(Math.abs(yerr));\n                        return t + '+' + valueFormat(Math.abs(yerr[1])) + '-' + valueFormat(Math.abs(yerr[0]));\n                    });\n                bars.watchTransition(renderWatch, 'multibarhorizontal: bars')\n                    .select('text')\n                    .attr('x', function(d,i) { return getY(d,i) < 0 ? -4 : y(getY(d,i)) - y(0) + 4 })\n            } else {\n                bars.selectAll('text').text('');\n            }\n\n            if (showBarLabels && !stacked) {\n                barsEnter.append('text').classed('nv-bar-label',true);\n                bars.select('text.nv-bar-label')\n                    .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'start' : 'end' })\n                    .attr('y', x.rangeBand() / (data.length * 2))\n                    .attr('dy', '.32em')\n                    .text(function(d,i) { return getX(d,i) });\n                bars.watchTransition(renderWatch, 'multibarhorizontal: bars')\n                    .select('text.nv-bar-label')\n                    .attr('x', function(d,i) { return getY(d,i) < 0 ? y(0) - y(getY(d,i)) + 4 : -4 });\n            }\n            else {\n                bars.selectAll('text.nv-bar-label').text('');\n            }\n\n            bars\n                .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\n\n            if (barColor) {\n                if (!disabled) disabled = data.map(function() { return true });\n                bars\n                    .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\n                    .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\n            }\n\n            if (stacked)\n                bars.watchTransition(renderWatch, 'multibarhorizontal: bars')\n                    .attr('transform', function(d,i) {\n                        return 'translate(' + y(d.y1) + ',' + x(getX(d,i)) + ')'\n                    })\n                    .select('rect')\n                    .attr('width', function(d,i) {\n                        return Math.abs(y(getY(d,i) + d.y0) - y(d.y0)) || 0\n                    })\n                    .attr('height', x.rangeBand() );\n            else\n                bars.watchTransition(renderWatch, 'multibarhorizontal: bars')\n                    .attr('transform', function(d,i) {\n                        //TODO: stacked must be all positive or all negative, not both?\n                        return 'translate(' +\n                            (getY(d,i) < 0 ? y(getY(d,i)) : y(0))\n                            + ',' +\n                            (d.series * x.rangeBand() / data.length\n                                +\n                                x(getX(d,i)) )\n                            + ')'\n                    })\n                    .select('rect')\n                    .attr('height', x.rangeBand() / data.length )\n                    .attr('width', function(d,i) {\n                        return Math.max(Math.abs(y(getY(d,i)) - y(0)),1) || 0\n                    });\n\n            //store old scales for use in transitions on update\n            x0 = x.copy();\n            y0 = y.copy();\n\n        });\n\n        renderWatch.renderEnd('multibarHorizontal immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:   {get: function(){return width;}, set: function(_){width=_;}},\n        height:  {get: function(){return height;}, set: function(_){height=_;}},\n        x:       {get: function(){return getX;}, set: function(_){getX=_;}},\n        y:       {get: function(){return getY;}, set: function(_){getY=_;}},\n        yErr:       {get: function(){return getYerr;}, set: function(_){getYerr=_;}},\n        xScale:  {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:  {get: function(){return y;}, set: function(_){y=_;}},\n        xDomain: {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain: {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:  {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:  {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        forceY:  {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        stacked: {get: function(){return stacked;}, set: function(_){stacked=_;}},\n        showValues: {get: function(){return showValues;}, set: function(_){showValues=_;}},\n        // this shows the group name, seems pointless?\n        //showBarLabels:    {get: function(){return showBarLabels;}, set: function(_){showBarLabels=_;}},\n        disabled:     {get: function(){return disabled;}, set: function(_){disabled=_;}},\n        id:           {get: function(){return id;}, set: function(_){id=_;}},\n        valueFormat:  {get: function(){return valueFormat;}, set: function(_){valueFormat=_;}},\n        valuePadding: {get: function(){return valuePadding;}, set: function(_){valuePadding=_;}},\n        groupSpacing: {get: function(){return groupSpacing;}, set: function(_){groupSpacing=_;}},\n        fillOpacity:  {get: function(){return fillOpacity;}, set: function(_){fillOpacity=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        barColor:  {get: function(){return barColor;}, set: function(_){\n            barColor = _ ? nv.utils.getColor(_) : null;\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.multiBarHorizontalChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var multibar = nv.models.multiBarHorizontal()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , legend = nv.models.legend().height(30)\n        , controls = nv.models.legend().height(30)\n        , tooltip = nv.models.tooltip()\n        ;\n\n    var margin = {top: 30, right: 20, bottom: 50, left: 60}\n        , marginTop = null\n        , width = null\n        , height = null\n        , color = nv.utils.defaultColor()\n        , showControls = true\n        , controlsPosition = 'top'        \n        , controlLabels = {}\n        , showLegend = true\n        , legendPosition = 'top'\n        , showXAxis = true\n        , showYAxis = true\n        , stacked = false\n        , x //can be accessed via chart.xScale()\n        , y //can be accessed via chart.yScale()\n        , state = nv.utils.state()\n        , defaultState = null\n        , noData = null\n        , dispatch = d3.dispatch('stateChange', 'changeState','renderEnd')\n        , controlWidth = function() { return showControls ? 180 : 0 }\n        , duration = 250\n        ;\n\n    state.stacked = false; // DEPRECATED Maintained for backward compatibility\n\n    multibar.stacked(stacked);\n\n    xAxis\n        .orient('left')\n        .tickPadding(5)\n        .showMaxMin(false)\n        .tickFormat(function(d) { return d })\n    ;\n    yAxis\n        .orient('bottom')\n        .tickFormat(d3.format(',.1f'))\n    ;\n\n    tooltip\n        .duration(0)\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        })\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        });\n\n    controls.updateState(false);\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled }),\n                stacked: stacked\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.stacked !== undefined)\n                stacked = state.stacked;\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        }\n    };\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(multibar);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() { container.transition().duration(duration).call(chart) };\n            chart.container = this;\n\n            stacked = multibar.stacked();\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disableddisabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = multibar.xScale();\n            y = multibar.yScale().clamp(true);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-multiBarHorizontalChart').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarHorizontalChart').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis')\n                .append('g').attr('class', 'nv-zeroLine')\n                .append('line');\n            gEnter.append('g').attr('class', 'nv-barsWrap');\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n            gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                legend.width(availableWidth - controlWidth());\n\n                g.select('.nv-legendWrap')\n                    .datum(data)\n                    .call(legend);\n                if (legendPosition === 'bottom') {\n                     margin.bottom = xAxis.height() + legend.height();\n                     availableHeight = nv.utils.availableHeight(height, container, margin);\n                     g.select('.nv-legendWrap')\n                         .attr('transform', 'translate(' + controlWidth() + ',' + (availableHeight + xAxis.height())  +')');\n                } else if (legendPosition === 'top') {\n\n                    if (!marginTop && legend.height() !== margin.top) {\n                        margin.top = legend.height();\n                        availableHeight = nv.utils.availableHeight(height, container, margin);\n                    }\n\n                    g.select('.nv-legendWrap')\n                        .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\n                }                    \n            }\n\n            // Controls\n            if (!showControls) {\n                 g.select('.nv-controlsWrap').selectAll('*').remove();\n            } else {\n                var controlsData = [\n                    { key: controlLabels.grouped || 'Grouped', disabled: multibar.stacked() },\n                    { key: controlLabels.stacked || 'Stacked', disabled: !multibar.stacked() }\n                ];\n\n                controls.width(controlWidth()).color(['#444', '#444', '#444']);\n\n                if (controlsPosition === 'bottom') {\n                     margin.bottom = xAxis.height() + legend.height();\n                     availableHeight = nv.utils.availableHeight(height, container, margin);\n                    g.select('.nv-controlsWrap')\n                        .datum(controlsData)\n                        .attr('transform', 'translate(0,' + (availableHeight + xAxis.height()) +')')\n                        .call(controls);  \n\n                } else if (controlsPosition === 'top') {\n                    g.select('.nv-controlsWrap')\n                        .datum(controlsData)\n                        .attr('transform', 'translate(0,' + (-margin.top) +')')\n                        .call(controls);                        \n                }\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            // Main Chart Component(s)\n            multibar\n                .disabled(data.map(function(series) { return series.disabled }))\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled }));\n\n            var barsWrap = g.select('.nv-barsWrap')\n                .datum(data.filter(function(d) { return !d.disabled }));\n\n            barsWrap.transition().call(multibar);\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/24, data) )\n                    .tickSize(-availableWidth, 0);\n\n                g.select('.nv-x.nv-axis').call(xAxis);\n\n                var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\n\n                xTicks\n                    .selectAll('line, text');\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize( -availableHeight, 0);\n\n                g.select('.nv-y.nv-axis')\n                    .attr('transform', 'translate(0,' + availableHeight + ')');\n                g.select('.nv-y.nv-axis').call(yAxis);\n            }\n\n            // Zero line\n            g.select(\".nv-zeroLine line\")\n                .attr(\"x1\", y(0))\n                .attr(\"x2\", y(0))\n                .attr(\"y1\", 0)\n                .attr(\"y2\", -availableHeight)\n            ;\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            controls.dispatch.on('legendClick', function(d,i) {\n                if (!d.disabled) return;\n                controlsData = controlsData.map(function(s) {\n                    s.disabled = true;\n                    return s;\n                });\n                d.disabled = false;\n\n                switch (d.key) {\n                    case 'Grouped':\n                    case controlLabels.grouped:\n                        multibar.stacked(false);\n                        break;\n                    case 'Stacked':\n                    case controlLabels.stacked:\n                        multibar.stacked(true);\n                        break;\n                }\n\n                state.stacked = multibar.stacked();\n                dispatch.stateChange(state);\n                stacked = multibar.stacked();\n\n                chart.update();\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n\n                    state.disabled = e.disabled;\n                }\n\n                if (typeof e.stacked !== 'undefined') {\n                    multibar.stacked(e.stacked);\n                    state.stacked = e.stacked;\n                    stacked = e.stacked;\n                }\n\n                chart.update();\n            });\n        });\n        renderWatch.renderEnd('multibar horizontal chart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    multibar.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt.value = chart.x()(evt.data);\n        evt['series'] = {\n            key: evt.data.key,\n            value: chart.y()(evt.data),\n            color: evt.color\n        };\n        tooltip.data(evt).hidden(false);\n    });\n\n    multibar.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    multibar.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.multibar = multibar;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.state = state;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        legendPosition: {get: function(){return legendPosition;}, set: function(_){legendPosition=_;}},\n        controlsPosition: {get: function(){return controlsPosition;}, set: function(_){controlsPosition=_;}},\n        showControls: {get: function(){return showControls;}, set: function(_){showControls=_;}},\n        controlLabels: {get: function(){return controlLabels;}, set: function(_){controlLabels=_;}},\n        showXAxis:      {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:    {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        defaultState:    {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            multibar.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n        }},\n        barColor:  {get: function(){return multibar.barColor;}, set: function(_){\n            multibar.barColor(_);\n            legend.color(function(d,i) {return d3.rgb('#ccc').darker(i * 1.5).toString();})\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, multibar);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\nnv.models.multiChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 30, right: 20, bottom: 50, left: 60},\n        marginTop = null,\n        color = nv.utils.defaultColor(),\n        width = null,\n        height = null,\n        showLegend = true,\n        noData = null,\n        yDomain1,\n        yDomain2,\n        getX = function(d) { return d.x },\n        getY = function(d) { return d.y},\n        interpolate = 'linear',\n        useVoronoi = true,\n        interactiveLayer = nv.interactiveGuideline(),\n        useInteractiveGuideline = false,\n        legendRightAxisHint = ' (right axis)',\n        duration = 250\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x = d3.scale.linear(),\n        yScale1 = d3.scale.linear(),\n        yScale2 = d3.scale.linear(),\n\n        lines1 = nv.models.line().yScale(yScale1).duration(duration),\n        lines2 = nv.models.line().yScale(yScale2).duration(duration),\n\n        scatters1 = nv.models.scatter().yScale(yScale1).duration(duration),\n        scatters2 = nv.models.scatter().yScale(yScale2).duration(duration),\n\n        bars1 = nv.models.multiBar().stacked(false).yScale(yScale1).duration(duration),\n        bars2 = nv.models.multiBar().stacked(false).yScale(yScale2).duration(duration),\n\n        stack1 = nv.models.stackedArea().yScale(yScale1).duration(duration),\n        stack2 = nv.models.stackedArea().yScale(yScale2).duration(duration),\n\n        xAxis = nv.models.axis().scale(x).orient('bottom').tickPadding(5).duration(duration),\n        yAxis1 = nv.models.axis().scale(yScale1).orient('left').duration(duration),\n        yAxis2 = nv.models.axis().scale(yScale2).orient('right').duration(duration),\n\n        legend = nv.models.legend().height(30),\n        tooltip = nv.models.tooltip(),\n        dispatch = d3.dispatch();\n\n    var charts = [lines1, lines2, scatters1, scatters2, bars1, bars2, stack1, stack2];\n\n    function chart(selection) {\n        selection.each(function(data) {\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n\n            chart.update = function() { container.transition().call(chart); };\n            chart.container = this;\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            var dataLines1 = data.filter(function(d) {return d.type == 'line' && d.yAxis == 1});\n            var dataLines2 = data.filter(function(d) {return d.type == 'line' && d.yAxis == 2});\n            var dataScatters1 = data.filter(function(d) {return d.type == 'scatter' && d.yAxis == 1});\n            var dataScatters2 = data.filter(function(d) {return d.type == 'scatter' && d.yAxis == 2});\n            var dataBars1 =  data.filter(function(d) {return d.type == 'bar'  && d.yAxis == 1});\n            var dataBars2 =  data.filter(function(d) {return d.type == 'bar'  && d.yAxis == 2});\n            var dataStack1 = data.filter(function(d) {return d.type == 'area' && d.yAxis == 1});\n            var dataStack2 = data.filter(function(d) {return d.type == 'area' && d.yAxis == 2});\n\n            // Display noData message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container);\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            var series1 = data.filter(function(d) {return !d.disabled && d.yAxis == 1})\n                .map(function(d) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d), y: getY(d) }\n                    })\n                });\n\n            var series2 = data.filter(function(d) {return !d.disabled && d.yAxis == 2})\n                .map(function(d) {\n                    return d.values.map(function(d,i) {\n                        return { x: getX(d), y: getY(d) }\n                    })\n                });\n\n            x   .domain(d3.extent(d3.merge(series1.concat(series2)), function(d) { return d.x }))\n                .range([0, availableWidth]);\n\n            var wrap = container.selectAll('g.wrap.multiChart').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'wrap nvd3 multiChart').append('g');\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y1 nv-axis');\n            gEnter.append('g').attr('class', 'nv-y2 nv-axis');\n            gEnter.append('g').attr('class', 'stack1Wrap');\n            gEnter.append('g').attr('class', 'stack2Wrap');\n            gEnter.append('g').attr('class', 'bars1Wrap');\n            gEnter.append('g').attr('class', 'bars2Wrap');\n            gEnter.append('g').attr('class', 'scatters1Wrap');\n            gEnter.append('g').attr('class', 'scatters2Wrap');\n            gEnter.append('g').attr('class', 'lines1Wrap');\n            gEnter.append('g').attr('class', 'lines2Wrap');\n            gEnter.append('g').attr('class', 'legendWrap');\n            gEnter.append('g').attr('class', 'nv-interactive');\n\n            var g = wrap.select('g');\n\n            var color_array = data.map(function(d,i) {\n                return data[i].color || color(d, i);\n            });\n\n            // Legend\n            if (!showLegend) {\n                g.select('.legendWrap').selectAll('*').remove();\n            } else {\n                var legendWidth = legend.align() ? availableWidth / 2 : availableWidth;\n                var legendXPosition = legend.align() ? legendWidth : 0;\n\n                legend.width(legendWidth);\n                legend.color(color_array);\n\n                g.select('.legendWrap')\n                    .datum(data.map(function(series) {\n                        series.originalKey = series.originalKey === undefined ? series.key : series.originalKey;\n                        series.key = series.originalKey + (series.yAxis == 1 ? '' : legendRightAxisHint);\n                        return series;\n                    }))\n                    .call(legend);\n\n                if (!marginTop && legend.height() !== margin.top) {\n                    margin.top = legend.height();\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n                }\n\n                g.select('.legendWrap')\n                    .attr('transform', 'translate(' + legendXPosition + ',' + (-margin.top) +')');\n            }\n\n            lines1\n                .width(availableWidth)\n                .height(availableHeight)\n                .interpolate(interpolate)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'line'}));\n            lines2\n                .width(availableWidth)\n                .height(availableHeight)\n                .interpolate(interpolate)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'line'}));\n            scatters1\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'scatter'}));\n            scatters2\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'scatter'}));\n            bars1\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'bar'}));\n            bars2\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'bar'}));\n            stack1\n                .width(availableWidth)\n                .height(availableHeight)\n                .interpolate(interpolate)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 1 && data[i].type == 'area'}));\n            stack2\n                .width(availableWidth)\n                .height(availableHeight)\n                .interpolate(interpolate)\n                .color(color_array.filter(function(d,i) { return !data[i].disabled && data[i].yAxis == 2 && data[i].type == 'area'}));\n\n            g.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            var lines1Wrap = g.select('.lines1Wrap')\n                .datum(dataLines1.filter(function(d){return !d.disabled}));\n            var scatters1Wrap = g.select('.scatters1Wrap')\n                .datum(dataScatters1.filter(function(d){return !d.disabled}));\n            var bars1Wrap = g.select('.bars1Wrap')\n                .datum(dataBars1.filter(function(d){return !d.disabled}));\n            var stack1Wrap = g.select('.stack1Wrap')\n                .datum(dataStack1.filter(function(d){return !d.disabled}));\n            var lines2Wrap = g.select('.lines2Wrap')\n                .datum(dataLines2.filter(function(d){return !d.disabled}));\n            var scatters2Wrap = g.select('.scatters2Wrap')\n                .datum(dataScatters2.filter(function(d){return !d.disabled}));\n            var bars2Wrap = g.select('.bars2Wrap')\n                .datum(dataBars2.filter(function(d){return !d.disabled}));\n            var stack2Wrap = g.select('.stack2Wrap')\n                .datum(dataStack2.filter(function(d){return !d.disabled}));\n\n            var extraValue1BarStacked = [];\n            if (bars1.stacked() && dataBars1.length) {\n                var extraValue1BarStacked = dataBars1.filter(function(d){return !d.disabled}).map(function(a){return a.values});\n                \n                if (extraValue1BarStacked.length > 0)\n                    extraValue1BarStacked = extraValue1BarStacked.reduce(function(a,b){\n                        return a.map(function(aVal,i){return {x: aVal.x, y: aVal.y + b[i].y}})\n                    });\n            }\n            if (dataBars1.length) {\n                extraValue1BarStacked.push({x:0, y:0});\n            }\n            \n            var extraValue2BarStacked = [];\n            if (bars2.stacked() && dataBars2.length) {\n                var extraValue2BarStacked = dataBars2.filter(function(d){return !d.disabled}).map(function(a){return a.values});\n                \n                if (extraValue2BarStacked.length > 0)\n                    extraValue2BarStacked = extraValue2BarStacked.reduce(function(a,b){\n                        return a.map(function(aVal,i){return {x: aVal.x, y: aVal.y + b[i].y}})\n                    });\n            }\n            if (dataBars2.length) {\n                extraValue2BarStacked.push({x:0, y:0});\n            }\n            \n            yScale1 .domain(yDomain1 || d3.extent(d3.merge(series1).concat(extraValue1BarStacked), function(d) { return d.y } ))\n                .range([0, availableHeight]);\n\n            yScale2 .domain(yDomain2 || d3.extent(d3.merge(series2).concat(extraValue2BarStacked), function(d) { return d.y } ))\n                .range([0, availableHeight]);\n\n            lines1.yDomain(yScale1.domain());\n            scatters1.yDomain(yScale1.domain());\n            bars1.yDomain(yScale1.domain());\n            stack1.yDomain(yScale1.domain());\n\n            lines2.yDomain(yScale2.domain());\n            scatters2.yDomain(yScale2.domain());\n            bars2.yDomain(yScale2.domain());\n            stack2.yDomain(yScale2.domain());\n\n            if(dataStack1.length){d3.transition(stack1Wrap).call(stack1);}\n            if(dataStack2.length){d3.transition(stack2Wrap).call(stack2);}\n\n            if(dataBars1.length){d3.transition(bars1Wrap).call(bars1);}\n            if(dataBars2.length){d3.transition(bars2Wrap).call(bars2);}\n\n            if(dataLines1.length){d3.transition(lines1Wrap).call(lines1);}\n            if(dataLines2.length){d3.transition(lines2Wrap).call(lines2);}\n\n            if(dataScatters1.length){d3.transition(scatters1Wrap).call(scatters1);}\n            if(dataScatters2.length){d3.transition(scatters2Wrap).call(scatters2);}\n\n            xAxis\n                ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                .tickSize(-availableHeight, 0);\n\n            g.select('.nv-x.nv-axis')\n                .attr('transform', 'translate(0,' + availableHeight + ')');\n            d3.transition(g.select('.nv-x.nv-axis'))\n                .call(xAxis);\n\n            yAxis1\n                ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                .tickSize( -availableWidth, 0);\n\n\n            d3.transition(g.select('.nv-y1.nv-axis'))\n                .call(yAxis1);\n\n            yAxis2\n                ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                .tickSize( -availableWidth, 0);\n\n            d3.transition(g.select('.nv-y2.nv-axis'))\n                .call(yAxis2);\n\n            g.select('.nv-y1.nv-axis')\n                .classed('nv-disabled', series1.length ? false : true)\n                .attr('transform', 'translate(' + x.range()[0] + ',0)');\n\n            g.select('.nv-y2.nv-axis')\n                .classed('nv-disabled', series2.length ? false : true)\n                .attr('transform', 'translate(' + x.range()[1] + ',0)');\n\n            legend.dispatch.on('stateChange', function(newState) {\n                chart.update();\n            });\n\n            if(useInteractiveGuideline){\n                interactiveLayer\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .margin({left:margin.left, top:margin.top})\n                    .svgContainer(container)\n                    .xScale(x);\n                wrap.select(\".nv-interactive\").call(interactiveLayer);\n            }\n\n            //============================================================\n            // Event Handling/Dispatching\n            //------------------------------------------------------------\n\n            function mouseover_line(evt) {\n                var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n                evt.value = evt.point.x;\n                evt.series = {\n                    value: evt.point.y,\n                    color: evt.point.color,\n                    key: evt.series.key\n                };\n                tooltip\n                    .duration(0)\n                    .headerFormatter(function(d, i) {\n                    \treturn xAxis.tickFormat()(d, i);\n                    })\n                    .valueFormatter(function(d, i) {\n                        return yaxis.tickFormat()(d, i);\n                    })\n                    .data(evt)\n                    .hidden(false);\n            }\n\n            function mouseover_scatter(evt) {\n                var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n                evt.value = evt.point.x;\n                evt.series = {\n                    value: evt.point.y,\n                    color: evt.point.color,\n                    key: evt.series.key\n                };\n                tooltip\n                    .duration(100)\n                    .headerFormatter(function(d, i) {\n                    \treturn xAxis.tickFormat()(d, i);\n                    })\n                    .valueFormatter(function(d, i) {\n                        return yaxis.tickFormat()(d, i);\n                    })\n                    .data(evt)\n                    .hidden(false);\n            }\n\n            function mouseover_stack(evt) {\n                var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n                evt.point['x'] = stack1.x()(evt.point);\n                evt.point['y'] = stack1.y()(evt.point);\n                tooltip\n                    .duration(0)\n                    .headerFormatter(function(d, i) {\n                    \treturn xAxis.tickFormat()(d, i);\n                    })\n                    .valueFormatter(function(d, i) {\n                        return yaxis.tickFormat()(d, i);\n                    })\n                    .data(evt)\n                    .hidden(false);\n            }\n\n            function mouseover_bar(evt) {\n                var yaxis = evt.series.yAxis === 2 ? yAxis2 : yAxis1;\n\n                evt.value = bars1.x()(evt.data);\n                evt['series'] = {\n                    value: bars1.y()(evt.data),\n                    color: evt.color,\n                    key: evt.data.key\n                };\n                tooltip\n                    .duration(0)\n                    .headerFormatter(function(d, i) {\n                    \treturn xAxis.tickFormat()(d, i);\n                    })\n                    .valueFormatter(function(d, i) {\n                        return yaxis.tickFormat()(d, i);\n                    })\n                    .data(evt)\n                    .hidden(false);\n            }\n\n\n\n            function clearHighlights() {\n              for(var i=0, il=charts.length; i < il; i++){\n                var chart = charts[i];\n                try {\n                  chart.clearHighlights();\n                } catch(e){}\n              }\n            }\n\n            function highlightPoint(serieIndex, pointIndex, b){\n              for(var i=0, il=charts.length; i < il; i++){\n                var chart = charts[i];\n                try {\n                  chart.highlightPoint(serieIndex, pointIndex, b);\n                } catch(e){}\n              }\n            }\n\n            if(useInteractiveGuideline){\n                interactiveLayer.dispatch.on('elementMousemove', function(e) {\n                    clearHighlights();\n                    var singlePoint, pointIndex, pointXLocation, allData = [];\n                    data\n                    .filter(function(series, i) {\n                        series.seriesIndex = i;\n                        return !series.disabled;\n                    })\n                    .forEach(function(series,i) {\n                        var extent = x.domain();\n                        var currentValues = series.values.filter(function(d,i) {\n                            return chart.x()(d,i) >= extent[0] && chart.x()(d,i) <= extent[1];\n                        });\n\n                        pointIndex = nv.interactiveBisect(currentValues, e.pointXValue, chart.x());\n                        var point = currentValues[pointIndex];\n                        var pointYValue = chart.y()(point, pointIndex);\n                        if (pointYValue !== null) {\n                            highlightPoint(i, pointIndex, true);\n                        }\n                        if (point === undefined) return;\n                        if (singlePoint === undefined) singlePoint = point;\n                        if (pointXLocation === undefined) pointXLocation = x(chart.x()(point,pointIndex));\n                        allData.push({\n                            key: series.key,\n                            value: pointYValue,\n                            color: color(series,series.seriesIndex),\n                            data: point,\n                            yAxis: series.yAxis == 2 ? yAxis2 : yAxis1\n                        });\n                    });\n\n                    var defaultValueFormatter = function(d,i) {\n                        var yAxis = allData[i].yAxis;\n                        return d == null ? \"N/A\" : yAxis.tickFormat()(d);\n                    };\n\n                    interactiveLayer.tooltip\n                        .headerFormatter(function(d, i) {\n                            return xAxis.tickFormat()(d, i);\n                        })\n                        .valueFormatter(interactiveLayer.tooltip.valueFormatter() || defaultValueFormatter)\n                        .data({\n                            value: chart.x()( singlePoint,pointIndex ),\n                            index: pointIndex,\n                            series: allData\n                        })();\n\n                    interactiveLayer.renderGuideLine(pointXLocation);\n                });\n\n                interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n                    clearHighlights();\n                });\n            } else {\n                lines1.dispatch.on('elementMouseover.tooltip', mouseover_line);\n                lines2.dispatch.on('elementMouseover.tooltip', mouseover_line);\n                lines1.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true)\n                });\n                lines2.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true)\n                });\n\n                scatters1.dispatch.on('elementMouseover.tooltip', mouseover_scatter);\n                scatters2.dispatch.on('elementMouseover.tooltip', mouseover_scatter);\n                scatters1.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true)\n                });\n                scatters2.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true)\n                });\n\n                stack1.dispatch.on('elementMouseover.tooltip', mouseover_stack);\n                stack2.dispatch.on('elementMouseover.tooltip', mouseover_stack);\n                stack1.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true)\n                });\n                stack2.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true)\n                });\n\n                bars1.dispatch.on('elementMouseover.tooltip', mouseover_bar);\n                bars2.dispatch.on('elementMouseover.tooltip', mouseover_bar);\n\n                bars1.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true);\n                });\n                bars2.dispatch.on('elementMouseout.tooltip', function(evt) {\n                    tooltip.hidden(true);\n                });\n                bars1.dispatch.on('elementMousemove.tooltip', function(evt) {\n                    tooltip();\n                });\n                bars2.dispatch.on('elementMousemove.tooltip', function(evt) {\n                    tooltip();\n                });\n            }\n        });\n\n        return chart;\n    }\n\n    //============================================================\n    // Global getters and setters\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.legend = legend;\n    chart.lines1 = lines1;\n    chart.lines2 = lines2;\n    chart.scatters1 = scatters1;\n    chart.scatters2 = scatters2;\n    chart.bars1 = bars1;\n    chart.bars2 = bars2;\n    chart.stack1 = stack1;\n    chart.stack2 = stack2;\n    chart.xAxis = xAxis;\n    chart.yAxis1 = yAxis1;\n    chart.yAxis2 = yAxis2;\n    chart.tooltip = tooltip;\n    chart.interactiveLayer = interactiveLayer;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        yDomain1:      {get: function(){return yDomain1;}, set: function(_){yDomain1=_;}},\n        yDomain2:    {get: function(){return yDomain2;}, set: function(_){yDomain2=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        interpolate:    {get: function(){return interpolate;}, set: function(_){interpolate=_;}},\n        legendRightAxisHint:    {get: function(){return legendRightAxisHint;}, set: function(_){legendRightAxisHint=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        x: {get: function(){return getX;}, set: function(_){\n            getX = _;\n            lines1.x(_);\n            lines2.x(_);\n            scatters1.x(_);\n            scatters2.x(_);\n            bars1.x(_);\n            bars2.x(_);\n            stack1.x(_);\n            stack2.x(_);\n        }},\n        y: {get: function(){return getY;}, set: function(_){\n            getY = _;\n            lines1.y(_);\n            lines2.y(_);\n            scatters1.y(_);\n            scatters2.y(_);\n            stack1.y(_);\n            stack2.y(_);\n            bars1.y(_);\n            bars2.y(_);\n        }},\n        useVoronoi: {get: function(){return useVoronoi;}, set: function(_){\n            useVoronoi=_;\n            lines1.useVoronoi(_);\n            lines2.useVoronoi(_);\n            stack1.useVoronoi(_);\n            stack2.useVoronoi(_);\n        }},\n\n        useInteractiveGuideline: {get: function(){return useInteractiveGuideline;}, set: function(_){\n            useInteractiveGuideline = _;\n            if (useInteractiveGuideline) {\n                lines1.interactive(false);\n                lines1.useVoronoi(false);\n                lines2.interactive(false);\n                lines2.useVoronoi(false);\n                stack1.interactive(false);\n                stack1.useVoronoi(false);\n                stack2.interactive(false);\n                stack2.useVoronoi(false);\n                scatters1.interactive(false);\n                scatters2.interactive(false);\n            }\n        }},\n\n        duration: {get: function(){return duration;}, set: function(_) {\n            duration = _;\n            [lines1, lines2, stack1, stack2, scatters1, scatters2, xAxis, yAxis1, yAxis2].forEach(function(model){\n              model.duration(duration);\n            });\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.ohlcBar = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = null\n        , height = null\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container = null\n        , x = d3.scale.linear()\n        , y = d3.scale.linear()\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , getOpen = function(d) { return d.open }\n        , getClose = function(d) { return d.close }\n        , getHigh = function(d) { return d.high }\n        , getLow = function(d) { return d.low }\n        , forceX = []\n        , forceY = []\n        , padData     = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n        , clipEdge = true\n        , color = nv.utils.defaultColor()\n        , interactive = false\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd', 'chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove')\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    function chart(selection) {\n        selection.each(function(data) {\n            container = d3.select(this);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            nv.utils.initSVG(container);\n\n            // ohlc bar width.\n            var w = (availableWidth / data[0].values.length) * .9;\n\n            // Setup Scales\n            x.domain(xDomain || d3.extent(data[0].values.map(getX).concat(forceX) ));\n\n            if (padData)\n                x.range(xRange || [availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n            else\n                x.range(xRange || [5 + w/2, availableWidth - w/2 - 5]);\n\n            y.domain(yDomain || [\n                    d3.min(data[0].values.map(getLow).concat(forceY)),\n                    d3.max(data[0].values.map(getHigh).concat(forceY))\n                ]\n            ).range(yRange || [availableHeight, 0]);\n\n            // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n            if (x.domain()[0] === x.domain()[1])\n                x.domain()[0] ?\n                    x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n                    : x.domain([-1,1]);\n\n            if (y.domain()[0] === y.domain()[1])\n                y.domain()[0] ?\n                    y.domain([y.domain()[0] + y.domain()[0] * 0.01, y.domain()[1] - y.domain()[1] * 0.01])\n                    : y.domain([-1,1]);\n\n            // Setup containers and skeleton of chart\n            var wrap = d3.select(this).selectAll('g.nv-wrap.nv-ohlcBar').data([data[0].values]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-ohlcBar');\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-ticks');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            container\n                .on('click', function(d,i) {\n                    dispatch.chartClick({\n                        data: d,\n                        index: i,\n                        pos: d3.event,\n                        id: id\n                    });\n                });\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-chart-clip-path-' + id)\n                .append('rect');\n\n            wrap.select('#nv-chart-clip-path-' + id + ' rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            g   .attr('clip-path', clipEdge ? 'url(#nv-chart-clip-path-' + id + ')' : '');\n\n            var ticks = wrap.select('.nv-ticks').selectAll('.nv-tick')\n                .data(function(d) { return d });\n            ticks.exit().remove();\n\n            ticks.enter().append('path')\n                .attr('class', function(d,i,j) { return (getOpen(d,i) > getClose(d,i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i })\n                .attr('d', function(d,i) {\n                    return 'm0,0l0,'\n                        + (y(getOpen(d,i))\n                            - y(getHigh(d,i)))\n                        + 'l'\n                        + (-w/2)\n                        + ',0l'\n                        + (w/2)\n                        + ',0l0,'\n                        + (y(getLow(d,i)) - y(getOpen(d,i)))\n                        + 'l0,'\n                        + (y(getClose(d,i))\n                            - y(getLow(d,i)))\n                        + 'l'\n                        + (w/2)\n                        + ',0l'\n                        + (-w/2)\n                        + ',0z';\n                })\n                .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',' + y(getHigh(d,i)) + ')'; })\n                .attr('fill', function(d,i) { return color[0]; })\n                .attr('stroke', function(d,i) { return color[0]; })\n                .attr('x', 0 )\n                .attr('y', function(d,i) {  return y(Math.max(0, getY(d,i))) })\n                .attr('height', function(d,i) { return Math.abs(y(getY(d,i)) - y(0)) });\n\n            // the bar colors are controlled by CSS currently\n            ticks.attr('class', function(d,i,j) {\n                return (getOpen(d,i) > getClose(d,i) ? 'nv-tick negative' : 'nv-tick positive') + ' nv-tick-' + j + '-' + i;\n            });\n\n            d3.transition(ticks)\n                .attr('transform', function(d,i) { return 'translate(' + x(getX(d,i)) + ',' + y(getHigh(d,i)) + ')'; })\n                .attr('d', function(d,i) {\n                    var w = (availableWidth / data[0].values.length) * .9;\n                    return 'm0,0l0,'\n                        + (y(getOpen(d,i))\n                            - y(getHigh(d,i)))\n                        + 'l'\n                        + (-w/2)\n                        + ',0l'\n                        + (w/2)\n                        + ',0l0,'\n                        + (y(getLow(d,i))\n                            - y(getOpen(d,i)))\n                        + 'l0,'\n                        + (y(getClose(d,i))\n                            - y(getLow(d,i)))\n                        + 'l'\n                        + (w/2)\n                        + ',0l'\n                        + (-w/2)\n                        + ',0z';\n                });\n        });\n\n        return chart;\n    }\n\n\n    //Create methods to allow outside functions to highlight a specific bar.\n    chart.highlightPoint = function(pointIndex, isHoverOver) {\n        chart.clearHighlights();\n        container.select(\".nv-ohlcBar .nv-tick-0-\" + pointIndex)\n            .classed(\"hover\", isHoverOver)\n        ;\n    };\n\n    chart.clearHighlights = function() {\n        container.select(\".nv-ohlcBar .nv-tick.hover\")\n            .classed(\"hover\", false)\n        ;\n    };\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:    {get: function(){return width;}, set: function(_){width=_;}},\n        height:   {get: function(){return height;}, set: function(_){height=_;}},\n        xScale:   {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:   {get: function(){return y;}, set: function(_){y=_;}},\n        xDomain:  {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain:  {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:   {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:   {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        forceX:   {get: function(){return forceX;}, set: function(_){forceX=_;}},\n        forceY:   {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        padData:  {get: function(){return padData;}, set: function(_){padData=_;}},\n        clipEdge: {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n        id:       {get: function(){return id;}, set: function(_){id=_;}},\n        interactive: {get: function(){return interactive;}, set: function(_){interactive=_;}},\n\n        x:     {get: function(){return getX;}, set: function(_){getX=_;}},\n        y:     {get: function(){return getY;}, set: function(_){getY=_;}},\n        open:  {get: function(){return getOpen();}, set: function(_){getOpen=_;}},\n        close: {get: function(){return getClose();}, set: function(_){getClose=_;}},\n        high:  {get: function(){return getHigh;}, set: function(_){getHigh=_;}},\n        low:   {get: function(){return getLow;}, set: function(_){getLow=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    != undefined ? _.top    : margin.top;\n            margin.right  = _.right  != undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom != undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   != undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    return chart;\n};\n// Code adapted from Jason Davies' \"Parallel Coordinates\"\n// http://bl.ocks.org/jasondavies/1341281\nnv.models.parallelCoordinates = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 30, right: 0, bottom: 10, left: 0}\n        , width = null\n        , height = null\n        , availableWidth = null\n        , availableHeight = null\n        , x = d3.scale.ordinal()\n        , y = {}\n        , undefinedValuesLabel = \"undefined values\"\n        , dimensionData = []\n        , enabledDimensions = []\n        , dimensionNames = []\n        , displayBrush = true\n        , color = nv.utils.defaultColor()\n        , filters = []\n        , active = []\n        , dragging = []\n        , axisWithUndefinedValues = []\n        , lineTension = 1\n        , foreground\n        , background\n        , dimensions\n        , line = d3.svg.line()\n        , axis = d3.svg.axis()\n        , dispatch = d3.dispatch('brushstart', 'brush', 'brushEnd', 'dimensionsOrder', \"stateChange\", 'elementClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd', 'activeChanged')\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var container = d3.select(this);\n            availableWidth = nv.utils.availableWidth(width, container, margin);\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            nv.utils.initSVG(container);\n\n           //Convert old data to new format (name, values)\n            if (data[0].values === undefined) {\n                var newData = [];\n                data.forEach(function (d) {\n                        var val = {};\n                        var key = Object.keys(d);\n                        key.forEach(function (k) { if (k !== \"name\") val[k] = d[k] });\n                        newData.push({ key: d.name, values: val });\n                });\n                data = newData;\n            }\n\n            var dataValues = data.map(function (d) {return d.values});\n            if (active.length === 0) {\n                active = data;\n            }; //set all active before first brush call\n            \n            dimensionNames = dimensionData.sort(function (a, b) { return a.currentPosition - b.currentPosition; }).map(function (d) { return d.key });\n            enabledDimensions = dimensionData.filter(function (d) { return !d.disabled; });\n            \n            // Setup Scales\n            x.rangePoints([0, availableWidth], 1).domain(enabledDimensions.map(function (d) { return d.key; }));\n\n            //Set as true if all values on an axis are missing.\n            // Extract the list of dimensions and create a scale for each.\n            var oldDomainMaxValue = {};\n            var displayMissingValuesline = false;\n            var currentTicks = [];\n            \n            dimensionNames.forEach(function(d) {\n                var extent = d3.extent(dataValues, function (p) { return +p[d]; });\n                var min = extent[0];\n                var max = extent[1];\n                var onlyUndefinedValues = false;\n                //If there is no values to display on an axis, set the extent to 0\n                if (isNaN(min) || isNaN(max)) {\n                    onlyUndefinedValues = true;\n                    min = 0;\n                    max = 0;\n                }\n                //Scale axis if there is only one value\n                if (min === max) {\n                    min = min - 1;\n                    max = max + 1;\n                }\n                var f = filters.filter(function (k) { return k.dimension == d; });\n                if (f.length !== 0) {\n                    //If there is only NaN values, keep the existing domain.\n                    if (onlyUndefinedValues) {\n                        min = y[d].domain()[0];\n                        max = y[d].domain()[1];\n                    }\n                        //If the brush extent is > max (< min), keep the extent value.\n                    else if (!f[0].hasOnlyNaN && displayBrush) {\n                        min = min > f[0].extent[0] ? f[0].extent[0] : min;\n                        max = max < f[0].extent[1] ? f[0].extent[1] : max;\n                    }\n                        //If there is NaN values brushed be sure the brush extent is on the domain.\n                    else if (f[0].hasNaN) {\n                        max = max < f[0].extent[1] ? f[0].extent[1] : max;\n                        oldDomainMaxValue[d] = y[d].domain()[1];\n                        displayMissingValuesline = true;\n                    }\n                }\n                //Use 90% of (availableHeight - 12) for the axis range, 12 reprensenting the space necessary to display \"undefined values\" text.\n                //The remaining 10% are used to display the missingValue line.\n                y[d] = d3.scale.linear()\n                    .domain([min, max])\n                    .range([(availableHeight - 12) * 0.9, 0]);\n\n                axisWithUndefinedValues = [];\n                y[d].brush = d3.svg.brush().y(y[d]).on('brushstart', brushstart).on('brush', brush).on('brushend', brushend);\n            });\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-parallelCoordinates').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-parallelCoordinates');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-parallelCoordinates background');\n            gEnter.append('g').attr('class', 'nv-parallelCoordinates foreground');\n            gEnter.append('g').attr('class', 'nv-parallelCoordinates missingValuesline');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            line.interpolate('cardinal').tension(lineTension);\n            axis.orient('left');\n            var axisDrag = d3.behavior.drag()\n                        .on('dragstart', dragStart)\n                        .on('drag', dragMove)\n                        .on('dragend', dragEnd);\n\n            //Add missing value line at the bottom of the chart\n            var missingValuesline, missingValueslineText;\n            var step = x.range()[1] - x.range()[0];\n            step = isNaN(step) ? x.range()[0] : step;\n            if (!isNaN(step)) {\n                var lineData = [0 + step / 2, availableHeight - 12, availableWidth - step / 2, availableHeight - 12];\n                missingValuesline = wrap.select('.missingValuesline').selectAll('line').data([lineData]);\n                missingValuesline.enter().append('line');\n                missingValuesline.exit().remove();\n                missingValuesline.attr(\"x1\", function(d) { return d[0]; })\n                        .attr(\"y1\", function(d) { return d[1]; })\n                        .attr(\"x2\", function(d) { return d[2]; })\n                        .attr(\"y2\", function(d) { return d[3]; });\n    \n                //Add the text \"undefined values\" under the missing value line\n                missingValueslineText = wrap.select('.missingValuesline').selectAll('text').data([undefinedValuesLabel]);\n                missingValueslineText.append('text').data([undefinedValuesLabel]);\n                missingValueslineText.enter().append('text');\n                missingValueslineText.exit().remove();\n                missingValueslineText.attr(\"y\", availableHeight)\n                        //To have the text right align with the missingValues line, substract 92 representing the text size.\n                        .attr(\"x\", availableWidth - 92 - step / 2)\n                        .text(function(d) { return d; });\n            }\n            // Add grey background lines for context.\n            background = wrap.select('.background').selectAll('path').data(data);\n            background.enter().append('path');\n            background.exit().remove();\n            background.attr('d', path);\n\n            // Add blue foreground lines for focus.\n            foreground = wrap.select('.foreground').selectAll('path').data(data);\n            foreground.enter().append('path')\n            foreground.exit().remove();\n            foreground.attr('d', path)\n                .style(\"stroke-width\", function (d, i) {\n                if (isNaN(d.strokeWidth)) { d.strokeWidth = 1;} return d.strokeWidth;})\n                .attr('stroke', function (d, i) { return d.color || color(d, i); });\n            foreground.on(\"mouseover\", function (d, i) {\n                d3.select(this).classed('hover', true).style(\"stroke-width\", d.strokeWidth + 2 + \"px\").style(\"stroke-opacity\", 1);\n                dispatch.elementMouseover({\n                    label: d.name,\n                    color: d.color || color(d, i),\n                    values: d.values,\n                    dimensions: enabledDimensions\n                });\n\n            });\n            foreground.on(\"mouseout\", function (d, i) {\n                d3.select(this).classed('hover', false).style(\"stroke-width\", d.strokeWidth + \"px\").style(\"stroke-opacity\", 0.7);\n                dispatch.elementMouseout({\n                    label: d.name,\n                    index: i\n                });\n            });\n            foreground.on('mousemove', function (d, i) {\n                dispatch.elementMousemove();\n            });\n            foreground.on('click', function (d) {\n                dispatch.elementClick({\n                    id: d.id\n                });\n            });\n            // Add a group element for each dimension.\n            dimensions = g.selectAll('.dimension').data(enabledDimensions);\n            var dimensionsEnter = dimensions.enter().append('g').attr('class', 'nv-parallelCoordinates dimension');\n\n            dimensions.attr('transform', function(d) { return 'translate(' + x(d.key) + ',0)'; });\n            dimensionsEnter.append('g').attr('class', 'nv-axis');\n\n            // Add an axis and title.\n            dimensionsEnter.append('text')\n                .attr('class', 'nv-label')\n                .style(\"cursor\", \"move\")\n                .attr('dy', '-1em')\n                .attr('text-anchor', 'middle')\n                .on(\"mouseover\", function(d, i) {\n                    dispatch.elementMouseover({\n                        label: d.tooltip || d.key,\n                        color: d.color \n                    });\n                })\n                .on(\"mouseout\", function(d, i) {\n                    dispatch.elementMouseout({\n                        label: d.tooltip\n                    });\n                })\n                .on('mousemove', function (d, i) {\n                    dispatch.elementMousemove();\n                })\n                .call(axisDrag);\n\n            dimensionsEnter.append('g').attr('class', 'nv-brushBackground');\n            dimensions.exit().remove();\n            dimensions.select('.nv-label').text(function (d) { return d.key });\n\n            // Add and store a brush for each axis.\n            restoreBrush(displayBrush);\n\n            var actives = dimensionNames.filter(function (p) { return !y[p].brush.empty(); }),\n                    extents = actives.map(function (p) { return y[p].brush.extent(); });\n            var formerActive = active.slice(0);\n\n            //Restore active values\n            active = [];\n            foreground.style(\"display\", function (d) {\n                var isActive = actives.every(function (p, i) {\n                    if ((isNaN(d.values[p]) || isNaN(parseFloat(d.values[p]))) && extents[i][0] == y[p].brush.y().domain()[0]) {\n                        return true;\n                    }\n                    return (extents[i][0] <= d.values[p] && d.values[p] <= extents[i][1]) && !isNaN(parseFloat(d.values[p]));\n                });\n                if (isActive)\n                    active.push(d);\n                return !isActive ? \"none\" : null;\n\n            });\n\n            if (filters.length > 0 || !nv.utils.arrayEquals(active, formerActive)) {\n               dispatch.activeChanged(active);\n            }\n\n            // Returns the path for a given data point.\n            function path(d) {\n                return line(enabledDimensions.map(function (p) {\n                    //If value if missing, put the value on the missing value line\n                    if (isNaN(d.values[p.key]) || isNaN(parseFloat(d.values[p.key])) || displayMissingValuesline) {\n                        var domain = y[p.key].domain();\n                        var range = y[p.key].range();\n                        var min = domain[0] - (domain[1] - domain[0]) / 9;\n\n                        //If it's not already the case, allow brush to select undefined values\n                        if (axisWithUndefinedValues.indexOf(p.key) < 0) {\n\n                            var newscale = d3.scale.linear().domain([min, domain[1]]).range([availableHeight - 12, range[1]]);\n                            y[p.key].brush.y(newscale);\n                            axisWithUndefinedValues.push(p.key);\n                        }\n                        if (isNaN(d.values[p.key]) || isNaN(parseFloat(d.values[p.key]))) {\n                            return [x(p.key), y[p.key](min)];\n                        }\n                    }\n\n                    //If parallelCoordinate contain missing values show the missing values line otherwise, hide it.\n                    if (missingValuesline !== undefined) {\n                        if (axisWithUndefinedValues.length > 0 || displayMissingValuesline) {\n                            missingValuesline.style(\"display\", \"inline\");\n                            missingValueslineText.style(\"display\", \"inline\");\n                        } else {\n                            missingValuesline.style(\"display\", \"none\");\n                            missingValueslineText.style(\"display\", \"none\");\n                        }\n                    }\n                    return [x(p.key), y[p.key](d.values[p.key])];\n                }));\n            }\n\n            function restoreBrush(visible) {\n                filters.forEach(function (f) {\n                    //If filter brushed NaN values, keep the brush on the bottom of the axis.\n                    var brushDomain = y[f.dimension].brush.y().domain();\n                    if (f.hasOnlyNaN) {\n                        f.extent[1] = (y[f.dimension].domain()[1] - brushDomain[0]) * (f.extent[1] - f.extent[0]) / (oldDomainMaxValue[f.dimension] - f.extent[0]) + brushDomain[0];\n                    }\n                    if (f.hasNaN) {\n                        f.extent[0] = brushDomain[0];\n                    }\n                    if (visible)\n                        y[f.dimension].brush.extent(f.extent);\n                });\n                \n                dimensions.select('.nv-brushBackground')\n                    .each(function (d) {\n                        d3.select(this).call(y[d.key].brush);\n\n                    })\n                    .selectAll('rect')\n                    .attr('x', -8)\n                    .attr('width', 16);\n                \n                updateTicks();\n            }\n            \n            // Handles a brush event, toggling the display of foreground lines.\n            function brushstart() {\n                //If brush aren't visible, show it before brushing again.\n                if (displayBrush === false) {\n                    displayBrush = true;\n                    restoreBrush(true);\n                }\n            }\n            \n            // Handles a brush event, toggling the display of foreground lines.\n            function brush() {\n                actives = dimensionNames.filter(function (p) { return !y[p].brush.empty(); });\n                extents = actives.map(function(p) { return y[p].brush.extent(); });\n\n                filters = []; //erase current filters\n                actives.forEach(function(d,i) {\n                    filters[i] = {\n                        dimension: d,\n                        extent: extents[i],\n                        hasNaN: false,\n                        hasOnlyNaN: false\n                    }\n                });\n\n                active = []; //erase current active list\n                foreground.style('display', function(d) {\n                    var isActive = actives.every(function(p, i) {\n                        if ((isNaN(d.values[p]) || isNaN(parseFloat(d.values[p]))) && extents[i][0] == y[p].brush.y().domain()[0]) return true;\n                        return (extents[i][0] <= d.values[p] && d.values[p] <= extents[i][1]) && !isNaN(parseFloat(d.values[p]));\n                    });\n                    if (isActive) active.push(d);\n                    return isActive ? null : 'none';\n                });\n                \n                updateTicks();\n                \n                dispatch.brush({\n                    filters: filters,\n                    active: active\n                });\n            }\n            function brushend() {\n                var hasActiveBrush = actives.length > 0 ? true : false;\n                filters.forEach(function (f) {\n                    if (f.extent[0] === y[f.dimension].brush.y().domain()[0] && axisWithUndefinedValues.indexOf(f.dimension) >= 0)\n                        f.hasNaN = true;\n                    if (f.extent[1] < y[f.dimension].domain()[0])\n                        f.hasOnlyNaN = true;\n                });\n                dispatch.brushEnd(active, hasActiveBrush);\n            }           \n            function updateTicks() {\n                dimensions.select('.nv-axis')\n                    .each(function (d, i) {\n                        var f = filters.filter(function (k) { return k.dimension == d.key; });\n                        currentTicks[d.key] = y[d.key].domain();\n                        \n                        //If brush are available, display brush extent\n                        if (f.length != 0 && displayBrush)\n                        {\n                            currentTicks[d.key] = [];\n                            if (f[0].extent[1] > y[d.key].domain()[0]) \n                                currentTicks[d.key] = [f[0].extent[1]];\n                            if (f[0].extent[0] >= y[d.key].domain()[0])\n                                currentTicks[d.key].push(f[0].extent[0]);    \n                        }\n                            \n                        d3.select(this).call(axis.scale(y[d.key]).tickFormat(d.format).tickValues(currentTicks[d.key]));\n                });\n            }\n            function dragStart(d) {\n                dragging[d.key] = this.parentNode.__origin__ = x(d.key);\n                background.attr(\"visibility\", \"hidden\");\n            }\n            function dragMove(d) {\n                dragging[d.key] = Math.min(availableWidth, Math.max(0, this.parentNode.__origin__ += d3.event.x));\n                foreground.attr(\"d\", path);\n                enabledDimensions.sort(function (a, b) { return dimensionPosition(a.key) - dimensionPosition(b.key); });\n                enabledDimensions.forEach(function (d, i) { return d.currentPosition = i; });\n                x.domain(enabledDimensions.map(function (d) { return d.key; }));\n                dimensions.attr(\"transform\", function(d) { return \"translate(\" + dimensionPosition(d.key) + \")\"; });\n            }\n            function dragEnd(d, i) {\n                delete this.parentNode.__origin__;\n                delete dragging[d.key];\n                d3.select(this.parentNode).attr(\"transform\", \"translate(\" + x(d.key) + \")\");\n                foreground\n                  .attr(\"d\", path);\n                background\n                  .attr(\"d\", path)\n                  .attr(\"visibility\", null);\n\n                dispatch.dimensionsOrder(enabledDimensions);\n            }\n            function dimensionPosition(d) {\n                var v = dragging[d];\n                return v == null ? x(d) : v;\n            }\n        });\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:         {get: function(){return width;},           set: function(_){width= _;}},\n        height:        {get: function(){return height;},          set: function(_){height= _;}},\n        dimensionData: { get: function () { return dimensionData; }, set: function (_) { dimensionData = _; } },\n        displayBrush: { get: function () { return displayBrush; }, set: function (_) { displayBrush = _; } },\n        filters: { get: function () { return filters; }, set: function (_) { filters = _; } },\n        active: { get: function () { return active; }, set: function (_) { active = _; } },\n        lineTension:   {get: function(){return lineTension;},     set: function(_){lineTension = _;}},\n        undefinedValuesLabel : {get: function(){return undefinedValuesLabel;}, set: function(_){undefinedValuesLabel=_;}},\n        \n        // deprecated options\n        dimensions: {get: function () { return dimensionData.map(function (d){return d.key}); }, set: function (_) {\n            // deprecated after 1.8.1\n            nv.deprecated('dimensions', 'use dimensionData instead');\n            if (dimensionData.length === 0) {\n                _.forEach(function (k) { dimensionData.push({ key: k }) })\n            } else {\n                _.forEach(function (k, i) { dimensionData[i].key= k })\n            }\n        }},\n        dimensionNames: {get: function () { return dimensionData.map(function (d){return d.key}); }, set: function (_) {\n            // deprecated after 1.8.1\n            nv.deprecated('dimensionNames', 'use dimensionData instead');\n            dimensionNames = [];\n            if (dimensionData.length === 0) {\n                _.forEach(function (k) { dimensionData.push({ key: k }) })\n            } else {\n                _.forEach(function (k, i) { dimensionData[i].key = k })\n            }\n \n        }},\n        dimensionFormats: {get: function () { return dimensionData.map(function (d) { return d.format }); }, set: function (_) {\n            // deprecated after 1.8.1\n            nv.deprecated('dimensionFormats', 'use dimensionData instead');\n            if (dimensionData.length === 0) {\n                _.forEach(function (f) { dimensionData.push({ format: f }) })\n            } else {\n                _.forEach(function (f, i) { dimensionData[i].format = f })\n            }\n\n        }},\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    =  _.top    !== undefined ? _.top    : margin.top;\n            margin.right  =  _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom =  _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   =  _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n    nv.utils.initOptions(chart);\n    return chart;\n};\nnv.models.parallelCoordinatesChart = function () {\n        \"use strict\";\n        //============================================================\n        // Public Variables with Default Settings\n        //------------------------------------------------------------\n\n        var parallelCoordinates = nv.models.parallelCoordinates()\n        var legend = nv.models.legend()\n        var tooltip = nv.models.tooltip();\n        var dimensionTooltip = nv.models.tooltip();\n\n        var margin = { top: 0, right: 0, bottom: 0, left: 0 }\n        , marginTop = null\n        , width = null\n        , height = null\n        , showLegend = true\n        , color = nv.utils.defaultColor()\n        , state = nv.utils.state()\n        , dimensionData = []\n        , displayBrush = true\n        , defaultState = null\n        , noData = null\n        , nanValue = \"undefined\"\n        , dispatch = d3.dispatch('dimensionsOrder', 'brushEnd', 'stateChange', 'changeState', 'renderEnd')\n        , controlWidth = function () { return showControls ? 180 : 0 }\n        ;\n\n\t    //============================================================\n\n\t\t//============================================================\n        // Private Variables\n        //------------------------------------------------------------\n\n        var renderWatch = nv.utils.renderWatch(dispatch);\n\n        var stateGetter = function(data) {\n            return function() {\n                return {\n                    active: data.map(function(d) { return !d.disabled })\n                };\n            }\n        };\n\n        var stateSetter = function(data) {\n            return function(state) {\n                if(state.active !== undefined) {\n                    data.forEach(function(series, i) {\n                        series.disabled = !state.active[i];\n                    });\n                }\n            }\n        };\n\n        tooltip.contentGenerator(function(data) {\n            var str = '<table><thead><tr><td class=\"legend-color-guide\"><div style=\"background-color:' + data.color + '\"></div></td><td><strong>' + data.key + '</strong></td></tr></thead>';\n            if(data.series.length !== 0)\n            {\n                str = str + '<tbody><tr><td height =\"10px\"></td></tr>';\n                data.series.forEach(function(d){\n                    str = str + '<tr><td class=\"legend-color-guide\"><div style=\"background-color:' + d.color + '\"></div></td><td class=\"key\">' + d.key + '</td><td class=\"value\">' + d.value + '</td></tr>';\n                });\n                str = str + '</tbody>';\n            }\n            str = str + '</table>';\n            return str;\n        });\n\n        //============================================================\n        // Chart function\n        //------------------------------------------------------------\n\n        function chart(selection) {\n            renderWatch.reset();\n            renderWatch.models(parallelCoordinates);\n\n            selection.each(function(data) {\n                var container = d3.select(this);\n                nv.utils.initSVG(container);\n\n                var that = this;\n\n                var availableWidth = nv.utils.availableWidth(width, container, margin),\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n\n                chart.update = function() { container.call(chart); };\n                chart.container = this;\n\n                state.setter(stateSetter(dimensionData), chart.update)\n                    .getter(stateGetter(dimensionData))\n                    .update();\n\n                //set state.disabled\n                state.disabled = dimensionData.map(function (d) { return !!d.disabled });\n\n                //Keep dimensions position in memory\n                dimensionData = dimensionData.map(function (d) {d.disabled = !!d.disabled; return d});\n                dimensionData.forEach(function (d, i) {\n                    d.originalPosition = isNaN(d.originalPosition) ? i : d.originalPosition;\n                    d.currentPosition = isNaN(d.currentPosition) ? i : d.currentPosition;\n                });\n\n               if (!defaultState) {\n                    var key;\n                    defaultState = {};\n                    for(key in state) {\n                        if(state[key] instanceof Array)\n                            defaultState[key] = state[key].slice(0);\n                        else\n                            defaultState[key] = state[key];\n                    }\n                }\n\n                // Display No Data message if there's nothing to show.\n                if(!data || !data.length) {\n                    nv.utils.noData(chart, container);\n                    return chart;\n                } else {\n                    container.selectAll('.nv-noData').remove();\n                }\n\n                //------------------------------------------------------------\n                // Setup containers and skeleton of chart\n\n                var wrap = container.selectAll('g.nv-wrap.nv-parallelCoordinatesChart').data([data]);\n                var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-parallelCoordinatesChart').append('g');\n\n                var g = wrap.select('g');\n\n                gEnter.append('g').attr('class', 'nv-parallelCoordinatesWrap');\n                gEnter.append('g').attr('class', 'nv-legendWrap');\n\n                g.select(\"rect\")\n                    .attr(\"width\", availableWidth)\n                    .attr(\"height\", (availableHeight > 0) ? availableHeight : 0);\n\n                // Legend\n                if (!showLegend) {\n                    g.select('.nv-legendWrap').selectAll('*').remove();\n                } else {\n                    legend.width(availableWidth)\n                        .color(function (d) { return \"rgb(188,190,192)\"; });\n\n                    g.select('.nv-legendWrap')\n                        .datum(dimensionData.sort(function (a, b) { return a.originalPosition - b.originalPosition; }))\n                        .call(legend);\n\n                    if (!marginTop && legend.height() !== margin.top) {\n                        margin.top = legend.height();\n                        availableHeight = nv.utils.availableHeight(height, container, margin);\n                    }\n                    wrap.select('.nv-legendWrap')\n                       .attr('transform', 'translate( 0 ,' + (-margin.top) + ')');\n                }\n                wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n                // Main Chart Component(s)\n                parallelCoordinates\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .dimensionData(dimensionData)\n                    .displayBrush(displayBrush);\n\n\t\t        var parallelCoordinatesWrap = g.select('.nv-parallelCoordinatesWrap ')\n                  .datum(data);\n\n\t\t        parallelCoordinatesWrap.transition().call(parallelCoordinates);\n\n\t\t\t\t//============================================================\n                // Event Handling/Dispatching (in chart's scope)\n                //------------------------------------------------------------\n                //Display reset brush button\n\t\t        parallelCoordinates.dispatch.on('brushEnd', function (active, hasActiveBrush) {\n\t\t            if (hasActiveBrush) {\n\t\t                displayBrush = true;\n\t\t                dispatch.brushEnd(active);\n\t\t            } else {\n\n\t\t                displayBrush = false;\n\t\t            }\n\t\t        });\n\n\t\t        legend.dispatch.on('stateChange', function(newState) {\n\t\t            for(var key in newState) {\n\t\t                state[key] = newState[key];\n\t\t            }\n\t\t            dispatch.stateChange(state);\n\t\t            chart.update();\n\t\t        });\n\n                //Update dimensions order and display reset sorting button\n\t\t        parallelCoordinates.dispatch.on('dimensionsOrder', function (e) {\n\t\t            dimensionData.sort(function (a, b) { return a.currentPosition - b.currentPosition; });\n\t\t            var isSorted = false;\n\t\t            dimensionData.forEach(function (d, i) {\n\t\t                d.currentPosition = i;\n\t\t                if (d.currentPosition !== d.originalPosition)\n\t\t                    isSorted = true;\n\t\t            });\n\t\t            dispatch.dimensionsOrder(dimensionData, isSorted);\n\t\t        });\n\n\t\t\t\t// Update chart from a state object passed to event handler\n                dispatch.on('changeState', function (e) {\n\n                    if (typeof e.disabled !== 'undefined') {\n                        dimensionData.forEach(function (series, i) {\n                            series.disabled = e.disabled[i];\n                        });\n                        state.disabled = e.disabled;\n                    }\n                    chart.update();\n                });\n            });\n\n            renderWatch.renderEnd('parraleleCoordinateChart immediate');\n            return chart;\n        }\n\n\t\t//============================================================\n        // Event Handling/Dispatching (out of chart's scope)\n        //------------------------------------------------------------\n\n        parallelCoordinates.dispatch.on('elementMouseover.tooltip', function (evt) {\n            var tp = {\n                key: evt.label,\n                color: evt.color,\n                series: []\n             }\n            if(evt.values){\n                Object.keys(evt.values).forEach(function (d) {\n                    var dim = evt.dimensions.filter(function (dd) {return dd.key === d;})[0];\n                    if(dim){\n                        var v;\n                        if (isNaN(evt.values[d]) || isNaN(parseFloat(evt.values[d]))) {\n                            v = nanValue;\n                        } else {\n                            v = dim.format(evt.values[d]);\n                        }\n                        tp.series.push({ idx: dim.currentPosition, key: d, value: v, color: dim.color });\n                    }\n                });\n                tp.series.sort(function(a,b) {return a.idx - b.idx});\n             }\n            tooltip.data(tp).hidden(false);\n        });\n\n        parallelCoordinates.dispatch.on('elementMouseout.tooltip', function(evt) {\n            tooltip.hidden(true)\n        });\n\n        parallelCoordinates.dispatch.on('elementMousemove.tooltip', function () {\n            tooltip();\n        });\n\t\t //============================================================\n        // Expose Public Variables\n        //------------------------------------------------------------\n\n\t\t// expose chart's sub-components\n        chart.dispatch = dispatch;\n        chart.parallelCoordinates = parallelCoordinates;\n        chart.legend = legend;\n        chart.tooltip = tooltip;\n        chart.options = nv.utils.optionsFunc.bind(chart);\n\n        chart._options = Object.create({}, {\n            // simple options, just get/set the necessary values\n            width: { get: function () { return width; }, set: function (_) { width = _; } },\n            height: { get: function () { return height; }, set: function (_) { height = _; } },\n            showLegend: { get: function () { return showLegend; }, set: function (_) { showLegend = _; } },\n            defaultState: { get: function () { return defaultState; }, set: function (_) { defaultState = _; } },\n            dimensionData: { get: function () { return dimensionData; }, set: function (_) { dimensionData = _; } },\n            displayBrush: { get: function () { return displayBrush; }, set: function (_) { displayBrush = _; } },\n            noData: { get: function () { return noData; }, set: function (_) { noData = _; } },\n            nanValue: { get: function () { return nanValue; }, set: function (_) { nanValue = _; } },\n\n            // options that require extra logic in the setter\n            margin: {\n                get: function () { return margin; },\n                set: function (_) {\n                    if (_.top !== undefined) {\n                        margin.top = _.top;\n                        marginTop = _.top;\n                    }\n                    margin.right = _.right !== undefined ? _.right : margin.right;\n                    margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n                    margin.left = _.left !== undefined ? _.left : margin.left;\n                }\n            },\n            color: {get: function(){return color;}, set: function(_){\n                    color = nv.utils.getColor(_);\n                    legend.color(color);\n                    parallelCoordinates.color(color);\n                }}\n        });\n\n        nv.utils.inheritOptions(chart, parallelCoordinates);\n        nv.utils.initOptions(chart);\n\n        return chart;\n    };\nnv.models.pie = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 500\n        , height = 500\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container = null\n        , color = nv.utils.defaultColor()\n        , valueFormat = d3.format(',.2f')\n        , showLabels = true\n        , labelsOutside = false\n        , labelType = \"key\"\n        , labelThreshold = .02 //if slice percentage is under this, don't show label\n        , hideOverlapLabels = false //Hide labels that don't fit in slice\n        , donut = false\n        , title = false\n        , growOnHover = true\n        , titleOffset = 0\n        , labelSunbeamLayout = false\n        , startAngle = false\n        , padAngle = false\n        , endAngle = false\n        , cornerRadius = 0\n        , donutRatio = 0.5\n        , duration = 250\n        , arcsRadius = []\n        , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'elementMousemove', 'renderEnd')\n        ;\n\n    var arcs = [];\n    var arcsOver = [];\n\n    //============================================================\n    // chart function\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right\n                , availableHeight = height - margin.top - margin.bottom\n                , radius = Math.min(availableWidth, availableHeight) / 2\n                , arcsRadiusOuter = []\n                , arcsRadiusInner = []\n                ;\n\n            container = d3.select(this)\n            if (arcsRadius.length === 0) {\n                var outer = radius - radius / 10;\n                var inner = donutRatio * radius;\n                for (var i = 0; i < data[0].length; i++) {\n                    arcsRadiusOuter.push(outer);\n                    arcsRadiusInner.push(inner);\n                }\n            } else {\n                if(growOnHover){\n                    arcsRadiusOuter = arcsRadius.map(function (d) { return (d.outer - d.outer / 10) * radius; });\n                    arcsRadiusInner = arcsRadius.map(function (d) { return (d.inner - d.inner / 10) * radius; });\n                    donutRatio = d3.min(arcsRadius.map(function (d) { return (d.inner - d.inner / 10); }));\n                } else {\n                    arcsRadiusOuter = arcsRadius.map(function (d) { return d.outer * radius; });\n                    arcsRadiusInner = arcsRadius.map(function (d) { return d.inner * radius; });\n                    donutRatio = d3.min(arcsRadius.map(function (d) { return d.inner; }));\n                }\n            }\n            nv.utils.initSVG(container);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('.nv-wrap.nv-pie').data(data);\n            var wrapEnter = wrap.enter().append('g').attr('class','nvd3 nv-wrap nv-pie nv-chart-' + id);\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n            var g_pie = gEnter.append('g').attr('class', 'nv-pie');\n            gEnter.append('g').attr('class', 'nv-pieLabels');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n            g.select('.nv-pie').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n            g.select('.nv-pieLabels').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\n\n            //\n            container.on('click', function(d,i) {\n                dispatch.chartClick({\n                    data: d,\n                    index: i,\n                    pos: d3.event,\n                    id: id\n                });\n            });\n\n            arcs = [];\n            arcsOver = [];\n            for (var i = 0; i < data[0].length; i++) {\n\n                var arc = d3.svg.arc().outerRadius(arcsRadiusOuter[i]);\n                var arcOver = d3.svg.arc().outerRadius(arcsRadiusOuter[i] + 5);\n\n                if (startAngle !== false) {\n                    arc.startAngle(startAngle);\n                    arcOver.startAngle(startAngle);\n                }\n                if (endAngle !== false) {\n                    arc.endAngle(endAngle);\n                    arcOver.endAngle(endAngle);\n                }\n                if (donut) {\n                    arc.innerRadius(arcsRadiusInner[i]);\n                    arcOver.innerRadius(arcsRadiusInner[i]);\n                }\n\n                if (arc.cornerRadius && cornerRadius) {\n                    arc.cornerRadius(cornerRadius);\n                    arcOver.cornerRadius(cornerRadius);\n                }\n\n                arcs.push(arc);\n                arcsOver.push(arcOver);\n            }\n\n            // Setup the Pie chart and choose the data element\n            var pie = d3.layout.pie()\n                .sort(null)\n                .value(function(d) { return d.disabled ? 0 : getY(d) });\n\n            // padAngle added in d3 3.5\n            if (pie.padAngle && padAngle) {\n                pie.padAngle(padAngle);\n            }\n\n            // if title is specified and donut, put it in the middle\n            if (donut && title) {\n                g_pie.append(\"text\").attr('class', 'nv-pie-title');\n\n                wrap.select('.nv-pie-title')\n                    .style(\"text-anchor\", \"middle\")\n                    .text(function (d) {\n                        return title;\n                    })\n                    .style(\"font-size\", (Math.min(availableWidth, availableHeight)) * donutRatio * 2 / (title.length + 2) + \"px\")\n                    .attr(\"dy\", \"0.35em\") // trick to vertically center text\n                    .attr('transform', function(d, i) {\n                        return 'translate(0, '+ titleOffset + ')';\n                    });\n            }\n\n            var slices = wrap.select('.nv-pie').selectAll('.nv-slice').data(pie);\n            var pieLabels = wrap.select('.nv-pieLabels').selectAll('.nv-label').data(pie);\n\n            slices.exit().remove();\n            pieLabels.exit().remove();\n\n            var ae = slices.enter().append('g');\n            ae.attr('class', 'nv-slice');\n            ae.on('mouseover', function(d, i) {\n                d3.select(this).classed('hover', true);\n                if (growOnHover) {\n                    d3.select(this).select(\"path\").transition()\n                        .duration(70)\n                        .attr(\"d\", arcsOver[i]);\n                }\n                dispatch.elementMouseover({\n                    data: d.data,\n                    index: i,\n                    color: d3.select(this).style(\"fill\"),\n                    percent: (d.endAngle - d.startAngle) / (2 * Math.PI)\n                });\n            });\n            ae.on('mouseout', function(d, i) {\n                d3.select(this).classed('hover', false);\n                if (growOnHover) {\n                    d3.select(this).select(\"path\").transition()\n                        .duration(50)\n                        .attr(\"d\", arcs[i]);\n                }\n                dispatch.elementMouseout({data: d.data, index: i});\n            });\n            ae.on('mousemove', function(d, i) {\n                dispatch.elementMousemove({data: d.data, index: i});\n            });\n            ae.on('click', function(d, i) {\n                var element = this;\n                dispatch.elementClick({\n                    data: d.data,\n                    index: i,\n                    color: d3.select(this).style(\"fill\"),\n                    event: d3.event,\n                    element: element\n                });\n            });\n            ae.on('dblclick', function(d, i) {\n                dispatch.elementDblClick({\n                    data: d.data,\n                    index: i,\n                    color: d3.select(this).style(\"fill\")\n                });\n            });\n\n            slices.attr('fill', function(d,i) { return color(d.data, i); });\n            slices.attr('stroke', function(d,i) { return color(d.data, i); });\n\n            var paths = ae.append('path').each(function(d) {\n                this._current = d;\n            });\n\n            slices.select('path')\n                .transition()\n                .duration(duration)\n                .attr('d', function (d, i) { return arcs[i](d); })\n                .attrTween('d', arcTween);\n\n            if (showLabels) {\n                // This does the normal label\n                var labelsArc = [];\n                for (var i = 0; i < data[0].length; i++) {\n                    labelsArc.push(arcs[i]);\n\n                    if (labelsOutside) {\n                        if (donut) {\n                            labelsArc[i] = d3.svg.arc().outerRadius(arcs[i].outerRadius());\n                            if (startAngle !== false) labelsArc[i].startAngle(startAngle);\n                            if (endAngle !== false) labelsArc[i].endAngle(endAngle);\n                        }\n                    } else if (!donut) {\n                            labelsArc[i].innerRadius(0);\n                    }\n                }\n\n                pieLabels.enter().append(\"g\").classed(\"nv-label\",true).each(function(d,i) {\n                    var group = d3.select(this);\n\n                    group.attr('transform', function (d, i) {\n                        if (labelSunbeamLayout) {\n                            d.outerRadius = arcsRadiusOuter[i] + 10; // Set Outer Coordinate\n                            d.innerRadius = arcsRadiusOuter[i] + 15; // Set Inner Coordinate\n                            var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n                            if ((d.startAngle + d.endAngle) / 2 < Math.PI) {\n                                rotateAngle -= 90;\n                            } else {\n                                rotateAngle += 90;\n                            }\n                            return 'translate(' + labelsArc[i].centroid(d) + ') rotate(' + rotateAngle + ')';\n                        } else {\n                            d.outerRadius = radius + 10; // Set Outer Coordinate\n                            d.innerRadius = radius + 15; // Set Inner Coordinate\n                            return 'translate(' + labelsArc[i].centroid(d) + ')'\n                        }\n                    });\n\n                    group.append('rect')\n                        .style('stroke', '#fff')\n                        .style('fill', '#fff')\n                        .attr(\"rx\", 3)\n                        .attr(\"ry\", 3);\n\n                    group.append('text')\n                        .style('text-anchor', labelSunbeamLayout ? ((d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end') : 'middle') //center the text on it's origin or begin/end if orthogonal aligned\n                        .style('fill', '#000')\n                });\n\n                var labelLocationHash = {};\n                var avgHeight = 14;\n                var avgWidth = 140;\n                var createHashKey = function(coordinates) {\n                    return Math.floor(coordinates[0]/avgWidth) * avgWidth + ',' + Math.floor(coordinates[1]/avgHeight) * avgHeight;\n                };\n                var getSlicePercentage = function(d) {\n                    return (d.endAngle - d.startAngle) / (2 * Math.PI);\n                };\n\n                pieLabels.watchTransition(renderWatch, 'pie labels').attr('transform', function (d, i) {\n                    if (labelSunbeamLayout) {\n                        d.outerRadius = arcsRadiusOuter[i] + 10; // Set Outer Coordinate\n                        d.innerRadius = arcsRadiusOuter[i] + 15; // Set Inner Coordinate\n                        var rotateAngle = (d.startAngle + d.endAngle) / 2 * (180 / Math.PI);\n                        if ((d.startAngle + d.endAngle) / 2 < Math.PI) {\n                            rotateAngle -= 90;\n                        } else {\n                            rotateAngle += 90;\n                        }\n                        return 'translate(' + labelsArc[i].centroid(d) + ') rotate(' + rotateAngle + ')';\n                    } else {\n                        d.outerRadius = radius + 10; // Set Outer Coordinate\n                        d.innerRadius = radius + 15; // Set Inner Coordinate\n\n                        /*\n                        Overlapping pie labels are not good. What this attempts to do is, prevent overlapping.\n                        Each label location is hashed, and if a hash collision occurs, we assume an overlap.\n                        Adjust the label's y-position to remove the overlap.\n                        */\n                        var center = labelsArc[i].centroid(d);\n                        var percent = getSlicePercentage(d);\n                        if (d.value && percent >= labelThreshold) {\n                            var hashKey = createHashKey(center);\n                            if (labelLocationHash[hashKey]) {\n                                center[1] -= avgHeight;\n                            }\n                            labelLocationHash[createHashKey(center)] = true;\n                        }\n                        return 'translate(' + center + ')'\n                    }\n                });\n\n                pieLabels.select(\".nv-label text\")\n                    .style('text-anchor', function(d,i) {\n                        //center the text on it's origin or begin/end if orthogonal aligned\n                        return labelSunbeamLayout ? ((d.startAngle + d.endAngle) / 2 < Math.PI ? 'start' : 'end') : 'middle';\n                    })\n                    .text(function(d, i) {\n                        var percent = getSlicePercentage(d);\n                        var label = '';\n                        if (!d.value || percent < labelThreshold) return '';\n\n                        if(typeof labelType === 'function') {\n                            label = labelType(d, i, {\n                                'key': getX(d.data),\n                                'value': getY(d.data),\n                                'percent': valueFormat(percent)\n                            });\n                        } else {\n                            switch (labelType) {\n                                case 'key':\n                                    label = getX(d.data);\n                                    break;\n                                case 'value':\n                                    label = valueFormat(getY(d.data));\n                                    break;\n                                case 'percent':\n                                    label = d3.format('%')(percent);\n                                    break;\n                            }\n                        }\n                        return label;\n                    })\n                ;\n\n                if (hideOverlapLabels) {\n                    pieLabels\n                        .each(function (d, i) {\n                            if (!this.getBBox) return;\n                            var bb = this.getBBox(),\n                            center = labelsArc[i].centroid(d);\n                            var topLeft = {\n                              x : center[0] + bb.x,\n                              y : center[1] + bb.y\n                            };\n\n                            var topRight = {\n                              x : topLeft.x + bb.width,\n                              y : topLeft.y\n                            };\n\n                            var bottomLeft = {\n                              x : topLeft.x,\n                              y : topLeft.y + bb.height\n                            };\n\n                            var bottomRight = {\n                              x : topLeft.x + bb.width,\n                              y : topLeft.y + bb.height\n                            };\n\n                            d.visible = nv.utils.pointIsInArc(topLeft, d, arc) &&\n                            nv.utils.pointIsInArc(topRight, d, arc) &&\n                            nv.utils.pointIsInArc(bottomLeft, d, arc) &&\n                            nv.utils.pointIsInArc(bottomRight, d, arc);\n                        })\n                        .style('display', function (d) {\n                            return d.visible ? null : 'none';\n                        })\n                    ;\n                }\n\n            }\n\n\n            // Computes the angle of an arc, converting from radians to degrees.\n            function angle(d) {\n                var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;\n                return a > 90 ? a - 180 : a;\n            }\n\n            function arcTween(a, idx) {\n                a.endAngle = isNaN(a.endAngle) ? 0 : a.endAngle;\n                a.startAngle = isNaN(a.startAngle) ? 0 : a.startAngle;\n                if (!donut) a.innerRadius = 0;\n                var i = d3.interpolate(this._current, a);\n                this._current = i(0);\n                return function (t) {\n                    return arcs[idx](i(t));\n                };\n            }\n        });\n\n        renderWatch.renderEnd('pie immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        arcsRadius: { get: function () { return arcsRadius; }, set: function (_) { arcsRadius = _; } },\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLabels: {get: function(){return showLabels;}, set: function(_){showLabels=_;}},\n        title:      {get: function(){return title;}, set: function(_){title=_;}},\n        titleOffset:    {get: function(){return titleOffset;}, set: function(_){titleOffset=_;}},\n        labelThreshold: {get: function(){return labelThreshold;}, set: function(_){labelThreshold=_;}},\n        hideOverlapLabels: {get: function(){return hideOverlapLabels;}, set: function(_){hideOverlapLabels=_;}},\n        valueFormat:    {get: function(){return valueFormat;}, set: function(_){valueFormat=_;}},\n        x:          {get: function(){return getX;}, set: function(_){getX=_;}},\n        id:         {get: function(){return id;}, set: function(_){id=_;}},\n        endAngle:   {get: function(){return endAngle;}, set: function(_){endAngle=_;}},\n        startAngle: {get: function(){return startAngle;}, set: function(_){startAngle=_;}},\n        padAngle:   {get: function(){return padAngle;}, set: function(_){padAngle=_;}},\n        cornerRadius: {get: function(){return cornerRadius;}, set: function(_){cornerRadius=_;}},\n        donutRatio:   {get: function(){return donutRatio;}, set: function(_){donutRatio=_;}},\n        labelsOutside: {get: function(){return labelsOutside;}, set: function(_){labelsOutside=_;}},\n        labelSunbeamLayout: {get: function(){return labelSunbeamLayout;}, set: function(_){labelSunbeamLayout=_;}},\n        donut:              {get: function(){return donut;}, set: function(_){donut=_;}},\n        growOnHover:        {get: function(){return growOnHover;}, set: function(_){growOnHover=_;}},\n\n        // depreciated after 1.7.1\n        pieLabelsOutside: {get: function(){return labelsOutside;}, set: function(_){\n            labelsOutside=_;\n            nv.deprecated('pieLabelsOutside', 'use labelsOutside instead');\n        }},\n        // depreciated after 1.7.1\n        donutLabelsOutside: {get: function(){return labelsOutside;}, set: function(_){\n            labelsOutside=_;\n            nv.deprecated('donutLabelsOutside', 'use labelsOutside instead');\n        }},\n        // deprecated after 1.7.1\n        labelFormat: {get: function(){ return valueFormat;}, set: function(_) {\n            valueFormat=_;\n            nv.deprecated('labelFormat','use valueFormat instead');\n        }},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\n            margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\n            margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\n            margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n        }},\n        y: {get: function(){return getY;}, set: function(_){\n            getY=d3.functor(_);\n        }},\n        color: {get: function(){return color;}, set: function(_){\n            color=nv.utils.getColor(_);\n        }},\n        labelType:          {get: function(){return labelType;}, set: function(_){\n            labelType= _ || 'key';\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    return chart;\n};\nnv.models.pieChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var pie = nv.models.pie();\n    var legend = nv.models.legend();\n    var tooltip = nv.models.tooltip();\n\n    var margin = {top: 30, right: 20, bottom: 20, left: 20}\n        , marginTop = null\n        , width = null\n        , height = null\n        , showTooltipPercent = false\n        , showLegend = true\n        , legendPosition = \"top\"\n        , color = nv.utils.defaultColor()\n        , state = nv.utils.state()\n        , defaultState = null\n        , noData = null\n        , duration = 250\n        , dispatch = d3.dispatch('stateChange', 'changeState','renderEnd')\n        ;\n\n    tooltip\n        .duration(0)\n        .headerEnabled(false)\n        .valueFormatter(function(d, i) {\n            return pie.valueFormat()(d, i);\n        });\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled })\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.active !== undefined) {\n                data.forEach(function (series, i) {\n                    series.disabled = !state.active[i];\n                });\n            }\n        }\n    };\n\n    //============================================================\n    // Chart function\n    //------------------------------------------------------------\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(pie);\n\n        selection.each(function(data) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            var that = this;\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() { container.transition().call(chart); };\n            chart.container = this;\n\n            state.setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            //set state.disabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length) {\n                nv.utils.noData(chart, container);\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-pieChart').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-pieChart').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-pieWrap');\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                if (legendPosition === \"top\") {\n                    legend.width( availableWidth ).key(pie.x());\n\n                    wrap.select('.nv-legendWrap')\n                        .datum(data)\n                        .call(legend);\n\n                    if (!marginTop && legend.height() !== margin.top) {\n                        margin.top = legend.height();\n                        availableHeight = nv.utils.availableHeight(height, container, margin);\n                    }\n\n                    wrap.select('.nv-legendWrap')\n                        .attr('transform', 'translate(0,' + (-margin.top) +')');\n                } else if (legendPosition === \"right\") {\n                    var legendWidth = nv.models.legend().width();\n                    if (availableWidth / 2 < legendWidth) {\n                        legendWidth = (availableWidth / 2)\n                    }\n                    legend.height(availableHeight).key(pie.x());\n                    legend.width(legendWidth);\n                    availableWidth -= legend.width();\n\n                    wrap.select('.nv-legendWrap')\n                        .datum(data)\n                        .call(legend)\n                        .attr('transform', 'translate(' + (availableWidth) +',0)');\n                } else if (legendPosition === \"bottom\") {\n                    legend.width( availableWidth ).key(pie.x());\n                    wrap.select('.nv-legendWrap')\n                        .datum(data)\n                        .call(legend);\n\n                    margin.bottom = legend.height();\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n                    wrap.select('.nv-legendWrap')\n                        .attr('transform', 'translate(0,' + availableHeight +')');\n                }\n            }\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            // Main Chart Component(s)\n            pie.width(availableWidth).height(availableHeight);\n            var pieWrap = g.select('.nv-pieWrap').datum([data]);\n            d3.transition(pieWrap).call(pie);\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState) {\n                    state[key] = newState[key];\n                }\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n                    state.disabled = e.disabled;\n                }\n                chart.update();\n            });\n        });\n\n        renderWatch.renderEnd('pieChart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    pie.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt['series'] = {\n            key: chart.x()(evt.data),\n            value: chart.y()(evt.data),\n            color: evt.color,\n            percent: evt.percent\n        };\n        if (!showTooltipPercent) {\n            delete evt.percent;\n            delete evt.series.percent;\n        }\n        tooltip.data(evt).hidden(false);\n    });\n\n    pie.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    pie.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.legend = legend;\n    chart.dispatch = dispatch;\n    chart.pie = pie;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    // use Object get/set functionality to map between vars and chart functions\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:              {get: function(){return width;},                set: function(_){width=_;}},\n        height:             {get: function(){return height;},               set: function(_){height=_;}},\n        noData:             {get: function(){return noData;},               set: function(_){noData=_;}},\n        showTooltipPercent: {get: function(){return showTooltipPercent;},   set: function(_){showTooltipPercent=_;}},\n        showLegend:         {get: function(){return showLegend;},           set: function(_){showLegend=_;}},\n        legendPosition:     {get: function(){return legendPosition;},       set: function(_){legendPosition=_;}},\n        defaultState:       {get: function(){return defaultState;},         set: function(_){defaultState=_;}},\n\n        // options that require extra logic in the setter\n        color: {get: function(){return color;}, set: function(_){\n            color = _;\n            legend.color(color);\n            pie.color(color);\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            pie.duration(duration);\n        }},\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }}\n    });\n    nv.utils.inheritOptions(chart, pie);\n    nv.utils.initOptions(chart);\n    return chart;\n};\nnv.models.sankey = function() {\n    'use strict';\n\n    // Sources:\n    // - https://bost.ocks.org/mike/sankey/\n    // - https://github.com/soxofaan/d3-plugin-captain-sankey\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var sankey = {},\n        nodeWidth = 24,\n        nodePadding = 8,\n        size = [1, 1],\n        nodes = [],\n        links = [],\n        sinksRight = true;\n\n    var layout = function(iterations) {\n        computeNodeLinks();\n        computeNodeValues();\n        computeNodeBreadths();\n        computeNodeDepths(iterations);\n    };\n\n    var relayout = function() {\n        computeLinkDepths();\n    };\n\n    // SVG path data generator, to be used as 'd' attribute on 'path' element selection.\n    var link = function() {\n        var curvature = .5;\n\n        function link(d) {\n\n            var x0 = d.source.x + d.source.dx,\n                x1 = d.target.x,\n                xi = d3.interpolateNumber(x0, x1),\n                x2 = xi(curvature),\n                x3 = xi(1 - curvature),\n                y0 = d.source.y + d.sy + d.dy / 2,\n                y1 = d.target.y + d.ty + d.dy / 2;\n            var linkPath = 'M' + x0 + ',' + y0\n                + 'C' + x2 + ',' + y0\n                + ' ' + x3 + ',' + y1\n                + ' ' + x1 + ',' + y1;\n            return linkPath;\n        }\n\n        link.curvature = function(_) {\n            if (!arguments.length) return curvature;\n            curvature = +_;\n            return link;\n        };\n\n        return link;\n    };\n\n    // Y-position of the middle of a node.\n    var center = function(node) {\n        return node.y + node.dy / 2;\n    };\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    // Populate the sourceLinks and targetLinks for each node.\n    // Also, if the source and target are not objects, assume they are indices.\n    function computeNodeLinks() {\n        nodes.forEach(function(node) {\n            // Links that have this node as source.\n            node.sourceLinks = [];\n            // Links that have this node as target.\n            node.targetLinks = [];\n        });\n        links.forEach(function(link) {\n            var source = link.source,\n                target = link.target;\n            if (typeof source === 'number') source = link.source = nodes[link.source];\n            if (typeof target === 'number') target = link.target = nodes[link.target];\n            source.sourceLinks.push(link);\n            target.targetLinks.push(link);\n        });\n    }\n\n    // Compute the value (size) of each node by summing the associated links.\n    function computeNodeValues() {\n        nodes.forEach(function(node) {\n            node.value = Math.max(\n                d3.sum(node.sourceLinks, value),\n                d3.sum(node.targetLinks, value)\n            );\n        });\n    }\n\n    // Iteratively assign the breadth (x-position) for each node.\n    // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n    // nodes with no incoming links are assigned breadth zero, while\n    // nodes with no outgoing links are assigned the maximum breadth.\n    function computeNodeBreadths() {\n        //\n        var remainingNodes = nodes,\n            nextNodes,\n            x = 0;\n\n        // Work from left to right.\n        // Keep updating the breath (x-position) of nodes that are target of recently updated nodes.\n        //\n        while (remainingNodes.length && x < nodes.length) {\n            nextNodes = [];\n            remainingNodes.forEach(function(node) {\n                node.x = x;\n                node.dx = nodeWidth;\n                node.sourceLinks.forEach(function(link) {\n                    if (nextNodes.indexOf(link.target) < 0) {\n                        nextNodes.push(link.target);\n                    }\n                });\n            });\n            remainingNodes = nextNodes;\n            ++x;\n            //\n        }\n\n        // Optionally move pure sinks always to the right.\n        if (sinksRight) {\n            moveSinksRight(x);\n        }\n\n        scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n    }\n\n    function moveSourcesRight() {\n        nodes.forEach(function(node) {\n            if (!node.targetLinks.length) {\n                node.x = d3.min(node.sourceLinks, function(d) { return d.target.x; }) - 1;\n            }\n        });\n    }\n\n    function moveSinksRight(x) {\n        nodes.forEach(function(node) {\n            if (!node.sourceLinks.length) {\n                node.x = x - 1;\n            }\n        });\n    }\n\n    function scaleNodeBreadths(kx) {\n        nodes.forEach(function(node) {\n            node.x *= kx;\n        });\n    }\n\n    // Compute the depth (y-position) for each node.\n    function computeNodeDepths(iterations) {\n        // Group nodes by breath.\n        var nodesByBreadth = d3.nest()\n            .key(function(d) { return d.x; })\n            .sortKeys(d3.ascending)\n            .entries(nodes)\n            .map(function(d) { return d.values; });\n\n        //\n        initializeNodeDepth();\n        resolveCollisions();\n        computeLinkDepths();\n        for (var alpha = 1; iterations > 0; --iterations) {\n            relaxRightToLeft(alpha *= .99);\n            resolveCollisions();\n            computeLinkDepths();\n            relaxLeftToRight(alpha);\n            resolveCollisions();\n            computeLinkDepths();\n        }\n\n        function initializeNodeDepth() {\n            // Calculate vertical scaling factor.\n            var ky = d3.min(nodesByBreadth, function(nodes) {\n                return (size[1] - (nodes.length - 1) * nodePadding) / d3.sum(nodes, value);\n            });\n\n            nodesByBreadth.forEach(function(nodes) {\n                nodes.forEach(function(node, i) {\n                    node.y = i;\n                    node.dy = node.value * ky;\n                });\n            });\n\n            links.forEach(function(link) {\n                link.dy = link.value * ky;\n            });\n        }\n\n        function relaxLeftToRight(alpha) {\n            nodesByBreadth.forEach(function(nodes, breadth) {\n                nodes.forEach(function(node) {\n                    if (node.targetLinks.length) {\n                        // Value-weighted average of the y-position of source node centers linked to this node.\n                        var y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n                        node.y += (y - center(node)) * alpha;\n                    }\n                });\n            });\n\n            function weightedSource(link) {\n                return (link.source.y + link.sy + link.dy / 2) * link.value;\n            }\n        }\n\n        function relaxRightToLeft(alpha) {\n            nodesByBreadth.slice().reverse().forEach(function(nodes) {\n                nodes.forEach(function(node) {\n                    if (node.sourceLinks.length) {\n                        // Value-weighted average of the y-positions of target nodes linked to this node.\n                        var y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n                        node.y += (y - center(node)) * alpha;\n                    }\n                });\n            });\n\n            function weightedTarget(link) {\n                return (link.target.y + link.ty + link.dy / 2) * link.value;\n            }\n        }\n\n        function resolveCollisions() {\n            nodesByBreadth.forEach(function(nodes) {\n                var node,\n                    dy,\n                    y0 = 0,\n                    n = nodes.length,\n                    i;\n\n                // Push any overlapping nodes down.\n                nodes.sort(ascendingDepth);\n                for (i = 0; i < n; ++i) {\n                    node = nodes[i];\n                    dy = y0 - node.y;\n                    if (dy > 0) node.y += dy;\n                    y0 = node.y + node.dy + nodePadding;\n                }\n\n                // If the bottommost node goes outside the bounds, push it back up.\n                dy = y0 - nodePadding - size[1];\n                if (dy > 0) {\n                    y0 = node.y -= dy;\n\n                    // Push any overlapping nodes back up.\n                    for (i = n - 2; i >= 0; --i) {\n                        node = nodes[i];\n                        dy = node.y + node.dy + nodePadding - y0;\n                        if (dy > 0) node.y -= dy;\n                        y0 = node.y;\n                    }\n                }\n            });\n        }\n\n        function ascendingDepth(a, b) {\n            return a.y - b.y;\n        }\n    }\n\n    // Compute y-offset of the source endpoint (sy) and target endpoints (ty) of links,\n    // relative to the source/target node's y-position.\n    function computeLinkDepths() {\n        nodes.forEach(function(node) {\n            node.sourceLinks.sort(ascendingTargetDepth);\n            node.targetLinks.sort(ascendingSourceDepth);\n        });\n        nodes.forEach(function(node) {\n            var sy = 0, ty = 0;\n            node.sourceLinks.forEach(function(link) {\n                link.sy = sy;\n                sy += link.dy;\n            });\n            node.targetLinks.forEach(function(link) {\n                link.ty = ty;\n                ty += link.dy;\n            });\n        });\n\n        function ascendingSourceDepth(a, b) {\n            return a.source.y - b.source.y;\n        }\n\n        function ascendingTargetDepth(a, b) {\n            return a.target.y - b.target.y;\n        }\n    }\n\n    // Value property accessor.\n    function value(x) {\n        return x.value;\n    }\n\n    sankey.options = nv.utils.optionsFunc.bind(sankey);\n    sankey._options = Object.create({}, {\n        nodeWidth:    {get: function(){return nodeWidth;},   set: function(_){nodeWidth=+_;}},\n        nodePadding:  {get: function(){return nodePadding;}, set: function(_){nodePadding=_;}},\n        nodes:        {get: function(){return nodes;},       set: function(_){nodes=_;}},\n        links:        {get: function(){return links ;},      set: function(_){links=_;}},\n        size:         {get: function(){return size;},        set: function(_){size=_;}},\n        sinksRight:   {get: function(){return sinksRight;},  set: function(_){sinksRight=_;}},\n\n        layout:       {get: function(){layout(32);},         set: function(_){layout(_);}},\n        relayout:     {get: function(){relayout();},         set: function(_){}},\n        center:       {get: function(){return center();},    set: function(_){\n            if(typeof _ === 'function'){\n                center=_;\n            }\n        }},\n        link:         {get: function(){return link();},      set: function(_){\n            if(typeof _ === 'function'){\n                link=_;\n            }\n            return link();\n        }}\n    });\n\n    nv.utils.initOptions(sankey);\n\n    return sankey;\n};\nnv.models.sankeyChart = function() {\n    \"use strict\";\n\n    // Sources:\n    // - https://bost.ocks.org/mike/sankey/\n    // - https://github.com/soxofaan/d3-plugin-captain-sankey\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 5, right: 0, bottom: 5, left: 0}\n        , sankey = nv.models.sankey()\n        , width = 600\n        , height = 400\n        , nodeWidth = 36\n        , nodePadding =  40\n        , units = 'units'\n        , center = undefined\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var formatNumber = d3.format(',.0f');    // zero decimal places\n    var format = function(d) {\n        return formatNumber(d) + ' ' + units;\n    };\n    var color = d3.scale.category20();\n    var linkTitle = function(d){\n        return d.source.name + ' → ' + d.target.name + '\\n' + format(d.value);\n    };\n    var nodeFillColor = function(d){\n        return d.color = color(d.name.replace(/ .*/, ''));\n    };\n    var nodeStrokeColor = function(d){\n        return d3.rgb(d.color).darker(2);\n    };\n    var nodeTitle = function(d){\n        return d.name + '\\n' + format(d.value);\n    };\n\n    var showError = function(element, message) {\n        element.append('text')\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('class', 'nvd3-sankey-chart-error')\n            .attr('text-anchor', 'middle')\n            .text(message);\n    };\n\n    function chart(selection) {\n        selection.each(function(data) {\n\n            var testData = {\n                nodes:\n                    [\n                        {'node': 1, 'name': 'Test 1'},\n                        {'node': 2, 'name': 'Test 2'},\n                        {'node': 3, 'name': 'Test 3'},\n                        {'node': 4, 'name': 'Test 4'},\n                        {'node': 5, 'name': 'Test 5'},\n                        {'node': 6, 'name': 'Test 6'}\n                    ],\n                links:\n                    [\n                        {'source': 0, 'target': 1, 'value': 2295},\n                        {'source': 0, 'target': 5, 'value': 1199},\n                        {'source': 1, 'target': 2, 'value': 1119},\n                        {'source': 1, 'target': 5, 'value': 1176},\n                        {'source': 2, 'target': 3, 'value': 487},\n                        {'source': 2, 'target': 5, 'value': 632},\n                        {'source': 3, 'target': 4, 'value': 301},\n                        {'source': 3, 'target': 5, 'value': 186}\n                    ]\n            };\n\n            // Error handling\n            var isDataValid = false;\n            var dataAvailable = false;\n\n            // check if data is valid\n            if(\n                (typeof data['nodes'] === 'object' && data['nodes'].length) >= 0 &&\n                (typeof data['links'] === 'object' && data['links'].length) >= 0\n            ){\n                isDataValid = true;\n            }\n\n            // check if data is available\n            if(\n                data['nodes'] && data['nodes'].length > 0 &&\n                data['links'] && data['links'].length > 0\n            ) {\n                dataAvailable = true;\n            }\n\n            // show error\n            if(!isDataValid) {\n                console.error('NVD3 Sankey chart error:', 'invalid data format for', data);\n                console.info('Valid data format is: ', testData, JSON.stringify(testData));\n                showError(selection, 'Error loading chart, data is invalid');\n                return false;\n            }\n\n            // TODO use nv.utils.noData\n            if(!dataAvailable) {\n                showError(selection, 'No data available');\n                return false;\n            }\n\n            // No errors, continue\n\n            // append the svg canvas to the page\n            var svg = selection.append('svg')\n                .attr('width', width)\n                .attr('height', height)\n                .append('g')\n                .attr('class', 'nvd3 nv-wrap nv-sankeyChart');\n\n            // Set the sankey diagram properties\n            sankey\n                .nodeWidth(nodeWidth)\n                .nodePadding(nodePadding)\n                .size([width, height]);\n\n            var path = sankey.link();\n\n            sankey\n                .nodes(data.nodes)\n                .links(data.links)\n                .layout(32)\n                .center(center);\n\n            // add in the links\n            var link = svg.append('g').selectAll('.link')\n                .data(data.links)\n                .enter().append('path')\n                .attr('class', 'link')\n                .attr('d', path)\n                .style('stroke-width', function(d) { return Math.max(1, d.dy); })\n            .sort(function(a,b) { return b.dy - a.dy; });\n\n            // add the link titles\n            link.append('title')\n                .text(linkTitle);\n\n            // add in the nodes\n            var node = svg.append('g').selectAll('.node')\n                .data(data.nodes)\n                .enter().append('g')\n                .attr('class', 'node')\n                .attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; })\n                .call(\n                    d3.behavior\n                        .drag()\n                        .origin(function(d) { return d; })\n                        .on('dragstart', function() {\n                            this.parentNode.appendChild(this);\n                        })\n                        .on('drag', dragmove)\n                );\n\n            // add the rectangles for the nodes\n            node.append('rect')\n                .attr('height', function(d) { return d.dy; })\n                .attr('width', sankey.nodeWidth())\n                .style('fill', nodeFillColor)\n                .style('stroke', nodeStrokeColor)\n                .append('title')\n                .text(nodeTitle);\n\n            // add in the title for the nodes\n            node.append('text')\n                .attr('x', -6)\n                .attr('y', function(d) { return d.dy / 2; })\n                .attr('dy', '.35em')\n                .attr('text-anchor', 'end')\n                .attr('transform', null)\n                .text(function(d) { return d.name; })\n                .filter(function(d) { return d.x < width / 2; })\n                .attr('x', 6 + sankey.nodeWidth())\n                .attr('text-anchor', 'start');\n\n            // the function for moving the nodes\n            function dragmove(d) {\n                d3.select(this).attr('transform',\n                'translate(' + d.x + ',' + (\n                    d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))\n                ) + ')');\n                sankey.relayout();\n                link.attr('d', path);\n            }\n        });\n\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        units:           {get: function(){return units;},       set: function(_){units=_;}},\n        width:           {get: function(){return width;},       set: function(_){width=_;}},\n        height:          {get: function(){return height;},      set: function(_){height=_;}},\n        format:          {get: function(){return format;},      set: function(_){format=_;}},\n        linkTitle:       {get: function(){return linkTitle;},   set: function(_){linkTitle=_;}},\n        nodeWidth:       {get: function(){return nodeWidth;},   set: function(_){nodeWidth=_;}},\n        nodePadding:     {get: function(){return nodePadding;}, set: function(_){nodePadding=_;}},\n        center:          {get: function(){return center},       set: function(_){center=_}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        nodeStyle: {get: function(){return {};}, set: function(_){\n            nodeFillColor   = _.fillColor   !== undefined ? _.fillColor   : nodeFillColor;\n            nodeStrokeColor = _.strokeColor !== undefined ? _.strokeColor : nodeStrokeColor;\n            nodeTitle       = _.title       !== undefined ? _.title       : nodeTitle;\n        }}\n\n    });\n\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.scatter = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin       = {top: 0, right: 0, bottom: 0, left: 0}\n        , width        = null\n        , height       = null\n        , color        = nv.utils.defaultColor() // chooses color\n        , pointBorderColor = null\n        , id           = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't select one\n        , container    = null\n        , x            = d3.scale.linear()\n        , y            = d3.scale.linear()\n        , z            = d3.scale.linear() //linear because d3.svg.shape.size is treated as area\n        , getX         = function(d) { return d.x } // accessor to get the x value\n        , getY         = function(d) { return d.y } // accessor to get the y value\n        , getSize      = function(d) { return d.size || 1} // accessor to get the point size\n        , getShape     = function(d) { return d.shape || 'circle' } // accessor to get point shape\n        , forceX       = [] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\n        , forceY       = [] // List of numbers to Force into the Y scale\n        , forceSize    = [] // List of numbers to Force into the Size scale\n        , interactive  = true // If true, plots a voronoi overlay for advanced point intersection\n        , pointActive  = function(d) { return !d.notActive } // any points that return false will be filtered out\n        , padData      = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\n        , padDataOuter = .1 //outerPadding to imitate ordinal scale outer padding\n        , clipEdge     = false // if true, masks points within x and y scale\n        , clipVoronoi  = true // if true, masks each point with a circle... can turn off to slightly increase performance\n        , showVoronoi  = false // display the voronoi areas\n        , clipRadius   = function() { return 25 } // function to get the radius for voronoi point clips\n        , xDomain      = null // Override x domain (skips the calculation from data)\n        , yDomain      = null // Override y domain\n        , xRange       = null // Override x range\n        , yRange       = null // Override y range\n        , sizeDomain   = null // Override point size domain\n        , sizeRange    = null\n        , singlePoint  = false\n        , dispatch     = d3.dispatch('elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout', 'renderEnd')\n        , useVoronoi   = true\n        , duration     = 250\n        , interactiveUpdateDelay = 300\n        , showLabels    = false\n        ;\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0, y0, z0 // used to store previous scales\n        , xDom, yDom // used to store previous domains\n        , width0\n        , height0\n        , timeoutID\n        , needsUpdate = false // Flag for when the points are visually updating, but the interactive layer is behind, to disable tooltips\n        , renderWatch = nv.utils.renderWatch(dispatch, duration)\n        , _sizeRange_def = [16, 256]\n        , _cache = {}\n        ;\n\n    //============================================================\n    // Diff and Cache Utilities\n    //------------------------------------------------------------\n    // getDiffs is used to filter unchanged points from the update\n    // selection. It implicitly updates it's cache when called and\n    // therefor the diff is based upon the previous invocation NOT\n    // the previous update.\n    //\n    // getDiffs takes a point as its first argument followed by n\n    // key getter pairs (d, [key, get... key, get]) this approach\n    // was chosen for efficiency. (The filter will call it a LOT).\n    //\n    // It is important to call delCache on point exit to prevent a\n    // memory leak. It is also needed to prevent invalid caches if\n    // a new point uses the same series and point id key.\n    //\n    // Argument Performance Concerns:\n    // - Object property lists for key getter pairs would be very\n    // expensive (points * objects for the GC every update).\n    // - ES6 function names for implicit keys would be nice but\n    // they are not guaranteed to be unique.\n    // - function.toString to obtain implicit keys is possible\n    // but long object keys are not free (internal hash).\n    // - Explicit key without objects are the most efficient.\n\n    function getCache(d) {\n        var key, val;\n        key = d[0].series + ':' + d[1];\n        val = _cache[key] = _cache[key] || {};\n        return val;\n    }\n\n    function delCache(d) {\n        var key, val;\n        key = d[0].series + ':' + d[1];\n        delete _cache[key];\n    }\n\n    function getDiffs(d) {\n        var i, key, val,\n            cache = getCache(d),\n            diffs = false;\n        for (i = 1; i < arguments.length; i += 2) {\n            key = arguments[i];\n            val = arguments[i + 1](d[0], d[1]);\n            if (cache[key] !== val || !cache.hasOwnProperty(key)) {\n                cache[key] = val;\n                diffs = true;\n            }\n        }\n        return diffs;\n    }\n\n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            container = d3.select(this);\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            nv.utils.initSVG(container);\n\n            //add series index to each data point for reference\n            data.forEach(function(series, i) {\n                series.values.forEach(function(point) {\n                    point.series = i;\n                });\n            });\n\n            // Setup Scales\n            var logScale = (typeof(chart.yScale().base) === \"function\"); // Only log scale has a method \"base()\"\n            // remap and flatten the data for use in calculating the scales' domains\n            var seriesData = (xDomain && yDomain && sizeDomain) ? [] : // if we know xDomain and yDomain and sizeDomain, no need to calculate.... if Size is constant remember to set sizeDomain to speed up performance\n                d3.merge(\n                    data.map(function(d) {\n                        return d.values.map(function(d,i) {\n                            return { x: getX(d,i), y: getY(d,i), size: getSize(d,i) }\n                        })\n                    })\n                );\n\n            x   .domain(xDomain || d3.extent(seriesData.map(function(d) { return d.x; }).concat(forceX)))\n\n            if (padData && data[0])\n                x.range(xRange || [(availableWidth * padDataOuter +  availableWidth) / (2 *data[0].values.length), availableWidth - availableWidth * (1 + padDataOuter) / (2 * data[0].values.length)  ]);\n            //x.range([availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\n            else\n                x.range(xRange || [0, availableWidth]);\n\n             if (logScale) {\n                    var min = d3.min(seriesData.map(function(d) { if (d.y !== 0) return d.y; }));\n                    y.clamp(true)\n                        .domain(yDomain || d3.extent(seriesData.map(function(d) {\n                            if (d.y !== 0) return d.y;\n                            else return min * 0.1;\n                        }).concat(forceY)))\n                        .range(yRange || [availableHeight, 0]);\n                } else {\n                        y.domain(yDomain || d3.extent(seriesData.map(function (d) { return d.y;}).concat(forceY)))\n                        .range(yRange || [availableHeight, 0]);\n                }\n\n            z   .domain(sizeDomain || d3.extent(seriesData.map(function(d) { return d.size }).concat(forceSize)))\n                .range(sizeRange || _sizeRange_def);\n\n            // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\n            singlePoint = x.domain()[0] === x.domain()[1] || y.domain()[0] === y.domain()[1];\n\n            if (x.domain()[0] === x.domain()[1])\n                x.domain()[0] ?\n                    x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01])\n                    : x.domain([-1,1]);\n\n            if (y.domain()[0] === y.domain()[1])\n                y.domain()[0] ?\n                    y.domain([y.domain()[0] - y.domain()[0] * 0.01, y.domain()[1] + y.domain()[1] * 0.01])\n                    : y.domain([-1,1]);\n\n            if ( isNaN(x.domain()[0])) {\n                x.domain([-1,1]);\n            }\n\n            if ( isNaN(y.domain()[0])) {\n                y.domain([-1,1]);\n            }\n\n            x0 = x0 || x;\n            y0 = y0 || y;\n            z0 = z0 || z;\n\n            var scaleDiff = x(1) !== x0(1) || y(1) !== y0(1) || z(1) !== z0(1);\n\n            width0 = width0 || width;\n            height0 = height0 || height;\n\n            var sizeDiff = width0 !== width || height0 !== height;\n\n            // Domain Diffs\n\n            xDom = xDom || [];\n            var domainDiff = xDom[0] !== x.domain()[0] || xDom[1] !== x.domain()[1];\n            xDom = x.domain();\n\n            yDom = yDom || [];\n            domainDiff = domainDiff || yDom[0] !== y.domain()[0] || yDom[1] !== y.domain()[1];\n            yDom = y.domain();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-scatter').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatter nv-chart-' + id);\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            wrap.classed('nv-single-point', singlePoint);\n            gEnter.append('g').attr('class', 'nv-groups');\n            gEnter.append('g').attr('class', 'nv-point-paths');\n            wrapEnter.append('g').attr('class', 'nv-point-clips');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-edge-clip-' + id)\n                .append('rect')\n                .attr('transform', 'translate( -10, -10)');\n\n            wrap.select('#nv-edge-clip-' + id + ' rect')\n                .attr('width', availableWidth + 20)\n                .attr('height', (availableHeight > 0) ? availableHeight + 20 : 0);\n\n            g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n            function updateInteractiveLayer() {\n                // Always clear needs-update flag regardless of whether or not\n                // we will actually do anything (avoids needless invocations).\n                needsUpdate = false;\n\n                if (!interactive) return false;\n\n                // inject series and point index for reference into voronoi\n                if (useVoronoi === true) {\n\n                    // nuke all voronoi paths on reload and recreate them\n                    wrap.select('.nv-point-paths').selectAll('path').remove();\n\n                    var vertices = d3.merge(data.map(function(group, groupIndex) {\n                            return group.values\n                                .map(function(point, pointIndex) {\n                                    // *Adding noise to make duplicates very unlikely\n                                    // *Injecting series and point index for reference\n                                    // *Adding a 'jitter' to the points, because there's an issue in d3.geom.voronoi.\n                                    var pX = getX(point,pointIndex);\n                                    var pY = getY(point,pointIndex);\n\n                                    return [nv.utils.NaNtoZero(x(pX)) + Math.random() * 1e-4,\n                                            nv.utils.NaNtoZero(y(pY)) + Math.random() * 1e-4,\n                                        groupIndex,\n                                        pointIndex, point];\n                                })\n                                .filter(function(pointArray, pointIndex) {\n                                    return pointActive(pointArray[4], pointIndex); // Issue #237.. move filter to after map, so pointIndex is correct!\n                                })\n                        })\n                    );\n\n                    if (vertices.length == 0) return false;  // No active points, we're done\n                    if (vertices.length < 3) {\n                        // Issue #283 - Adding 2 dummy points to the voronoi b/c voronoi requires min 3 points to work\n                        vertices.push([x.range()[0] - 20, y.range()[0] - 20, null, null]);\n                        vertices.push([x.range()[1] + 20, y.range()[1] + 20, null, null]);\n                        vertices.push([x.range()[0] - 20, y.range()[0] + 20, null, null]);\n                        vertices.push([x.range()[1] + 20, y.range()[1] - 20, null, null]);\n                    }\n\n                    // keep voronoi sections from going more than 10 outside of graph\n                    // to avoid overlap with other things like legend etc\n                    var bounds = d3.geom.polygon([\n                        [-10,-10],\n                        [-10,height + 10],\n                        [width + 10,height + 10],\n                        [width + 10,-10]\n                    ]);\n\n                    // delete duplicates from vertices - essential assumption for d3.geom.voronoi\n                    var epsilon = 1e-4; // Uses 1e-4 to determine equivalence.\n                    vertices = vertices.sort(function(a,b){return ((a[0] - b[0]) || (a[1] - b[1]))});\n                    for (var i = 0; i < vertices.length - 1; ) {\n                        if ((Math.abs(vertices[i][0] - vertices[i+1][0]) < epsilon) &&\n                        (Math.abs(vertices[i][1] - vertices[i+1][1]) < epsilon)) {\n                            vertices.splice(i+1, 1);\n                        } else {\n                            i++;\n                        }\n                    }\n\n                    var voronoi = d3.geom.voronoi(vertices).map(function(d, i) {\n                        return {\n                            'data': bounds.clip(d),\n                            'series': vertices[i][2],\n                            'point': vertices[i][3]\n                        }\n                    });\n\n                    var pointPaths = wrap.select('.nv-point-paths').selectAll('path').data(voronoi);\n                    var vPointPaths = pointPaths\n                        .enter().append(\"svg:path\")\n                        .attr(\"d\", function(d) {\n                            if (!d || !d.data || d.data.length === 0)\n                                return 'M 0 0';\n                            else\n                                return \"M\" + d.data.join(\",\") + \"Z\";\n                        })\n                        .attr(\"id\", function(d,i) {\n                            return \"nv-path-\"+i; })\n                        .attr(\"clip-path\", function(d,i) { return \"url(#nv-clip-\"+id+\"-\"+i+\")\"; })\n                        ;\n\n                    // good for debugging point hover issues\n                    if (showVoronoi) {\n                        vPointPaths.style(\"fill\", d3.rgb(230, 230, 230))\n                            .style('fill-opacity', 0.4)\n                            .style('stroke-opacity', 1)\n                            .style(\"stroke\", d3.rgb(200,200,200));\n                    }\n\n                    if (clipVoronoi) {\n                        // voronoi sections are already set to clip,\n                        // just create the circles with the IDs they expect\n                        wrap.select('.nv-point-clips').selectAll('*').remove(); // must do * since it has sub-dom\n                        var pointClips = wrap.select('.nv-point-clips').selectAll('clipPath').data(vertices);\n                        var vPointClips = pointClips\n                            .enter().append(\"svg:clipPath\")\n                            .attr(\"id\", function(d, i) { return \"nv-clip-\"+id+\"-\"+i;})\n                            .append(\"svg:circle\")\n                            .attr('cx', function(d) { return d[0]; })\n                            .attr('cy', function(d) { return d[1]; })\n                            .attr('r', clipRadius);\n                    }\n\n                    var mouseEventCallback = function(el, d, mDispatch) {\n                        if (needsUpdate) return 0;\n                        var series = data[d.series];\n                        if (series === undefined) return;\n                        var point  = series.values[d.point];\n                        point['color'] = color(series, d.series);\n\n                        // standardize attributes for tooltip.\n                        point['x'] = getX(point);\n                        point['y'] = getY(point);\n\n                        // can't just get box of event node since it's actually a voronoi polygon\n                        var box = container.node().getBoundingClientRect();\n                        var scrollTop  = window.pageYOffset || document.documentElement.scrollTop;\n                        var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n\n                        var pos = {\n                            left: x(getX(point, d.point)) + box.left + scrollLeft + margin.left + 10,\n                            top: y(getY(point, d.point)) + box.top + scrollTop + margin.top + 10\n                        };\n\n                        mDispatch({\n                            point: point,\n                            series: series,\n                            pos: pos,\n                            relativePos: [x(getX(point, d.point)) + margin.left, y(getY(point, d.point)) + margin.top],\n                            seriesIndex: d.series,\n                            pointIndex: d.point,\n                            event: d3.event,\n                            element: el\n                        });\n                    };\n\n                    pointPaths\n                        .on('click', function(d) {\n                            mouseEventCallback(this, d, dispatch.elementClick);\n                        })\n                        .on('dblclick', function(d) {\n                            mouseEventCallback(this, d, dispatch.elementDblClick);\n                        })\n                        .on('mouseover', function(d) {\n                            mouseEventCallback(this, d, dispatch.elementMouseover);\n                        })\n                        .on('mouseout', function(d, i) {\n                            mouseEventCallback(this, d, dispatch.elementMouseout);\n                        });\n\n                } else {\n                    // add event handlers to points instead voronoi paths\n                    wrap.select('.nv-groups').selectAll('.nv-group')\n                        .selectAll('.nv-point')\n                        //.data(dataWithPoints)\n                        //.style('pointer-events', 'auto') // recativate events, disabled by css\n                        .on('click', function(d,i) {\n                            //nv.log('test', d, i);\n                            if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                            var series = data[d.series],\n                                point  = series.values[i];\n                            var element = this;\n                            dispatch.elementClick({\n                                point: point,\n                                series: series,\n                                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top], //TODO: make this pos base on the page\n                                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                                seriesIndex: d.series,\n                                pointIndex: i,\n                                event: d3.event,\n                                element: element\n                            });\n                        })\n                        .on('dblclick', function(d,i) {\n                            if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                            var series = data[d.series],\n                                point  = series.values[i];\n\n                            dispatch.elementDblClick({\n                                point: point,\n                                series: series,\n                                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],//TODO: make this pos base on the page\n                                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                                seriesIndex: d.series,\n                                pointIndex: i\n                            });\n                        })\n                        .on('mouseover', function(d,i) {\n                            if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                            var series = data[d.series],\n                                point  = series.values[i];\n\n                            dispatch.elementMouseover({\n                                point: point,\n                                series: series,\n                                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],//TODO: make this pos base on the page\n                                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                                seriesIndex: d.series,\n                                pointIndex: i,\n                                color: color(d, i)\n                            });\n                        })\n                        .on('mouseout', function(d,i) {\n                            if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\n                            var series = data[d.series],\n                                point  = series.values[i];\n\n                            dispatch.elementMouseout({\n                                point: point,\n                                series: series,\n                                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],//TODO: make this pos base on the page\n                                relativePos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\n                                seriesIndex: d.series,\n                                pointIndex: i,\n                                color: color(d, i)\n                            });\n                        });\n                }\n            }\n\n            needsUpdate = true;\n            var groups = wrap.select('.nv-groups').selectAll('.nv-group')\n                .data(function(d) { return d }, function(d) { return d.key });\n            groups.enter().append('g')\n                .style('stroke-opacity', 1e-6)\n                .style('fill-opacity', 1e-6);\n            groups.exit()\n                .remove();\n            groups\n                .attr('class', function(d,i) {\n                    return (d.classed || '') + ' nv-group nv-series-' + i;\n                })\n                .classed('nv-noninteractive', !interactive)\n                .classed('hover', function(d) { return d.hover });\n            groups.watchTransition(renderWatch, 'scatter: groups')\n                .style('fill', function(d,i) { return color(d, i) })\n                .style('stroke', function(d,i) { return d.pointBorderColor || pointBorderColor || color(d, i) })\n                .style('stroke-opacity', 1)\n                .style('fill-opacity', .5);\n\n            // create the points, maintaining their IDs from the original data set\n            var points = groups.selectAll('path.nv-point')\n                .data(function(d) {\n                    return d.values.map(\n                        function (point, pointIndex) {\n                            return [point, pointIndex]\n                        }).filter(\n                            function(pointArray, pointIndex) {\n                                return pointActive(pointArray[0], pointIndex)\n                            })\n                    });\n            points.enter().append('path')\n                .attr('class', function (d) {\n                    return 'nv-point nv-point-' + d[1];\n                })\n                .style('fill', function (d) { return d.color })\n                .style('stroke', function (d) { return d.color })\n                .attr('transform', function(d) {\n                    return 'translate(' + nv.utils.NaNtoZero(x0(getX(d[0],d[1]))) + ',' + nv.utils.NaNtoZero(y0(getY(d[0],d[1]))) + ')'\n                })\n                .attr('d',\n                    nv.utils.symbol()\n                    .type(function(d) { return getShape(d[0]); })\n                    .size(function(d) { return z(getSize(d[0],d[1])) })\n            );\n            points.exit().each(delCache).remove();\n            groups.exit().selectAll('path.nv-point')\n                .watchTransition(renderWatch, 'scatter exit')\n                .attr('transform', function(d) {\n                    return 'translate(' + nv.utils.NaNtoZero(x(getX(d[0],d[1]))) + ',' + nv.utils.NaNtoZero(y(getY(d[0],d[1]))) + ')'\n                })\n                .remove();\n\n            //============================================================\n            // Point Update Optimisation Notes\n            //------------------------------------------------------------\n            // The following update selections are filtered with getDiffs\n            // (defined at the top of this file) this brings a performance\n            // benefit for charts with large data sets that accumulate a\n            // subset of changes or additions over time.\n            //\n            // Uneccesary and expensive DOM calls are avoided by culling\n            // unchanged points from the selection in exchange for the\n            // cheaper overhead of caching and diffing each point first.\n            //\n            // Due to the way D3 and NVD3 work, other global changes need\n            // to be considered in addition to local point properties.\n            // This is a potential source of bugs (if any of the global\n            // changes that possibly affect points are missed).\n\n            // Update Point Positions [x, y]\n            points.filter(function (d) {\n                // getDiffs must always be called to update cache\n                return getDiffs(d, 'x', getX, 'y', getY) ||\n                    scaleDiff || sizeDiff || domainDiff;\n            })\n            .watchTransition(renderWatch, 'scatter points')\n            .attr('transform', function (d) {\n                return 'translate(' +\n                    nv.utils.NaNtoZero(x(getX(d[0], d[1]))) + ',' +\n                    nv.utils.NaNtoZero(y(getY(d[0], d[1]))) + ')'\n            });\n\n            // Update Point Appearance [shape, size]\n            points.filter(function (d) {\n                // getDiffs must always be called to update cache\n                return getDiffs(d, 'shape', getShape, 'size', getSize) ||\n                    scaleDiff || sizeDiff || domainDiff;\n            })\n            .watchTransition(renderWatch, 'scatter points')\n            .attr('d', nv.utils.symbol()\n                .type(function (d) { return getShape(d[0]) })\n                .size(function (d) { return z(getSize(d[0], d[1])) })\n            );\n\n            // add label a label to scatter chart\n            if(showLabels)\n            {\n                var titles =  groups.selectAll('.nv-label')\n                    .data(function(d) {\n                        return d.values.map(\n                            function (point, pointIndex) {\n                                return [point, pointIndex]\n                            }).filter(\n                                function(pointArray, pointIndex) {\n                                    return pointActive(pointArray[0], pointIndex)\n                                })\n                        });\n\n                titles.enter().append('text')\n                    .style('fill', function (d,i) {\n                        return d.color })\n                    .style('stroke-opacity', 0)\n                    .style('fill-opacity', 1)\n                    .attr('transform', function(d) {\n                        var dx = nv.utils.NaNtoZero(x0(getX(d[0],d[1]))) + Math.sqrt(z(getSize(d[0],d[1]))/Math.PI) + 2;\n                        return 'translate(' + dx + ',' + nv.utils.NaNtoZero(y0(getY(d[0],d[1]))) + ')';\n                    })\n                    .text(function(d,i){\n                        return d[0].label;});\n\n                titles.exit().remove();\n                groups.exit().selectAll('path.nv-label')\n                    .watchTransition(renderWatch, 'scatter exit')\n                    .attr('transform', function(d) {\n                        var dx = nv.utils.NaNtoZero(x(getX(d[0],d[1])))+ Math.sqrt(z(getSize(d[0],d[1]))/Math.PI)+2;\n                        return 'translate(' + dx + ',' + nv.utils.NaNtoZero(y(getY(d[0],d[1]))) + ')';\n                    })\n                    .remove();\n               titles.each(function(d) {\n                  d3.select(this)\n                    .classed('nv-label', true)\n                    .classed('nv-label-' + d[1], false)\n                    .classed('hover',false);\n                });\n                titles.watchTransition(renderWatch, 'scatter labels')\n                    .attr('transform', function(d) {\n                        var dx = nv.utils.NaNtoZero(x(getX(d[0],d[1])))+ Math.sqrt(z(getSize(d[0],d[1]))/Math.PI)+2;\n                        return 'translate(' + dx + ',' + nv.utils.NaNtoZero(y(getY(d[0],d[1]))) + ')'\n                    });\n            }\n\n            // Delay updating the invisible interactive layer for smoother animation\n            if( interactiveUpdateDelay )\n            {\n                clearTimeout(timeoutID); // stop repeat calls to updateInteractiveLayer\n                timeoutID = setTimeout(updateInteractiveLayer, interactiveUpdateDelay );\n            }\n            else\n            {\n                updateInteractiveLayer();\n            }\n\n            //store old scales for use in transitions on update\n            x0 = x.copy();\n            y0 = y.copy();\n            z0 = z.copy();\n\n            width0 = width;\n            height0 = height;\n\n        });\n        renderWatch.renderEnd('scatter immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    // utility function calls provided by this chart\n    chart._calls = new function() {\n        this.clearHighlights = function () {\n            nv.dom.write(function() {\n                container.selectAll(\".nv-point.hover\").classed(\"hover\", false);\n            });\n            return null;\n        };\n        this.highlightPoint = function (seriesIndex, pointIndex, isHoverOver) {\n            nv.dom.write(function() {\n                container.select('.nv-groups')\n                  .selectAll(\".nv-series-\" + seriesIndex)\n                  .selectAll(\".nv-point-\" + pointIndex)\n                  .classed(\"hover\", isHoverOver);\n            });\n        };\n    };\n\n    // trigger calls from events too\n    dispatch.on('elementMouseover.point', function(d) {\n        if (interactive) chart._calls.highlightPoint(d.seriesIndex,d.pointIndex,true);\n    });\n\n    dispatch.on('elementMouseout.point', function(d) {\n        if (interactive) chart._calls.highlightPoint(d.seriesIndex,d.pointIndex,false);\n    });\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:        {get: function(){return width;}, set: function(_){width=_;}},\n        height:       {get: function(){return height;}, set: function(_){height=_;}},\n        xScale:       {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:       {get: function(){return y;}, set: function(_){y=_;}},\n        pointScale:   {get: function(){return z;}, set: function(_){z=_;}},\n        xDomain:      {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain:      {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        pointDomain:  {get: function(){return sizeDomain;}, set: function(_){sizeDomain=_;}},\n        xRange:       {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:       {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        pointRange:   {get: function(){return sizeRange;}, set: function(_){sizeRange=_;}},\n        forceX:       {get: function(){return forceX;}, set: function(_){forceX=_;}},\n        forceY:       {get: function(){return forceY;}, set: function(_){forceY=_;}},\n        forcePoint:   {get: function(){return forceSize;}, set: function(_){forceSize=_;}},\n        interactive:  {get: function(){return interactive;}, set: function(_){interactive=_;}},\n        pointActive:  {get: function(){return pointActive;}, set: function(_){pointActive=_;}},\n        padDataOuter: {get: function(){return padDataOuter;}, set: function(_){padDataOuter=_;}},\n        padData:      {get: function(){return padData;}, set: function(_){padData=_;}},\n        clipEdge:     {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n        clipVoronoi:  {get: function(){return clipVoronoi;}, set: function(_){clipVoronoi=_;}},\n        clipRadius:   {get: function(){return clipRadius;}, set: function(_){clipRadius=_;}},\n        showVoronoi:   {get: function(){return showVoronoi;}, set: function(_){showVoronoi=_;}},\n        id:           {get: function(){return id;}, set: function(_){id=_;}},\n        interactiveUpdateDelay: {get:function(){return interactiveUpdateDelay;}, set: function(_){interactiveUpdateDelay=_;}},\n        showLabels: {get: function(){return showLabels;}, set: function(_){ showLabels = _;}},\n        pointBorderColor: {get: function(){return pointBorderColor;}, set: function(_){pointBorderColor=_;}},\n\n        // simple functor options\n        x:     {get: function(){return getX;}, set: function(_){getX = d3.functor(_);}},\n        y:     {get: function(){return getY;}, set: function(_){getY = d3.functor(_);}},\n        pointSize: {get: function(){return getSize;}, set: function(_){getSize = d3.functor(_);}},\n        pointShape: {get: function(){return getShape;}, set: function(_){getShape = d3.functor(_);}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n        }},\n        color: {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        useVoronoi: {get: function(){return useVoronoi;}, set: function(_){\n            useVoronoi = _;\n            if (useVoronoi === false) {\n                clipVoronoi = false;\n            }\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    return chart;\n};\n\nnv.models.scatterChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var scatter      = nv.models.scatter()\n        , xAxis        = nv.models.axis()\n        , yAxis        = nv.models.axis()\n        , legend       = nv.models.legend()\n        , distX        = nv.models.distribution()\n        , distY        = nv.models.distribution()\n        , tooltip      = nv.models.tooltip()\n        ;\n\n    var margin       = {top: 30, right: 20, bottom: 50, left: 75}\n        , marginTop = null\n        , width        = null\n        , height       = null\n        , container    = null\n        , color        = nv.utils.defaultColor()\n        , x            = scatter.xScale()\n        , y            = scatter.yScale()\n        , showDistX    = false\n        , showDistY    = false\n        , showLegend   = true\n        , showXAxis    = true\n        , showYAxis    = true\n        , rightAlignYAxis = false\n        , state = nv.utils.state()\n        , defaultState = null\n        , dispatch = d3.dispatch('stateChange', 'changeState', 'renderEnd')\n        , noData       = null\n        , duration = 250\n        , showLabels    = false\n        ;\n\n    scatter.xScale(x).yScale(y);\n    xAxis.orient('bottom').tickPadding(10);\n    yAxis\n        .orient((rightAlignYAxis) ? 'right' : 'left')\n        .tickPadding(10)\n    ;\n    distX.axis('x');\n    distY.axis('y');\n    tooltip\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        })\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        });\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var x0, y0\n        , renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled })\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        }\n    };\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(scatter);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n        if (showDistX) renderWatch.models(distX);\n        if (showDistY) renderWatch.models(distY);\n\n        selection.each(function(data) {\n            var that = this;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() {\n                if (duration === 0)\n                    container.call(chart);\n                else\n                    container.transition().duration(duration).call(chart);\n            };\n            chart.container = this;\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disableddisabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display noData message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container);\n                renderWatch.renderEnd('scatter immediate');\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            // Setup Scales\n            x = scatter.xScale();\n            y = scatter.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-scatterChart').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-scatterChart nv-chart-' + scatter.id());\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            // background for pointer events\n            gEnter.append('rect').attr('class', 'nvd3 nv-background').style(\"pointer-events\",\"none\");\n\n            gEnter.append('g').attr('class', 'nv-x nv-axis');\n            gEnter.append('g').attr('class', 'nv-y nv-axis');\n            gEnter.append('g').attr('class', 'nv-scatterWrap');\n            gEnter.append('g').attr('class', 'nv-regressionLinesWrap');\n            gEnter.append('g').attr('class', 'nv-distWrap');\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                var legendWidth = availableWidth;\n                legend.width(legendWidth);\n\n                wrap.select('.nv-legendWrap')\n                    .datum(data)\n                    .call(legend);\n\n                if (!marginTop && legend.height() !== margin.top) {\n                    margin.top = legend.height();\n                    availableHeight = nv.utils.availableHeight(height, container, margin);\n                }\n\n                wrap.select('.nv-legendWrap')\n                    .attr('transform', 'translate(0' + ',' + (-margin.top) +')');\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            // Main Chart Component(s)\n            scatter\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    d.color = d.color || color(d, i);\n                    return d.color;\n                }).filter(function(d,i) { return !data[i].disabled }))\n                .showLabels(showLabels);\n\n            wrap.select('.nv-scatterWrap')\n                .datum(data.filter(function(d) { return !d.disabled }))\n                .call(scatter);\n\n\n            wrap.select('.nv-regressionLinesWrap')\n                .attr('clip-path', 'url(#nv-edge-clip-' + scatter.id() + ')');\n\n            var regWrap = wrap.select('.nv-regressionLinesWrap').selectAll('.nv-regLines')\n                .data(function (d) {\n                    return d;\n                });\n\n            regWrap.enter().append('g').attr('class', 'nv-regLines');\n\n            var regLine = regWrap.selectAll('.nv-regLine')\n                .data(function (d) {\n                    return [d]\n                });\n\n            regLine.enter()\n                .append('line').attr('class', 'nv-regLine')\n                .style('stroke-opacity', 0);\n\n            // don't add lines unless we have slope and intercept to use\n            regLine.filter(function(d) {\n                return d.intercept && d.slope;\n            })\n                .watchTransition(renderWatch, 'scatterPlusLineChart: regline')\n                .attr('x1', x.range()[0])\n                .attr('x2', x.range()[1])\n                .attr('y1', function (d, i) {\n                    return y(x.domain()[0] * d.slope + d.intercept)\n                })\n                .attr('y2', function (d, i) {\n                    return y(x.domain()[1] * d.slope + d.intercept)\n                })\n                .style('stroke', function (d, i, j) {\n                    return color(d, j)\n                })\n                .style('stroke-opacity', function (d, i) {\n                    return (d.disabled || typeof d.slope === 'undefined' || typeof d.intercept === 'undefined') ? 0 : 1\n                });\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis\n                    .scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize( -availableHeight , 0);\n\n                g.select('.nv-x.nv-axis')\n                    .attr('transform', 'translate(0,' + y.range()[0] + ')')\n                    .call(xAxis);\n            }\n\n            if (showYAxis) {\n                yAxis\n                    .scale(y)\n                    ._ticks( nv.utils.calcTicksY(availableHeight/36, data) )\n                    .tickSize( -availableWidth, 0);\n\n                g.select('.nv-y.nv-axis')\n                    .call(yAxis);\n            }\n\n            // Setup Distribution\n            if (showDistX) {\n                distX\n                    .getData(scatter.x())\n                    .scale(x)\n                    .width(availableWidth)\n                    .color(data.map(function(d,i) {\n                        return d.color || color(d, i);\n                    }).filter(function(d,i) { return !data[i].disabled }));\n                gEnter.select('.nv-distWrap').append('g')\n                    .attr('class', 'nv-distributionX');\n                g.select('.nv-distributionX')\n                    .attr('transform', 'translate(0,' + y.range()[0] + ')')\n                    .datum(data.filter(function(d) { return !d.disabled }))\n                    .call(distX);\n            }\n\n            if (showDistY) {\n                distY\n                    .getData(scatter.y())\n                    .scale(y)\n                    .width(availableHeight)\n                    .color(data.map(function(d,i) {\n                        return d.color || color(d, i);\n                    }).filter(function(d,i) { return !data[i].disabled }));\n                gEnter.select('.nv-distWrap').append('g')\n                    .attr('class', 'nv-distributionY');\n                g.select('.nv-distributionY')\n                    .attr('transform', 'translate(' + (rightAlignYAxis ? availableWidth : -distY.size() ) + ',0)')\n                    .datum(data.filter(function(d) { return !d.disabled }))\n                    .call(distY);\n            }\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n                if (typeof e.disabled !== 'undefined') {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n                    state.disabled = e.disabled;\n                }\n                chart.update();\n            });\n\n            // mouseover needs availableHeight so we just keep scatter mouse events inside the chart block\n            scatter.dispatch.on('elementMouseout.tooltip', function(evt) {\n                tooltip.hidden(true);\n                container.select('.nv-chart-' + scatter.id() + ' .nv-series-' + evt.seriesIndex + ' .nv-distx-' + evt.pointIndex)\n                    .attr('y1', 0);\n                container.select('.nv-chart-' + scatter.id() + ' .nv-series-' + evt.seriesIndex + ' .nv-disty-' + evt.pointIndex)\n                    .attr('x2', distY.size());\n            });\n\n            scatter.dispatch.on('elementMouseover.tooltip', function(evt) {\n                container.select('.nv-series-' + evt.seriesIndex + ' .nv-distx-' + evt.pointIndex)\n                    .attr('y1', evt.relativePos[1] - availableHeight);\n                container.select('.nv-series-' + evt.seriesIndex + ' .nv-disty-' + evt.pointIndex)\n                    .attr('x2', evt.relativePos[0] + distX.size());\n                tooltip.data(evt).hidden(false);\n            });\n\n            //store old scales for use in transitions on update\n            x0 = x.copy();\n            y0 = y.copy();\n\n        });\n\n        renderWatch.renderEnd('scatter with line immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n    chart.legend = legend;\n    chart.xAxis = xAxis;\n    chart.yAxis = yAxis;\n    chart.distX = distX;\n    chart.distY = distY;\n    chart.tooltip = tooltip;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        container:  {get: function(){return container;}, set: function(_){container=_;}},\n        showDistX:  {get: function(){return showDistX;}, set: function(_){showDistX=_;}},\n        showDistY:  {get: function(){return showDistY;}, set: function(_){showDistY=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        showXAxis:  {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:  {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        defaultState:     {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:     {get: function(){return noData;}, set: function(_){noData=_;}},\n        duration:   {get: function(){return duration;}, set: function(_){duration=_;}},\n        showLabels: {get: function(){return showLabels;}, set: function(_){showLabels=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( (_) ? 'right' : 'left');\n        }},\n        color: {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n            distX.color(color);\n            distY.color(color);\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, scatter);\n    nv.utils.initOptions(chart);\n    return chart;\n};\n\nnv.models.sparkline = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 2, right: 0, bottom: 2, left: 0}\n        , width = 400\n        , height = 32\n        , container = null\n        , animate = true\n        , x = d3.scale.linear()\n        , y = d3.scale.linear()\n        , getX = function(d) { return d.x }\n        , getY = function(d) { return d.y }\n        , color = nv.utils.getColor(['#000'])\n        , xDomain\n        , yDomain\n        , xRange\n        , yRange\n        , showMinMaxPoints = true\n        , showCurrentPoint = true\n        , dispatch = d3.dispatch('renderEnd')\n        ;\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n    \n    function chart(selection) {\n        renderWatch.reset();\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            // Setup Scales\n            x   .domain(xDomain || d3.extent(data, getX ))\n                .range(xRange || [0, availableWidth]);\n\n            y   .domain(yDomain || d3.extent(data, getY ))\n                .range(yRange || [availableHeight, 0]);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-sparkline').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparkline');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n            var paths = wrap.selectAll('path')\n                .data(function(d) { return [d] });\n            paths.enter().append('path');\n            paths.exit().remove();\n            paths\n                .style('stroke', function(d,i) { return d.color || color(d, i) })\n                .attr('d', d3.svg.line()\n                    .x(function(d,i) { return x(getX(d,i)) })\n                    .y(function(d,i) { return y(getY(d,i)) })\n            );\n\n            // TODO: Add CURRENT data point (Need Min, Mac, Current / Most recent)\n            var points = wrap.selectAll('circle.nv-point')\n                .data(function(data) {\n                    var yValues = data.map(function(d, i) { return getY(d,i); });\n                    function pointIndex(index) {\n                        if (index != -1) {\n                            var result = data[index];\n                            result.pointIndex = index;\n                            return result;\n                        } else {\n                            return null;\n                        }\n                    }\n                    var maxPoint = pointIndex(yValues.lastIndexOf(y.domain()[1])),\n                        minPoint = pointIndex(yValues.indexOf(y.domain()[0])),\n                        currentPoint = pointIndex(yValues.length - 1);\n                    return [(showMinMaxPoints ? minPoint : null), (showMinMaxPoints ? maxPoint : null), (showCurrentPoint ? currentPoint : null)].filter(function (d) {return d != null;});\n                });\n            points.enter().append('circle');\n            points.exit().remove();\n            points\n                .attr('cx', function(d,i) { return x(getX(d,d.pointIndex)) })\n                .attr('cy', function(d,i) { return y(getY(d,d.pointIndex)) })\n                .attr('r', 2)\n                .attr('class', function(d,i) {\n                    return getX(d, d.pointIndex) == x.domain()[1] ? 'nv-point nv-currentValue' :\n                            getY(d, d.pointIndex) == y.domain()[0] ? 'nv-point nv-minValue' : 'nv-point nv-maxValue'\n                });\n        });\n        \n        renderWatch.renderEnd('sparkline immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:            {get: function(){return width;}, set: function(_){width=_;}},\n        height:           {get: function(){return height;}, set: function(_){height=_;}},\n        xDomain:          {get: function(){return xDomain;}, set: function(_){xDomain=_;}},\n        yDomain:          {get: function(){return yDomain;}, set: function(_){yDomain=_;}},\n        xRange:           {get: function(){return xRange;}, set: function(_){xRange=_;}},\n        yRange:           {get: function(){return yRange;}, set: function(_){yRange=_;}},\n        xScale:           {get: function(){return x;}, set: function(_){x=_;}},\n        yScale:           {get: function(){return y;}, set: function(_){y=_;}},\n        animate:          {get: function(){return animate;}, set: function(_){animate=_;}},\n        showMinMaxPoints: {get: function(){return showMinMaxPoints;}, set: function(_){showMinMaxPoints=_;}},\n        showCurrentPoint: {get: function(){return showCurrentPoint;}, set: function(_){showCurrentPoint=_;}},\n\n        //functor options\n        x: {get: function(){return getX;}, set: function(_){getX=d3.functor(_);}},\n        y: {get: function(){return getY;}, set: function(_){getY=d3.functor(_);}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }}\n    });\n\n    chart.dispatch = dispatch;\n    nv.utils.initOptions(chart);\n    return chart;\n};\n\nnv.models.sparklinePlus = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var sparkline = nv.models.sparkline();\n\n    var margin = {top: 15, right: 100, bottom: 10, left: 50}\n        , width = null\n        , height = null\n        , x\n        , y\n        , index = []\n        , paused = false\n        , xTickFormat = d3.format(',r')\n        , yTickFormat = d3.format(',.2f')\n        , showLastValue = true\n        , alignValue = true\n        , rightAlignValue = false\n        , noData = null\n        , dispatch = d3.dispatch('renderEnd')\n        ;\n        \n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(sparkline);\n        selection.each(function(data) {\n            var container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() { container.call(chart); };\n            chart.container = this;\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            var currentValue = sparkline.y()(data[data.length-1], data.length-1);\n\n            // Setup Scales\n            x = sparkline.xScale();\n            y = sparkline.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-sparklineplus').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-sparklineplus');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-sparklineWrap');\n            gEnter.append('g').attr('class', 'nv-valueWrap');\n            gEnter.append('g').attr('class', 'nv-hoverArea');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            // Main Chart Component(s)\n            var sparklineWrap = g.select('.nv-sparklineWrap');\n\n            sparkline.width(availableWidth).height(availableHeight);\n            sparklineWrap.call(sparkline);\n\n            if (showLastValue) {\n                var valueWrap = g.select('.nv-valueWrap');\n                var value = valueWrap.selectAll('.nv-currentValue')\n                    .data([currentValue]);\n\n                value.enter().append('text').attr('class', 'nv-currentValue')\n                    .attr('dx', rightAlignValue ? -8 : 8)\n                    .attr('dy', '.9em')\n                    .style('text-anchor', rightAlignValue ? 'end' : 'start');\n\n                value\n                    .attr('x', availableWidth + (rightAlignValue ? margin.right : 0))\n                    .attr('y', alignValue ? function (d) {\n                        return y(d)\n                    } : 0)\n                    .style('fill', sparkline.color()(data[data.length - 1], data.length - 1))\n                    .text(yTickFormat(currentValue));\n            }\n\n            gEnter.select('.nv-hoverArea').append('rect')\n                .on('mousemove', sparklineHover)\n                .on('click', function() { paused = !paused })\n                .on('mouseout', function() { index = []; updateValueLine(); });\n\n            g.select('.nv-hoverArea rect')\n                .attr('transform', function(d) { return 'translate(' + -margin.left + ',' + -margin.top + ')' })\n                .attr('width', availableWidth + margin.left + margin.right)\n                .attr('height', availableHeight + margin.top);\n\n            //index is currently global (within the chart), may or may not keep it that way\n            function updateValueLine() {\n                if (paused) return;\n\n                var hoverValue = g.selectAll('.nv-hoverValue').data(index);\n\n                var hoverEnter = hoverValue.enter()\n                    .append('g').attr('class', 'nv-hoverValue')\n                    .style('stroke-opacity', 0)\n                    .style('fill-opacity', 0);\n\n                hoverValue.exit()\n                    .transition().duration(250)\n                    .style('stroke-opacity', 0)\n                    .style('fill-opacity', 0)\n                    .remove();\n\n                hoverValue\n                    .attr('transform', function(d) { return 'translate(' + x(sparkline.x()(data[d],d)) + ',0)' })\n                    .transition().duration(250)\n                    .style('stroke-opacity', 1)\n                    .style('fill-opacity', 1);\n\n                if (!index.length) return;\n\n                hoverEnter.append('line')\n                    .attr('x1', 0)\n                    .attr('y1', -margin.top)\n                    .attr('x2', 0)\n                    .attr('y2', availableHeight);\n\n                hoverEnter.append('text').attr('class', 'nv-xValue')\n                    .attr('x', -6)\n                    .attr('y', -margin.top)\n                    .attr('text-anchor', 'end')\n                    .attr('dy', '.9em');\n\n                g.select('.nv-hoverValue .nv-xValue')\n                    .text(xTickFormat(sparkline.x()(data[index[0]], index[0])));\n\n                hoverEnter.append('text').attr('class', 'nv-yValue')\n                    .attr('x', 6)\n                    .attr('y', -margin.top)\n                    .attr('text-anchor', 'start')\n                    .attr('dy', '.9em');\n\n                g.select('.nv-hoverValue .nv-yValue')\n                    .text(yTickFormat(sparkline.y()(data[index[0]], index[0])));\n            }\n\n            function sparklineHover() {\n                if (paused) return;\n\n                var pos = d3.mouse(this)[0] - margin.left;\n\n                function getClosestIndex(data, x) {\n                    var distance = Math.abs(sparkline.x()(data[0], 0) - x);\n                    var closestIndex = 0;\n                    for (var i = 0; i < data.length; i++){\n                        if (Math.abs(sparkline.x()(data[i], i) - x) < distance) {\n                            distance = Math.abs(sparkline.x()(data[i], i) - x);\n                            closestIndex = i;\n                        }\n                    }\n                    return closestIndex;\n                }\n\n                index = [getClosestIndex(data, Math.round(x.invert(pos)))];\n                updateValueLine();\n            }\n\n        });\n        renderWatch.renderEnd('sparklinePlus immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.sparkline = sparkline;\n\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:           {get: function(){return width;}, set: function(_){width=_;}},\n        height:          {get: function(){return height;}, set: function(_){height=_;}},\n        xTickFormat:     {get: function(){return xTickFormat;}, set: function(_){xTickFormat=_;}},\n        yTickFormat:     {get: function(){return yTickFormat;}, set: function(_){yTickFormat=_;}},\n        showLastValue:   {get: function(){return showLastValue;}, set: function(_){showLastValue=_;}},\n        alignValue:      {get: function(){return alignValue;}, set: function(_){alignValue=_;}},\n        rightAlignValue: {get: function(){return rightAlignValue;}, set: function(_){rightAlignValue=_;}},\n        noData:          {get: function(){return noData;}, set: function(_){noData=_;}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, sparkline);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.stackedArea = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 960\n        , height = 500\n        , color = nv.utils.defaultColor() // a function that computes the color\n        , id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't selet one\n        , container = null\n        , getX = function(d) { return d.x } // accessor to get the x value from a data point\n        , getY = function(d) { return d.y } // accessor to get the y value from a data point\n        , defined = function(d,i) { return !isNaN(getY(d,i)) && getY(d,i) !== null } // allows a line to be not continuous when it is not defined\n        , style = 'stack'\n        , offset = 'zero'\n        , order = 'default'\n        , interpolate = 'linear'  // controls the line interpolation\n        , clipEdge = false // if true, masks lines within x and y scale\n        , x //can be accessed via chart.xScale()\n        , y //can be accessed via chart.yScale()\n        , scatter = nv.models.scatter()\n        , duration = 250\n        , dispatch =  d3.dispatch('areaClick', 'areaMouseover', 'areaMouseout','renderEnd', 'elementClick', 'elementMouseover', 'elementMouseout')\n        ;\n\n    scatter\n        .pointSize(2.2) // default size\n        .pointDomain([2.2, 2.2]) // all the same size by default\n    ;\n\n    /************************************\n     * offset:\n     *   'wiggle' (stream)\n     *   'zero' (stacked)\n     *   'expand' (normalize to 100%)\n     *   'silhouette' (simple centered)\n     *\n     * order:\n     *   'inside-out' (stream)\n     *   'default' (input order)\n     ************************************/\n\n    var renderWatch = nv.utils.renderWatch(dispatch, duration);\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(scatter);\n        selection.each(function(data) {\n            var availableWidth = width - margin.left - margin.right,\n                availableHeight = height - margin.top - margin.bottom;\n\n            container = d3.select(this);\n            nv.utils.initSVG(container);\n\n            // Setup Scales\n            x = scatter.xScale();\n            y = scatter.yScale();\n\n            var dataRaw = data;\n            // Injecting point index into each point because d3.layout.stack().out does not give index\n            data.forEach(function(aseries, i) {\n                aseries.seriesIndex = i;\n                aseries.values = aseries.values.map(function(d, j) {\n                    d.index = j;\n                    d.seriesIndex = i;\n                    return d;\n                });\n            });\n\n            var dataFiltered = data.filter(function(series) {\n                return !series.disabled;\n            });\n\n            data = d3.layout.stack()\n                .order(order)\n                .offset(offset)\n                .values(function(d) { return d.values })  //TODO: make values customizeable in EVERY model in this fashion\n                .x(getX)\n                .y(getY)\n                .out(function(d, y0, y) {\n                    d.display = {\n                        y: y,\n                        y0: y0\n                    };\n                })\n            (dataFiltered);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-stackedarea').data([data]);\n            var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedarea');\n            var defsEnter = wrapEnter.append('defs');\n            var gEnter = wrapEnter.append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-areaWrap');\n            gEnter.append('g').attr('class', 'nv-scatterWrap');\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n            \n            // If the user has not specified forceY, make sure 0 is included in the domain\n            // Otherwise, use user-specified values for forceY\n            if (scatter.forceY().length == 0) {\n                scatter.forceY().push(0);\n            }\n            \n            scatter\n                .width(availableWidth)\n                .height(availableHeight)\n                .x(getX)\n                .y(function(d) {\n                    if (d.display !== undefined) { return d.display.y + d.display.y0; }\n                })\n                .color(data.map(function(d,i) {\n                    d.color = d.color || color(d, d.seriesIndex);\n                    return d.color;\n                }));\n\n            var scatterWrap = g.select('.nv-scatterWrap')\n                .datum(data);\n\n            scatterWrap.call(scatter);\n\n            defsEnter.append('clipPath')\n                .attr('id', 'nv-edge-clip-' + id)\n                .append('rect');\n\n            wrap.select('#nv-edge-clip-' + id + ' rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            g.attr('clip-path', clipEdge ? 'url(#nv-edge-clip-' + id + ')' : '');\n\n            var area = d3.svg.area()\n                .defined(defined)\n                .x(function(d,i)  { return x(getX(d,i)) })\n                .y0(function(d) {\n                    return y(d.display.y0)\n                })\n                .y1(function(d) {\n                    return y(d.display.y + d.display.y0)\n                })\n                .interpolate(interpolate);\n\n            var zeroArea = d3.svg.area()\n                .defined(defined)\n                .x(function(d,i)  { return x(getX(d,i)) })\n                .y0(function(d) { return y(d.display.y0) })\n                .y1(function(d) { return y(d.display.y0) });\n\n            var path = g.select('.nv-areaWrap').selectAll('path.nv-area')\n                .data(function(d) { return d });\n\n            path.enter().append('path').attr('class', function(d,i) { return 'nv-area nv-area-' + i })\n                .attr('d', function(d,i){\n                    return zeroArea(d.values, d.seriesIndex);\n                })\n                .on('mouseover', function(d,i) {\n                    d3.select(this).classed('hover', true);\n                    dispatch.areaMouseover({\n                        point: d,\n                        series: d.key,\n                        pos: [d3.event.pageX, d3.event.pageY],\n                        seriesIndex: d.seriesIndex\n                    });\n                })\n                .on('mouseout', function(d,i) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.areaMouseout({\n                        point: d,\n                        series: d.key,\n                        pos: [d3.event.pageX, d3.event.pageY],\n                        seriesIndex: d.seriesIndex\n                    });\n                })\n                .on('click', function(d,i) {\n                    d3.select(this).classed('hover', false);\n                    dispatch.areaClick({\n                        point: d,\n                        series: d.key,\n                        pos: [d3.event.pageX, d3.event.pageY],\n                        seriesIndex: d.seriesIndex\n                    });\n                });\n\n            path.exit().remove();\n            path.style('fill', function(d,i){\n                    return d.color || color(d, d.seriesIndex)\n                })\n                .style('stroke', function(d,i){ return d.color || color(d, d.seriesIndex) });\n            path.watchTransition(renderWatch,'stackedArea path')\n                .attr('d', function(d,i) {\n                    return area(d.values,i)\n                });\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            scatter.dispatch.on('elementMouseover.area', function(e) {\n                g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', true);\n            });\n            scatter.dispatch.on('elementMouseout.area', function(e) {\n                g.select('.nv-chart-' + id + ' .nv-area-' + e.seriesIndex).classed('hover', false);\n            });\n\n            //Special offset functions\n            chart.d3_stackedOffset_stackPercent = function(stackData) {\n                var n = stackData.length,    //How many series\n                    m = stackData[0].length,     //how many points per series\n                    i,\n                    j,\n                    o,\n                    y0 = [];\n\n                for (j = 0; j < m; ++j) { //Looping through all points\n                    for (i = 0, o = 0; i < dataRaw.length; i++) { //looping through all series\n                        o += getY(dataRaw[i].values[j]); //total y value of all series at a certian point in time.\n                    }\n\n                    if (o) for (i = 0; i < n; i++) { //(total y value of all series at point in time i) != 0\n                        stackData[i][j][1] /= o;\n                    } else { //(total y value of all series at point in time i) == 0\n                        for (i = 0; i < n; i++) {\n                            stackData[i][j][1] = 0;\n                        }\n                    }\n                }\n                for (j = 0; j < m; ++j) y0[j] = 0;\n                return y0;\n            };\n\n        });\n\n        renderWatch.renderEnd('stackedArea immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Global getters and setters\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n\n    scatter.dispatch.on('elementClick', function(){ dispatch.elementClick.apply(this, arguments); });\n    scatter.dispatch.on('elementMouseover', function(){ dispatch.elementMouseover.apply(this, arguments); });\n    scatter.dispatch.on('elementMouseout', function(){ dispatch.elementMouseout.apply(this, arguments); });\n\n    chart.interpolate = function(_) {\n        if (!arguments.length) return interpolate;\n        interpolate = _;\n        return chart;\n    };\n\n    chart.duration = function(_) {\n        if (!arguments.length) return duration;\n        duration = _;\n        renderWatch.reset(duration);\n        scatter.duration(duration);\n        return chart;\n    };\n\n    chart.dispatch = dispatch;\n    chart.scatter = scatter;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        defined: {get: function(){return defined;}, set: function(_){defined=_;}},\n        clipEdge: {get: function(){return clipEdge;}, set: function(_){clipEdge=_;}},\n        offset:      {get: function(){return offset;}, set: function(_){offset=_;}},\n        order:    {get: function(){return order;}, set: function(_){order=_;}},\n        interpolate:    {get: function(){return interpolate;}, set: function(_){interpolate=_;}},\n\n        // simple functor options\n        x:     {get: function(){return getX;}, set: function(_){getX = d3.functor(_);}},\n        y:     {get: function(){return getY;}, set: function(_){getY = d3.functor(_);}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n        }},\n        style: {get: function(){return style;}, set: function(_){\n            style = _;\n            switch (style) {\n                case 'stack':\n                    chart.offset('zero');\n                    chart.order('default');\n                    break;\n                case 'stream':\n                    chart.offset('wiggle');\n                    chart.order('inside-out');\n                    break;\n                case 'stream-center':\n                    chart.offset('silhouette');\n                    chart.order('inside-out');\n                    break;\n                case 'expand':\n                    chart.offset('expand');\n                    chart.order('default');\n                    break;\n                case 'stack_percent':\n                    chart.offset(chart.d3_stackedOffset_stackPercent);\n                    chart.order('default');\n                    break;\n            }\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            scatter.duration(duration);\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, scatter);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.stackedAreaChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var stacked = nv.models.stackedArea()\n        , xAxis = nv.models.axis()\n        , yAxis = nv.models.axis()\n        , legend = nv.models.legend()\n        , controls = nv.models.legend()\n        , interactiveLayer = nv.interactiveGuideline()\n        , tooltip = nv.models.tooltip()\n        , focus = nv.models.focus(nv.models.stackedArea())\n        ;\n\n    var margin = {top: 10, right: 25, bottom: 50, left: 60}\n        , marginTop = null\n        , width = null\n        , height = null\n        , color = nv.utils.defaultColor()\n        , showControls = true\n        , showLegend = true\n        , legendPosition = 'top'\n        , showXAxis = true\n        , showYAxis = true\n        , rightAlignYAxis = false\n        , focusEnable = false\n        , useInteractiveGuideline = false\n        , showTotalInTooltip = true\n        , totalLabel = 'TOTAL'\n        , x //can be accessed via chart.xScale()\n        , y //can be accessed via chart.yScale()\n        , state = nv.utils.state()\n        , defaultState = null\n        , noData = null\n        , dispatch = d3.dispatch('stateChange', 'changeState','renderEnd')\n        , controlWidth = 250\n        , controlOptions = ['Stacked','Stream','Expanded']\n        , controlLabels = {}\n        , duration = 250\n        ;\n\n    state.style = stacked.style();\n    xAxis.orient('bottom').tickPadding(7);\n    yAxis.orient((rightAlignYAxis) ? 'right' : 'left');\n\n    tooltip\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        })\n        .valueFormatter(function(d, i) {\n            return yAxis.tickFormat()(d, i);\n        });\n\n    interactiveLayer.tooltip\n        .headerFormatter(function(d, i) {\n            return xAxis.tickFormat()(d, i);\n        })\n        .valueFormatter(function(d, i) {\n            return d == null ? \"N/A\" : yAxis.tickFormat()(d, i);\n        });\n\n    var oldYTickFormat = null,\n        oldValueFormatter = null;\n\n    controls.updateState(false);\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n    var style = stacked.style();\n\n    var stateGetter = function(data) {\n        return function(){\n            return {\n                active: data.map(function(d) { return !d.disabled }),\n                style: stacked.style()\n            };\n        }\n    };\n\n    var stateSetter = function(data) {\n        return function(state) {\n            if (state.style !== undefined)\n                style = state.style;\n            if (state.active !== undefined)\n                data.forEach(function(series,i) {\n                    series.disabled = !state.active[i];\n                });\n        }\n    };\n\n    var percentFormatter = d3.format('%');\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(stacked);\n        if (showXAxis) renderWatch.models(xAxis);\n        if (showYAxis) renderWatch.models(yAxis);\n\n        selection.each(function(data) {\n            var container = d3.select(this),\n                that = this;\n            nv.utils.initSVG(container);\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin),\n                availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n\n            chart.update = function() { container.transition().duration(duration).call(chart); };\n            chart.container = this;\n\n            state\n                .setter(stateSetter(data), chart.update)\n                .getter(stateGetter(data))\n                .update();\n\n            // DEPRECATED set state.disabled\n            state.disabled = data.map(function(d) { return !!d.disabled });\n\n            if (!defaultState) {\n                var key;\n                defaultState = {};\n                for (key in state) {\n                    if (state[key] instanceof Array)\n                        defaultState[key] = state[key].slice(0);\n                    else\n                        defaultState[key] = state[key];\n                }\n            }\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\n                nv.utils.noData(chart, container)\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n            // Setup Scales\n            x = stacked.xScale();\n            y = stacked.yScale();\n\n            // Setup containers and skeleton of chart\n            var wrap = container.selectAll('g.nv-wrap.nv-stackedAreaChart').data([data]);\n            var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-stackedAreaChart').append('g');\n            var g = wrap.select('g');\n\n            gEnter.append('g').attr('class', 'nv-legendWrap');\n            gEnter.append('g').attr('class', 'nv-controlsWrap');\n\n            var focusEnter = gEnter.append('g').attr('class', 'nv-focus');\n            focusEnter.append('g').attr('class', 'nv-background').append('rect');\n            focusEnter.append('g').attr('class', 'nv-x nv-axis');\n            focusEnter.append('g').attr('class', 'nv-y nv-axis');\n            focusEnter.append('g').attr('class', 'nv-stackedWrap');\n            focusEnter.append('g').attr('class', 'nv-interactive');\n\n            // g.select(\"rect\").attr(\"width\",availableWidth).attr(\"height\",availableHeight);\n\n            var contextEnter = gEnter.append('g').attr('class', 'nv-focusWrap');\n\n            // Legend\n            if (!showLegend) {\n                g.select('.nv-legendWrap').selectAll('*').remove();\n            } else {\n                var legendWidth = (showControls && legendPosition === 'top') ? availableWidth - controlWidth : availableWidth;\n\n                legend.width(legendWidth);\n                g.select('.nv-legendWrap').datum(data).call(legend);\n\n                if (legendPosition === 'bottom') {\n                \t// constant from axis.js, plus some margin for better layout\n                \tvar xAxisHeight = (showXAxis ? 12 : 0) + 10;\n                   \tmargin.bottom = Math.max(legend.height() + xAxisHeight, margin.bottom);\n                   \tavailableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n                \tvar legendTop = availableHeight + xAxisHeight;\n                    g.select('.nv-legendWrap')\n                        .attr('transform', 'translate(0,' + legendTop +')');\n                } else if (legendPosition === 'top') {\n                    if (!marginTop && margin.top != legend.height()) {\n                        margin.top = legend.height();\n                        availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n                    }\n\n                    g.select('.nv-legendWrap')\n                    \t.attr('transform', 'translate(' + (availableWidth-legendWidth) + ',' + (-margin.top) +')');\n                }\n            }\n\n            // Controls\n            if (!showControls) {\n                 g.select('.nv-controlsWrap').selectAll('*').remove();\n            } else {\n                var controlsData = [\n                    {\n                        key: controlLabels.stacked || 'Stacked',\n                        metaKey: 'Stacked',\n                        disabled: stacked.style() != 'stack',\n                        style: 'stack'\n                    },\n                    {\n                        key: controlLabels.stream || 'Stream',\n                        metaKey: 'Stream',\n                        disabled: stacked.style() != 'stream',\n                        style: 'stream'\n                    },\n                    {\n                        key: controlLabels.expanded || 'Expanded',\n                        metaKey: 'Expanded',\n                        disabled: stacked.style() != 'expand',\n                        style: 'expand'\n                    },\n                    {\n                        key: controlLabels.stack_percent || 'Stack %',\n                        metaKey: 'Stack_Percent',\n                        disabled: stacked.style() != 'stack_percent',\n                        style: 'stack_percent'\n                    }\n                ];\n\n                controlWidth = (controlOptions.length/3) * 260;\n                controlsData = controlsData.filter(function(d) {\n                    return controlOptions.indexOf(d.metaKey) !== -1;\n                });\n\n                controls\n                    .width( controlWidth )\n                    .color(['#444', '#444', '#444']);\n\n                g.select('.nv-controlsWrap')\n                    .datum(controlsData)\n                    .call(controls);\n\n                var requiredTop = Math.max(controls.height(), showLegend && (legendPosition === 'top') ? legend.height() : 0);\n\n                if ( margin.top != requiredTop ) {\n                    margin.top = requiredTop;\n                    availableHeight = nv.utils.availableHeight(height, container, margin) - (focusEnable ? focus.height() : 0);\n                }\n\n                g.select('.nv-controlsWrap')\n                    .attr('transform', 'translate(0,' + (-margin.top) +')');\n            }\n\n            wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            if (rightAlignYAxis) {\n                g.select(\".nv-y.nv-axis\")\n                    .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\n            }\n\n            //Set up interactive layer\n            if (useInteractiveGuideline) {\n                interactiveLayer\n                    .width(availableWidth)\n                    .height(availableHeight)\n                    .margin({left: margin.left, top: margin.top})\n                    .svgContainer(container)\n                    .xScale(x);\n                wrap.select(\".nv-interactive\").call(interactiveLayer);\n            }\n\n            g.select('.nv-focus .nv-background rect')\n                .attr('width', availableWidth)\n                .attr('height', availableHeight);\n\n            stacked\n                .width(availableWidth)\n                .height(availableHeight)\n                .color(data.map(function(d,i) {\n                    return d.color || color(d, i);\n                }).filter(function(d,i) { return !data[i].disabled; }));\n\n            var stackedWrap = g.select('.nv-focus .nv-stackedWrap')\n                .datum(data.filter(function(d) { return !d.disabled; }));\n\n            // Setup Axes\n            if (showXAxis) {\n                xAxis.scale(x)\n                    ._ticks( nv.utils.calcTicksX(availableWidth/100, data) )\n                    .tickSize( -availableHeight, 0);\n            }\n\n            if (showYAxis) {\n                var ticks;\n                if (stacked.offset() === 'wiggle') {\n                    ticks = 0;\n                }\n                else {\n                    ticks = nv.utils.calcTicksY(availableHeight/36, data);\n                }\n                yAxis.scale(y)\n                    ._ticks(ticks)\n                    .tickSize(-availableWidth, 0);\n            }\n\n            //============================================================\n            // Update Axes\n            //============================================================\n            function updateXAxis() {\n                if(showXAxis) {\n                    g.select('.nv-focus .nv-x.nv-axis')\n                        .attr('transform', 'translate(0,' + availableHeight + ')')\n                        .transition()\n                        .duration(duration)\n                        .call(xAxis)\n                        ;\n                }\n            }\n\n            function updateYAxis() {\n                if(showYAxis) {\n                    if (stacked.style() === 'expand' || stacked.style() === 'stack_percent') {\n                        var currentFormat = yAxis.tickFormat();\n\n                        if ( !oldYTickFormat || currentFormat !== percentFormatter )\n                            oldYTickFormat = currentFormat;\n\n                        //Forces the yAxis to use percentage in 'expand' mode.\n                        yAxis.tickFormat(percentFormatter);\n                    }\n                    else {\n                        if (oldYTickFormat) {\n                            yAxis.tickFormat(oldYTickFormat);\n                            oldYTickFormat = null;\n                        }\n                    }\n\n                    g.select('.nv-focus .nv-y.nv-axis')\n                    .transition().duration(0)\n                    .call(yAxis);\n                }\n            }\n\n            //============================================================\n            // Update Focus\n            //============================================================\n            if(!focusEnable) {\n                stackedWrap.transition().call(stacked);\n                updateXAxis();\n                updateYAxis();\n            } else {\n                focus.width(availableWidth);\n                g.select('.nv-focusWrap')\n                    .attr('transform', 'translate(0,' + ( availableHeight + margin.bottom + focus.margin().top) + ')')\n                    .datum(data.filter(function(d) { return !d.disabled; }))\n                    .call(focus);\n                var extent = focus.brush.empty() ? focus.xDomain() : focus.brush.extent();\n                if(extent !== null){\n                    onBrush(extent);\n                }\n            }\n\n            //============================================================\n            // Event Handling/Dispatching (in chart's scope)\n            //------------------------------------------------------------\n\n            stacked.dispatch.on('areaClick.toggle', function(e) {\n                if (data.filter(function(d) { return !d.disabled }).length === 1)\n                    data.forEach(function(d) {\n                        d.disabled = false;\n                    });\n                else\n                    data.forEach(function(d,i) {\n                        d.disabled = (i != e.seriesIndex);\n                    });\n\n                state.disabled = data.map(function(d) { return !!d.disabled });\n                dispatch.stateChange(state);\n\n                chart.update();\n            });\n\n            legend.dispatch.on('stateChange', function(newState) {\n                for (var key in newState)\n                    state[key] = newState[key];\n                dispatch.stateChange(state);\n                chart.update();\n            });\n\n            controls.dispatch.on('legendClick', function(d,i) {\n                if (!d.disabled) return;\n\n                controlsData = controlsData.map(function(s) {\n                    s.disabled = true;\n                    return s;\n                });\n                d.disabled = false;\n\n                stacked.style(d.style);\n\n\n                state.style = stacked.style();\n                dispatch.stateChange(state);\n\n                chart.update();\n            });\n\n            interactiveLayer.dispatch.on('elementMousemove', function(e) {\n                stacked.clearHighlights();\n                var singlePoint, pointIndex, pointXLocation, allData = [], valueSum = 0, allNullValues = true, atleastOnePoint = false;\n                data\n                    .filter(function(series, i) {\n                        series.seriesIndex = i;\n                        return !series.disabled;\n                    })\n                    .forEach(function(series,i) {\n                        pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\n                        var point = series.values[pointIndex];\n                        var pointYValue = chart.y()(point, pointIndex);\n                        if (pointYValue != null && pointYValue > 0) {\n                            stacked.highlightPoint(i, pointIndex, true);\n                            atleastOnePoint = true;\n                        }\n                    \n                        // Draw at least one point if all values are zero.\n                        if (i === (data.length - 1) && !atleastOnePoint) {\n                            stacked.highlightPoint(i, pointIndex, true);\n                        }\n                        if (typeof point === 'undefined') return;\n                        if (typeof singlePoint === 'undefined') singlePoint = point;\n                        if (typeof pointXLocation === 'undefined') pointXLocation = chart.xScale()(chart.x()(point,pointIndex));\n\n                        //If we are in 'expand' mode, use the stacked percent value instead of raw value.\n                        var tooltipValue = (stacked.style() == 'expand') ? point.display.y : chart.y()(point,pointIndex);\n                        allData.push({\n                            key: series.key,\n                            value: tooltipValue,\n                            color: color(series,series.seriesIndex),\n                            point: point\n                        });\n\n                        if (showTotalInTooltip && stacked.style() != 'expand' && tooltipValue != null) {\n                          valueSum += tooltipValue;\n                          allNullValues = false;\n                        };\n                    });\n\n                allData.reverse();\n\n                //Highlight the tooltip entry based on which stack the mouse is closest to.\n                if (allData.length > 2) {\n                    var yValue = chart.yScale().invert(e.mouseY);\n                    var yDistMax = Infinity, indexToHighlight = null;\n                    allData.forEach(function(series,i) {\n\n                        //To handle situation where the stacked area chart is negative, we need to use absolute values\n                        //when checking if the mouse Y value is within the stack area.\n                        yValue = Math.abs(yValue);\n                        var stackedY0 = Math.abs(series.point.display.y0);\n                        var stackedY = Math.abs(series.point.display.y);\n                        if ( yValue >= stackedY0 && yValue <= (stackedY + stackedY0))\n                        {\n                            indexToHighlight = i;\n                            return;\n                        }\n                    });\n                    if (indexToHighlight != null)\n                        allData[indexToHighlight].highlight = true;\n                }\n\n                //If we are not in 'expand' mode, add a 'Total' row to the tooltip.\n                if (showTotalInTooltip && stacked.style() != 'expand' && allData.length >= 2 && !allNullValues) {\n                    allData.push({\n                        key: totalLabel,\n                        value: valueSum,\n                        total: true\n                    });\n                }\n\n                var xValue = chart.x()(singlePoint,pointIndex);\n\n                var valueFormatter = interactiveLayer.tooltip.valueFormatter();\n                // Keeps track of the tooltip valueFormatter if the chart changes to expanded view\n                if (stacked.style() === 'expand' || stacked.style() === 'stack_percent') {\n                    if ( !oldValueFormatter ) {\n                        oldValueFormatter = valueFormatter;\n                    }\n                    //Forces the tooltip to use percentage in 'expand' mode.\n                    valueFormatter = d3.format(\".1%\");\n                }\n                else {\n                    if (oldValueFormatter) {\n                        valueFormatter = oldValueFormatter;\n                        oldValueFormatter = null;\n                    }\n                }\n\n                interactiveLayer.tooltip\n                    .valueFormatter(valueFormatter)\n                    .data(\n                    {\n                        value: xValue,\n                        series: allData\n                    }\n                )();\n\n                interactiveLayer.renderGuideLine(pointXLocation);\n\n            });\n\n            interactiveLayer.dispatch.on(\"elementMouseout\",function(e) {\n                stacked.clearHighlights();\n            });\n\n            /* Update `main' graph on brush update. */\n            focus.dispatch.on(\"onBrush\", function(extent) {\n                onBrush(extent);\n            });\n\n            // Update chart from a state object passed to event handler\n            dispatch.on('changeState', function(e) {\n\n                if (typeof e.disabled !== 'undefined' && data.length === e.disabled.length) {\n                    data.forEach(function(series,i) {\n                        series.disabled = e.disabled[i];\n                    });\n\n                    state.disabled = e.disabled;\n                }\n\n                if (typeof e.style !== 'undefined') {\n                    stacked.style(e.style);\n                    style = e.style;\n                }\n\n                chart.update();\n            });\n\n            //============================================================\n            // Functions\n            //------------------------------------------------------------\n\n            function onBrush(extent) {\n                // Update Main (Focus)\n                var stackedWrap = g.select('.nv-focus .nv-stackedWrap')\n                    .datum(\n                    data.filter(function(d) { return !d.disabled; })\n                        .map(function(d,i) {\n                            return {\n                                key: d.key,\n                                area: d.area,\n                                classed: d.classed,\n                                values: d.values.filter(function(d,i) {\n                                    return stacked.x()(d,i) >= extent[0] && stacked.x()(d,i) <= extent[1];\n                                }),\n                                disableTooltip: d.disableTooltip\n                            };\n                        })\n                );\n                stackedWrap.transition().duration(duration).call(stacked);\n\n                // Update Main (Focus) Axes\n                updateXAxis();\n                updateYAxis();\n            }\n\n        });\n\n        renderWatch.renderEnd('stacked Area chart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    stacked.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt.point['x'] = stacked.x()(evt.point);\n        evt.point['y'] = stacked.y()(evt.point);\n        tooltip.data(evt).hidden(false);\n    });\n\n    stacked.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true)\n    });\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.stacked = stacked;\n    chart.legend = legend;\n    chart.controls = controls;\n    chart.xAxis = xAxis;\n    chart.x2Axis = focus.xAxis;\n    chart.yAxis = yAxis;\n    chart.y2Axis = focus.yAxis;\n    chart.interactiveLayer = interactiveLayer;\n    chart.tooltip = tooltip;\n    chart.focus = focus;\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        showLegend: {get: function(){return showLegend;}, set: function(_){showLegend=_;}},\n        legendPosition: {get: function(){return legendPosition;}, set: function(_){legendPosition=_;}},\n        showXAxis:      {get: function(){return showXAxis;}, set: function(_){showXAxis=_;}},\n        showYAxis:    {get: function(){return showYAxis;}, set: function(_){showYAxis=_;}},\n        defaultState:    {get: function(){return defaultState;}, set: function(_){defaultState=_;}},\n        noData:    {get: function(){return noData;}, set: function(_){noData=_;}},\n        showControls:    {get: function(){return showControls;}, set: function(_){showControls=_;}},\n        controlLabels:    {get: function(){return controlLabels;}, set: function(_){controlLabels=_;}},\n        controlOptions:    {get: function(){return controlOptions;}, set: function(_){controlOptions=_;}},\n        showTotalInTooltip:      {get: function(){return showTotalInTooltip;}, set: function(_){showTotalInTooltip=_;}},\n        totalLabel:      {get: function(){return totalLabel;}, set: function(_){totalLabel=_;}},\n        focusEnable:    {get: function(){return focusEnable;}, set: function(_){focusEnable=_;}},\n        focusHeight:     {get: function(){return focus.height();}, set: function(_){focus.height(_);}},\n        brushExtent: {get: function(){return focus.brushExtent();}, set: function(_){focus.brushExtent(_);}},\n\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            if (_.top !== undefined) {\n                margin.top = _.top;\n                marginTop = _.top;\n            }\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n        }},\n        focusMargin: {get: function(){return focus.margin}, set: function(_){\n            focus.margin.top    = _.top    !== undefined ? _.top    : focus.margin.top;\n            focus.margin.right  = _.right  !== undefined ? _.right  : focus.margin.right;\n            focus.margin.bottom = _.bottom !== undefined ? _.bottom : focus.margin.bottom;\n            focus.margin.left   = _.left   !== undefined ? _.left   : focus.margin.left;\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            stacked.duration(duration);\n            xAxis.duration(duration);\n            yAxis.duration(duration);\n        }},\n        color:  {get: function(){return color;}, set: function(_){\n            color = nv.utils.getColor(_);\n            legend.color(color);\n            stacked.color(color);\n            focus.color(color);\n        }},\n        x: {get: function(){return stacked.x();}, set: function(_){\n            stacked.x(_);\n            focus.x(_);\n        }},\n        y: {get: function(){return stacked.y();}, set: function(_){\n            stacked.y(_);\n            focus.y(_);\n        }},\n        rightAlignYAxis: {get: function(){return rightAlignYAxis;}, set: function(_){\n            rightAlignYAxis = _;\n            yAxis.orient( rightAlignYAxis ? 'right' : 'left');\n        }},\n        useInteractiveGuideline: {get: function(){return useInteractiveGuideline;}, set: function(_){\n            useInteractiveGuideline = !!_;\n            chart.interactive(!_);\n            chart.useVoronoi(!_);\n            stacked.scatter.interactive(!_);\n        }}\n    });\n\n    nv.utils.inheritOptions(chart, stacked);\n    nv.utils.initOptions(chart);\n\n    return chart;\n};\n\nnv.models.stackedAreaWithFocusChart = function() {\n  return nv.models.stackedAreaChart()\n    .margin({ bottom: 30 })\n    .focusEnable( true );\n};\n// based on http://bl.ocks.org/kerryrodden/477c1bfb081b783f80ad\nnv.models.sunburst = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var margin = {top: 0, right: 0, bottom: 0, left: 0}\n        , width = 600\n        , height = 600\n        , mode = \"count\"\n        , modes = {count: function(d) { return 1; }, value: function(d) { return d.value || d.size }, size: function(d) { return d.value || d.size }}\n        , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\n        , container = null\n        , color = nv.utils.defaultColor()\n        , showLabels = false\n        , labelFormat = function(d){if(mode === 'count'){return d.name + ' #' + d.value}else{return d.name + ' ' + (d.value || d.size)}}\n        , labelThreshold = 0.02\n        , sort = function(d1, d2){return d1.name > d2.name;}\n        , key = function(d,i){\n            if (d.parent !== undefined) {\n                return d.name + '-' + d.parent.name + '-' + i;\n            } else {\n                return d.name;\n            }\n        }\n        , groupColorByParent = true\n        , duration = 500\n        , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMousemove', 'elementMouseover', 'elementMouseout', 'renderEnd');\n\n    //============================================================\n    // aux functions and setup\n    //------------------------------------------------------------\n\n    var x = d3.scale.linear().range([0, 2 * Math.PI]);\n    var y = d3.scale.sqrt();\n\n    var partition = d3.layout.partition().sort(sort);\n\n    var node, availableWidth, availableHeight, radius;\n    var prevPositions = {};\n\n    var arc = d3.svg.arc()\n        .startAngle(function(d) {return Math.max(0, Math.min(2 * Math.PI, x(d.x))) })\n        .endAngle(function(d) {return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))) })\n        .innerRadius(function(d) {return Math.max(0, y(d.y)) })\n        .outerRadius(function(d) {return Math.max(0, y(d.y + d.dy)) });\n\n    function rotationToAvoidUpsideDown(d) {\n        var centerAngle = computeCenterAngle(d);\n        if(centerAngle > 90){\n            return 180;\n        }\n        else {\n            return 0;\n        }\n    }\n\n    function computeCenterAngle(d) {\n        var startAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n        var endAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n        var centerAngle = (((startAngle + endAngle) / 2) * (180 / Math.PI)) - 90;\n        return centerAngle;\n    }\n\n    function computeNodePercentage(d) {\n        var startAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n        var endAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n        return (endAngle - startAngle) / (2 * Math.PI);\n    }\n\n    function labelThresholdMatched(d) {\n        var startAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n        var endAngle = Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n\n        var size = endAngle - startAngle;\n        return size > labelThreshold;\n    }\n\n    // When zooming: interpolate the scales.\n    function arcTweenZoom(e,i) {\n        var xd = d3.interpolate(x.domain(), [node.x, node.x + node.dx]),\n        yd = d3.interpolate(y.domain(), [node.y, 1]),\n        yr = d3.interpolate(y.range(), [node.y ? 20 : 0, radius]);\n\n        if (i === 0) {\n            return function() {return arc(e);}\n        }\n        else {\n            return function (t) {\n                x.domain(xd(t));\n                y.domain(yd(t)).range(yr(t));\n                return arc(e);\n            }\n        };\n    }\n\n    function arcTweenUpdate(d) {\n        var ipo = d3.interpolate({x: d.x0, dx: d.dx0, y: d.y0, dy: d.dy0}, d);\n\n        return function (t) {\n            var b = ipo(t);\n\n            d.x0 = b.x;\n            d.dx0 = b.dx;\n            d.y0 = b.y;\n            d.dy0 = b.dy;\n\n            return arc(b);\n        };\n    }\n\n    function updatePrevPosition(node) {\n        var k = key(node);\n        if(! prevPositions[k]) prevPositions[k] = {};\n        var pP = prevPositions[k];\n        pP.dx = node.dx;\n        pP.x = node.x;\n        pP.dy = node.dy;\n        pP.y = node.y;\n    }\n\n    function storeRetrievePrevPositions(nodes) {\n        nodes.forEach(function(n){\n            var k = key(n);\n            var pP = prevPositions[k];\n            //console.log(k,n,pP);\n            if( pP ){\n                n.dx0 = pP.dx;\n                n.x0 = pP.x;\n                n.dy0 = pP.dy;\n                n.y0 = pP.y;\n            }\n            else {\n                n.dx0 = n.dx;\n                n.x0 = n.x;\n                n.dy0 = n.dy;\n                n.y0 = n.y;\n            }\n            updatePrevPosition(n);\n        });\n    }\n\n    function zoomClick(d) {\n        var labels = container.selectAll('text')\n        var path = container.selectAll('path')\n\n        // fade out all text elements\n        labels.transition().attr(\"opacity\",0);\n\n        // to allow reference to the new center node\n        node = d;\n\n        path.transition()\n            .duration(duration)\n            .attrTween(\"d\", arcTweenZoom)\n            .each('end', function(e) {\n                // partially taken from here: http://bl.ocks.org/metmajer/5480307\n                // check if the animated element's data e lies within the visible angle span given in d\n                if(e.x >= d.x && e.x < (d.x + d.dx) ){\n                    if(e.depth >= d.depth){\n                        // get a selection of the associated text element\n                        var parentNode = d3.select(this.parentNode);\n                        var arcText = parentNode.select('text');\n\n                        // fade in the text element and recalculate positions\n                        arcText.transition().duration(duration)\n                        .text( function(e){return labelFormat(e) })\n                        .attr(\"opacity\", function(d){\n                            if(labelThresholdMatched(d)) {\n                                return 1;\n                            }\n                            else {\n                                return 0;\n                            }\n                        })\n                        .attr(\"transform\", function() {\n                            var width = this.getBBox().width;\n                            if(e.depth === 0)\n                            return \"translate(\" + (width / 2 * - 1) + \",0)\";\n                            else if(e.depth === d.depth){\n                                return \"translate(\" + (y(e.y) + 5) + \",0)\";\n                            }\n                            else {\n                                var centerAngle = computeCenterAngle(e);\n                                var rotation = rotationToAvoidUpsideDown(e);\n                                if (rotation === 0) {\n                                    return 'rotate('+ centerAngle +')translate(' + (y(e.y) + 5) + ',0)';\n                                }\n                                else {\n                                    return 'rotate('+ centerAngle +')translate(' + (y(e.y) + width + 5) + ',0)rotate(' + rotation + ')';\n                                }\n                            }\n                        });\n                    }\n                }\n            })\n    }\n\n    //============================================================\n    // chart function\n    //------------------------------------------------------------\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    function chart(selection) {\n        renderWatch.reset();\n\n        selection.each(function(data) {\n            container = d3.select(this);\n            availableWidth = nv.utils.availableWidth(width, container, margin);\n            availableHeight = nv.utils.availableHeight(height, container, margin);\n            radius = Math.min(availableWidth, availableHeight) / 2;\n\n            y.range([0, radius]);\n\n            // Setup containers and skeleton of chart\n            var wrap = container.select('g.nvd3.nv-wrap.nv-sunburst');\n            if( !wrap[0][0] ) {\n                wrap = container.append('g')\n                    .attr('class', 'nvd3 nv-wrap nv-sunburst nv-chart-' + id)\n                    .attr('transform', 'translate(' + ((availableWidth / 2) + margin.left + margin.right) + ',' + ((availableHeight / 2) + margin.top + margin.bottom) + ')');\n            } else {\n                wrap.attr('transform', 'translate(' + ((availableWidth / 2) + margin.left + margin.right) + ',' + ((availableHeight / 2) + margin.top + margin.bottom) + ')');\n            }\n\n            container.on('click', function (d, i) {\n                dispatch.chartClick({\n                    data: d,\n                    index: i,\n                    pos: d3.event,\n                    id: id\n                });\n            });\n\n            partition.value(modes[mode] || modes[\"count\"]);\n\n            //reverse the drawing order so that the labels of inner\n            //arcs are drawn on top of the outer arcs.\n            var nodes = partition.nodes(data[0]).reverse()\n\n            storeRetrievePrevPositions(nodes);\n            var cG = wrap.selectAll('.arc-container').data(nodes, key)\n\n            //handle new datapoints\n            var cGE = cG.enter()\n                .append(\"g\")\n                .attr(\"class\",'arc-container')\n\n            cGE.append(\"path\")\n                .attr(\"d\", arc)\n                .style(\"fill\", function (d) {\n                    if (d.color) {\n                        return d.color;\n                    }\n                    else if (groupColorByParent) {\n                        return color((d.children ? d : d.parent).name);\n                    }\n                    else {\n                        return color(d.name);\n                    }\n                })\n                .style(\"stroke\", \"#FFF\")\n                .on(\"click\", function(d,i){\n                    zoomClick(d);\n                    dispatch.elementClick({\n                        data: d,\n                        index: i\n                    })\n                })\n                .on('mouseover', function(d,i){\n                    d3.select(this).classed('hover', true).style('opacity', 0.8);\n                    dispatch.elementMouseover({\n                        data: d,\n                        color: d3.select(this).style(\"fill\"),\n                        percent: computeNodePercentage(d)\n                    });\n                })\n                .on('mouseout', function(d,i){\n                    d3.select(this).classed('hover', false).style('opacity', 1);\n                    dispatch.elementMouseout({\n                        data: d\n                    });\n                })\n                .on('mousemove', function(d,i){\n                    dispatch.elementMousemove({\n                        data: d\n                    });\n                });\n\n            ///Iterating via each and selecting based on the this\n            ///makes it work ... a cG.selectAll('path') doesn't.\n            ///Without iteration the data (in the element) didn't update.\n            cG.each(function(d){\n                d3.select(this).select('path')\n                    .transition()\n                    .duration(duration)\n                    .attrTween('d', arcTweenUpdate);\n            });\n\n            if(showLabels){\n                //remove labels first and add them back\n                cG.selectAll('text').remove();\n\n                //this way labels are on top of newly added arcs\n                cG.append('text')\n                    .text( function(e){ return labelFormat(e)})\n                    .transition()\n                    .duration(duration)\n                    .attr(\"opacity\", function(d){\n                        if(labelThresholdMatched(d)) {\n                            return 1;\n                        }\n                        else {\n                            return 0;\n                        }\n                    })\n                    .attr(\"transform\", function(d) {\n                        var width = this.getBBox().width;\n                        if(d.depth === 0){\n                            return \"rotate(0)translate(\" + (width / 2 * -1) + \",0)\";\n                        }\n                        else {\n                            var centerAngle = computeCenterAngle(d);\n                            var rotation = rotationToAvoidUpsideDown(d);\n                            if (rotation === 0) {\n                                return 'rotate('+ centerAngle +')translate(' + (y(d.y) + 5) + ',0)';\n                            }\n                            else {\n                                return 'rotate('+ centerAngle +')translate(' + (y(d.y) + width + 5) + ',0)rotate(' + rotation + ')';\n                            }\n                        }\n                    });\n            }\n\n            //zoom out to the center when the data is updated.\n            zoomClick(nodes[nodes.length - 1])\n\n\n            //remove unmatched elements ...\n            cG.exit()\n                .transition()\n                .duration(duration)\n                .attr('opacity',0)\n                .each('end',function(d){\n                    var k = key(d);\n                    prevPositions[k] = undefined;\n                })\n                .remove();\n        });\n\n\n        renderWatch.renderEnd('sunburst immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    chart.dispatch = dispatch;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        width:      {get: function(){return width;}, set: function(_){width=_;}},\n        height:     {get: function(){return height;}, set: function(_){height=_;}},\n        mode:       {get: function(){return mode;}, set: function(_){mode=_;}},\n        id:         {get: function(){return id;}, set: function(_){id=_;}},\n        duration:   {get: function(){return duration;}, set: function(_){duration=_;}},\n        groupColorByParent: {get: function(){return groupColorByParent;}, set: function(_){groupColorByParent=!!_;}},\n        showLabels: {get: function(){return showLabels;}, set: function(_){showLabels=!!_}},\n        labelFormat: {get: function(){return labelFormat;}, set: function(_){labelFormat=_}},\n        labelThreshold: {get: function(){return labelThreshold;}, set: function(_){labelThreshold=_}},\n        sort: {get: function(){return sort;}, set: function(_){sort=_}},\n        key: {get: function(){return key;}, set: function(_){key=_}},\n        // options that require extra logic in the setter\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    != undefined ? _.top    : margin.top;\n            margin.right  = _.right  != undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom != undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   != undefined ? _.left   : margin.left;\n        }},\n        color: {get: function(){return color;}, set: function(_){\n            color=nv.utils.getColor(_);\n        }}\n    });\n\n    nv.utils.initOptions(chart);\n    return chart;\n};\nnv.models.sunburstChart = function() {\n    \"use strict\";\n\n    //============================================================\n    // Public Variables with Default Settings\n    //------------------------------------------------------------\n\n    var sunburst = nv.models.sunburst();\n    var tooltip = nv.models.tooltip();\n\n    var margin = {top: 30, right: 20, bottom: 20, left: 20}\n        , width = null\n        , height = null\n        , color = nv.utils.defaultColor()\n        , showTooltipPercent = false\n        , id = Math.round(Math.random() * 100000)\n        , defaultState = null\n        , noData = null\n        , duration = 250\n        , dispatch = d3.dispatch('stateChange', 'changeState','renderEnd');\n\n\n    //============================================================\n    // Private Variables\n    //------------------------------------------------------------\n\n    var renderWatch = nv.utils.renderWatch(dispatch);\n\n    tooltip\n        .duration(0)\n        .headerEnabled(false)\n        .valueFormatter(function(d){return d;});\n\n    //============================================================\n    // Chart function\n    //------------------------------------------------------------\n\n    function chart(selection) {\n        renderWatch.reset();\n        renderWatch.models(sunburst);\n\n        selection.each(function(data) {\n            var container = d3.select(this);\n\n            nv.utils.initSVG(container);\n\n            var availableWidth = nv.utils.availableWidth(width, container, margin);\n            var availableHeight = nv.utils.availableHeight(height, container, margin);\n\n            chart.update = function() {\n                if (duration === 0) {\n                    container.call(chart);\n                } else {\n                    container.transition().duration(duration).call(chart);\n                }\n            };\n            chart.container = container;\n\n            // Display No Data message if there's nothing to show.\n            if (!data || !data.length) {\n                nv.utils.noData(chart, container);\n                return chart;\n            } else {\n                container.selectAll('.nv-noData').remove();\n            }\n\n            sunburst.width(availableWidth).height(availableHeight).margin(margin);\n            container.call(sunburst);\n        });\n\n        renderWatch.renderEnd('sunburstChart immediate');\n        return chart;\n    }\n\n    //============================================================\n    // Event Handling/Dispatching (out of chart's scope)\n    //------------------------------------------------------------\n\n    sunburst.dispatch.on('elementMouseover.tooltip', function(evt) {\n        evt.series = {\n            key: evt.data.name,\n            value: (evt.data.value || evt.data.size),\n            color: evt.color,\n            percent: evt.percent\n        };\n        if (!showTooltipPercent) {\n            delete evt.percent;\n            delete evt.series.percent;\n        }\n        tooltip.data(evt).hidden(false);\n    });\n\n    sunburst.dispatch.on('elementMouseout.tooltip', function(evt) {\n        tooltip.hidden(true);\n    });\n\n    sunburst.dispatch.on('elementMousemove.tooltip', function(evt) {\n        tooltip();\n    });\n\n    //============================================================\n    // Expose Public Variables\n    //------------------------------------------------------------\n\n    // expose chart's sub-components\n    chart.dispatch = dispatch;\n    chart.sunburst = sunburst;\n    chart.tooltip = tooltip;\n    chart.options = nv.utils.optionsFunc.bind(chart);\n\n    // use Object get/set functionality to map between vars and chart functions\n    chart._options = Object.create({}, {\n        // simple options, just get/set the necessary values\n        noData:             {get: function(){return noData;},               set: function(_){noData=_;}},\n        defaultState:       {get: function(){return defaultState;},         set: function(_){defaultState=_;}},\n        showTooltipPercent: {get: function(){return showTooltipPercent;},   set: function(_){showTooltipPercent=_;}},\n\n        // options that require extra logic in the setter\n        color: {get: function(){return color;}, set: function(_){\n            color = _;\n            sunburst.color(color);\n        }},\n        duration: {get: function(){return duration;}, set: function(_){\n            duration = _;\n            renderWatch.reset(duration);\n            sunburst.duration(duration);\n        }},\n        margin: {get: function(){return margin;}, set: function(_){\n            margin.top    = _.top    !== undefined ? _.top    : margin.top;\n            margin.right  = _.right  !== undefined ? _.right  : margin.right;\n            margin.bottom = _.bottom !== undefined ? _.bottom : margin.bottom;\n            margin.left   = _.left   !== undefined ? _.left   : margin.left;\n            sunburst.margin(margin);\n        }}\n    });\n    nv.utils.inheritOptions(chart, sunburst);\n    nv.utils.initOptions(chart);\n    return chart;\n\n};\n\nnv.version = \"1.8.6\";\n})();\n//# sourceMappingURL=nv.d3.js.map"]},"metadata":{},"sourceType":"script"}